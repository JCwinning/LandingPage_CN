{
  "hash": "aa82370f622becc77d275cb884eabb1b",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Vibe 游戏： 4人乒乓球与游戏数据分析\"\nauthor: \"Tony D\"\ndate: \"2026-02-10\"\ncategories: [AI, 游戏, 数据分析]\nimage: \"images/my screenshots 3.png\"\n\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"显示代码\"\n    code-copy: false\n\nexecute:\n  echo: true\n  warning: false\n---\n\n# 游戏简介\n\nVibePong 是一款简单而有趣的乒乓类游戏，支持最多 4 名玩家同台竞技，也支持与 CPU 对手作战。游戏会记录各种指标，如球速、游戏时长和玩家表现，并将这些数据保存到 CSV 文件中以便进行分析。\n\n立即游玩：[https://jcwinning.github.io/vibepong](https://jcwinning.github.io/vibepong)\n\n![](images/my screenshots 3.png){height=\"500\"}   ![](images/my screenshots 1.png){height=\"500\"}\n\n# 游戏数据分析\n\n在本文档中，我们分析了 VibePong 生成的游戏数据。分析内容涵盖数据提取、清洗以及带有可视化效果的探索性数据分析 (EDA)。\n\n# 第一步：读取数据\n\n首先，我们在 `game_data` 目录中搜索所有的摘要 (summary) 和动作 (action),遥感(telemetry) CSV 文件，并将其加载到 pandas DataFrame 中。\n\n::: {#701d9868 .cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport glob\nimport os\n\n# 加载 game_data 目录下的所有 CSV 文件\ndata_dir = './game_data'\ndef load_combined(pattern):\n    files = glob.glob(os.path.join(data_dir, f'vibepong_{pattern}_*.csv'))\n    return pd.concat([pd.read_csv(f) for f in files], ignore_index=True) if files else pd.DataFrame()\n\ndf_summary = load_combined('summary')\ndf_actions = load_combined('actions')\ndf_telemetry = load_combined('telemetry')\n\nprint(f\"已加载 {len(df_summary)} 行摘要数据，{len(df_actions)} 条动作记录，以及 {len(df_telemetry)} 条遥测记录。\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n已加载 75 行摘要数据，366 条动作记录，以及 658 条遥测记录。\n```\n:::\n:::\n\n\n## 逐场游戏数据\n\n::: {#51d7ec8e .cell execution_count=2}\n``` {.python .cell-code}\n# Display the first few rows of summary data\ndf_summary.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=58}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Game ID</th>\n      <th>Date</th>\n      <th>Duration (s)</th>\n      <th>Winner</th>\n      <th>Ball Speed</th>\n      <th>Theme</th>\n      <th>Language</th>\n      <th>Player</th>\n      <th>Lives</th>\n      <th>Hits</th>\n      <th>CPU Difficulty</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>G1770713902861-393</td>\n      <td>2026-02-10T08:58:27.879Z</td>\n      <td>5.02</td>\n      <td>CPU</td>\n      <td>6.56</td>\n      <td>light</td>\n      <td>en</td>\n      <td>Player 1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>G1770713902861-393</td>\n      <td>2026-02-10T08:58:27.879Z</td>\n      <td>5.02</td>\n      <td>CPU</td>\n      <td>6.56</td>\n      <td>light</td>\n      <td>en</td>\n      <td>CPU</td>\n      <td>1</td>\n      <td>0</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>G1770783544585-550</td>\n      <td>2026-02-11T04:20:01.889Z</td>\n      <td>57.30</td>\n      <td>Player 1</td>\n      <td>20.38</td>\n      <td>dark</td>\n      <td>en</td>\n      <td>Player 1</td>\n      <td>1</td>\n      <td>14</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>G1770783544585-550</td>\n      <td>2026-02-11T04:20:01.889Z</td>\n      <td>57.30</td>\n      <td>Player 1</td>\n      <td>20.38</td>\n      <td>dark</td>\n      <td>en</td>\n      <td>CPU</td>\n      <td>0</td>\n      <td>14</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>G1770713913739-52</td>\n      <td>2026-02-10T08:58:46.511Z</td>\n      <td>12.77</td>\n      <td>Player 3</td>\n      <td>7.08</td>\n      <td>light</td>\n      <td>en</td>\n      <td>Player 1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## 逐个动作数据\n\n::: {#041ac31f .cell execution_count=3}\n``` {.python .cell-code}\n# Display the first few rows of summary data\ndf_actions.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=59}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Game ID</th>\n      <th>Timestamp (ms)</th>\n      <th>Player</th>\n      <th>Action</th>\n      <th>Details</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>G1770783544585-550</td>\n      <td>4000</td>\n      <td>System</td>\n      <td>Ball served towards CPU</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>G1770783544585-550</td>\n      <td>4919</td>\n      <td>CPU</td>\n      <td>Hit Ball</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>G1770783544585-550</td>\n      <td>6787</td>\n      <td>Player 1</td>\n      <td>Hit Ball</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>G1770783544585-550</td>\n      <td>8653</td>\n      <td>CPU</td>\n      <td>Hit Ball</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>G1770783544585-550</td>\n      <td>10519</td>\n      <td>Player 1</td>\n      <td>Hit Ball</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## 时间序列数据\n\n::: {#af308a02 .cell execution_count=4}\n``` {.python .cell-code}\n# Display the first few rows of summary data\ndf_telemetry.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=60}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Game ID</th>\n      <th>Timestamp (ms)</th>\n      <th>Ball X</th>\n      <th>Ball Y</th>\n      <th>Ball VX</th>\n      <th>Ball VY</th>\n      <th>Ball Speed</th>\n      <th>p1 X</th>\n      <th>p1 Y</th>\n      <th>p1 Center</th>\n      <th>...</th>\n      <th>p3 Center</th>\n      <th>p3 Active</th>\n      <th>p3 Lives</th>\n      <th>p3 Distance</th>\n      <th>p4 X</th>\n      <th>p4 Y</th>\n      <th>p4 Center</th>\n      <th>p4 Active</th>\n      <th>p4 Lives</th>\n      <th>p4 Distance</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>G1770793570881-726</td>\n      <td>4011</td>\n      <td>343.50</td>\n      <td>349.77</td>\n      <td>-6.496</td>\n      <td>-0.2292</td>\n      <td>6.5010</td>\n      <td>20.0</td>\n      <td>300.0</td>\n      <td>350.0</td>\n      <td>...</td>\n      <td>350.0</td>\n      <td>1.0</td>\n      <td>1.0</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>G1770793570881-726</td>\n      <td>4112</td>\n      <td>304.53</td>\n      <td>348.40</td>\n      <td>-6.496</td>\n      <td>-0.2292</td>\n      <td>6.5073</td>\n      <td>20.0</td>\n      <td>300.0</td>\n      <td>350.0</td>\n      <td>...</td>\n      <td>350.0</td>\n      <td>1.0</td>\n      <td>1.0</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>G1770793570881-726</td>\n      <td>4227</td>\n      <td>259.06</td>\n      <td>346.79</td>\n      <td>-6.496</td>\n      <td>-0.2292</td>\n      <td>6.5146</td>\n      <td>20.0</td>\n      <td>300.0</td>\n      <td>350.0</td>\n      <td>...</td>\n      <td>350.0</td>\n      <td>1.0</td>\n      <td>1.0</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>G1770793570881-726</td>\n      <td>4328</td>\n      <td>220.08</td>\n      <td>345.42</td>\n      <td>-6.496</td>\n      <td>-0.2292</td>\n      <td>6.5208</td>\n      <td>20.0</td>\n      <td>300.0</td>\n      <td>350.0</td>\n      <td>...</td>\n      <td>350.0</td>\n      <td>1.0</td>\n      <td>1.0</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>G1770793570881-726</td>\n      <td>4428</td>\n      <td>181.11</td>\n      <td>344.04</td>\n      <td>-6.496</td>\n      <td>-0.2292</td>\n      <td>6.5271</td>\n      <td>20.0</td>\n      <td>300.0</td>\n      <td>350.0</td>\n      <td>...</td>\n      <td>350.0</td>\n      <td>1.0</td>\n      <td>1.0</td>\n      <td>0.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n<p>5 rows × 31 columns</p>\n</div>\n```\n:::\n:::\n\n\n# 第二步：数据清洗\n\n我们将通过将时间戳转换为 datetime 对象、处理数值类型并确保一致性来清洗数据。\n\n::: {#f660c008 .cell execution_count=5}\n``` {.python .cell-code}\n# 清洗摘要数据\ndf_summary['Date'] = pd.to_datetime(df_summary['Date'])\nnumeric_summary = ['Duration (s)', 'Ball Speed', 'Lives', 'Hits']\ndf_summary[numeric_summary] = df_summary[numeric_summary].apply(pd.to_numeric, errors='coerce')\ndf_summary = df_summary.dropna(subset=['Player'])\n\n# 清洗动作数据\ndf_actions['Timestamp (ms)'] = pd.to_numeric(df_actions['Timestamp (ms)'], errors='coerce')\n\ndf_summary.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=61}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Game ID</th>\n      <th>Date</th>\n      <th>Duration (s)</th>\n      <th>Winner</th>\n      <th>Ball Speed</th>\n      <th>Theme</th>\n      <th>Language</th>\n      <th>Player</th>\n      <th>Lives</th>\n      <th>Hits</th>\n      <th>CPU Difficulty</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>G1770713902861-393</td>\n      <td>2026-02-10 08:58:27.879000+00:00</td>\n      <td>5.02</td>\n      <td>CPU</td>\n      <td>6.56</td>\n      <td>light</td>\n      <td>en</td>\n      <td>Player 1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>G1770713902861-393</td>\n      <td>2026-02-10 08:58:27.879000+00:00</td>\n      <td>5.02</td>\n      <td>CPU</td>\n      <td>6.56</td>\n      <td>light</td>\n      <td>en</td>\n      <td>CPU</td>\n      <td>1</td>\n      <td>0</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>G1770783544585-550</td>\n      <td>2026-02-11 04:20:01.889000+00:00</td>\n      <td>57.30</td>\n      <td>Player 1</td>\n      <td>20.38</td>\n      <td>dark</td>\n      <td>en</td>\n      <td>Player 1</td>\n      <td>1</td>\n      <td>14</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>G1770783544585-550</td>\n      <td>2026-02-11 04:20:01.889000+00:00</td>\n      <td>57.30</td>\n      <td>Player 1</td>\n      <td>20.38</td>\n      <td>dark</td>\n      <td>en</td>\n      <td>CPU</td>\n      <td>0</td>\n      <td>14</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>G1770713913739-52</td>\n      <td>2026-02-10 08:58:46.511000+00:00</td>\n      <td>12.77</td>\n      <td>Player 3</td>\n      <td>7.08</td>\n      <td>light</td>\n      <td>en</td>\n      <td>Player 1</td>\n      <td>0</td>\n      <td>0</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n# 第三步：EDA 和可视化\n\n现在我们将查看一些关键绩效指标并可视化游戏结果。\n\n## 获胜分布\n\n::: {#199952b8 .cell execution_count=6}\n``` {.python .cell-code}\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# Set aesthetic style\nsns.set_theme(style=\"whitegrid\")\nplt.rcParams['font.sans-serif'] = ['Arial Unicode MS']\nplt.rcParams['axes.unicode_minus'] = False\n```\n:::\n\n\n谁赢得了最多的游戏？\n\n::: {#5beecf77 .cell execution_count=7}\n``` {.python .cell-code}\n# 计算每位获胜者的独特游戏场次\nunique_games = df_summary.drop_duplicates(subset=['Game ID'])\nwinner_counts = unique_games['Winner'].value_counts()\n\nplt.figure(figsize=(10, 5))\nsns.barplot(x=winner_counts.index, y=winner_counts.values, palette=\"viridis\")\nplt.title('玩家/CPU 获胜场次分布', fontsize=14)\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-8-output-1.png){width=784 height=456}\n:::\n:::\n\n\n## 游戏时长 vs. 球速\n\n更高的球速会导致游戏时长变短吗？\n\n::: {#3912fdd2 .cell execution_count=8}\n``` {.python .cell-code}\nplt.figure(figsize=(10, 6))\nsns.scatterplot(data=unique_games, x='Ball Speed', y='Duration (s)', hue='Winner', s=100)\nplt.title('Game Duration vs Ball Speed', fontsize=15)\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-9-output-1.png){width=812 height=530}\n:::\n:::\n\n\n## 每个玩家的总击球数\n\n跟踪不同游戏场次的技能（击球数）表现。\n\n::: {#4805509c .cell execution_count=9}\n``` {.python .cell-code}\nplt.figure(figsize=(10, 6))\nsns.boxplot(data=df_summary, x='Player', y='Hits', palette=\"magma\")\nplt.title('Distribution of Hits per Player', fontsize=15)\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-10-output-1.png){width=812 height=531}\n:::\n:::\n\n\n## 动作序列\n\n分析所有游戏中动作的频率。\n\n::: {#d88c3321 .cell execution_count=10}\n``` {.python .cell-code}\naction_counts = df_actions['Action'].value_counts().head(10)\n\nplt.figure(figsize=(8, 7))\naction_counts.plot(kind='barh', color='skyblue')\nplt.title('Most Frequent Actions/Events', fontsize=15)\nplt.gca().invert_yaxis()\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-11-output-1.png){width=833 height=584}\n:::\n:::\n\n\n# 第四步：遥测数据分析\n\n现在让我们分析高频遥测数据，该数据每 100 毫秒捕获一次球和球拍的位置。\n\n\n## 随时间变化的球速\n\n球速在所有游戏中是如何演变的？\n\n::: {#ab2640b6 .cell execution_count=11}\n``` {.python .cell-code}\nif not df_telemetry.empty:\n    plt.figure(figsize=(10, 5))\n    for gid in df_telemetry['Game ID'].unique()[:10]:\n        df_g = df_telemetry[df_telemetry['Game ID'] == gid]\n        plt.plot(df_g['Timestamp (ms)']/1000, df_g['Ball Speed'], alpha=0.6, label=f'游戏 {gid[-4:]}')\n    \n    plt.title('球速演变（前 10 场游戏）')\n    plt.xlabel('时间 (秒)')\n    plt.ylabel('速度')\n    plt.legend(bbox_to_anchor=(1.05, 1), loc='upper left', fontsize=8)\n    plt.tight_layout()\n    plt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-12-output-1.png){width=945 height=463}\n:::\n:::\n\n\n## 球轨迹热图\n\n球在场地的哪个位置停留时间最长？\n\n::: {#a95d6008 .cell execution_count=12}\n``` {.python .cell-code}\nif not df_telemetry.empty:\n    plt.figure(figsize=(10, 6))\n    plt.hist2d(df_telemetry['Ball X'], df_telemetry['Ball Y'], bins=50, cmap='hot')\n    plt.colorbar(label='采样点')\n    plt.title('球轨迹热图')\n    plt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-13-output-1.png){width=764 height=508}\n:::\n:::\n\n\n## 球拍移动分析\n\n哪些玩家移动球拍最频繁？\n\n::: {#21fee610 .cell execution_count=13}\n``` {.python .cell-code}\nif not df_telemetry.empty:\n    dist_cols = [c for c in df_telemetry.columns if 'Distance' in c and 'Ball' not in c]\n    movement = []\n    for gid in df_telemetry['Game ID'].unique():\n        df_g = df_telemetry[df_telemetry['Game ID'] == gid]\n        for col in dist_cols:\n            movement.append({'Player': col.split()[0], 'Distance': df_g[col].sum()})\n    \n    plt.figure(figsize=(10, 5))\n    sns.boxplot(data=pd.DataFrame(movement), x='Player', y='Distance', palette='coolwarm')\n    plt.title('各玩家球拍移动距离分布')\n    plt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-14-output-1.png){width=829 height=454}\n:::\n:::\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}
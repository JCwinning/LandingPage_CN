{
  "hash": "47a7300f955a6083a34e807b34a7d2c8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"麦当劳 MCP\"\nauthor: \"Tony D\"\ndate: \"2026-02-06\"\ncategories: [AI, MCP]\nimage: \"images/0.png\"\n\nformat:\n  html:\n    code-fold: false\n    code-tools: true\n    code-copy: true\n    \nexecute:\n  warning: false\n\n---\n\n# 麦当劳 MCP 文档\n\n麦当劳 MCP (Model Context Protocol) 服务允许 AI 助手直接访问麦当劳中国的活动日历、优惠券和营养信息。\n\n[麦当劳 Github](https://github.com/M-China/mcd-mcp-server)\n\n## 1. 获取 Token\n\n1. 访问 [麦当劳 MCP 开放平台](https://open.mcd.cn/mcp)。\n2. 登录并申请您的个人 MCP Token。\n3. 获得 Token 后，请替换下面配置中的 `Your-Token`。\n\n\n## 2. 配置 MCP 服务\n\n您可以将麦当劳 MCP 集成到支持 MCP 协议的各种工具中。\n\n::: {.panel-tabset}\n\n### 与 ellmer Chat (R) 集成\n\n`mcptools` 包可以在 R 中实现 MCP 服务器与 ellmer chat 的无缝集成。以下是配合 ellmer 设置和使用麦当劳 MCP 的方法。\n\n#### 步骤 1: 安装所需包\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 如果尚未安装，请安装相关包\ninstall.packages(c(\"ellmer\", \"mcptools\", \"dotenv\"))\n```\n:::\n\n\n#### 步骤 2: 创建 MCP 配置文件\n\n在项目目录中创建一个名为 `mcp_config.json` 的文件，内容如下：\n\n\n::: {.cell}\n\n```{.json .cell-code  code-fold=\"false\"}\n{\n  \"mcpServers\": {\n    \"mcd-mcp\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"mcp-remote\",\n        \"https://mcp.mcd.cn/mcp-servers/mcd-mcp\",\n        \"--header\",\n        \"Authorization: Bearer Your-Token\"\n      ]\n    }\n  }\n}\n```\n:::\n\n\n将 `Your-Token` 替换为您从 [麦当劳 MCP 开放平台](https://open.mcd.cn/mcp) 获取的实际 MCP token。\n\n\n#### 步骤 3: 加载库和配置\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ellmer)\nlibrary(mcptools)\nlibrary(dotenv)\n\n# 加载环境变量\nload_dot_env(file = \".env\")\n```\n:::\n\n\n#### 步骤 4: 使用 MCP 工具初始化聊天\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 创建一个 ellmer 聊天对象（以 OpenRouter 为例）\nchat <- chat_openrouter(\n  system_prompt = \"你是一个能够与麦当劳服务交互的得力助手。请使用中文回答，并保持简洁。\",\n  api_key = Sys.getenv(\"OPENROUTER_API_KEY\"),\n  model = \"x-ai/grok-4.1-fast\",\n  echo = \"output\"\n)\n\n# 从配置文件加载 MCP 工具\nmcd_tools <- mcp_tools(config = \"mcp_config.json\")\n\n# 向聊天对象注册 MCP 工具\nchat$set_tools(mcd_tools)\n```\n:::\n\n\n#### 步骤 5: 配合 MCP 集成进行聊天\n\n现在您可以提问，AI 将使用麦当劳 MCP 工具：\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 查询可用优惠券\nchat$chat(\"现在有哪些可用的优惠券？\")\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n目前您有以下已领取的麦麦省优惠券可用：\n\n- 北非蛋风味麦满分\n- 9.9元大薯条\n- 9.9元新派组合\n- 王牌炸鸡双拼盒\n- 辣翅成双\n- 脆汁鸡任选\n- 9.9元那么大鸡排\n- 6.9元甜酷任选\n- 北非蛋风味麦满分特惠组合\n- 13.5元中薯条买一送一\n- 19.9元辣翅成双\n- 29.9元明星堡堡搭\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 自动领取所有优惠券\nchat$chat(\"帮我领取所有可用的优惠券。\")\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n暂无可领取的优惠券。已领取的券可继续使用。\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 查看您的优惠券\nchat$chat(\"显示我目前所有的优惠券。\")\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n您目前有 **12 张可用优惠券**（第1/1页）：\n\n1. **9.9元那么大鸡排** ¥9.9 | 至2026-02-06 周1-5 | 今日到期，到店/外送\n2. **6.9元甜酷任选** ¥6.9 | 至2026-02-06 周1-5 | 今日到期，到店/外送\n3. **13.5元中薯条买一送一** ¥13.5 | 至2026-02-06 周1-5 | 今日到期，到店/外送\n4. **19.9元辣翅成双** ¥19.9 | 至2026-02-06 周1-5 | 今日到期，到店/外送\n5. **29.9元明星堡堡搭** ¥29.9 | 至2026-02-06 周1-5 | 今日到期，到店/外送\n6. **9.9元大薯条** ¥9.9 | 至2026-02-13 周1-5 | 到店/外送\n7. **9.9元新派组合** ¥9.9 | 至2026-02-13 周1-5 | 到店/外送\n8. **王牌炸鸡双拼盒** ¥39.9 | 至2026-02-08 周六日 | 到店/外送\n9. **辣翅成双** ¥19.9 | 至2026-02-08 周六日 | 到店/外送\n10. **脆汁鸡任选** ¥9.9 | 至2026-02-08 周六日 | 到店/外送\n11. **北非蛋风味麦满分** ¥12.9 | 至2026-02-10 早间 | 到店\n12. **北非蛋风味麦满分特惠组合** ¥14.9 | 至2026-02-10 早间 | 到店\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 查询活动日历\nchat$chat(\"接下来的 15 天里有哪些精彩活动？\")\n```\n\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n### 接下来15天（2026.2.7-2.20）精彩活动：\n\n#### **2月7日（明日）**\n- **预约麦金喜抽奖**：赢小马宝莉大麻将礼盒（00:00开启）。\n- **麦麦盖毯**：128元+100积分解锁暖冬盖毯（麦麦商城）。\n\n#### **持续/近期活动**（多至2.17）\n- **麦乐鸡侠福利**（2.4-17）：下单麦乐鸡备注惊喜，赢小食。\n- **麦love情人节**（2.4-15）：5款卡面礼卡，拉CP送礼。\n- **新春限定新品**：金拱门虾堡、金菠萝鸡扒麦满分、金运糕升等。\n- **麦麦省优惠**：9.9鸡排/薯条、19.9辣翅等（已领券可用）。\n- **非遗灯会**：北京/上海等城市打卡，集章赢礼。\n- **一灯一愿小票**：APP/自助机打印心愿灯票。\n\n更多详情可查麦当劳APP活动页，部分限时/区域。\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 获取营养信息\nchat$chat(\"帮我设计一份 1000 卡路里的套餐，包含一杯含糖可乐，且价格不超过 30 元。\")\n```\n\n\n::: {.cell-output .cell-output-stdout}\n\n```\n**推荐1000kcal套餐（总价≈29元，使用您的优惠券）：**\n\n- **那么大鸡排**（9.9元券）：385kcal\n- **大薯条**（9.9元券）：379kcal\n- **可乐中杯**（单点≈10元）：147kcal\n\n**总热量**：911kcal（接近1000kcal，搭配店内免费苹果片+32kcal达943kcal）  \n**总价格**：29元以内，到店/外送可用（今日券有效）。营养均衡，主食+碳水+饮品。\n```\n\n\n:::\n:::\n\n\n\n### Gemini-cli 配置\n编辑项目根目录下的 `.gemini/settings.json` 或全局配置文件 `~/.gemini/settings.json`：\n\n\n```json\n{\n  \"mcpServers\": {\n    \"mcd-mcp\": {\n      \"url\": \"https://mcp.mcd.cn/mcp-servers/mcd-mcp\",\n      \"headers\": {\n        \"Authorization\": \"Bearer Your-Token\"\n      }\n    }\n  }\n}\n```\n\n### Claude Code 配置\n在项目根目录创建或编辑 `.mcp.json`：\n\n```json\n{\n  \"mcpServers\": {\n    \"mcd-mcp\": {\n      \"type\": \"http\",\n      \"url\": \"https://mcp.mcd.cn/mcp-servers/mcd-mcp\",\n      \"headers\": {\n        \"Authorization\": \"Bearer Your-Token\"\n      }\n    }\n  }\n}\n```\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}
<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>ç”± AI é©±åŠ¨</title>
<link>https://jcwinning.github.io/LandingPage/</link>
<atom:link href="https://jcwinning.github.io/LandingPage/index.xml" rel="self" type="application/rss+xml"/>
<description>ç”± Quarto æ„å»ºçš„ AI åšå®¢</description>
<generator>quarto-1.8.27</generator>
<lastBuildDate>Fri, 13 Feb 2026 16:00:00 GMT</lastBuildDate>
<item>
  <title>çˆ±æƒ…ä¸“å±AI Agent</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/love_agent/</link>
  <description><![CDATA[ 





<section id="è¿™ä¸ªæƒ…äººèŠ‚" class="level1">
<h1>ğŸ’ è¿™ä¸ªæƒ…äººèŠ‚</h1>
<p>ç»™ä½ å¿ƒçˆ±çš„äººä¸€ä¸ªç‹¬ç‰¹çš„ç¤¼ç‰©â€”â€”ä¸€ä¸ªä¸ªæ€§åŒ–çš„ AI Agentï¼Œç”¨æ¥è®°å½•ä½ ä»¬çš„çˆ±æƒ…æ•…äº‹ã€‚</p>
<p><img src="https://jcwinning.github.io/LandingPage/posts/love_agent/images/my screenshots 1.png" class="img-fluid" width="500"></p>
</section>
<section id="ç…§ç‰‡ç”»å»Š" class="level1">
<h1>ğŸ“¸ <strong>ç…§ç‰‡ç”»å»Š</strong></h1>
<p>éšæ—¶éšåœ°å¯¼å‡ºçè´µç…§ç‰‡ã€‚æ™ºèƒ½åˆ†ç±»ï¼Œä¸€é”®å¯¼å‡ºã€‚</p>
<p><img src="https://jcwinning.github.io/LandingPage/posts/love_agent/images/my screenshots 2.png" class="img-fluid" width="500"></p>
</section>
<section id="æˆ‘ä»¬çš„å›å¿†" class="level1">
<h1><strong>æˆ‘ä»¬çš„å›å¿†</strong></h1>
<p>æ·»åŠ ä½ ä»¬ç‹¬ç‰¹çš„çˆ±æƒ…å›å¿†ï¼Œæ•æ‰æ¯ä¸€ä¸ªç”œèœœæ—¶åˆ»ã€‚</p>
<p><img src="https://jcwinning.github.io/LandingPage/posts/love_agent/images/my screenshots 3.png" class="img-fluid" width="500"></p>
</section>
<section id="ai-æ¨¡å‹" class="level1">
<h1>ğŸ¤– <strong>AI æ¨¡å‹</strong></h1>
<p>åœ¨æœ€æ–°çš„ AI æ¨¡å‹ä¹‹é—´åˆ‡æ¢ï¼ŒåŒ…æ‹¬ GLM-5ã€Kimi K2.5ã€Minimax-m2.5ã€‚</p>
<p><img src="https://jcwinning.github.io/LandingPage/posts/love_agent/images/my screenshots 4.png" class="img-fluid" width="500"></p>
</section>
<section id="æŠ€æœ¯æ ˆ" class="level1">
<h1>æŠ€æœ¯æ ˆ</h1>
<p>Python / LangGraph / OpenAI SDK / Streamlit</p>
</section>
<section id="ai-agent-æµç¨‹" class="level1">
<h1>AI Agent æµç¨‹</h1>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph TD
    %% Entry Point
    Start((User Access)) --&gt; Login{Login Page}
    Login -- Wrong Key --&gt; Login
    Login -- Correct Key --&gt; Session[Init Session State]

    %% Navigation
    Session --&gt; Tabs{Tab Selection}
    
    %% Chat Flow
    Tabs -- "ğŸ’¬ é—®ç­” (Chat)" --&gt; Chat[Chat Interface]
    Chat --&gt; UserInput[User enters Query]
    UserInput --&gt; RunAgent[run_agent Logic]
    
    subgraph "Agent Workflow"
        RunAgent --&gt; LoadData[Load Context]
        LoadData --&gt; Story[Read story.md]
        LoadData --&gt; Excel[Read data.xlsx Metadata]
        LoadData --&gt; MemDB[Fetch Supabase Memory]
        
        Story &amp; Excel &amp; MemDB --&gt; Prompt[Construct System Prompt]
        Prompt --&gt; LLM[Call LLM - OpenAI/OpenRouter]
        LLM --&gt; Response[Generate Response with Image Paths]
    end
    
    Response --&gt; UIProcess[UI Processing]
    UIProcess --&gt; Regex[Extract image/xxx.jpeg paths]
    Regex --&gt; Strip[Remove paths from display text]
    Strip --&gt; Render[Render Markdown + Image Gallery]
    
    %% Memory Flow
    Tabs -- "ğŸ“ è®°å¿† (Memory)" --&gt; MemPage[Edit Plans/Stories]
    MemPage --&gt; SaveMem[Save to Supabase]
    SaveMem --&gt; Session

    %% Settings Flow
    Tabs -- "âš™ï¸ è®¾ç½® (Settings)" --&gt; Config[Model Configuration]
    Config --&gt; ModelSelect[Update Provider/Model]
    ModelSelect --&gt; Session

    %% Data Sources
    subgraph "External Sources"
        Supa[(Supabase Cloud)]
        Local[(story.md / data.xlsx)]
        Images[/image folder/]
    end

    MemDB -.-&gt; Supa
    SaveMem -.-&gt; Supa
    Story &amp; Excel -.-&gt; Local
    Render -.-&gt; Images
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>


<!-- -->

</section>

 ]]></description>
  <category>AI</category>
  <category>love</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/love_agent/</guid>
  <pubDate>Fri, 13 Feb 2026 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/love_agent/images/cover.png" medium="image" type="image/png" height="112" width="144"/>
</item>
<item>
  <title>Vibe æ¸¸æˆï¼š 4äººä¹’ä¹“çƒä¸æ¸¸æˆæ•°æ®åˆ†æ</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/vibepong/</link>
  <description><![CDATA[ 





<section id="æ¸¸æˆç®€ä»‹" class="level1">
<h1>æ¸¸æˆç®€ä»‹</h1>
<p>VibePong æ˜¯ä¸€æ¬¾ç®€å•è€Œæœ‰è¶£çš„ä¹’ä¹“ç±»æ¸¸æˆï¼Œæ”¯æŒæœ€å¤š 4 åç©å®¶åŒå°ç«æŠ€ï¼Œä¹Ÿæ”¯æŒä¸ CPU å¯¹æ‰‹ä½œæˆ˜ã€‚æ¸¸æˆä¼šè®°å½•å„ç§æŒ‡æ ‡ï¼Œå¦‚çƒé€Ÿã€æ¸¸æˆæ—¶é•¿å’Œç©å®¶è¡¨ç°ï¼Œå¹¶å°†è¿™äº›æ•°æ®ä¿å­˜åˆ° CSV æ–‡ä»¶ä¸­ä»¥ä¾¿è¿›è¡Œåˆ†æã€‚</p>
<p>ç«‹å³æ¸¸ç©ï¼š<a href="https://jcwinning.github.io/vibepong">https://jcwinning.github.io/vibepong</a></p>
<p><img src="https://jcwinning.github.io/LandingPage/posts/vibepong/images/my screenshots 3.png" height="500"> <img src="https://jcwinning.github.io/LandingPage/posts/vibepong/images/my screenshots 1.png" height="500"></p>
</section>
<section id="æ¸¸æˆæ•°æ®åˆ†æ" class="level1">
<h1>æ¸¸æˆæ•°æ®åˆ†æ</h1>
<p>åœ¨æœ¬æ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬åˆ†æäº† VibePong ç”Ÿæˆçš„æ¸¸æˆæ•°æ®ã€‚åˆ†æå†…å®¹æ¶µç›–æ•°æ®æå–ã€æ¸…æ´—ä»¥åŠå¸¦æœ‰å¯è§†åŒ–æ•ˆæœçš„æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)ã€‚</p>
</section>
<section id="ç¬¬ä¸€æ­¥è¯»å–æ•°æ®" class="level1">
<h1>ç¬¬ä¸€æ­¥ï¼šè¯»å–æ•°æ®</h1>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ <code>game_data</code> ç›®å½•ä¸­æœç´¢æ‰€æœ‰çš„æ‘˜è¦ (summary) å’ŒåŠ¨ä½œ (action),é¥æ„Ÿ(telemetry) CSV æ–‡ä»¶ï¼Œå¹¶å°†å…¶åŠ è½½åˆ° pandas DataFrame ä¸­ã€‚</p>
<div id="701d9868" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>æ˜¾ç¤ºä»£ç </summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> glob</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ è½½ game_data ç›®å½•ä¸‹çš„æ‰€æœ‰ CSV æ–‡ä»¶</span></span>
<span id="cb1-6">data_dir <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'./game_data'</span></span>
<span id="cb1-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> load_combined(pattern):</span>
<span id="cb1-8">    files <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> glob.glob(os.path.join(data_dir, <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'vibepong_</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>pattern<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">_*.csv'</span>))</span>
<span id="cb1-9">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> pd.concat([pd.read_csv(f) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> f <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> files], ignore_index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> files <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> pd.DataFrame()</span>
<span id="cb1-10"></span>
<span id="cb1-11">df_summary <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> load_combined(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'summary'</span>)</span>
<span id="cb1-12">df_actions <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> load_combined(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'actions'</span>)</span>
<span id="cb1-13">df_telemetry <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> load_combined(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'telemetry'</span>)</span>
<span id="cb1-14"></span>
<span id="cb1-15"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"å·²åŠ è½½ </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(df_summary)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> è¡Œæ‘˜è¦æ•°æ®ï¼Œ</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(df_actions)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> æ¡åŠ¨ä½œè®°å½•ï¼Œä»¥åŠ </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(df_telemetry)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> æ¡é¥æµ‹è®°å½•ã€‚"</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>å·²åŠ è½½ 75 è¡Œæ‘˜è¦æ•°æ®ï¼Œ366 æ¡åŠ¨ä½œè®°å½•ï¼Œä»¥åŠ 658 æ¡é¥æµ‹è®°å½•ã€‚</code></pre>
</div>
</div>
<section id="é€åœºæ¸¸æˆæ•°æ®" class="level2">
<h2 class="anchored" data-anchor-id="é€åœºæ¸¸æˆæ•°æ®">é€åœºæ¸¸æˆæ•°æ®</h2>
<div id="51d7ec8e" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>æ˜¾ç¤ºä»£ç </summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Display the first few rows of summary data</span></span>
<span id="cb3-2">df_summary.head()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="58">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Game ID</th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">Duration (s)</th>
<th data-quarto-table-cell-role="th">Winner</th>
<th data-quarto-table-cell-role="th">Ball Speed</th>
<th data-quarto-table-cell-role="th">Theme</th>
<th data-quarto-table-cell-role="th">Language</th>
<th data-quarto-table-cell-role="th">Player</th>
<th data-quarto-table-cell-role="th">Lives</th>
<th data-quarto-table-cell-role="th">Hits</th>
<th data-quarto-table-cell-role="th">CPU Difficulty</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>G1770713902861-393</td>
<td>2026-02-10T08:58:27.879Z</td>
<td>5.02</td>
<td>CPU</td>
<td>6.56</td>
<td>light</td>
<td>en</td>
<td>Player 1</td>
<td>0</td>
<td>0</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>G1770713902861-393</td>
<td>2026-02-10T08:58:27.879Z</td>
<td>5.02</td>
<td>CPU</td>
<td>6.56</td>
<td>light</td>
<td>en</td>
<td>CPU</td>
<td>1</td>
<td>0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>G1770783544585-550</td>
<td>2026-02-11T04:20:01.889Z</td>
<td>57.30</td>
<td>Player 1</td>
<td>20.38</td>
<td>dark</td>
<td>en</td>
<td>Player 1</td>
<td>1</td>
<td>14</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>G1770783544585-550</td>
<td>2026-02-11T04:20:01.889Z</td>
<td>57.30</td>
<td>Player 1</td>
<td>20.38</td>
<td>dark</td>
<td>en</td>
<td>CPU</td>
<td>0</td>
<td>14</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>G1770713913739-52</td>
<td>2026-02-10T08:58:46.511Z</td>
<td>12.77</td>
<td>Player 3</td>
<td>7.08</td>
<td>light</td>
<td>en</td>
<td>Player 1</td>
<td>0</td>
<td>0</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="é€ä¸ªåŠ¨ä½œæ•°æ®" class="level2">
<h2 class="anchored" data-anchor-id="é€ä¸ªåŠ¨ä½œæ•°æ®">é€ä¸ªåŠ¨ä½œæ•°æ®</h2>
<div id="041ac31f" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>æ˜¾ç¤ºä»£ç </summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Display the first few rows of summary data</span></span>
<span id="cb4-2">df_actions.head()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="59">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Game ID</th>
<th data-quarto-table-cell-role="th">Timestamp (ms)</th>
<th data-quarto-table-cell-role="th">Player</th>
<th data-quarto-table-cell-role="th">Action</th>
<th data-quarto-table-cell-role="th">Details</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>G1770783544585-550</td>
<td>4000</td>
<td>System</td>
<td>Ball served towards CPU</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>G1770783544585-550</td>
<td>4919</td>
<td>CPU</td>
<td>Hit Ball</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>G1770783544585-550</td>
<td>6787</td>
<td>Player 1</td>
<td>Hit Ball</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>G1770783544585-550</td>
<td>8653</td>
<td>CPU</td>
<td>Hit Ball</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>G1770783544585-550</td>
<td>10519</td>
<td>Player 1</td>
<td>Hit Ball</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="æ—¶é—´åºåˆ—æ•°æ®" class="level2">
<h2 class="anchored" data-anchor-id="æ—¶é—´åºåˆ—æ•°æ®">æ—¶é—´åºåˆ—æ•°æ®</h2>
<div id="af308a02" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>æ˜¾ç¤ºä»£ç </summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Display the first few rows of summary data</span></span>
<span id="cb5-2">df_telemetry.head()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="60">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Game ID</th>
<th data-quarto-table-cell-role="th">Timestamp (ms)</th>
<th data-quarto-table-cell-role="th">Ball X</th>
<th data-quarto-table-cell-role="th">Ball Y</th>
<th data-quarto-table-cell-role="th">Ball VX</th>
<th data-quarto-table-cell-role="th">Ball VY</th>
<th data-quarto-table-cell-role="th">Ball Speed</th>
<th data-quarto-table-cell-role="th">p1 X</th>
<th data-quarto-table-cell-role="th">p1 Y</th>
<th data-quarto-table-cell-role="th">p1 Center</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">p3 Center</th>
<th data-quarto-table-cell-role="th">p3 Active</th>
<th data-quarto-table-cell-role="th">p3 Lives</th>
<th data-quarto-table-cell-role="th">p3 Distance</th>
<th data-quarto-table-cell-role="th">p4 X</th>
<th data-quarto-table-cell-role="th">p4 Y</th>
<th data-quarto-table-cell-role="th">p4 Center</th>
<th data-quarto-table-cell-role="th">p4 Active</th>
<th data-quarto-table-cell-role="th">p4 Lives</th>
<th data-quarto-table-cell-role="th">p4 Distance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>G1770793570881-726</td>
<td>4011</td>
<td>343.50</td>
<td>349.77</td>
<td>-6.496</td>
<td>-0.2292</td>
<td>6.5010</td>
<td>20.0</td>
<td>300.0</td>
<td>350.0</td>
<td>...</td>
<td>350.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>G1770793570881-726</td>
<td>4112</td>
<td>304.53</td>
<td>348.40</td>
<td>-6.496</td>
<td>-0.2292</td>
<td>6.5073</td>
<td>20.0</td>
<td>300.0</td>
<td>350.0</td>
<td>...</td>
<td>350.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>G1770793570881-726</td>
<td>4227</td>
<td>259.06</td>
<td>346.79</td>
<td>-6.496</td>
<td>-0.2292</td>
<td>6.5146</td>
<td>20.0</td>
<td>300.0</td>
<td>350.0</td>
<td>...</td>
<td>350.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>G1770793570881-726</td>
<td>4328</td>
<td>220.08</td>
<td>345.42</td>
<td>-6.496</td>
<td>-0.2292</td>
<td>6.5208</td>
<td>20.0</td>
<td>300.0</td>
<td>350.0</td>
<td>...</td>
<td>350.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>G1770793570881-726</td>
<td>4428</td>
<td>181.11</td>
<td>344.04</td>
<td>-6.496</td>
<td>-0.2292</td>
<td>6.5271</td>
<td>20.0</td>
<td>300.0</td>
<td>350.0</td>
<td>...</td>
<td>350.0</td>
<td>1.0</td>
<td>1.0</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>5 rows Ã— 31 columns</p>
</div>
</div>
</div>
</section>
</section>
<section id="ç¬¬äºŒæ­¥æ•°æ®æ¸…æ´—" class="level1">
<h1>ç¬¬äºŒæ­¥ï¼šæ•°æ®æ¸…æ´—</h1>
<p>æˆ‘ä»¬å°†é€šè¿‡å°†æ—¶é—´æˆ³è½¬æ¢ä¸º datetime å¯¹è±¡ã€å¤„ç†æ•°å€¼ç±»å‹å¹¶ç¡®ä¿ä¸€è‡´æ€§æ¥æ¸…æ´—æ•°æ®ã€‚</p>
<div id="f660c008" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>æ˜¾ç¤ºä»£ç </summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ¸…æ´—æ‘˜è¦æ•°æ®</span></span>
<span id="cb6-2">df_summary[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Date'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.to_datetime(df_summary[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Date'</span>])</span>
<span id="cb6-3">numeric_summary <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Duration (s)'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Ball Speed'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Lives'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Hits'</span>]</span>
<span id="cb6-4">df_summary[numeric_summary] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_summary[numeric_summary].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">apply</span>(pd.to_numeric, errors<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'coerce'</span>)</span>
<span id="cb6-5">df_summary <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_summary.dropna(subset<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Player'</span>])</span>
<span id="cb6-6"></span>
<span id="cb6-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ¸…æ´—åŠ¨ä½œæ•°æ®</span></span>
<span id="cb6-8">df_actions[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Timestamp (ms)'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.to_numeric(df_actions[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Timestamp (ms)'</span>], errors<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'coerce'</span>)</span>
<span id="cb6-9"></span>
<span id="cb6-10">df_summary.head()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="61">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Game ID</th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">Duration (s)</th>
<th data-quarto-table-cell-role="th">Winner</th>
<th data-quarto-table-cell-role="th">Ball Speed</th>
<th data-quarto-table-cell-role="th">Theme</th>
<th data-quarto-table-cell-role="th">Language</th>
<th data-quarto-table-cell-role="th">Player</th>
<th data-quarto-table-cell-role="th">Lives</th>
<th data-quarto-table-cell-role="th">Hits</th>
<th data-quarto-table-cell-role="th">CPU Difficulty</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>G1770713902861-393</td>
<td>2026-02-10 08:58:27.879000+00:00</td>
<td>5.02</td>
<td>CPU</td>
<td>6.56</td>
<td>light</td>
<td>en</td>
<td>Player 1</td>
<td>0</td>
<td>0</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>G1770713902861-393</td>
<td>2026-02-10 08:58:27.879000+00:00</td>
<td>5.02</td>
<td>CPU</td>
<td>6.56</td>
<td>light</td>
<td>en</td>
<td>CPU</td>
<td>1</td>
<td>0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>G1770783544585-550</td>
<td>2026-02-11 04:20:01.889000+00:00</td>
<td>57.30</td>
<td>Player 1</td>
<td>20.38</td>
<td>dark</td>
<td>en</td>
<td>Player 1</td>
<td>1</td>
<td>14</td>
<td>NaN</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>G1770783544585-550</td>
<td>2026-02-11 04:20:01.889000+00:00</td>
<td>57.30</td>
<td>Player 1</td>
<td>20.38</td>
<td>dark</td>
<td>en</td>
<td>CPU</td>
<td>0</td>
<td>14</td>
<td>NaN</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>G1770713913739-52</td>
<td>2026-02-10 08:58:46.511000+00:00</td>
<td>12.77</td>
<td>Player 3</td>
<td>7.08</td>
<td>light</td>
<td>en</td>
<td>Player 1</td>
<td>0</td>
<td>0</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="ç¬¬ä¸‰æ­¥eda-å’Œå¯è§†åŒ–" class="level1">
<h1>ç¬¬ä¸‰æ­¥ï¼šEDA å’Œå¯è§†åŒ–</h1>
<p>ç°åœ¨æˆ‘ä»¬å°†æŸ¥çœ‹ä¸€äº›å…³é”®ç»©æ•ˆæŒ‡æ ‡å¹¶å¯è§†åŒ–æ¸¸æˆç»“æœã€‚</p>
<section id="è·èƒœåˆ†å¸ƒ" class="level2">
<h2 class="anchored" data-anchor-id="è·èƒœåˆ†å¸ƒ">è·èƒœåˆ†å¸ƒ</h2>
<div id="199952b8" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>æ˜¾ç¤ºä»£ç </summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span>
<span id="cb7-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb7-3"></span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set aesthetic style</span></span>
<span id="cb7-5">sns.set_theme(style<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"whitegrid"</span>)</span>
<span id="cb7-6">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'font.sans-serif'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Arial Unicode MS'</span>]</span>
<span id="cb7-7">plt.rcParams[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'axes.unicode_minus'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span></code></pre></div>
</details>
</div>
<p>è°èµ¢å¾—äº†æœ€å¤šçš„æ¸¸æˆï¼Ÿ</p>
<div id="5beecf77" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>æ˜¾ç¤ºä»£ç </summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è®¡ç®—æ¯ä½è·èƒœè€…çš„ç‹¬ç‰¹æ¸¸æˆåœºæ¬¡</span></span>
<span id="cb8-2">unique_games <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_summary.drop_duplicates(subset<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Game ID'</span>])</span>
<span id="cb8-3">winner_counts <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> unique_games[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Winner'</span>].value_counts()</span>
<span id="cb8-4"></span>
<span id="cb8-5">plt.figure(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>))</span>
<span id="cb8-6">sns.barplot(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>winner_counts.index, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>winner_counts.values, palette<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"viridis"</span>)</span>
<span id="cb8-7">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ç©å®¶/CPU è·èƒœåœºæ¬¡åˆ†å¸ƒ'</span>, fontsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>)</span>
<span id="cb8-8">plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://jcwinning.github.io/LandingPage/posts/vibepong/index_files/figure-html/cell-8-output-1.png" width="784" height="456" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="æ¸¸æˆæ—¶é•¿-vs.-çƒé€Ÿ" class="level2">
<h2 class="anchored" data-anchor-id="æ¸¸æˆæ—¶é•¿-vs.-çƒé€Ÿ">æ¸¸æˆæ—¶é•¿ vs.&nbsp;çƒé€Ÿ</h2>
<p>æ›´é«˜çš„çƒé€Ÿä¼šå¯¼è‡´æ¸¸æˆæ—¶é•¿å˜çŸ­å—ï¼Ÿ</p>
<div id="3912fdd2" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>æ˜¾ç¤ºä»£ç </summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1">plt.figure(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>))</span>
<span id="cb9-2">sns.scatterplot(data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>unique_games, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Ball Speed'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Duration (s)'</span>, hue<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Winner'</span>, s<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)</span>
<span id="cb9-3">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Game Duration vs Ball Speed'</span>, fontsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>)</span>
<span id="cb9-4">plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://jcwinning.github.io/LandingPage/posts/vibepong/index_files/figure-html/cell-9-output-1.png" width="812" height="530" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="æ¯ä¸ªç©å®¶çš„æ€»å‡»çƒæ•°" class="level2">
<h2 class="anchored" data-anchor-id="æ¯ä¸ªç©å®¶çš„æ€»å‡»çƒæ•°">æ¯ä¸ªç©å®¶çš„æ€»å‡»çƒæ•°</h2>
<p>è·Ÿè¸ªä¸åŒæ¸¸æˆåœºæ¬¡çš„æŠ€èƒ½ï¼ˆå‡»çƒæ•°ï¼‰è¡¨ç°ã€‚</p>
<div id="4805509c" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>æ˜¾ç¤ºä»£ç </summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1">plt.figure(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>))</span>
<span id="cb10-2">sns.boxplot(data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>df_summary, x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Player'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Hits'</span>, palette<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"magma"</span>)</span>
<span id="cb10-3">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Distribution of Hits per Player'</span>, fontsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>)</span>
<span id="cb10-4">plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://jcwinning.github.io/LandingPage/posts/vibepong/index_files/figure-html/cell-10-output-1.png" width="812" height="531" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="åŠ¨ä½œåºåˆ—" class="level2">
<h2 class="anchored" data-anchor-id="åŠ¨ä½œåºåˆ—">åŠ¨ä½œåºåˆ—</h2>
<p>åˆ†ææ‰€æœ‰æ¸¸æˆä¸­åŠ¨ä½œçš„é¢‘ç‡ã€‚</p>
<div id="d88c3321" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>æ˜¾ç¤ºä»£ç </summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1">action_counts <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_actions[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Action'</span>].value_counts().head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb11-2"></span>
<span id="cb11-3">plt.figure(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>))</span>
<span id="cb11-4">action_counts.plot(kind<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'barh'</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'skyblue'</span>)</span>
<span id="cb11-5">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Most Frequent Actions/Events'</span>, fontsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>)</span>
<span id="cb11-6">plt.gca().invert_yaxis()</span>
<span id="cb11-7">plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://jcwinning.github.io/LandingPage/posts/vibepong/index_files/figure-html/cell-11-output-1.png" width="833" height="584" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="ç¬¬å››æ­¥é¥æµ‹æ•°æ®åˆ†æ" class="level1">
<h1>ç¬¬å››æ­¥ï¼šé¥æµ‹æ•°æ®åˆ†æ</h1>
<p>ç°åœ¨è®©æˆ‘ä»¬åˆ†æé«˜é¢‘é¥æµ‹æ•°æ®ï¼Œè¯¥æ•°æ®æ¯ 100 æ¯«ç§’æ•è·ä¸€æ¬¡çƒå’Œçƒæ‹çš„ä½ç½®ã€‚</p>
<section id="éšæ—¶é—´å˜åŒ–çš„çƒé€Ÿ" class="level2">
<h2 class="anchored" data-anchor-id="éšæ—¶é—´å˜åŒ–çš„çƒé€Ÿ">éšæ—¶é—´å˜åŒ–çš„çƒé€Ÿ</h2>
<p>çƒé€Ÿåœ¨æ‰€æœ‰æ¸¸æˆä¸­æ˜¯å¦‚ä½•æ¼”å˜çš„ï¼Ÿ</p>
<div id="ab2640b6" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>æ˜¾ç¤ºä»£ç </summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> df_telemetry.empty:</span>
<span id="cb12-2">    plt.figure(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>))</span>
<span id="cb12-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> gid <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> df_telemetry[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Game ID'</span>].unique()[:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>]:</span>
<span id="cb12-4">        df_g <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_telemetry[df_telemetry[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Game ID'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> gid]</span>
<span id="cb12-5">        plt.plot(df_g[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Timestamp (ms)'</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>, df_g[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Ball Speed'</span>], alpha<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span>, label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'æ¸¸æˆ </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>gid[<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>:]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>)</span>
<span id="cb12-6">    </span>
<span id="cb12-7">    plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'çƒé€Ÿæ¼”å˜ï¼ˆå‰ 10 åœºæ¸¸æˆï¼‰'</span>)</span>
<span id="cb12-8">    plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'æ—¶é—´ (ç§’)'</span>)</span>
<span id="cb12-9">    plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'é€Ÿåº¦'</span>)</span>
<span id="cb12-10">    plt.legend(bbox_to_anchor<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.05</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), loc<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'upper left'</span>, fontsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)</span>
<span id="cb12-11">    plt.tight_layout()</span>
<span id="cb12-12">    plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://jcwinning.github.io/LandingPage/posts/vibepong/index_files/figure-html/cell-12-output-1.png" width="945" height="463" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="çƒè½¨è¿¹çƒ­å›¾" class="level2">
<h2 class="anchored" data-anchor-id="çƒè½¨è¿¹çƒ­å›¾">çƒè½¨è¿¹çƒ­å›¾</h2>
<p>çƒåœ¨åœºåœ°çš„å“ªä¸ªä½ç½®åœç•™æ—¶é—´æœ€é•¿ï¼Ÿ</p>
<div id="a95d6008" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>æ˜¾ç¤ºä»£ç </summary>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> df_telemetry.empty:</span>
<span id="cb13-2">    plt.figure(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>))</span>
<span id="cb13-3">    plt.hist2d(df_telemetry[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Ball X'</span>], df_telemetry[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Ball Y'</span>], bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>, cmap<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'hot'</span>)</span>
<span id="cb13-4">    plt.colorbar(label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'é‡‡æ ·ç‚¹'</span>)</span>
<span id="cb13-5">    plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'çƒè½¨è¿¹çƒ­å›¾'</span>)</span>
<span id="cb13-6">    plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://jcwinning.github.io/LandingPage/posts/vibepong/index_files/figure-html/cell-13-output-1.png" width="764" height="508" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="çƒæ‹ç§»åŠ¨åˆ†æ" class="level2">
<h2 class="anchored" data-anchor-id="çƒæ‹ç§»åŠ¨åˆ†æ">çƒæ‹ç§»åŠ¨åˆ†æ</h2>
<p>å“ªäº›ç©å®¶ç§»åŠ¨çƒæ‹æœ€é¢‘ç¹ï¼Ÿ</p>
<div id="21fee610" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>æ˜¾ç¤ºä»£ç </summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> df_telemetry.empty:</span>
<span id="cb14-2">    dist_cols <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [c <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> c <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> df_telemetry.columns <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Distance'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> c <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">and</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Ball'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> c]</span>
<span id="cb14-3">    movement <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb14-4">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> gid <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> df_telemetry[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Game ID'</span>].unique():</span>
<span id="cb14-5">        df_g <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_telemetry[df_telemetry[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Game ID'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> gid]</span>
<span id="cb14-6">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> col <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> dist_cols:</span>
<span id="cb14-7">            movement.append({<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Player'</span>: col.split()[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>], <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Distance'</span>: df_g[col].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()})</span>
<span id="cb14-8">    </span>
<span id="cb14-9">    plt.figure(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>))</span>
<span id="cb14-10">    sns.boxplot(data<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>pd.DataFrame(movement), x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Player'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Distance'</span>, palette<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'coolwarm'</span>)</span>
<span id="cb14-11">    plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'å„ç©å®¶çƒæ‹ç§»åŠ¨è·ç¦»åˆ†å¸ƒ'</span>)</span>
<span id="cb14-12">    plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://jcwinning.github.io/LandingPage/posts/vibepong/index_files/figure-html/cell-14-output-1.png" width="829" height="454" class="figure-img"></p>
</figure>
</div>
</div>
</div>


<!-- -->

</section>
</section>

 ]]></description>
  <category>AI</category>
  <category>æ¸¸æˆ</category>
  <category>æ•°æ®åˆ†æ</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/vibepong/</guid>
  <pubDate>Mon, 09 Feb 2026 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/vibepong/images/my screenshots 3.png" medium="image" type="image/png" height="136" width="144"/>
</item>
<item>
  <title>AIå¾ˆå¤æ‚ï¼Œæˆ‘æƒ³å–æ¯å¥¶èŒ¶</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/AI_milktea/</link>
  <description><![CDATA[ 





<p>é©¬äº‘çˆ¸çˆ¸è¿™æ¬¡ç‹‚ç ¸30äº¿ã€‚åŠ é€ŸAIè½åœ°çš„æ­¥ä¼ã€‚ä»Šå¤©æŠŠåƒé—®æœåŠ¡å™¨éƒ½æå´©æºƒäº†ã€‚å¤§æˆ˜åªæ˜¯åˆšåˆšå¼€å§‹ã€‚</p>
<section id="åƒé—®æ–°å¹´è¯·å–å¥¶èŒ¶æˆ–è€…å’–å•¡" class="level1">
<h1>åƒé—®æ–°å¹´è¯·å–å¥¶èŒ¶æˆ–è€…å’–å•¡</h1>
<p>æ—¶é—´ï¼š2026å¹´2æœˆ6æ—¥-2026å¹´2æœˆ12æ—¥</p>
<p>æ–¹æ³•ï¼šåƒé—®Appè¾“å…¥â€œå¸®æˆ‘ç‚¹å¥¶èŒ¶â€æˆ–è€…â€œæˆ‘è¦å–æŒªç“¦å’–å•¡â€ã€‚ä¼šè‡ªåŠ¨å…³è”æ·˜å®ä¸‹å•ã€‚</p>
<p><img src="https://jcwinning.github.io/LandingPage/posts/AI_milktea/images/1.png" class="img-fluid" style="width:40.0%"> <img src="https://jcwinning.github.io/LandingPage/posts/AI_milktea/images/2.png" class="img-fluid" style="width:40.0%"></p>
<p><img src="https://jcwinning.github.io/LandingPage/posts/AI_milktea/images/0.png" class="img-fluid" style="width:80.0%"></p>
</section>
<section id="æ™ºè°±ä¸Šå¸‚è¯·å–æ—ºæ—ºç‰›å¥¶" class="level1">
<h1>æ™ºè°±ä¸Šå¸‚è¯·å–æ—ºæ—ºç‰›å¥¶</h1>
<p>æ—¶é—´ï¼š2026å¹´1æœˆ8æ—¥-2026å¹´1æœˆ16æ—¥</p>
<p>æ–¹æ³•ï¼šé…ç½®MCPã€‚è¾“å…¥â€œæ™ºè°±æ—ºæ—ºâ€ã€‚æ‹¿åˆ°ä¸‹å•ç½‘å€ã€‚å¡«æ”¶è´§åœ°å€ã€‚</p>
<p><img src="https://jcwinning.github.io/LandingPage/posts/AI_milktea/images/3.png" class="img-fluid" style="width:80.0%"></p>
</section>
<section id="æ™ºè°±coding-planè¯·å–æ³¸ä¸Šé˜¿å§¨" class="level1">
<h1>æ™ºè°±coding planè¯·å–æ³¸ä¸Šé˜¿å§¨</h1>
<p>æ—¶é—´ï¼š2025å¹´12æœˆ26æ—¥-2026å¹´1æœˆ9æ—¥</p>
<p>æ–¹æ³•ï¼šé…ç½®MCPã€‚è¾“å…¥â€œé˜¿å§¨åŠ©æˆ‘â€ã€‚æ‹¿åˆ°å…è´¹ç å»æ³¸ä¸Šé˜¿å§¨Appä¸‹å•ã€‚</p>
<p><img src="https://jcwinning.github.io/LandingPage/posts/AI_milktea/images/4.png" class="img-fluid" style="width:80.0%"></p>


<!-- -->

</section>

 ]]></description>
  <category>AI</category>
  <category>MCP</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/AI_milktea/</guid>
  <pubDate>Thu, 05 Feb 2026 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/AI_milktea/images/0.png" medium="image" type="image/png" height="134" width="144"/>
</item>
<item>
  <title>éº¦å½“åŠ³ MCP</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/mcdonald_mcp/</link>
  <description><![CDATA[ 





<section id="éº¦å½“åŠ³-mcp-æ–‡æ¡£" class="level1">
<h1>éº¦å½“åŠ³ MCP æ–‡æ¡£</h1>
<p>éº¦å½“åŠ³ MCP (Model Context Protocol) æœåŠ¡å…è®¸ AI åŠ©æ‰‹ç›´æ¥è®¿é—®éº¦å½“åŠ³ä¸­å›½çš„æ´»åŠ¨æ—¥å†ã€ä¼˜æƒ åˆ¸å’Œè¥å…»ä¿¡æ¯ã€‚</p>
<p><a href="https://github.com/M-China/mcd-mcp-server">éº¦å½“åŠ³ Github</a></p>
<section id="è·å–-token" class="level2">
<h2 class="anchored" data-anchor-id="è·å–-token">1. è·å– Token</h2>
<ol type="1">
<li>è®¿é—® <a href="https://open.mcd.cn/mcp">éº¦å½“åŠ³ MCP å¼€æ”¾å¹³å°</a>ã€‚</li>
<li>ç™»å½•å¹¶ç”³è¯·æ‚¨çš„ä¸ªäºº MCP Tokenã€‚</li>
<li>è·å¾— Token åï¼Œè¯·æ›¿æ¢ä¸‹é¢é…ç½®ä¸­çš„ <code>Your-Token</code>ã€‚</li>
</ol>
</section>
<section id="é…ç½®-mcp-æœåŠ¡" class="level2">
<h2 class="anchored" data-anchor-id="é…ç½®-mcp-æœåŠ¡">2. é…ç½® MCP æœåŠ¡</h2>
<p>æ‚¨å¯ä»¥å°†éº¦å½“åŠ³ MCP é›†æˆåˆ°æ”¯æŒ MCP åè®®çš„å„ç§å·¥å…·ä¸­ã€‚</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true" href="">ä¸ ellmer Chat (R) é›†æˆ</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false" href="">Gemini-cli é…ç½®</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" aria-controls="tabset-1-3" aria-selected="false" href="">Claude Code é…ç½®</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<p><code>mcptools</code> åŒ…å¯ä»¥åœ¨ R ä¸­å®ç° MCP æœåŠ¡å™¨ä¸ ellmer chat çš„æ— ç¼é›†æˆã€‚ä»¥ä¸‹æ˜¯é…åˆ ellmer è®¾ç½®å’Œä½¿ç”¨éº¦å½“åŠ³ MCP çš„æ–¹æ³•ã€‚</p>
<section id="æ­¥éª¤-1-å®‰è£…æ‰€éœ€åŒ…" class="level4">
<h4 class="anchored" data-anchor-id="æ­¥éª¤-1-å®‰è£…æ‰€éœ€åŒ…">æ­¥éª¤ 1: å®‰è£…æ‰€éœ€åŒ…</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¦‚æœå°šæœªå®‰è£…ï¼Œè¯·å®‰è£…ç›¸å…³åŒ…</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install.packages</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ellmer"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcptools"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dotenv"</span>))</span></code></pre></div></div>
</div>
</section>
<section id="æ­¥éª¤-2-åˆ›å»º-mcp-é…ç½®æ–‡ä»¶" class="level4">
<h4 class="anchored" data-anchor-id="æ­¥éª¤-2-åˆ›å»º-mcp-é…ç½®æ–‡ä»¶">æ­¥éª¤ 2: åˆ›å»º MCP é…ç½®æ–‡ä»¶</h4>
<p>åœ¨é¡¹ç›®ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º <code>mcp_config.json</code> çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb2-2">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"mcpServers"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb2-3">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"mcd-mcp"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb2-4">      <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"command"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"npx"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-5">      <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"args"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb2-6">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcp-remote"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-7">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://mcp.mcd.cn/mcp-servers/mcd-mcp"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-8">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--header"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-9">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Authorization: Bearer Your-Token"</span></span>
<span id="cb2-10">      <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb2-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb2-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb2-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
</div>
<p>å°† <code>Your-Token</code> æ›¿æ¢ä¸ºæ‚¨ä» <a href="https://open.mcd.cn/mcp">éº¦å½“åŠ³ MCP å¼€æ”¾å¹³å°</a> è·å–çš„å®é™… MCP tokenã€‚</p>
</section>
<section id="æ­¥éª¤-3-åŠ è½½åº“å’Œé…ç½®" class="level4">
<h4 class="anchored" data-anchor-id="æ­¥éª¤-3-åŠ è½½åº“å’Œé…ç½®">æ­¥éª¤ 3: åŠ è½½åº“å’Œé…ç½®</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ellmer)</span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(mcptools)</span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dotenv)</span>
<span id="cb3-4"></span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ è½½ç¯å¢ƒå˜é‡</span></span>
<span id="cb3-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">load_dot_env</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">file =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".env"</span>)</span></code></pre></div></div>
</div>
</section>
<section id="æ­¥éª¤-4-ä½¿ç”¨-mcp-å·¥å…·åˆå§‹åŒ–èŠå¤©" class="level4">
<h4 class="anchored" data-anchor-id="æ­¥éª¤-4-ä½¿ç”¨-mcp-å·¥å…·åˆå§‹åŒ–èŠå¤©">æ­¥éª¤ 4: ä½¿ç”¨ MCP å·¥å…·åˆå§‹åŒ–èŠå¤©</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»ºä¸€ä¸ª ellmer èŠå¤©å¯¹è±¡ï¼ˆä»¥ OpenRouter ä¸ºä¾‹ï¼‰</span></span>
<span id="cb4-2">chat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat_openrouter</span>(</span>
<span id="cb4-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">system_prompt =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä½ æ˜¯ä¸€ä¸ªèƒ½å¤Ÿä¸éº¦å½“åŠ³æœåŠ¡äº¤äº’çš„å¾—åŠ›åŠ©æ‰‹ã€‚è¯·ä½¿ç”¨ä¸­æ–‡å›ç­”ï¼Œå¹¶ä¿æŒç®€æ´ã€‚"</span>,</span>
<span id="cb4-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">api_key =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.getenv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>),</span>
<span id="cb4-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x-ai/grok-4.1-fast"</span>,</span>
<span id="cb4-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">echo =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"output"</span></span>
<span id="cb4-7">)</span>
<span id="cb4-8"></span>
<span id="cb4-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä»é…ç½®æ–‡ä»¶åŠ è½½ MCP å·¥å…·</span></span>
<span id="cb4-10">mcd_tools <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mcp_tools</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">config =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcp_config.json"</span>)</span>
<span id="cb4-11"></span>
<span id="cb4-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å‘èŠå¤©å¯¹è±¡æ³¨å†Œ MCP å·¥å…·</span></span>
<span id="cb4-13">chat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_tools</span>(mcd_tools)</span></code></pre></div></div>
</div>
</section>
<section id="æ­¥éª¤-5-é…åˆ-mcp-é›†æˆè¿›è¡ŒèŠå¤©" class="level4">
<h4 class="anchored" data-anchor-id="æ­¥éª¤-5-é…åˆ-mcp-é›†æˆè¿›è¡ŒèŠå¤©">æ­¥éª¤ 5: é…åˆ MCP é›†æˆè¿›è¡ŒèŠå¤©</h4>
<p>ç°åœ¨æ‚¨å¯ä»¥æé—®ï¼ŒAI å°†ä½¿ç”¨éº¦å½“åŠ³ MCP å·¥å…·ï¼š</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æŸ¥è¯¢å¯ç”¨ä¼˜æƒ åˆ¸</span></span>
<span id="cb5-2">chat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ç°åœ¨æœ‰å“ªäº›å¯ç”¨çš„ä¼˜æƒ åˆ¸ï¼Ÿ"</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>ç›®å‰æ‚¨æœ‰ä»¥ä¸‹å·²é¢†å–çš„éº¦éº¦çœä¼˜æƒ åˆ¸å¯ç”¨ï¼š

- åŒ—éè›‹é£å‘³éº¦æ»¡åˆ†
- 9.9å…ƒå¤§è–¯æ¡
- 9.9å…ƒæ–°æ´¾ç»„åˆ
- ç‹ç‰Œç‚¸é¸¡åŒæ‹¼ç›’
- è¾£ç¿…æˆåŒ
- è„†æ±é¸¡ä»»é€‰
- 9.9å…ƒé‚£ä¹ˆå¤§é¸¡æ’
- 6.9å…ƒç”œé…·ä»»é€‰
- åŒ—éè›‹é£å‘³éº¦æ»¡åˆ†ç‰¹æƒ ç»„åˆ
- 13.5å…ƒä¸­è–¯æ¡ä¹°ä¸€é€ä¸€
- 19.9å…ƒè¾£ç¿…æˆåŒ
- 29.9å…ƒæ˜æ˜Ÿå ¡å ¡æ­</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è‡ªåŠ¨é¢†å–æ‰€æœ‰ä¼˜æƒ åˆ¸</span></span>
<span id="cb7-2">chat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å¸®æˆ‘é¢†å–æ‰€æœ‰å¯ç”¨çš„ä¼˜æƒ åˆ¸ã€‚"</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>æš‚æ— å¯é¢†å–çš„ä¼˜æƒ åˆ¸ã€‚å·²é¢†å–çš„åˆ¸å¯ç»§ç»­ä½¿ç”¨ã€‚</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æŸ¥çœ‹æ‚¨çš„ä¼˜æƒ åˆ¸</span></span>
<span id="cb9-2">chat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ˜¾ç¤ºæˆ‘ç›®å‰æ‰€æœ‰çš„ä¼˜æƒ åˆ¸ã€‚"</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>æ‚¨ç›®å‰æœ‰ **12 å¼ å¯ç”¨ä¼˜æƒ åˆ¸**ï¼ˆç¬¬1/1é¡µï¼‰ï¼š

1. **9.9å…ƒé‚£ä¹ˆå¤§é¸¡æ’** Â¥9.9 | è‡³2026-02-06 å‘¨1-5 | ä»Šæ—¥åˆ°æœŸï¼Œåˆ°åº—/å¤–é€
2. **6.9å…ƒç”œé…·ä»»é€‰** Â¥6.9 | è‡³2026-02-06 å‘¨1-5 | ä»Šæ—¥åˆ°æœŸï¼Œåˆ°åº—/å¤–é€
3. **13.5å…ƒä¸­è–¯æ¡ä¹°ä¸€é€ä¸€** Â¥13.5 | è‡³2026-02-06 å‘¨1-5 | ä»Šæ—¥åˆ°æœŸï¼Œåˆ°åº—/å¤–é€
4. **19.9å…ƒè¾£ç¿…æˆåŒ** Â¥19.9 | è‡³2026-02-06 å‘¨1-5 | ä»Šæ—¥åˆ°æœŸï¼Œåˆ°åº—/å¤–é€
5. **29.9å…ƒæ˜æ˜Ÿå ¡å ¡æ­** Â¥29.9 | è‡³2026-02-06 å‘¨1-5 | ä»Šæ—¥åˆ°æœŸï¼Œåˆ°åº—/å¤–é€
6. **9.9å…ƒå¤§è–¯æ¡** Â¥9.9 | è‡³2026-02-13 å‘¨1-5 | åˆ°åº—/å¤–é€
7. **9.9å…ƒæ–°æ´¾ç»„åˆ** Â¥9.9 | è‡³2026-02-13 å‘¨1-5 | åˆ°åº—/å¤–é€
8. **ç‹ç‰Œç‚¸é¸¡åŒæ‹¼ç›’** Â¥39.9 | è‡³2026-02-08 å‘¨å…­æ—¥ | åˆ°åº—/å¤–é€
9. **è¾£ç¿…æˆåŒ** Â¥19.9 | è‡³2026-02-08 å‘¨å…­æ—¥ | åˆ°åº—/å¤–é€
10. **è„†æ±é¸¡ä»»é€‰** Â¥9.9 | è‡³2026-02-08 å‘¨å…­æ—¥ | åˆ°åº—/å¤–é€
11. **åŒ—éè›‹é£å‘³éº¦æ»¡åˆ†** Â¥12.9 | è‡³2026-02-10 æ—©é—´ | åˆ°åº—
12. **åŒ—éè›‹é£å‘³éº¦æ»¡åˆ†ç‰¹æƒ ç»„åˆ** Â¥14.9 | è‡³2026-02-10 æ—©é—´ | åˆ°åº—</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æŸ¥è¯¢æ´»åŠ¨æ—¥å†</span></span>
<span id="cb11-2">chat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ¥ä¸‹æ¥çš„ 15 å¤©é‡Œæœ‰å“ªäº›ç²¾å½©æ´»åŠ¨ï¼Ÿ"</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>### æ¥ä¸‹æ¥15å¤©ï¼ˆ2026.2.7-2.20ï¼‰ç²¾å½©æ´»åŠ¨ï¼š

#### **2æœˆ7æ—¥ï¼ˆæ˜æ—¥ï¼‰**
- **é¢„çº¦éº¦é‡‘å–œæŠ½å¥–**ï¼šèµ¢å°é©¬å®è‰å¤§éº»å°†ç¤¼ç›’ï¼ˆ00:00å¼€å¯ï¼‰ã€‚
- **éº¦éº¦ç›–æ¯¯**ï¼š128å…ƒ+100ç§¯åˆ†è§£é”æš–å†¬ç›–æ¯¯ï¼ˆéº¦éº¦å•†åŸï¼‰ã€‚

#### **æŒç»­/è¿‘æœŸæ´»åŠ¨**ï¼ˆå¤šè‡³2.17ï¼‰
- **éº¦ä¹é¸¡ä¾ ç¦åˆ©**ï¼ˆ2.4-17ï¼‰ï¼šä¸‹å•éº¦ä¹é¸¡å¤‡æ³¨æƒŠå–œï¼Œèµ¢å°é£Ÿã€‚
- **éº¦loveæƒ…äººèŠ‚**ï¼ˆ2.4-15ï¼‰ï¼š5æ¬¾å¡é¢ç¤¼å¡ï¼Œæ‹‰CPé€ç¤¼ã€‚
- **æ–°æ˜¥é™å®šæ–°å“**ï¼šé‡‘æ‹±é—¨è™¾å ¡ã€é‡‘è èé¸¡æ‰’éº¦æ»¡åˆ†ã€é‡‘è¿ç³•å‡ç­‰ã€‚
- **éº¦éº¦çœä¼˜æƒ **ï¼š9.9é¸¡æ’/è–¯æ¡ã€19.9è¾£ç¿…ç­‰ï¼ˆå·²é¢†åˆ¸å¯ç”¨ï¼‰ã€‚
- **éé—ç¯ä¼š**ï¼šåŒ—äº¬/ä¸Šæµ·ç­‰åŸå¸‚æ‰“å¡ï¼Œé›†ç« èµ¢ç¤¼ã€‚
- **ä¸€ç¯ä¸€æ„¿å°ç¥¨**ï¼šAPP/è‡ªåŠ©æœºæ‰“å°å¿ƒæ„¿ç¯ç¥¨ã€‚

æ›´å¤šè¯¦æƒ…å¯æŸ¥éº¦å½“åŠ³APPæ´»åŠ¨é¡µï¼Œéƒ¨åˆ†é™æ—¶/åŒºåŸŸã€‚</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è·å–è¥å…»ä¿¡æ¯</span></span>
<span id="cb13-2">chat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å¸®æˆ‘è®¾è®¡ä¸€ä»½ 1000 å¡è·¯é‡Œçš„å¥—é¤ï¼ŒåŒ…å«ä¸€æ¯å«ç³–å¯ä¹ï¼Œä¸”ä»·æ ¼ä¸è¶…è¿‡ 30 å…ƒã€‚"</span>)</span></code></pre></div></div>
<div class="cell-output cell-output-stdout">
<pre><code>**æ¨è1000kcalå¥—é¤ï¼ˆæ€»ä»·â‰ˆ29å…ƒï¼Œä½¿ç”¨æ‚¨çš„ä¼˜æƒ åˆ¸ï¼‰ï¼š**

- **é‚£ä¹ˆå¤§é¸¡æ’**ï¼ˆ9.9å…ƒåˆ¸ï¼‰ï¼š385kcal
- **å¤§è–¯æ¡**ï¼ˆ9.9å…ƒåˆ¸ï¼‰ï¼š379kcal
- **å¯ä¹ä¸­æ¯**ï¼ˆå•ç‚¹â‰ˆ10å…ƒï¼‰ï¼š147kcal

**æ€»çƒ­é‡**ï¼š911kcalï¼ˆæ¥è¿‘1000kcalï¼Œæ­é…åº—å†…å…è´¹è‹¹æœç‰‡+32kcalè¾¾943kcalï¼‰  
**æ€»ä»·æ ¼**ï¼š29å…ƒä»¥å†…ï¼Œåˆ°åº—/å¤–é€å¯ç”¨ï¼ˆä»Šæ—¥åˆ¸æœ‰æ•ˆï¼‰ã€‚è¥å…»å‡è¡¡ï¼Œä¸»é£Ÿ+ç¢³æ°´+é¥®å“ã€‚</code></pre>
</div>
</div>
</section>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<p>ç¼–è¾‘é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>.gemini/settings.json</code> æˆ–å…¨å±€é…ç½®æ–‡ä»¶ <code>~/.gemini/settings.json</code>ï¼š</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb15-2">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"mcpServers"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb15-3">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"mcd-mcp"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb15-4">      <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"url"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://mcp.mcd.cn/mcp-servers/mcd-mcp"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb15-5">      <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"headers"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb15-6">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"Authorization"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bearer Your-Token"</span></span>
<span id="cb15-7">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb15-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb15-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb15-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
</div>
<div id="tabset-1-3" class="tab-pane" aria-labelledby="tabset-1-3-tab">
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºæˆ–ç¼–è¾‘ <code>.mcp.json</code>ï¼š</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb16-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb16-2">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"mcpServers"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb16-3">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"mcd-mcp"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb16-4">      <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"type"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"http"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb16-5">      <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"url"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://mcp.mcd.cn/mcp-servers/mcd-mcp"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb16-6">      <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"headers"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb16-7">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"Authorization"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bearer Your-Token"</span></span>
<span id="cb16-8">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb16-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb16-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb16-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
</div>
</div>
</div>


<!-- -->

</section>
</section>

 ]]></description>
  <category>AI</category>
  <category>MCP</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/mcdonald_mcp/</guid>
  <pubDate>Thu, 05 Feb 2026 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/mcdonald_mcp/images/0.png" medium="image" type="image/png" height="99" width="144"/>
</item>
<item>
  <title>AI è£åˆ¤ (AI Judge)</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/AI judge/</link>
  <description><![CDATA[ 





<p>ä½¿ç”¨ä¸‰ç§æ–¹æ³•å®ç° AI è£åˆ¤ (AI Judge) çš„ AI å·¥ä½œæµè¿‡ç¨‹ï¼š<strong>LangGraph</strong>ã€<strong>LangChain (LCEL)</strong> å’Œ <strong>n8n</strong>ï¼š</p>
<ul>
<li><ol type="1">
<li><strong>ç”¨æˆ·è¾“å…¥</strong>ï¼šæå‡ºä¸€ä¸ªé—®é¢˜ã€‚</li>
</ol></li>
<li><ol start="2" type="1">
<li><strong>æ¨¡å‹ A</strong>ï¼šç”Ÿæˆä¸€ä¸ªå›ç­”ã€‚</li>
</ol></li>
<li><ol start="3" type="1">
<li><strong>æ¨¡å‹ B</strong>ï¼šç”Ÿæˆä¸€ä¸ªå›ç­”ã€‚</li>
</ol></li>
<li><ol start="4" type="1">
<li><strong>æ¨¡å‹ C</strong>ï¼šç”Ÿæˆä¸€ä¸ªå›ç­”ã€‚</li>
</ol></li>
<li><ol start="5" type="1">
<li><strong>è£åˆ¤ (Judge)</strong>ï¼šå¯¹æ¯”è¿™ä¸‰ä¸ªå›ç­”ï¼Œå¹¶æä¾›è¯„åˆ†ï¼ˆ0-100ï¼‰å’Œè¯„è¯­ã€‚</li>
</ol></li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph TD
    Start([Start]) --&gt; ModelA[Model A]
    Start --&gt; ModelB[Model B]
    Start --&gt; ModelC[Model C]
    ModelA --&gt; Judge{AI Judge}
    ModelB --&gt; Judge
    ModelC --&gt; Judge
    Judge --&gt; End([End])
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true" href="">LangGraph</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false" href="">LangChain</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" aria-controls="tabset-1-3" aria-selected="false" href="">n8n</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<section id="è®¾ç½®ä¸ç¯å¢ƒ" class="level2">
<h2 class="anchored" data-anchor-id="è®¾ç½®ä¸ç¯å¢ƒ">1. è®¾ç½®ä¸ç¯å¢ƒ</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å¯¼å…¥å¿…è¦çš„åº“å¹¶åŠ è½½ API å¯†é’¥ã€‚æˆ‘ä»¬ç¡®ä¿ç¯å¢ƒä¸­å¯ä»¥ä½¿ç”¨ openrouterã€‚</p>
<div id="1c112194" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> typing <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> TypedDict, Annotated</span>
<span id="cb1-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langgraph.graph <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> StateGraph, END</span>
<span id="cb1-5"></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load environment variables from .env file</span></span>
<span id="cb1-7">load_dotenv()</span>
<span id="cb1-8"></span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Verify API Key</span></span>
<span id="cb1-10"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openrouter"</span>):</span>
<span id="cb1-11">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WARNING: openrouter not found in environment. Please check your .env file."</span>)</span>
<span id="cb1-12"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb1-13">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"API Key loaded successfully."</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>API Key loaded successfully.</code></pre>
</div>
</div>
</section>
<section id="åˆå§‹åŒ–æ¨¡å‹å®¢æˆ·ç«¯" class="level2">
<h2 class="anchored" data-anchor-id="åˆå§‹åŒ–æ¨¡å‹å®¢æˆ·ç«¯">2. åˆå§‹åŒ–æ¨¡å‹å®¢æˆ·ç«¯</h2>
<p>æˆ‘ä»¬å°†ä½¿ç”¨æ ‡å‡†çš„ openai Python å®¢æˆ·ç«¯ï¼Œä½†å°†å…¶æŒ‡å‘ OpenRouterã€‚</p>
<div id="8a9b92de" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb3-2"></span>
<span id="cb3-3">client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb3-4">    base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb3-5">    api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openrouter"</span>),</span>
<span id="cb3-6">)</span>
<span id="cb3-7"></span>
<span id="cb3-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> query_model(model_name: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, prompt: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, system_prompt: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>:</span>
<span id="cb3-9">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""Helper function to query an LLM via OpenRouter."""</span></span>
<span id="cb3-10">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb3-11">        messages <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb3-12">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> system_prompt:</span>
<span id="cb3-13">            messages.append({<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"system"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: system_prompt})</span>
<span id="cb3-14">        messages.append({<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: prompt})</span>
<span id="cb3-15">        </span>
<span id="cb3-16">        response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.chat.completions.create(</span>
<span id="cb3-17">          extra_headers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb3-18">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HTTP-Referer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://ai_chatbot.github.io/"</span>,  </span>
<span id="cb3-19">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-Title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI Judge langgraph"</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Your app's display name</span></span>
<span id="cb3-20">            },</span>
<span id="cb3-21">            model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model_name,</span>
<span id="cb3-22">            messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>messages,</span>
<span id="cb3-23">        )</span>
<span id="cb3-24">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content</span>
<span id="cb3-25">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb3-26">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Error calling </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>model_name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>e<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span></code></pre></div></div>
</details>
</div>
</section>
<section id="å®šä¹‰çŠ¶æ€-state" class="level2">
<h2 class="anchored" data-anchor-id="å®šä¹‰çŠ¶æ€-state">3. å®šä¹‰çŠ¶æ€ (State)</h2>
<p>åœ¨ LangGraph ä¸­ï¼Œ<strong>çŠ¶æ€ (State)</strong> æ˜¯åœ¨èŠ‚ç‚¹ä¹‹é—´ä¼ é€’çš„å…±äº«æ•°æ®ç»“æ„ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çš„çŠ¶æ€è·Ÿè¸ªé—®é¢˜ã€æ‰€æœ‰å›ç­”ä»¥åŠæœ€ç»ˆçš„è¯„åˆ¤ç»“æœã€‚</p>
<div id="439d9763" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> JudgeState(TypedDict):</span>
<span id="cb4-2">    question: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span></span>
<span id="cb4-3">    answer_a: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span></span>
<span id="cb4-4">    answer_b: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span></span>
<span id="cb4-5">    answer_c: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span></span>
<span id="cb4-6">    judgment: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span></span></code></pre></div></div>
</details>
</div>
</section>
<section id="å®šä¹‰èŠ‚ç‚¹-nodes" class="level2">
<h2 class="anchored" data-anchor-id="å®šä¹‰èŠ‚ç‚¹-nodes">4. å®šä¹‰èŠ‚ç‚¹ (Nodes)</h2>
<p>æˆ‘ä»¬ä¸ºå›¾å®šä¹‰äº†å››ä¸ªå…³é”®èŠ‚ç‚¹ï¼š1. <strong>æ¨¡å‹ A èŠ‚ç‚¹</strong>ï¼šå›ç­”é—®é¢˜ã€‚2. <strong>æ¨¡å‹ B èŠ‚ç‚¹</strong>ï¼šå›ç­”åŒä¸€ä¸ªé—®é¢˜ã€‚3. <strong>æ¨¡å‹ C èŠ‚ç‚¹</strong>ï¼šå›ç­”åŒä¸€ä¸ªé—®é¢˜ã€‚4. <strong>è£åˆ¤èŠ‚ç‚¹</strong>ï¼šåœ¨ä¸çŸ¥é“æ¨¡å‹åç§°çš„æƒ…å†µä¸‹ï¼Œå®¡æ ¸é—®é¢˜å’Œæ‰€æœ‰ä¸‰ä¸ªå›ç­”ã€‚</p>
<div id="a5769499" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Models</span></span>
<span id="cb5-2">MODEL_A <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-oss-20b"</span></span>
<span id="cb5-3">MODEL_B <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"deepseek/deepseek-v3.2"</span></span>
<span id="cb5-4">MODEL_C <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x-ai/grok-4.1-fast"</span></span>
<span id="cb5-5">MODEL_JUDGE <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"google/gemini-3-flash-preview"</span></span>
<span id="cb5-6"></span>
<span id="cb5-7"></span>
<span id="cb5-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> node_model_a(state: JudgeState) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> JudgeState:</span>
<span id="cb5-9">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""Query Model A"""</span></span>
<span id="cb5-10">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"--- Calling Model A ---"</span>)</span>
<span id="cb5-11">    system_msg <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"If you do not know the answer then reply I am not sure."</span></span>
<span id="cb5-12">    ans <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> query_model(MODEL_A, state[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"question"</span>], system_prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>system_msg)</span>
<span id="cb5-13">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_a"</span>: ans}</span>
<span id="cb5-14"></span>
<span id="cb5-15"></span>
<span id="cb5-16"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> node_model_b(state: JudgeState) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> JudgeState:</span>
<span id="cb5-17">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""Query Model B"""</span></span>
<span id="cb5-18">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"--- Calling Model B ---"</span>)</span>
<span id="cb5-19">    system_msg <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"If you do not know the answer then reply I am not sure."</span></span>
<span id="cb5-20">    ans <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> query_model(MODEL_B, state[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"question"</span>], system_prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>system_msg)</span>
<span id="cb5-21">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_b"</span>: ans}</span>
<span id="cb5-22"></span>
<span id="cb5-23"></span>
<span id="cb5-24"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> node_model_c(state: JudgeState) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> JudgeState:</span>
<span id="cb5-25">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""Query Model C"""</span></span>
<span id="cb5-26">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"--- Calling Model C ---"</span>)</span>
<span id="cb5-27">    system_msg <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"If you do not know the answer then reply I am not sure."</span></span>
<span id="cb5-28">    ans <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> query_model(MODEL_C, state[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"question"</span>], system_prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>system_msg)</span>
<span id="cb5-29">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_c"</span>: ans}</span>
<span id="cb5-30"></span>
<span id="cb5-31"></span>
<span id="cb5-32"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> node_judge(state: JudgeState) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> JudgeState:</span>
<span id="cb5-33">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""Query Judge Model"""</span></span>
<span id="cb5-34">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"--- Calling Judge ---"</span>)</span>
<span id="cb5-35"></span>
<span id="cb5-36">    prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"""</span></span>
<span id="cb5-37"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    You are an AI Judge. You will be presented with a question and three candidate answers (Model A, Model B, and Model C).</span></span>
<span id="cb5-38"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    Your task is to judge the quality of the answers without knowing which models produced them.</span></span>
<span id="cb5-39"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb5-40"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    Question: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>state[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'question'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-41"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb5-42"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    Answer A:</span></span>
<span id="cb5-43"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>state[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'answer_a'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-44"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb5-45"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    Answer B:</span></span>
<span id="cb5-46"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>state[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'answer_b'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-47"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb5-48"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    Answer C:</span></span>
<span id="cb5-49"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>state[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'answer_c'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-50"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb5-51"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    Task:</span></span>
<span id="cb5-52"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    1. Compare the three answers for accuracy, clarity, and completeness.</span></span>
<span id="cb5-53"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    2. format and length of the answers are not important, focus on content quality.</span></span>
<span id="cb5-54"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    3. Provide a short commentary.</span></span>
<span id="cb5-55"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    4. Assign a score from 0 to 100 for Model A, Model B, and Model C.</span></span>
<span id="cb5-56"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    5. Declare the overall winner.</span></span>
<span id="cb5-57"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb5-58"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    Output Format:</span></span>
<span id="cb5-59"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    Commentary: &lt;text&gt;</span></span>
<span id="cb5-60"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    Winner: &lt;Model A, Model B, or Model C&gt;</span></span>
<span id="cb5-61"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    Score A: &lt;number&gt;</span></span>
<span id="cb5-62"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    Score B: &lt;number&gt;</span></span>
<span id="cb5-63"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    Score C: &lt;number&gt;</span></span>
<span id="cb5-64"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    """</span></span>
<span id="cb5-65"></span>
<span id="cb5-66">    judgment <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> query_model(MODEL_JUDGE, prompt)</span>
<span id="cb5-67">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"judgment"</span>: judgment}</span></code></pre></div></div>
</details>
</div>
</section>
<section id="æ„å»ºå›¾-graph" class="level2">
<h2 class="anchored" data-anchor-id="æ„å»ºå›¾-graph">5. æ„å»ºå›¾ (Graph)</h2>
<p>ç°åœ¨æˆ‘ä»¬é€šè¿‡æ·»åŠ èŠ‚ç‚¹å’Œå®šä¹‰æµï¼ˆè¾¹ Edgesï¼‰æ¥ç»„è£…å›¾ã€‚æ¨¡å‹ Aã€æ¨¡å‹ B å’Œæ¨¡å‹ C å°†<strong>ç‹¬ç«‹ä¸”å¹¶è¡Œ</strong>è¿è¡Œï¼Œç„¶åç”±è£åˆ¤è¿›è¡Œè¯„åˆ¤ã€‚</p>
<div id="9fd17633" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langgraph.graph <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> START</span>
<span id="cb6-2"></span>
<span id="cb6-3">workflow <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> StateGraph(JudgeState)</span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add nodes</span></span>
<span id="cb6-6">workflow.add_node(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model_a"</span>, node_model_a)</span>
<span id="cb6-7">workflow.add_node(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model_b"</span>, node_model_b)</span>
<span id="cb6-8">workflow.add_node(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model_c"</span>, node_model_c)</span>
<span id="cb6-9">workflow.add_node(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"judge"</span>, node_judge)</span>
<span id="cb6-10"></span>
<span id="cb6-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Parallel flow: START -&gt; A &amp; B &amp; C -&gt; Judge -&gt; </span><span class="re">END</span></span>
<span id="cb6-12">workflow.add_edge(START, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model_a"</span>)</span>
<span id="cb6-13">workflow.add_edge(START, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model_b"</span>)</span>
<span id="cb6-14">workflow.add_edge(START, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model_c"</span>)</span>
<span id="cb6-15">workflow.add_edge(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model_a"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"judge"</span>)</span>
<span id="cb6-16">workflow.add_edge(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model_b"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"judge"</span>)</span>
<span id="cb6-17">workflow.add_edge(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model_c"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"judge"</span>)</span>
<span id="cb6-18">workflow.add_edge(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"judge"</span>, END)</span>
<span id="cb6-19"></span>
<span id="cb6-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Compile the graph</span></span>
<span id="cb6-21">app <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> workflow.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">compile</span>()</span></code></pre></div></div>
</details>
</div>
</section>
<section id="æ‰§è¡Œ" class="level2">
<h2 class="anchored" data-anchor-id="æ‰§è¡Œ">6. æ‰§è¡Œ</h2>
<p>æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç¤ºä¾‹é—®é¢˜è¿è¡Œè¯¥å·¥ä½œæµã€‚</p>
<div id="b2104e76" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">input_question <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Will AI take over the world in the next 50 years?"</span></span>
<span id="cb7-2"></span>
<span id="cb7-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Initialize state</span></span>
<span id="cb7-4">initial_state <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"question"</span>: input_question}</span>
<span id="cb7-5"></span>
<span id="cb7-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run the graph</span></span>
<span id="cb7-7">result <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> app.invoke(initial_state)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>--- Calling Model A ---
--- Calling Model B ---
--- Calling Model C ---
--- Calling Judge ---</code></pre>
</div>
</div>
<div id="e6869bcf" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Display Results</span></span>
<span id="cb9-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"="</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>)</span>
<span id="cb9-3"></span>
<span id="cb9-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"QUESTION: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>result[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'question'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb9-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"="</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
========================================
QUESTION: Will AI take over the world in the next 50 years?
========================================</code></pre>
</div>
</div>
<section id="æ¨¡å‹-a" class="level3">
<h3 class="anchored" data-anchor-id="æ¨¡å‹-a">æ¨¡å‹ A</h3>
<div id="840e69dc" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(MODEL_A)</span>
<span id="cb11-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">[Model A ]:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>result<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'answer_a'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'No response'</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>) </span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>openai/gpt-oss-20b

[Model A ]:
Itâ€™s a question that gets a lot of speculation, but most experts would agree that an AI â€œtaking over the worldâ€ in the sense of a single autonomous entity controlling governments, economies, or everyday life is highly unlikely within the next 50â€¯years. Hereâ€™s why:

| Factor | Current reality | 50â€‘year outlook | Why the scenario is unlikely |
|--------|-----------------|-----------------|------------------------------|
| **Technical state of AI** | Narrow AI (deep learning, NLP, etc.) excels at specific tasks but lacks general commonâ€‘sense reasoning, selfâ€‘reflexive goals, or longâ€‘term planning. | Incremental progress toward more general but still domainâ€‘specific systems (e.g., multimodal, fewâ€‘shot learning). | No evidence of a system that can autonomously redesign itself, acquire resources, or outâ€‘maneuver human governance. |
| **Hardware limits** | Massive GPUs and specialized accelerators enable scaling but also tie performance to cost and energy consumption. | Advances in silicon, photonic processors, and quantum hardware might increase raw speed, yet training and inference for a true â€œworldâ€‘dominatingâ€ agent would still require astronomical data and power. | Even exascale computing would be dwarfed by the computational demands of globalâ€‘scale autonomous control. |
| **Data and knowledge** | Models are only as good as the curated data theyâ€™re trained on. Openâ€‘world reasoning is a problemâ€”AI can hallucinate or misinterpret new contexts. | Improvements in continual learning, selfâ€‘supervised signals, and large knowledge graphs may reduce gaps, but the universe is too vast for any single model to master. | Lack of comprehensive, upâ€‘toâ€‘date, contextâ€‘rich data hinders a truly autonomous agent from operating worldwide. |
| **Safety &amp; governance** | Research on alignment, interpretability, and failâ€‘safe mechanisms is fast growing; many organizations set up oversight boards and openâ€‘source safety modules. | Regulatory frameworks (e.g., EU AI Act, US federal agencies) will likely enforce riskâ€‘assessment, certification, and transparency for highâ€‘impact systems. | Regulatory, technical, and cultural pushes make it difficult for an unverified AI to â€œtake overâ€ undetected. |
| **Human control** | Current deployment is tightly coupled to human objectives: APIs, fineâ€‘tuning, and manual oversight. | Even as generalâ€‘intelligence benchmarks approach, humanâ€‘inâ€‘theâ€‘loop systems will remain standard in critical domains (healthcare, finance, autonomous vehicles). | Most sectors will continue to rely on hybrid humanâ€‘AI systems, limiting the chance for complete autonomous governance. |
| **Economic &amp; political dynamics** | AI innovations are commercial, funded by incumbents, and subject to market incentives. | Policy makers and civil society are increasingly active in shaping AI norms, with a focus on equity, privacy, and security. | The political will to allow a single AI entity to dominate would be resisted by multiple stakeholders. |

### What â€œtaking overâ€ would actually require
1. **General-purpose intelligence** with selfâ€‘directed objectives.  
2. **Access to physical resources** (energy, infrastructure).  
3. **Survival incentives** that override human safety constraints.  
4. **Strategic capabilities** to influence or bypass human institutions.

None of these exist today, and each is a major research milestone that carries significant technical, ethical, and legal barriers.

### The more realistic future
In five decades we are likely to see:
* **Better generalization** across domains, but still heavily guided by human intent.  
* **Robust safety protocols**, explainability dashboards, and audit trails.  
* **Global norms** (e.g., AI safety treaties) that constrain unchecked deployment.  
* **Distributed AI ecosystems**â€”many large, specialized systems operating under shared standards, not a single overseer.

### Bottom line
While itâ€™s prudent to treat AI as a powerful tool that must be governed responsibly, the notion that a single AI will â€œtake over the worldâ€ in the next 50 years is, given current knowledge and trends, highly improbable. Itâ€™s more realistic to focus on managing the societal, economic, and policy impacts of increasingly capable AI systems than on a dystopian domination scenario.</code></pre>
</div>
</div>
</section>
<section id="æ¨¡å‹-b" class="level3">
<h3 class="anchored" data-anchor-id="æ¨¡å‹-b">æ¨¡å‹ B</h3>
<div id="9e6891f4" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(MODEL_B)</span>
<span id="cb13-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">[Model B ]:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>result<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'answer_b'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'No response'</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb13-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"="</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>deepseek/deepseek-v3.2

[Model B ]:
That's one of the most debated questions of our time. The short answer is: **It's highly unlikely that AI will "take over the world" in a Hollywood-style robot apocalypse within 50 years, but it will almost certainly transform it in profound, disruptive, and potentially dangerous ways.**

Hereâ€™s a breakdown of the key perspectives and what "take over" could actually mean:

### 1. The "Takeover" Scenarios (Why People Worry)
*   **Loss of Control (Alignment Problem):** The core fear is that we might create a superintelligent AI (far surpassing human intelligence) whose goals are not perfectly aligned with human survival and flourishing. If such an AI were to pursue a poorly specified goal (e.g., "make paperclips"), it could treat humans as obstacles or resources.
*   **Economic and Structural Takeover:** A more plausible near-term "takeover" is economic. AI could automate a vast number of jobs, not just manual labor but also creative and cognitive work. This could lead to massive economic displacement, increased inequality, and a shift in power to those who control the AI systems.
*   **Autonomous Weapons:** The use of AI in warfare (lethal autonomous weapons or "killer robots") could lead to new forms of conflict and accidental escalation, effectively letting algorithms make life-and-death decisions.
*   **Informational and Social Control:** AI is already used for hyper-targeted propaganda, deepfakes, and social manipulation. This could erode democracy, truth, and social cohesion, allowing those in control of the technology to wield immense soft power.

### 2. The Counterarguments (Why a Hostile Takeover is Unlikely)
*   **Narrow vs. General Intelligence:** Today's AI (including large language models like me) is **narrow AI**â€”extraordinarily capable at specific tasks but lacking understanding, consciousness, or general-purpose reasoning. Creating Artificial General Intelligence (AGI) is a monumental, unsolved scientific challenge. 50 years is a long time in tech, but there's no guarantee AGI will be achieved.
*   **Control and Safety Research:** The field of AI alignment and safety is growing rapidly. Many of the world's top AI labs consider controlling superintelligent AI their primary research problem.
*   **Human Governance:** AI doesn't exist in a vacuum. Laws, regulations, international treaties, and corporate policies will be developed to manage its risks (just as we did for nuclear power, biotechnology, etc.). The outcome will depend heavily on human political and ethical choices.

### 3. The More Probable Reality (Next 50 Years)
The next five decades will likely be defined not by a single hostile AI, but by:
*   **Ubiquitous Integration:** AI will become like electricityâ€”an invisible, essential utility powering everything from healthcare (personalized medicine) and science (drug discovery, climate modeling) to entertainment and transportation.
*   **The Partnership Model:** The most productive path is **human-AI collaboration**. AI will augment human capabilities, helping us solve complex problems like disease and climate change, while humans provide oversight, creativity, and ethical judgment.
*   **Major Societal Challenges:** The biggest threats won't be sentient robots, but:
    *   **Job Disruption:** We may need to radically rethink concepts like work, income, and purpose.
    *   **Bias and Fairness:** AI systems can perpetuate and amplify societal biases.
    *   **Concentration of Power:** The risk of a few corporations or governments controlling world-leading AI.
    *   **Existential Risk from Misuse:** Even without malice, advanced AI could be catastrophically misused by humans (e.g., in engineered pandemics or cyber warfare).

**Conclusion:**
Instead of a **"takeover,"** think of a **"handover."** We are increasingly handing over decisionsâ€”from what news we see to medical diagnoses to financial tradesâ€”to AI systems. The critical question for the next 50 years is not *"Will AI become our master?"* but ***"How can we build and govern AI so that it remains a powerful tool for the benefit of all humanity, and how do we adapt our societies to the immense changes it will bring?"***

The future isn't pre-written. It will be shaped by the research, policies, and ethical frameworks we develop **today.**
========================================</code></pre>
</div>
</div>
</section>
<section id="æ¨¡å‹-c" class="level3">
<h3 class="anchored" data-anchor-id="æ¨¡å‹-c">æ¨¡å‹ C</h3>
<div id="f2742286" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(MODEL_C)</span>
<span id="cb15-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">[Model C ]:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>result<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'answer_c'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'No response'</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb15-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"="</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>x-ai/grok-4.1-fast

[Model C ]:
I am not sure.
========================================</code></pre>
</div>
</div>
</section>
<section id="è£åˆ¤æ¨¡å‹-model-judge" class="level3">
<h3 class="anchored" data-anchor-id="è£åˆ¤æ¨¡å‹-model-judge">è£åˆ¤æ¨¡å‹ (Model JUDGE)</h3>
<div id="fd136850" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">&gt;&gt;&gt; JUDGE'S VERDICT &lt;&lt;&lt;"</span>)</span>
<span id="cb17-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MODEL_A:"</span>)</span>
<span id="cb17-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(MODEL_A)</span>
<span id="cb17-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MODEL_B:"</span>)</span>
<span id="cb17-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(MODEL_B)</span>
<span id="cb17-6"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MODEL_C:"</span>)</span>
<span id="cb17-7"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(MODEL_C)</span>
<span id="cb17-8"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MODEL_JUDGE:"</span>)</span>
<span id="cb17-9"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(MODEL_JUDGE)</span>
<span id="cb17-10"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"====="</span>)</span>
<span id="cb17-11"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(result[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"judgment"</span>])</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
&gt;&gt;&gt; JUDGE'S VERDICT &lt;&lt;&lt;
MODEL_A:
openai/gpt-oss-20b
MODEL_B:
deepseek/deepseek-v3.2
MODEL_C:
x-ai/grok-4.1-fast
MODEL_JUDGE:
google/gemini-3-flash-preview
=====
Commentary: Model A and Model B both provide excellent, high-quality responses to a complex, speculative question. Model A uses a highly structured tabular format to break down the technical, hardware, and regulatory hurdles, providing a very grounded and logical assessment of why a total takeover is unlikely. Model B offers a slightly more nuanced discussion on the different definitions of a "takeover" (economic, informational, vs. Hollywood-style), which adds a layer of depth regarding the actual risks humanity faces. Both correctly identify the distinction between Narrow AI and AGI and discuss the importance of the alignment problem. Model C is unhelpful and fails to engage with the prompt. Model A is slightly more impressive due to its systematic breakdown of current vs. future states across multiple dimensions.

Winner: Model A

Score A: 95
Score B: 92
Score C: 5</code></pre>
</div>
</div>
</section>
</section>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<section id="è®¾ç½®ä¸ç¯å¢ƒ-1" class="level2">
<h2 class="anchored" data-anchor-id="è®¾ç½®ä¸ç¯å¢ƒ-1">1. è®¾ç½®ä¸ç¯å¢ƒ</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å¯¼å…¥å¿…è¦çš„åº“å¹¶åŠ è½½ API å¯†é’¥ã€‚æˆ‘ä»¬ç¡®ä¿ç¯å¢ƒä¸­å¯ä»¥ä½¿ç”¨ openrouterã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <code>langchain-openai</code> ä¸ OpenRouter è¿›è¡Œäº¤äº’ã€‚</p>
<div id="d5820d7a" class="cell" data-execution_count="12">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb19-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb19-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> ChatOpenAI</span>
<span id="cb19-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_core.prompts <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> ChatPromptTemplate</span>
<span id="cb19-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_core.runnables <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> RunnableParallel, RunnablePassthrough</span>
<span id="cb19-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_core.output_parsers <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> StrOutputParser</span>
<span id="cb19-7"></span>
<span id="cb19-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load environment variables from .env file</span></span>
<span id="cb19-9">load_dotenv()</span>
<span id="cb19-10"></span>
<span id="cb19-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Verify API Key</span></span>
<span id="cb19-12"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openrouter"</span>):</span>
<span id="cb19-13">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WARNING: openrouter not found in environment. Please check your .env file."</span>)</span>
<span id="cb19-14"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb19-15">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"API Key loaded successfully."</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>API Key loaded successfully.</code></pre>
</div>
</div>
</section>
<section id="åˆå§‹åŒ–æ¨¡å‹" class="level2">
<h2 class="anchored" data-anchor-id="åˆå§‹åŒ–æ¨¡å‹">2. åˆå§‹åŒ–æ¨¡å‹</h2>
<p>æˆ‘ä»¬å°†åˆå§‹åŒ–æŒ‡å‘ OpenRouter çš„ä¸‰ä¸ªæ¨¡å‹å®ä¾‹ã€‚</p>
<div id="f6ad7234" class="cell" data-execution_count="13">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Models</span></span>
<span id="cb21-2">MODEL_A_NAME <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-oss-20b"</span></span>
<span id="cb21-3">MODEL_B_NAME <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"deepseek/deepseek-v3.2"</span></span>
<span id="cb21-4">MODEL_C_NAME <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x-ai/grok-4.1-fast"</span></span>
<span id="cb21-5">MODEL_JUDGE_NAME <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"google/gemini-3-flash-preview"</span></span>
<span id="cb21-6"></span>
<span id="cb21-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_model(model_name: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>):</span>
<span id="cb21-8">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> ChatOpenAI(</span>
<span id="cb21-9">        model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model_name,</span>
<span id="cb21-10">        api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openrouter"</span>),</span>
<span id="cb21-11">        base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb21-12">        default_headers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb21-13">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HTTP-Referer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://ai_chatbot.github.io/"</span>,</span>
<span id="cb21-14">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-Title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI Judge LangChain"</span>,</span>
<span id="cb21-15">        }</span>
<span id="cb21-16">    )</span>
<span id="cb21-17"></span>
<span id="cb21-18">model_a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_model(MODEL_A_NAME)</span>
<span id="cb21-19">model_b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_model(MODEL_B_NAME)</span>
<span id="cb21-20">model_c <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_model(MODEL_C_NAME)</span>
<span id="cb21-21">model_judge <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_model(MODEL_JUDGE_NAME)</span></code></pre></div></div>
</details>
</div>
</section>
<section id="å®šä¹‰é“¾-chains-ä¸å·¥ä½œæµ" class="level2">
<h2 class="anchored" data-anchor-id="å®šä¹‰é“¾-chains-ä¸å·¥ä½œæµ">3. å®šä¹‰é“¾ (Chains) ä¸å·¥ä½œæµ</h2>
<p>ä½¿ç”¨ LangChain è¡¨è¾¾å¼è¯­è¨€ (LCEL)ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®šä¹‰å¹¶è¡Œæ‰§è¡Œå’Œé¡ºåºæ­¥éª¤ã€‚</p>
<div id="f71e00b7" class="cell" data-execution_count="14">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Step 1: Query models in parallel</span></span>
<span id="cb22-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># We use RunnableParallel to run model_a, model_b, and model_c at the same time.</span></span>
<span id="cb22-3">system_prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"If you do not know the answer then reply I am not sure."</span></span>
<span id="cb22-4">prompt_template <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ChatPromptTemplate.from_messages([</span>
<span id="cb22-5">    (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"system"</span>, system_prompt),</span>
<span id="cb22-6">    (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{question}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb22-7">])</span>
<span id="cb22-8"></span>
<span id="cb22-9">parallel_responses <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> RunnableParallel(</span>
<span id="cb22-10">    answer_a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(prompt_template <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> model_a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> StrOutputParser()),</span>
<span id="cb22-11">    answer_b<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(prompt_template <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> model_b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> StrOutputParser()),</span>
<span id="cb22-12">    answer_c<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(prompt_template <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> model_c <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> StrOutputParser()),</span>
<span id="cb22-13">    question<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>RunnablePassthrough()</span>
<span id="cb22-14">)</span>
<span id="cb22-15"></span>
<span id="cb22-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Step 2: Define the Judge Prompt</span></span>
<span id="cb22-17">judge_prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ChatPromptTemplate.from_template(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"""</span></span>
<span id="cb22-18"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    You are an AI Judge. You will be presented with a question and three candidate answers (Model A, Model B, and Model C).</span></span>
<span id="cb22-19"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    Your task is to judge the quality of the answers.</span></span>
<span id="cb22-20"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb22-21"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    Question: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{question}</span></span>
<span id="cb22-22"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb22-23"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    Answer A:</span></span>
<span id="cb22-24"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{answer_a}</span></span>
<span id="cb22-25"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb22-26"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    Answer B:</span></span>
<span id="cb22-27"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{answer_b}</span></span>
<span id="cb22-28"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb22-29"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    Answer C:</span></span>
<span id="cb22-30"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{answer_c}</span></span>
<span id="cb22-31"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb22-32"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    Task:</span></span>
<span id="cb22-33"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    1. Compare the three answers for accuracy, clarity, and completeness.</span></span>
<span id="cb22-34"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    2. format and length of the answers are not important, focus on content quality.</span></span>
<span id="cb22-35"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    3. Provide a short commentary.</span></span>
<span id="cb22-36"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    4. Assign a score from 0 to 100 for Model A, Model B, and Model C.</span></span>
<span id="cb22-37"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    5. Declare the overall winner.</span></span>
<span id="cb22-38"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    </span></span>
<span id="cb22-39"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    Output Format:</span></span>
<span id="cb22-40"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    Commentary: &lt;text&gt;</span></span>
<span id="cb22-41"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    Winner: &lt;Model A or Model B or Model C&gt;</span></span>
<span id="cb22-42"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    Score A: &lt;number&gt;</span></span>
<span id="cb22-43"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    Score B: &lt;number&gt;</span></span>
<span id="cb22-44"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    Score C: &lt;number&gt;</span></span>
<span id="cb22-45"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"""</span>)</span>
<span id="cb22-46"></span>
<span id="cb22-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Step 3: Combine everything into a full chain</span></span>
<span id="cb22-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># The output of parallel_responses is a dict, which matches the input expected by judge_prompt</span></span>
<span id="cb22-49">full_chain <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> parallel_responses <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> {</span>
<span id="cb22-50">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"judgment"</span>: judge_prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> model_judge <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> StrOutputParser(),</span>
<span id="cb22-51">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_a"</span>: <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">lambda</span> x: x[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_a"</span>],</span>
<span id="cb22-52">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_b"</span>: <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">lambda</span> x: x[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_b"</span>],</span>
<span id="cb22-53">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_c"</span>: <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">lambda</span> x: x[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_c"</span>],</span>
<span id="cb22-54">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"question"</span>: <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">lambda</span> x: x[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"question"</span>]</span>
<span id="cb22-55">}</span></code></pre></div></div>
</details>
</div>
</section>
<section id="æ‰§è¡Œ-1" class="level2">
<h2 class="anchored" data-anchor-id="æ‰§è¡Œ-1">4. æ‰§è¡Œ</h2>
<p>æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç¤ºä¾‹é—®é¢˜è¿è¡Œè¯¥é“¾ã€‚</p>
<div id="a0f42c16" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1">input_question <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"What is the AI advantage of using transformer architectures over traditional RNNs in natural language processing tasks?"</span></span>
<span id="cb23-2"></span>
<span id="cb23-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"--- Running Workflow for Question: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>input_question<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> ---"</span>)</span>
<span id="cb23-4"></span>
<span id="cb23-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Execute the chain</span></span>
<span id="cb23-6">result <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> full_chain.invoke({<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"question"</span>: input_question})</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>--- Running Workflow for Question: What is the AI advantage of using transformer architectures over traditional RNNs in natural language processing tasks? ---</code></pre>
</div>
</div>
</section>
<section id="æ˜¾ç¤ºç»“æœ" class="level2">
<h2 class="anchored" data-anchor-id="æ˜¾ç¤ºç»“æœ">5. æ˜¾ç¤ºç»“æœ</h2>
<div id="ed5b3613" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"="</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>)</span>
<span id="cb25-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"QUESTION: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>result[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'question'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb25-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"="</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
========================================
QUESTION: {'question': 'What is the AI advantage of using transformer architectures over traditional RNNs in natural language processing tasks?'}
========================================</code></pre>
</div>
</div>
<section id="æ¨¡å‹-a-1" class="level3">
<h3 class="anchored" data-anchor-id="æ¨¡å‹-a-1">æ¨¡å‹ A</h3>
<div id="26eab7cf" class="cell" data-execution_count="17">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"MODEL: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>MODEL_A_NAME<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb27-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">[Model A]:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>result<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'answer_a'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'No response'</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>) </span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>MODEL: openai/gpt-oss-20b

[Model A]:
**Transformers versus traditional RNNs**  
In naturalâ€‘language processing (NLP) the shift from recurrent neural networks (RNNs) and their gated cousins (LSTMs/GRUs) to transformerâ€‘style architectures has become foundational.  The key AI advantages of transformers are rooted in the way they **represent, process, and learn from text**:

| Feature | How Transformers do it | Why it matters over RNNs |
|---------|------------------------|--------------------------|
| **Parallelization** | Selfâ€‘attention applies to all tokens in a sequence *simultaneously* (batchwise). | RNNs process tokens one after another; this sequential bottleneck limits GPU utilisation and slows both training and inference. |
| **Capturing longâ€‘range dependencies** | Each token attends to every other token â€“ weighting nearby and farâ€‘away words equally. | RNNs suffer from vanishing/ exploding gradients and struggle to propagate signals over long distances; transformers break this barrier naturally. |
| **Memoryâ€‘friendly gradients** | Layerâ€‘norm, residuals, and attention gradients flow easily, avoiding the need for careful gating mechanisms. | RNNs require gating (LSTM/GRU) to mitigate gradients, yet tuning them is delicate, especially with long sequences. |
| **Scalable preâ€‘training &amp; transfer learning** | Layerâ€‘wise transformer blocks can be stacked to huge depths; largeâ€‘scale unsupervised architectures such as BERT, GPT, T5 can be fineâ€‘tuned for downstream tasks. | RNNâ€‘based models generally have not reached the same scale or generic transferability. |
| **Interpretability of attention** | Attention weights provide a view of what the model deems important as it processes each token. | RNNs do not give an explicit, interpretable alignment between inputs and outputs. |
| **Better handling of varied sequence length** | Position encodings (learned or sinusoidal) give absolute context, enabling transformers to process very short or very long sentences without structural alterations. | RNNs need separate architectures for bidirectional or unidirectional contexts; long sequences make training unstable. |
| **Efficient inference in practice** | Beamâ€‘search decoding or caching in transformers (e.g. for GPT) can reuse past key/value matrices across time steps. | RNNs recompute hidden states at each step; caching is nonâ€‘trivial. |
| **Architectural simplicity** | Transformers consist mainly of linear layers, attention heads, and feedâ€‘forward networks; no recurrent loops. | Less algorithmic complexity and fewer hyperâ€‘parameters to tweak for longâ€‘term dependencies. |

### Concrete results

| NLP task | Transformer stateâ€‘ofâ€‘theâ€‘art | RNNâ€‘based performance (historical) |
|---------|-----------------------------|-----------------------------------|
| Machine translation (Enâ†’De) | 0.93 BLEU (mBART, T5) | 0.75 BLEU (LSTM + attention) |
| Question answering (SQuAD2.0) | 90â€¯% Exact Match | 70â€¯% |
| Language modelling (perplexity on WikiTextâ€‘103) | 35 (GPTâ€‘2) | â‰ˆâ€¯70 (LSTM) |

These figures simply illustrate how transformative the architecture is on a wide spectrum of tasks.

---

## Bottom line

**Transformers provide a fundamentally different, highly parallel way to capture arbitrary global context with stable learning dynamics.**  This leads to superior performance across most NLP tasks, faster training and inference, and a versatile framework for largeâ€‘scale preâ€‘training that RNNs cannot match.</code></pre>
</div>
</div>
</section>
<section id="æ¨¡å‹-b-1" class="level3">
<h3 class="anchored" data-anchor-id="æ¨¡å‹-b-1">æ¨¡å‹ B</h3>
<div id="5d92ca91" class="cell" data-execution_count="18">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"MODEL: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>MODEL_B_NAME<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb29-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">[Model B]:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>result<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'answer_b'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'No response'</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb29-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"="</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>MODEL: deepseek/deepseek-v3.2

[Model B]:
Of course. Hereâ€™s a clear breakdown of the key AI advantages of Transformer architectures over traditional RNNs (like LSTMs and GRUs) in NLP tasks.

The core difference is that **Transformers process all words in a sequence simultaneously** and use a **self-attention mechanism** to understand contextual relationships, whereas RNNs process words sequentially and struggle with long-range dependencies.

### Key Advantages of Transformers:

1.  **Parallelization &amp; Speed:** RNNs are inherently sequentialâ€”they must compute step-by-step, making them slow on modern hardware (GPUs/TPUs). Transformers process all tokens in a sequence in parallel, leading to vastly faster training times.

2.  **Long-Range Dependency Handling:** RNNs suffer from the "vanishing gradient" problem, making it hard to learn relationships between distant words. Transformers' self-attention mechanism can directly connect any two words in the sequence, regardless of distance, with a constant number of operations. This is crucial for tasks like document understanding or long-form text generation.

3.  **Superior Contextual Understanding via Self-Attention:** Self-attention allows each word to directly attend to all other words in the sequence, weighing their importance. This creates richer, more nuanced contextual embeddings than RNNs, which compress past information into a single hidden state.

4.  **Scalability with Model Size:** Because of parallelization, Transformers can be scaled up dramatically (more layers, larger hidden dimensions) to create massive models (like GPT and BERT). This scaling has been empirically shown to lead to consistently better performance. RNNs become prohibitively slow and unstable as they grow deeper.

5.  **Effectiveness on Modern Hardware:** Transformers are dominated by matrix multiplications, which are perfectly suited for acceleration on GPUs/TPUs. RNNs' sequential nature underutilizes this hardware.

### Where Traditional RNNs Might Still Have a Niche:
- **Streaming/Online Tasks:** For tasks where input arrives in a continuous, real-time stream (e.g., real-time speech processing), RNNs can process data incrementally without a fixed sequence length, while standard Transformers require a pre-defined context window.
- **Extremely Low-Resource Environments:** Very small RNNs can be more efficient for simple tasks where massive contextual understanding isn't needed.

**In summary, Transformers replaced RNNs as the dominant architecture in NLP because their ability to process information in parallel and model long-range dependencies directly led to **faster training, more powerful models, and significantly better performance** across almost all benchmark tasks.** The rise of large language models (LLMs) is fundamentally a result of the Transformer's scalable architecture.
========================================</code></pre>
</div>
</div>
</section>
<section id="æ¨¡å‹-c-1" class="level3">
<h3 class="anchored" data-anchor-id="æ¨¡å‹-c-1">æ¨¡å‹ C</h3>
<div id="e3041ff2" class="cell" data-execution_count="19">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"MODEL: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>MODEL_C_NAME<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb31-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">[Model C]:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>result<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'answer_c'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'No response'</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb31-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"="</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">40</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>MODEL: x-ai/grok-4.1-fast

[Model C]:
**Key AI advantages of Transformer architectures over traditional RNNs (e.g., LSTMs or GRUs) in NLP tasks:**

- **Parallel Processing**: Transformers use self-attention to process entire sequences (all tokens) simultaneously, enabling massive parallelization on GPUs/TPUs. RNNs process tokens sequentially (one timestep at a time), leading to slower training and inference, especially for long sequences.

- **Superior Handling of Long-Range Dependencies**: Self-attention mechanisms directly compute relationships between any pair of tokens, regardless of distance. RNNs struggle with this due to sequential information flow, causing "vanishing gradients" and forgetting distant context (even in improved variants like LSTMs).

- **Mitigation of Gradient Issues**: Transformers avoid recurrent connections, eliminating vanishing/exploding gradient problems during backpropagation through time (BPTT) in RNNs, allowing stable training on much longer sequences.

- **Scalability and Efficiency**: Transformers scale better with model size, data volume, and compute (e.g., via larger batch sizes and deeper layers). This has led to breakthroughs like BERT, GPT, and T5, outperforming RNNs on tasks like machine translation, summarization, and question answering.

- **Flexibility**: Positional encodings allow Transformers to handle variable-length inputs without state management, unlike RNNs which maintain hidden states.

**Empirical Evidence**: On benchmarks like GLUE or SQuAD, Transformers achieve 10-30%+ accuracy gains over RNN baselines, with training times reduced from days/weeks to hours for large datasets.

In summary, Transformers revolutionized NLP by trading recurrence for attention, enabling faster, more effective models for modern-scale data.
========================================</code></pre>
</div>
</div>
</section>
<section id="ai-è£åˆ¤ç»“è®º" class="level3">
<h3 class="anchored" data-anchor-id="ai-è£åˆ¤ç»“è®º">AI è£åˆ¤ç»“è®º</h3>
<div id="84e88517" class="cell" data-execution_count="20">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">&gt;&gt;&gt; JUDGE'S VERDICT &lt;&lt;&lt;"</span>)</span>
<span id="cb33-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"MODEL_A: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>MODEL_A_NAME<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb33-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"MODEL_B: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>MODEL_B_NAME<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb33-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"MODEL_C: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>MODEL_C_NAME<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb33-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"JUDGE:   </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>MODEL_JUDGE_NAME<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb33-6"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"====="</span>)</span>
<span id="cb33-7"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(result[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'judgment'</span>])</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
&gt;&gt;&gt; JUDGE'S VERDICT &lt;&lt;&lt;
MODEL_A: openai/gpt-oss-20b
MODEL_B: deepseek/deepseek-v3.2
MODEL_C: x-ai/grok-4.1-fast
JUDGE:   google/gemini-3-flash-preview
=====
Commentary: Model A provides the most comprehensive and high-quality response. It utilizes a tabular format that makes it easy to compare specific features and their impacts. It also includes concrete (though illustrative) performance metrics and addresses more nuanced advantages like interpretability and inference caching. Model B is also excellent, adding a thoughtful section on where RNNs might still be useful, providing a balanced perspective. Model C is a solid, standard technical summary but lacks the extra depth and formatting polish of the other two.

Winner: Model A

Score A: 96
Score B: 90
Score C: 82</code></pre>
</div>
</div>
</section>
</section>
</div>
<div id="tabset-1-3" class="tab-pane" aria-labelledby="tabset-1-3-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/AI judge/images/clipboard-1254380001.png" class="img-fluid"></p>
<section id="json-æ–‡ä»¶" class="level2">
<h2 class="anchored" data-anchor-id="json-æ–‡ä»¶">JSON æ–‡ä»¶</h2>
<div id="4a7745cf" class="cell" data-execution_count="21">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1">{</span>
<span id="cb35-2">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI Judge Workflow"</span>,</span>
<span id="cb35-3">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nodes"</span>: [</span>
<span id="cb35-4">    {</span>
<span id="cb35-5">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: {</span>
<span id="cb35-6">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"assignments"</span>: {</span>
<span id="cb35-7">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"assignments"</span>: [</span>
<span id="cb35-8">            {</span>
<span id="cb35-9">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"question-field"</span>,</span>
<span id="cb35-10">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"question"</span>,</span>
<span id="cb35-11">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"what is AI?"</span>,</span>
<span id="cb35-12">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"string"</span></span>
<span id="cb35-13">            }</span>
<span id="cb35-14">          ]</span>
<span id="cb35-15">        },</span>
<span id="cb35-16">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"options"</span>: {}</span>
<span id="cb35-17">      },</span>
<span id="cb35-18">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"30f77dc6-8e05-4ddb-8902-1638b09abe7b"</span>,</span>
<span id="cb35-19">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Set Question1"</span>,</span>
<span id="cb35-20">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n8n-nodes-base.set"</span>,</span>
<span id="cb35-21">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"typeVersion"</span>: <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.4</span>,</span>
<span id="cb35-22">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"position"</span>: [</span>
<span id="cb35-23">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">688</span>,</span>
<span id="cb35-24">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span></span>
<span id="cb35-25">      ]</span>
<span id="cb35-26">    },</span>
<span id="cb35-27">    {</span>
<span id="cb35-28">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: {</span>
<span id="cb35-29">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"method"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"POST"</span>,</span>
<span id="cb35-30">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"url"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1/chat/completions"</span>,</span>
<span id="cb35-31">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"authentication"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"genericCredentialType"</span>,</span>
<span id="cb35-32">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"genericAuthType"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"httpBearerAuth"</span>,</span>
<span id="cb35-33">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sendHeaders"</span>: true,</span>
<span id="cb35-34">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"headerParameters"</span>: {</span>
<span id="cb35-35">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: [</span>
<span id="cb35-36">            {</span>
<span id="cb35-37">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Content-Type"</span>,</span>
<span id="cb35-38">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"application/json"</span></span>
<span id="cb35-39">            }</span>
<span id="cb35-40">          ]</span>
<span id="cb35-41">        },</span>
<span id="cb35-42">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sendBody"</span>: true,</span>
<span id="cb35-43">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"specifyBody"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"json"</span>,</span>
<span id="cb35-44">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jsonBody"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> JSON.stringify({</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">model</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">openai/gpt-oss-120b:free</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">,</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">messages</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: [</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    {</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">role</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">system</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">, </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">content</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">If you do not know the answer then reply I am not sure.</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">},</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    {</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">role</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">user</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">, </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">content</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: $json.question}</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  ]</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">}) </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb35-45">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"options"</span>: {}</span>
<span id="cb35-46">      },</span>
<span id="cb35-47">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"104becd7-9b3d-4297-b4ab-47b1df1abd71"</span>,</span>
<span id="cb35-48">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model A"</span>,</span>
<span id="cb35-49">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n8n-nodes-base.httpRequest"</span>,</span>
<span id="cb35-50">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"typeVersion"</span>: <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.2</span>,</span>
<span id="cb35-51">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"position"</span>: [</span>
<span id="cb35-52">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">480</span>,</span>
<span id="cb35-53">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">160</span></span>
<span id="cb35-54">      ],</span>
<span id="cb35-55">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"credentials"</span>: {</span>
<span id="cb35-56">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"httpHeaderAuth"</span>: {</span>
<span id="cb35-57">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lf6835mjFnfNIqw6"</span>,</span>
<span id="cb35-58">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Header Auth account 2"</span></span>
<span id="cb35-59">        },</span>
<span id="cb35-60">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"httpBearerAuth"</span>: {</span>
<span id="cb35-61">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"KFNalQ91U3mlnQks"</span>,</span>
<span id="cb35-62">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bearer Auth account"</span></span>
<span id="cb35-63">        }</span>
<span id="cb35-64">      }</span>
<span id="cb35-65">    },</span>
<span id="cb35-66">    {</span>
<span id="cb35-67">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: {</span>
<span id="cb35-68">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"method"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"POST"</span>,</span>
<span id="cb35-69">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"url"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1/chat/completions"</span>,</span>
<span id="cb35-70">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"authentication"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"genericCredentialType"</span>,</span>
<span id="cb35-71">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"genericAuthType"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"httpBearerAuth"</span>,</span>
<span id="cb35-72">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sendHeaders"</span>: true,</span>
<span id="cb35-73">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"headerParameters"</span>: {</span>
<span id="cb35-74">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: [</span>
<span id="cb35-75">            {</span>
<span id="cb35-76">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Content-Type"</span>,</span>
<span id="cb35-77">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"application/json"</span></span>
<span id="cb35-78">            }</span>
<span id="cb35-79">          ]</span>
<span id="cb35-80">        },</span>
<span id="cb35-81">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sendBody"</span>: true,</span>
<span id="cb35-82">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"specifyBody"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"json"</span>,</span>
<span id="cb35-83">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jsonBody"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> JSON.stringify({</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">model</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">openai/gpt-oss-20b</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">,</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">messages</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: [</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    {</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">role</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">system</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">, </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">content</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">If you do not know the answer then reply I am not sure.</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">},</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    {</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">role</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">user</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">, </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">content</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: $json.question}</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  ]</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">}) </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb35-84">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"options"</span>: {}</span>
<span id="cb35-85">      },</span>
<span id="cb35-86">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2c4d3906-bcd3-4fc6-b983-4e9e494e476f"</span>,</span>
<span id="cb35-87">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model B"</span>,</span>
<span id="cb35-88">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n8n-nodes-base.httpRequest"</span>,</span>
<span id="cb35-89">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"typeVersion"</span>: <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.2</span>,</span>
<span id="cb35-90">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"position"</span>: [</span>
<span id="cb35-91">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">480</span>,</span>
<span id="cb35-92">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span></span>
<span id="cb35-93">      ],</span>
<span id="cb35-94">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"credentials"</span>: {</span>
<span id="cb35-95">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"httpHeaderAuth"</span>: {</span>
<span id="cb35-96">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lf6835mjFnfNIqw6"</span>,</span>
<span id="cb35-97">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Header Auth account 2"</span></span>
<span id="cb35-98">        },</span>
<span id="cb35-99">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"httpBearerAuth"</span>: {</span>
<span id="cb35-100">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"KFNalQ91U3mlnQks"</span>,</span>
<span id="cb35-101">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bearer Auth account"</span></span>
<span id="cb35-102">        }</span>
<span id="cb35-103">      }</span>
<span id="cb35-104">    },</span>
<span id="cb35-105">    {</span>
<span id="cb35-106">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: {</span>
<span id="cb35-107">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"method"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"POST"</span>,</span>
<span id="cb35-108">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"url"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1/chat/completions"</span>,</span>
<span id="cb35-109">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"authentication"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"genericCredentialType"</span>,</span>
<span id="cb35-110">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"genericAuthType"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"httpBearerAuth"</span>,</span>
<span id="cb35-111">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sendHeaders"</span>: true,</span>
<span id="cb35-112">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"headerParameters"</span>: {</span>
<span id="cb35-113">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: [</span>
<span id="cb35-114">            {</span>
<span id="cb35-115">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Content-Type"</span>,</span>
<span id="cb35-116">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"application/json"</span></span>
<span id="cb35-117">            }</span>
<span id="cb35-118">          ]</span>
<span id="cb35-119">        },</span>
<span id="cb35-120">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sendBody"</span>: true,</span>
<span id="cb35-121">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"specifyBody"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"json"</span>,</span>
<span id="cb35-122">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jsonBody"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> JSON.stringify({</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">model</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">arcee-ai/trinity-large-preview:free</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">,</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">messages</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: [</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    {</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">role</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">system</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">, </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">content</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">If you do not know the answer then reply I am not sure.</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">},</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    {</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">role</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">user</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">, </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">content</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: $json.question}</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  ]</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">}) </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb35-123">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"options"</span>: {}</span>
<span id="cb35-124">      },</span>
<span id="cb35-125">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"3f5e4a8b-c9d2-4ab7-a123-456789012345"</span>,</span>
<span id="cb35-126">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model C"</span>,</span>
<span id="cb35-127">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n8n-nodes-base.httpRequest"</span>,</span>
<span id="cb35-128">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"typeVersion"</span>: <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.2</span>,</span>
<span id="cb35-129">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"position"</span>: [</span>
<span id="cb35-130">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">480</span>,</span>
<span id="cb35-131">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">192</span></span>
<span id="cb35-132">      ],</span>
<span id="cb35-133">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"credentials"</span>: {</span>
<span id="cb35-134">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"httpHeaderAuth"</span>: {</span>
<span id="cb35-135">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lf6835mjFnfNIqw6"</span>,</span>
<span id="cb35-136">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Header Auth account 2"</span></span>
<span id="cb35-137">        },</span>
<span id="cb35-138">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"httpBearerAuth"</span>: {</span>
<span id="cb35-139">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"KFNalQ91U3mlnQks"</span>,</span>
<span id="cb35-140">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bearer Auth account"</span></span>
<span id="cb35-141">        }</span>
<span id="cb35-142">      }</span>
<span id="cb35-143">    },</span>
<span id="cb35-144">    {</span>
<span id="cb35-145">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: {</span>
<span id="cb35-146">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"assignments"</span>: {</span>
<span id="cb35-147">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"assignments"</span>: [</span>
<span id="cb35-148">            {</span>
<span id="cb35-149">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"map-a"</span>,</span>
<span id="cb35-150">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_a"</span>,</span>
<span id="cb35-151">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> $json.choices[0].message.content </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb35-152">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"string"</span></span>
<span id="cb35-153">            }</span>
<span id="cb35-154">          ]</span>
<span id="cb35-155">        },</span>
<span id="cb35-156">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"options"</span>: {}</span>
<span id="cb35-157">      },</span>
<span id="cb35-158">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bb423cd5-28ff-47e5-8925-492143d26228"</span>,</span>
<span id="cb35-159">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Set Answer A1"</span>,</span>
<span id="cb35-160">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n8n-nodes-base.set"</span>,</span>
<span id="cb35-161">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"typeVersion"</span>: <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.4</span>,</span>
<span id="cb35-162">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"position"</span>: [</span>
<span id="cb35-163">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">256</span>,</span>
<span id="cb35-164">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">160</span></span>
<span id="cb35-165">      ]</span>
<span id="cb35-166">    },</span>
<span id="cb35-167">    {</span>
<span id="cb35-168">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: {</span>
<span id="cb35-169">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"assignments"</span>: {</span>
<span id="cb35-170">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"assignments"</span>: [</span>
<span id="cb35-171">            {</span>
<span id="cb35-172">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"map-b"</span>,</span>
<span id="cb35-173">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_b"</span>,</span>
<span id="cb35-174">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> $json.choices[0].message.content </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb35-175">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"string"</span></span>
<span id="cb35-176">            }</span>
<span id="cb35-177">          ]</span>
<span id="cb35-178">        },</span>
<span id="cb35-179">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"options"</span>: {}</span>
<span id="cb35-180">      },</span>
<span id="cb35-181">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"591d8be5-132d-45a2-a69d-455467da46e5"</span>,</span>
<span id="cb35-182">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Set Answer B1"</span>,</span>
<span id="cb35-183">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n8n-nodes-base.set"</span>,</span>
<span id="cb35-184">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"typeVersion"</span>: <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.4</span>,</span>
<span id="cb35-185">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"position"</span>: [</span>
<span id="cb35-186">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">256</span>,</span>
<span id="cb35-187">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span></span>
<span id="cb35-188">      ]</span>
<span id="cb35-189">    },</span>
<span id="cb35-190">    {</span>
<span id="cb35-191">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: {</span>
<span id="cb35-192">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"assignments"</span>: {</span>
<span id="cb35-193">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"assignments"</span>: [</span>
<span id="cb35-194">            {</span>
<span id="cb35-195">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"map-c"</span>,</span>
<span id="cb35-196">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_c"</span>,</span>
<span id="cb35-197">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> $json.choices[0].message.content </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb35-198">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"string"</span></span>
<span id="cb35-199">            }</span>
<span id="cb35-200">          ]</span>
<span id="cb35-201">        },</span>
<span id="cb35-202">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"options"</span>: {}</span>
<span id="cb35-203">      },</span>
<span id="cb35-204">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"7a8b9c0d-1e2f-4a3b-8c4d-5e6f7a8b9c0d"</span>,</span>
<span id="cb35-205">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Set Answer C1"</span>,</span>
<span id="cb35-206">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n8n-nodes-base.set"</span>,</span>
<span id="cb35-207">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"typeVersion"</span>: <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.4</span>,</span>
<span id="cb35-208">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"position"</span>: [</span>
<span id="cb35-209">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">256</span>,</span>
<span id="cb35-210">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">192</span></span>
<span id="cb35-211">      ]</span>
<span id="cb35-212">    },</span>
<span id="cb35-213">    {</span>
<span id="cb35-214">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: {</span>
<span id="cb35-215">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mode"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"combine"</span>,</span>
<span id="cb35-216">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"combineBy"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"combineAll"</span>,</span>
<span id="cb35-217">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"options"</span>: {}</span>
<span id="cb35-218">      },</span>
<span id="cb35-219">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"merge-ab-node-id"</span>,</span>
<span id="cb35-220">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Merge AB"</span>,</span>
<span id="cb35-221">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n8n-nodes-base.merge"</span>,</span>
<span id="cb35-222">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"typeVersion"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,</span>
<span id="cb35-223">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"position"</span>: [</span>
<span id="cb35-224">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>,</span>
<span id="cb35-225">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">72</span></span>
<span id="cb35-226">      ]</span>
<span id="cb35-227">    },</span>
<span id="cb35-228">    {</span>
<span id="cb35-229">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: {</span>
<span id="cb35-230">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mode"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"combine"</span>,</span>
<span id="cb35-231">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"combineBy"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"combineAll"</span>,</span>
<span id="cb35-232">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"options"</span>: {}</span>
<span id="cb35-233">      },</span>
<span id="cb35-234">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2c89b328-cac3-4322-bcf6-b8ae5f9c0af2"</span>,</span>
<span id="cb35-235">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Merge Answers1"</span>,</span>
<span id="cb35-236">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n8n-nodes-base.merge"</span>,</span>
<span id="cb35-237">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"typeVersion"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,</span>
<span id="cb35-238">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"position"</span>: [</span>
<span id="cb35-239">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">160</span>,</span>
<span id="cb35-240">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span></span>
<span id="cb35-241">      ]</span>
<span id="cb35-242">    },</span>
<span id="cb35-243">    {</span>
<span id="cb35-244">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: {</span>
<span id="cb35-245">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"method"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"POST"</span>,</span>
<span id="cb35-246">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"url"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1/chat/completions"</span>,</span>
<span id="cb35-247">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"authentication"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"genericCredentialType"</span>,</span>
<span id="cb35-248">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"genericAuthType"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"httpBearerAuth"</span>,</span>
<span id="cb35-249">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sendHeaders"</span>: true,</span>
<span id="cb35-250">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"headerParameters"</span>: {</span>
<span id="cb35-251">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: [</span>
<span id="cb35-252">            {</span>
<span id="cb35-253">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Content-Type"</span>,</span>
<span id="cb35-254">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"application/json"</span></span>
<span id="cb35-255">            }</span>
<span id="cb35-256">          ]</span>
<span id="cb35-257">        },</span>
<span id="cb35-258">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sendBody"</span>: true,</span>
<span id="cb35-259">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"specifyBody"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"json"</span>,</span>
<span id="cb35-260">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jsonBody"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> JSON.stringify({</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">model</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">google/gemini-3-flash-preview</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">,</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">messages</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: [</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    {</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">      </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">role</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">user</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">,</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">      </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">content</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">You are an AI Judge. You will be presented with a question and three candidate answers (Model A, Model B, and Model C).</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">nYour task is to judge the quality of the answers.</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">nQuestion: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> + $(</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Set Question1</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">).first().json.question + </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">nAnswer A:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> + ($json.answer_a || </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">No answer provided</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">) + </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">nAnswer B:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> + ($json.answer_b || </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">No answer provided</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">) + </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">nAnswer C:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> + ($json.answer_c || </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">No answer provided</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">) + </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">nTask:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n1. Compare the three answers for accuracy, clarity, and completeness.</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n2. format and length of the answers are not important, focus on content quality.</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n3. Provide a short commentary.</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n4. Assign a score from 0 to 100 for Model A, Model B, and Model C.</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n5. Declare the overall winner.</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">nOutput Format:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">nCommentary: &lt;text&gt;</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">nWinner: &lt;Model A or Model B or Model C&gt;</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">nScore A: &lt;number&gt;</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">nScore B: &lt;number&gt;</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">nScore C: &lt;number&gt;</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    }</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  ]</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">}) </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb35-261">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"options"</span>: {}</span>
<span id="cb35-262">      },</span>
<span id="cb35-263">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1d6171c9-4800-4f25-97a0-c029053e1ddc"</span>,</span>
<span id="cb35-264">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI Judge1"</span>,</span>
<span id="cb35-265">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n8n-nodes-base.httpRequest"</span>,</span>
<span id="cb35-266">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"typeVersion"</span>: <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.2</span>,</span>
<span id="cb35-267">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"position"</span>: [</span>
<span id="cb35-268">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">368</span>,</span>
<span id="cb35-269">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span></span>
<span id="cb35-270">      ],</span>
<span id="cb35-271">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"credentials"</span>: {</span>
<span id="cb35-272">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"httpHeaderAuth"</span>: {</span>
<span id="cb35-273">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lf6835mjFnfNIqw6"</span>,</span>
<span id="cb35-274">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Header Auth account 2"</span></span>
<span id="cb35-275">        },</span>
<span id="cb35-276">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"httpBearerAuth"</span>: {</span>
<span id="cb35-277">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"KFNalQ91U3mlnQks"</span>,</span>
<span id="cb35-278">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bearer Auth account"</span></span>
<span id="cb35-279">        }</span>
<span id="cb35-280">      }</span>
<span id="cb35-281">    },</span>
<span id="cb35-282">    {</span>
<span id="cb35-283">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"parameters"</span>: {</span>
<span id="cb35-284">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"assignments"</span>: {</span>
<span id="cb35-285">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"assignments"</span>: [</span>
<span id="cb35-286">            {</span>
<span id="cb35-287">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"final-result"</span>,</span>
<span id="cb35-288">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"verdict"</span>,</span>
<span id="cb35-289">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> $json.choices[0].message.content </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb35-290">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"string"</span></span>
<span id="cb35-291">            },</span>
<span id="cb35-292">            {</span>
<span id="cb35-293">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model-a-ans"</span>,</span>
<span id="cb35-294">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_a"</span>,</span>
<span id="cb35-295">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> $node[</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Merge Answers1</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">].json.answer_a </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb35-296">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"string"</span></span>
<span id="cb35-297">            },</span>
<span id="cb35-298">            {</span>
<span id="cb35-299">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model-b-ans"</span>,</span>
<span id="cb35-300">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_b"</span>,</span>
<span id="cb35-301">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> $node[</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Merge Answers1</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">].json.answer_b </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb35-302">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"string"</span></span>
<span id="cb35-303">            },</span>
<span id="cb35-304">            {</span>
<span id="cb35-305">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model-c-ans"</span>,</span>
<span id="cb35-306">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"answer_c"</span>,</span>
<span id="cb35-307">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"value"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"=</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> $node[</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Merge Answers1</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">].json.answer_c </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>,</span>
<span id="cb35-308">              <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"string"</span></span>
<span id="cb35-309">            }</span>
<span id="cb35-310">          ]</span>
<span id="cb35-311">        },</span>
<span id="cb35-312">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"options"</span>: {}</span>
<span id="cb35-313">      },</span>
<span id="cb35-314">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"eae7f7bf-07fc-4250-b628-1a422cfbbe12"</span>,</span>
<span id="cb35-315">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"name"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Final Output1"</span>,</span>
<span id="cb35-316">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n8n-nodes-base.set"</span>,</span>
<span id="cb35-317">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"typeVersion"</span>: <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.4</span>,</span>
<span id="cb35-318">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"position"</span>: [</span>
<span id="cb35-319">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">576</span>,</span>
<span id="cb35-320">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span></span>
<span id="cb35-321">      ]</span>
<span id="cb35-322">    }</span>
<span id="cb35-323">  ],</span>
<span id="cb35-324">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pinData"</span>: {},</span>
<span id="cb35-325">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"connections"</span>: {</span>
<span id="cb35-326">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Set Question1"</span>: {</span>
<span id="cb35-327">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>: [</span>
<span id="cb35-328">        [</span>
<span id="cb35-329">          {</span>
<span id="cb35-330">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model A"</span>,</span>
<span id="cb35-331">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>,</span>
<span id="cb35-332">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb35-333">          },</span>
<span id="cb35-334">          {</span>
<span id="cb35-335">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model B"</span>,</span>
<span id="cb35-336">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>,</span>
<span id="cb35-337">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb35-338">          },</span>
<span id="cb35-339">          {</span>
<span id="cb35-340">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model C"</span>,</span>
<span id="cb35-341">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>,</span>
<span id="cb35-342">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb35-343">          }</span>
<span id="cb35-344">        ]</span>
<span id="cb35-345">      ]</span>
<span id="cb35-346">    },</span>
<span id="cb35-347">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model A"</span>: {</span>
<span id="cb35-348">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>: [</span>
<span id="cb35-349">        [</span>
<span id="cb35-350">          {</span>
<span id="cb35-351">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Set Answer A1"</span>,</span>
<span id="cb35-352">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>,</span>
<span id="cb35-353">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb35-354">          }</span>
<span id="cb35-355">        ]</span>
<span id="cb35-356">      ]</span>
<span id="cb35-357">    },</span>
<span id="cb35-358">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model B"</span>: {</span>
<span id="cb35-359">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>: [</span>
<span id="cb35-360">        [</span>
<span id="cb35-361">          {</span>
<span id="cb35-362">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Set Answer B1"</span>,</span>
<span id="cb35-363">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>,</span>
<span id="cb35-364">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb35-365">          }</span>
<span id="cb35-366">        ]</span>
<span id="cb35-367">      ]</span>
<span id="cb35-368">    },</span>
<span id="cb35-369">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Model C"</span>: {</span>
<span id="cb35-370">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>: [</span>
<span id="cb35-371">        [</span>
<span id="cb35-372">          {</span>
<span id="cb35-373">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Set Answer C1"</span>,</span>
<span id="cb35-374">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>,</span>
<span id="cb35-375">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb35-376">          }</span>
<span id="cb35-377">        ]</span>
<span id="cb35-378">      ]</span>
<span id="cb35-379">    },</span>
<span id="cb35-380">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Set Answer A1"</span>: {</span>
<span id="cb35-381">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>: [</span>
<span id="cb35-382">        [</span>
<span id="cb35-383">          {</span>
<span id="cb35-384">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Merge AB"</span>,</span>
<span id="cb35-385">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>,</span>
<span id="cb35-386">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb35-387">          }</span>
<span id="cb35-388">        ]</span>
<span id="cb35-389">      ]</span>
<span id="cb35-390">    },</span>
<span id="cb35-391">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Set Answer B1"</span>: {</span>
<span id="cb35-392">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>: [</span>
<span id="cb35-393">        [</span>
<span id="cb35-394">          {</span>
<span id="cb35-395">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Merge AB"</span>,</span>
<span id="cb35-396">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>,</span>
<span id="cb35-397">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb35-398">          }</span>
<span id="cb35-399">        ]</span>
<span id="cb35-400">      ]</span>
<span id="cb35-401">    },</span>
<span id="cb35-402">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Set Answer C1"</span>: {</span>
<span id="cb35-403">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>: [</span>
<span id="cb35-404">        [</span>
<span id="cb35-405">          {</span>
<span id="cb35-406">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Merge Answers1"</span>,</span>
<span id="cb35-407">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>,</span>
<span id="cb35-408">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb35-409">          }</span>
<span id="cb35-410">        ]</span>
<span id="cb35-411">      ]</span>
<span id="cb35-412">    },</span>
<span id="cb35-413">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Merge AB"</span>: {</span>
<span id="cb35-414">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>: [</span>
<span id="cb35-415">        [</span>
<span id="cb35-416">          {</span>
<span id="cb35-417">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Merge Answers1"</span>,</span>
<span id="cb35-418">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>,</span>
<span id="cb35-419">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb35-420">          }</span>
<span id="cb35-421">        ]</span>
<span id="cb35-422">      ]</span>
<span id="cb35-423">    },</span>
<span id="cb35-424">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Merge Answers1"</span>: {</span>
<span id="cb35-425">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>: [</span>
<span id="cb35-426">        [</span>
<span id="cb35-427">          {</span>
<span id="cb35-428">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI Judge1"</span>,</span>
<span id="cb35-429">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>,</span>
<span id="cb35-430">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb35-431">          }</span>
<span id="cb35-432">        ]</span>
<span id="cb35-433">      ]</span>
<span id="cb35-434">    },</span>
<span id="cb35-435">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI Judge1"</span>: {</span>
<span id="cb35-436">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>: [</span>
<span id="cb35-437">        [</span>
<span id="cb35-438">          {</span>
<span id="cb35-439">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Final Output1"</span>,</span>
<span id="cb35-440">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"main"</span>,</span>
<span id="cb35-441">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"index"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb35-442">          }</span>
<span id="cb35-443">        ]</span>
<span id="cb35-444">      ]</span>
<span id="cb35-445">    }</span>
<span id="cb35-446">  },</span>
<span id="cb35-447">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"active"</span>: false,</span>
<span id="cb35-448">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"settings"</span>: {</span>
<span id="cb35-449">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"executionOrder"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"v1"</span>,</span>
<span id="cb35-450">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"availableInMCP"</span>: false</span>
<span id="cb35-451">  },</span>
<span id="cb35-452">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"versionId"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ac74f20b-72a9-49a6-8200-fd08707946ec"</span>,</span>
<span id="cb35-453">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"meta"</span>: {</span>
<span id="cb35-454">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"instanceId"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2f42f1cdfcab2c6a7bbd5cec68912930ccc0107686e3a7211ddcc09504c524d9"</span></span>
<span id="cb35-455">  },</span>
<span id="cb35-456">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"8a_wyeYhdVZSr42SS5Z1K"</span>,</span>
<span id="cb35-457">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tags"</span>: []</span>
<span id="cb35-458">}</span></code></pre></div></div>
</details>
</div>
</section>
</div>
</div>
</div>


<!-- -->


 ]]></description>
  <category>AI</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/AI judge/</guid>
  <pubDate>Thu, 29 Jan 2026 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/AI judge/images/images.jpeg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Voice Studio: æ–‡å­—&lt;-&gt;è¯­éŸ³è½¬æ¢</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/ARS/</link>
  <description><![CDATA[ 





<p>ä¸€ä¸ªå¼ºå¤§ä¸”ç¾è§‚çš„ Streamlit åº”ç”¨ï¼Œé›†æˆäº† <strong>è‡ªåŠ¨è¯­éŸ³è¯†åˆ« (ASR)</strong> å’Œ <strong>æ–‡æœ¬è½¬è¯­éŸ³ (TTS)</strong> åŠŸèƒ½ã€‚æœ¬é¡¹ç›®æ—¨åœ¨æä¾›ä¸€ä¸ªä¾¿æ·çš„å¹³å°ï¼Œç”¨äºå¯¹æ¯” NVIDIAã€Google çš„å‰æ²¿äº‘ç«¯æ¨¡å‹ä¸æœ¬åœ° MLX ä¼˜åŒ–æ¨¡å‹çš„è¡¨ç°ã€‚</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true" href="">è¯­éŸ³è½¬æ–‡å­— (STT) ç•Œé¢</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false" href="">æ–‡å­—è½¬è¯­éŸ³ (TTS) ç•Œé¢</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/ARS/images/my screenshots 3.png" class="img-fluid"></p>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/ARS/images/my screenshots 2.png" class="img-fluid"></p>
</div>
</div>
</div>
<section id="åœ¨çº¿æ¼”ç¤º" class="level2">
<h2 class="anchored" data-anchor-id="åœ¨çº¿æ¼”ç¤º">åœ¨çº¿æ¼”ç¤º</h2>
<p><a href="https://jcwinning-speech-text-model.share.connect.posit.cloud/">https://jcwinning-speech-text-model.share.connect.posit.cloud/</a></p>
</section>
<section id="æ ¸å¿ƒåŠŸèƒ½" class="level2">
<h2 class="anchored" data-anchor-id="æ ¸å¿ƒåŠŸèƒ½">âœ¨ æ ¸å¿ƒåŠŸèƒ½</h2>
<section id="è¯­éŸ³è½¬æ–‡å­—-stt" class="level3">
<h3 class="anchored" data-anchor-id="è¯­éŸ³è½¬æ–‡å­—-stt">ğŸ¤ è¯­éŸ³è½¬æ–‡å­— (STT)</h3>
<ul>
<li><strong>Google Gemini 2.5 Flash Lite</strong>: é€šè¿‡ OpenRouter æä¾›çš„é«˜é€Ÿã€ç²¾å‡†äº‘ç«¯è½¬å†™ã€‚</li>
<li><strong>NVIDIA Parakeet-CTC</strong>: è¡Œä¸šé¢†å…ˆçš„ ASR æ€§èƒ½ï¼ŒåŸºäº NVIDIA Riva Cloudã€‚</li>
<li><strong>æœ¬åœ° MLX æ¨¡å‹</strong>: ä¸“ä¸º Apple Silicon ä¼˜åŒ–çš„æœ¬åœ°ç§å¯†è½¬å†™ã€‚
<ul>
<li><strong>GLM-ASR-Nano</strong>: è½»é‡ã€é«˜æ•ˆã€‚</li>
<li><strong>Whisper-Large-v3-Turbo</strong>: è¡Œä¸šé¡¶å°–ã€é«˜ç²¾åº¦çš„è½¬å†™æ¨¡å‹ã€‚</li>
</ul></li>
<li><strong>åŒè¾“å…¥æ¨¡å¼</strong>: æ”¯æŒå®æ—¶éº¦å…‹é£å½•éŸ³æˆ–ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶ï¼ˆWAV, MP3, M4Aï¼‰ã€‚</li>
<li><strong>å³æ—¶æ˜¾ç¤º</strong>: ç»“æœåœ¨æ¯ä¸ªæ¨¡å‹å®Œæˆæ—¶ç«‹å³æ˜¾ç¤ºï¼Œæ— éœ€ç­‰å¾…æ‰€æœ‰æ¨¡å‹ã€‚</li>
<li><strong>è‡ªåŠ¨å½’ä¸€åŒ–</strong>: è‡ªåŠ¨å°†éŸ³é¢‘è½¬æ¢ä¸º 16kHz å•å£°é“ WAVï¼Œç¡®ä¿æœ€é«˜è¯†åˆ«å‡†ç¡®åº¦ã€‚</li>
<li><strong>ç»“æœä¸‹è½½</strong>: æ”¯æŒå°†æ¯ä¸ªæ¨¡å‹çš„è½¬å†™ç»“æœä¿å­˜ä¸ºæœ¬åœ° <code>.md</code> æ–‡ä»¶ã€‚</li>
</ul>
</section>
<section id="æ–‡æœ¬è½¬è¯­éŸ³-tts" class="level3">
<h3 class="anchored" data-anchor-id="æ–‡æœ¬è½¬è¯­éŸ³-tts">ğŸ”Š æ–‡æœ¬è½¬è¯­éŸ³ (TTS)</h3>
<ul>
<li><strong>Qwen TTS (DashScope)</strong>: é˜¿é‡Œé€šä¹‰åƒé—®æä¾›çš„è‡ªç„¶è¯­éŸ³åˆæˆï¼Œå†…ç½® 7 ç§æ€§æ ¼å„å¼‚çš„å£°éŸ³ã€‚</li>
<li><strong>NVIDIA Riva (Magpie)</strong>: ä¸“ä¸šçº§å¤šè¯­è¨€åˆæˆï¼Œé‡‡ç”¨æœ€æ–°çš„ Magpie-Multilingual æ¨¡å‹ã€‚</li>
<li><strong>åŠ¨æ€å£°éŸ³é€‰æ‹©</strong>: æä¾›ä¸°å¯Œçš„ä¸­æ–‡ï¼ˆæ™®é€šè¯ï¼‰å’Œè‹±æ–‡å‘éŸ³äººé€‰é¡¹ã€‚</li>
</ul>
</section>
</section>
<section id="å¿«é€Ÿä¸Šæ‰‹" class="level2">
<h2 class="anchored" data-anchor-id="å¿«é€Ÿä¸Šæ‰‹">ğŸš€ å¿«é€Ÿä¸Šæ‰‹</h2>
<section id="ç¯å¢ƒè¦æ±‚" class="level3">
<h3 class="anchored" data-anchor-id="ç¯å¢ƒè¦æ±‚">ç¯å¢ƒè¦æ±‚</h3>
<ul>
<li>Python 3.10+</li>
<li>Apple Silicon (è‹¥éœ€ä½¿ç”¨æœ¬åœ° MLX åŠŸèƒ½)</li>
<li>API å¯†é’¥:
<ul>
<li><a href="https://openrouter.ai/">OpenRouter</a></li>
<li><a href="https://build.nvidia.com/">NVIDIA NIM</a></li>
<li><a href="https://dashscope.console.aliyun.com/">é˜¿é‡Œäº‘ DashScope</a></li>
</ul></li>
</ul>
</section>
<section id="å®‰è£…æ­¥éª¤" class="level3">
<h3 class="anchored" data-anchor-id="å®‰è£…æ­¥éª¤">å®‰è£…æ­¥éª¤</h3>
<ol type="1">
<li><p>å…‹éš†ä»“åº“:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>repository-url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb1-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> ARS</span></code></pre></div></div></li>
<li><p>å®‰è£…ä¾èµ–:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> requirements.txt</span></code></pre></div></div></li>
<li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.env</code> æ–‡ä»¶å¹¶å¡«å…¥å¯†é’¥:</p>
<pre class="env"><code>OPENROUTER_API_KEY=ä½ çš„å¯†é’¥
DASHSCOPE_API_KEY=ä½ çš„å¯†é’¥
NVIDIA_API_KEY=ä½ çš„å¯†é’¥</code></pre></li>
</ol>
</section>
<section id="è¿è¡Œåº”ç”¨" class="level3">
<h3 class="anchored" data-anchor-id="è¿è¡Œåº”ç”¨">è¿è¡Œåº”ç”¨</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">streamlit</span> run app.py</span></code></pre></div></div>
</section>
</section>
<section id="äº‘ç«¯éƒ¨ç½²" class="level2">
<h2 class="anchored" data-anchor-id="äº‘ç«¯éƒ¨ç½²">â˜ï¸ äº‘ç«¯éƒ¨ç½²</h2>
<p>æœ¬é¡¹ç›®å·²é’ˆå¯¹ <strong>Streamlit Cloud</strong> è¿›è¡Œé¢„é…ç½®ï¼š - è‡ªåŠ¨æ£€æµ‹è¿è¡Œç¯å¢ƒï¼Œåœ¨äº‘ç«¯éƒ¨ç½²æ—¶ç¦ç”¨æœ¬åœ°æ¨¡å‹ (MLX) ä»¥ç¡®ä¿ç³»ç»Ÿç¨³å®šã€‚ - API å¯†é’¥å¯ä»¥é€šè¿‡ Streamlit çš„ â€œSecretsâ€ é¢æ¿è¿›è¡Œå®‰å…¨ç®¡ç†ã€‚</p>
</section>
<section id="æŠ€æœ¯æ ˆ" class="level2">
<h2 class="anchored" data-anchor-id="æŠ€æœ¯æ ˆ">ğŸ› ï¸ æŠ€æœ¯æ ˆ</h2>
<ul>
<li><strong>ç•Œé¢</strong>: Streamlit</li>
<li><strong>æœ¬åœ°æ¨ç†</strong>: MLX (é’ˆå¯¹ Mac M èŠ¯ç‰‡ä¼˜åŒ–)</li>
<li><strong>äº‘ç«¯æœåŠ¡</strong>: NVIDIA Riva, OpenRouter (Gemini), é˜¿é‡Œäº‘ DashScope (Qwen)</li>
<li><strong>éŸ³é¢‘å¤„ç†</strong>: Wave, SoundFile, Streamlit Mic Recorder</li>
</ul>
<hr>


<!-- -->

</section>

 ]]></description>
  <category>AI</category>
  <category>Audio</category>
  <category>ASR</category>
  <category>TTS</category>
  <category>Streamlit</category>
  <category>MLX</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/ARS/</guid>
  <pubDate>Wed, 21 Jan 2026 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/ARS/images/featured.png" medium="image" type="image/png" height="144" width="144"/>
</item>
<item>
  <title>LLM æ‘˜è¦ç³»ç»Ÿï¼šå¤šå¹³å° AI æ‘˜è¦å·¥å…·</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/llm-summary/</link>
  <description><![CDATA[ 





<section id="ç®€ä»‹" class="level1">
<h1>ç®€ä»‹</h1>
<p>åœ¨ä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œç´§è·Ÿ YouTubeã€Bilibiliã€Spotify å’Œå°çº¢ä¹¦ç­‰å¤šä¸ªå¹³å°çš„å†…å®¹å¯èƒ½ä¼šè®©äººæ„Ÿåˆ°åŠ›ä¸ä»å¿ƒã€‚<strong>LLM Summary System</strong> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ç»Ÿä¸€å·¥å…·ï¼Œæ—¨åœ¨é€šè¿‡è‡ªåŠ¨ä¸‹è½½ã€è½¬å†™å¹¶ä½¿ç”¨æœ€å…ˆè¿›çš„å¤§å‹è¯­è¨€æ¨¡å‹ (LLM) æ€»ç»“å†…å®¹æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚</p>
<p>è¯¥é¡¹ç›®æä¾›äº†ä¸€ç§æ— ç¼ä½“éªŒï¼Œèƒ½å¤Ÿå°†é•¿ç¯‡éŸ³è§†é¢‘å†…å®¹è½¬æ¢ä¸ºç®€æ´ã€å…·æœ‰å¯å‘æ€§çš„æ‘˜è¦ã€‚</p>
<p><img src="https://jcwinning.github.io/LandingPage/posts/llm-summary/image/1.png" class="img-fluid"></p>
</section>
<section id="ä¸»è¦ç‰¹æ€§" class="level1">
<h1>ä¸»è¦ç‰¹æ€§</h1>
<p>è¯¥ç³»ç»Ÿå…·å¤‡å¤šç§åŠŸèƒ½ï¼Œæ˜¯å†…å®¹æ¶ˆè´¹çš„å¼ºå¤§é€‰æ‹©ï¼š</p>
<ul>
<li><strong>å¤šå¹³å°æ”¯æŒ</strong>ï¼šä¸º YouTubeã€Bilibiliã€Spotifyã€å°çº¢ä¹¦å’Œå°å®‡å®™ FM æä¾›ç»Ÿä¸€æ¥å£ã€‚</li>
<li><strong>æ™ºèƒ½å¤„ç†</strong>ï¼šé’ˆå¯¹å¤§æ–‡ä»¶å’Œè½¬å½•æ–‡æœ¬è‡ªåŠ¨åˆ†å—ï¼Œä»¥å¤„ç†é•¿ç¯‡å†…å®¹ï¼ˆæœ€é«˜æ”¯æŒ 200 ä¸‡ Tokenï¼‰ã€‚</li>
<li><strong>é«˜è´¨é‡è½¬å†™</strong>ï¼šä½¿ç”¨ MLX Whisperï¼ˆé’ˆå¯¹ Apple Silicon ä¼˜åŒ–ï¼‰ï¼Œå¹¶å…·å¤‡ OpenAI Whisper å¤‡é€‰æ–¹æ¡ˆã€‚</li>
<li><strong>é«˜çº§æ‘˜è¦</strong>ï¼šæ”¯æŒ 15 ç§ä»¥ä¸Š LLM æ¨¡å‹ï¼ˆåŒ…æ‹¬é€šä¹‰åƒé—® Qwenã€GLMã€DeepSeekã€GPT-4ã€Gemini å’Œ Grokï¼‰ã€‚</li>
<li><strong>æ–‡æœ¬è½¬è¯­éŸ³ (TTS)</strong>ï¼šä½¿ç”¨ Google Cloud TTSã€Qwen æˆ– Gemini å°†æ‘˜è¦é‡æ–°è½¬æ¢ä¸ºéŸ³é¢‘ã€‚</li>
<li><strong>æœç´¢é›†æˆ</strong>ï¼šåˆ©ç”¨ AI æå–çš„å…³é”®è°ƒï¼Œè‡ªåŠ¨æŸ¥æ‰¾ç›¸å…³çš„é˜…è¯»ææ–™ã€‚</li>
<li><strong>å®æ—¶è¿›åº¦è·Ÿè¸ª</strong>ï¼šç”¨æˆ·å‹å¥½çš„ Streamlit Web ç•Œé¢ï¼Œæä¾›å®æ—¶æ›´æ–°ã€‚</li>
</ul>
</section>
<section id="æ¶æ„æ¦‚è§ˆ" class="level1">
<h1>æ¶æ„æ¦‚è§ˆ</h1>
<p>ç³»ç»Ÿéµå¾ªä¸€ä¸ªæµçº¿å‹çš„å·¥ä½œæµï¼š</p>
<pre class="mermaid"><code>graph LR
    A[URL è¾“å…¥] --&gt; B[å¹³å°æ£€æµ‹]
    B --&gt; C[å†…å®¹ä¸‹è½½]
    C --&gt; D[éŸ³é¢‘æå–]
    D --&gt; E[è½¬å†™ - Whisper]
    E --&gt; F[AI æ‘˜è¦ç”Ÿæˆ]
    F --&gt; G[TTS åˆæˆ]
    G --&gt; H[æ–‡ä»¶è¾“å‡º + Web å±•ç¤º]</code></pre>
<section id="æ ¸å¿ƒç»„ä»¶" class="level3">
<h3 class="anchored" data-anchor-id="æ ¸å¿ƒç»„ä»¶">æ ¸å¿ƒç»„ä»¶</h3>
<ul>
<li><strong><code>app.py</code></strong>ï¼šä¸»è¦çš„ Streamlit Web ç•Œé¢ï¼Œå¤„ç†å¹¶å‘ URL æäº¤å’ŒåŠ¨æ€æ’é˜Ÿã€‚</li>
<li><strong><code>download.py</code></strong>ï¼šç»Ÿä¸€çš„ä¸‹è½½å™¨ï¼Œä¸ºæ‰€æœ‰æ”¯æŒçš„å¹³å°æä¾›äº†å…¨é¢çš„é‡è¯•é€»è¾‘ã€‚</li>
<li><strong><code>process.py</code></strong>ï¼šé€šè¿‡æ™ºèƒ½åˆ†å—å¤„ç†éŸ³é¢‘è½¬å†™å’Œ AI æ‘˜è¦ã€‚</li>
<li><strong><code>config.py</code></strong>ï¼šç®¡ç† LLM æ¨¡å‹é…ç½®å’Œç¯å¢ƒå˜é‡ã€‚</li>
<li><strong><code>tts.py</code></strong>ï¼šå¤šä¾›åº”å•†æ–‡æœ¬è½¬è¯­éŸ³æ”¯æŒï¼Œå…·å¤‡åŸºäºå“ˆå¸Œçš„ç¼“å­˜æœºåˆ¶ã€‚</li>
</ul>
</section>
</section>
<section id="é«˜çº§æ™ºèƒ½" class="level1">
<h1>é«˜çº§æ™ºèƒ½</h1>
<p>è¯¥ç³»ç»Ÿåœ¨å¤„ç†å¤æ‚ä»»åŠ¡æ—¶çš„è¡¨ç°ä½¿å…¶è„±é¢–è€Œå‡ºï¼š</p>
<section id="æ™ºèƒ½åˆ†å—" class="level3">
<h3 class="anchored" data-anchor-id="æ™ºèƒ½åˆ†å—">æ™ºèƒ½åˆ†å—</h3>
<p>ä¸ºäº†é˜²æ­¢å†…å­˜æº¢å‡ºå¹¶å¤„ç†è¶…é•¿å†…å®¹ï¼š - <strong>éŸ³é¢‘</strong>ï¼šè‡ªåŠ¨åˆ†å‰²è¶…è¿‡ 60 åˆ†é’Ÿçš„æ–‡ä»¶è¿›è¡Œè½¬å†™ã€‚ - <strong>æ–‡æœ¬</strong>ï¼šè¶…è¿‡ 24 ä¸‡å­—ç¬¦çš„è½¬å½•æ–‡æœ¬å°†è¢«åˆ†å‰²æˆæ¯ä»½ 10 ä¸‡å­—ç¬¦çš„å—ã€‚</p>
</section>
<section id="æœç´¢é›†æˆ" class="level3">
<h3 class="anchored" data-anchor-id="æœç´¢é›†æˆ">æœç´¢é›†æˆ</h3>
<p>åœ¨ç”Ÿæˆæ‘˜è¦åï¼Œç³»ç»Ÿä¼šæå–å…³é”®è¯ï¼Œå¹¶é€šè¿‡ DuckDuckGoï¼ˆæˆ–ç™¾åº¦ä½œä¸ºå¤‡é€‰ï¼‰æœç´¢è¡¥å……ææ–™ã€‚è¿™ç¡®ä¿äº†æ‚¨å¯¹è¯¥ä¸»é¢˜æœ‰æ›´å…¨é¢çš„ç†è§£ã€‚</p>
</section>
</section>
<section id="å¿«é€Ÿä¸Šæ‰‹" class="level1">
<h1>å¿«é€Ÿä¸Šæ‰‹</h1>
<p>è¿è¡Œè¯¥ç³»ç»Ÿçš„æœ€ç®€å•æ–¹æ³•æ˜¯é€šè¿‡ Web ç•Œé¢ï¼š</p>
<ol type="1">
<li><p><strong>å…‹éš†ä»“åº“</strong>ï¼š</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/JCwinning/llm_summary.git</span>
<span id="cb2-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> llm_summary</span></code></pre></div></div></li>
<li><p><strong>é…ç½®ç¯å¢ƒ</strong>ï¼šåˆ›å»ºä¸€ä¸ª <code>.env</code> æ–‡ä»¶å¹¶å¡«å…¥æ‚¨çš„ API å¯†é’¥ï¼ˆOpenAIã€DashScope ç­‰ï¼‰ã€‚</p></li>
<li><p><strong>å®‰è£…ä¾èµ–</strong>ï¼š</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> requirements.txt</span></code></pre></div></div></li>
<li><p><strong>è¿è¡Œåº”ç”¨</strong>ï¼š</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">streamlit</span> run app.py</span></code></pre></div></div></li>
</ol>
</section>
<section id="ç»“è®º" class="level1">
<h1>ç»“è®º</h1>
<p>LLM Summary System ä¸ä»…ä»…æ˜¯ä¸€ä¸ªä¸‹è½½å™¨ï¼›å®ƒè¿˜æ˜¯æ‚¨çš„ç§äºº AI ç ”ç©¶åŠ©æ‰‹ã€‚æ— è®ºæ‚¨æ˜¯å­¦ç”Ÿã€ç ”ç©¶äººå‘˜ï¼Œè¿˜æ˜¯åªæ˜¯æƒ³ä¿æŒè·å–å’¨è¯¢ï¼Œè¯¥å·¥å…·éƒ½èƒ½é€šè¿‡å°†æ•°å°æ—¶çš„å†…å®¹æµ“ç¼©ä¸ºåˆ†é’Ÿçº§çš„é˜…è¯»ï¼Œæ˜¾è‘—æé«˜æ‚¨çš„ç”Ÿäº§åŠ›ã€‚</p>
<p>åœ¨ <a href="https://github.com/JCwinning/llm_summary">GitHub</a> ä¸ŠæŸ¥çœ‹å®Œæ•´æºä»£ç å¹¶å‚ä¸è´¡çŒ®ã€‚</p>


<!-- -->

</section>

 ]]></description>
  <category>AI</category>
  <category>Python</category>
  <category>LLM</category>
  <category>Open Source</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/llm-summary/</guid>
  <pubDate>Wed, 07 Jan 2026 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/llm-summary/image/cover.png" medium="image" type="image/png" height="98" width="144"/>
</item>
<item>
  <title>AI èŠå¤©ï¼šå¤šè¯­è¨€å¤šæ¨¡å‹åº”ç”¨ (AI Chat)</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/AI-Chat/</link>
  <description><![CDATA[ 





<section id="ç®€ä»‹" class="level1">
<h1>ç®€ä»‹</h1>
<p>åœ¨äººå·¥æ™ºèƒ½é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œæ‹¥æœ‰ä¸€ä¸ªèƒ½å¤Ÿä¸å¤šä¸ªæ¨¡å‹äº¤äº’çš„ç»Ÿä¸€ç•Œé¢æ˜¯æå…·ä»·å€¼çš„ã€‚<a href="https://github.com/JCwinning/AI_Chat">AI Chat</a> æ˜¯ä¸€ä¸ªä½¿ç”¨ Streamlit æ„å»ºçš„å¤šè¯­è¨€ã€å¤šæ¨¡å‹ AI èŠå¤©åº”ç”¨ã€‚å®ƒæ”¯æŒæµå¼å“åº”ã€å›¾åƒè¾“å…¥ã€å¹¶å‘æ¨¡å‹æŸ¥è¯¢ã€ç½‘ç»œæœç´¢ä»¥åŠå…¨é¢çš„æ–‡ä»¶å¤„ç†åŠŸèƒ½ã€‚</p>
<p>æ— è®ºæ‚¨æ˜¯è¦å¯¹æ¯”ä¸åŒå¤§è¯­è¨€æ¨¡å‹ (LLM) çš„å›ç­”ï¼Œè¿˜æ˜¯ç”Ÿæˆç²¾ç¾çš„è§†è§‰æ•ˆæœï¼ŒAI Chat éƒ½èƒ½æä¾›æ— ç¼ä¸”å¼ºå¤§çš„ä½“éªŒã€‚</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true" href="">æ–‡æœ¬å›ç­”</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false" href="">å›¾åƒåˆ›ä½œ</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" aria-controls="tabset-1-3" aria-selected="false" href="">ä¸Šä¼ æ–‡æ¡£æ‘˜è¦</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" aria-controls="tabset-1-4" aria-selected="false" href="">é¢„å®šä¹‰æç¤ºè¯</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/AI-Chat/images/1.png" class="img-fluid"></p>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/AI-Chat/images/2.png" class="img-fluid"></p>
</div>
<div id="tabset-1-3" class="tab-pane" aria-labelledby="tabset-1-3-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/AI-Chat/images/4.png" class="img-fluid"></p>
<p>AI æ‘˜è¦è®ºæ–‡ï¼šDeepSeek-R1: Incentivizing Reasoning Capability in LLMs via Reinforcement Learning (https://arxiv.org/pdf/2501.12948)</p>
</div>
<div id="tabset-1-4" class="tab-pane" aria-labelledby="tabset-1-4-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/AI-Chat/images/3.png" class="img-fluid"></p>
</div>
</div>
</div>
</section>
<section id="æ ¸å¿ƒç‰¹æ€§" class="level1">
<h1>âœ¨ æ ¸å¿ƒç‰¹æ€§</h1>
<ul>
<li><strong>ğŸŒ å¤šè¯­è¨€æ”¯æŒ</strong>ï¼šå¯åœ¨ä¸­è‹±æ–‡ç•Œé¢ä¹‹é—´å³æ—¶åˆ‡æ¢ã€‚</li>
<li><strong>ğŸ¤– å¤šæ¨¡å‹èŠå¤©</strong>ï¼šåŒæ—¶å‘å¤šä¸ª AI æ¨¡å‹å‘èµ·æŸ¥è¯¢ï¼Œå¹¶æä¾›å¹¶æ’å¯¹æ¯”è§†å›¾ã€‚</li>
<li><strong>ğŸ¨ å›¾åƒç”Ÿæˆä¸ç¼–è¾‘</strong>ï¼šä½¿ç”¨ FLUXã€é€šä¹‰ä¸‡ç›¸ (Qwen Image) å’Œ Gemini ç­‰æ¨¡å‹åˆ›å»ºå’Œç¼–è¾‘å›¾åƒã€‚</li>
<li><strong>ğŸ“š æç¤ºè¯åº“ (Prompt Bay)</strong>ï¼šå†…ç½® 100+ å¯æœç´¢çš„ç³»ç»Ÿæç¤ºè¯ï¼Œç”¨äºä¸“ä¸šåŒ–äº¤äº’ã€‚</li>
<li><strong>ğŸ” Web æœç´¢</strong>ï¼šé›†æˆ Tavily AI æœç´¢ï¼Œå®ç°å®æ—¶ä¿¡æ¯æ£€ç´¢ã€‚</li>
<li><strong>ğŸ–¼ï¸ å…¨é¢çš„æ–‡ä»¶æ”¯æŒ</strong>ï¼šæ”¯æŒä¸Šä¼ å¹¶å¤„ç† PDFã€Word æ–‡æ¡£ã€Excelã€CSV å’Œå›¾åƒã€‚</li>
<li><strong>âš¡ æµå¼å“åº”</strong>ï¼šå®æ—¶è·å–å¤šä¸ªæ¨¡å‹çš„å¹¶å‘åé¦ˆã€‚</li>
</ul>
</section>
<section id="å¿«é€Ÿå¼€å§‹" class="level1">
<h1>ğŸš€ å¿«é€Ÿå¼€å§‹</h1>
<p>è‹¥è¦åœ¨æœ¬åœ°è¿è¡Œ AI Chatï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p>
<section id="å‰ææ¡ä»¶" class="level3">
<h3 class="anchored" data-anchor-id="å‰ææ¡ä»¶">å‰ææ¡ä»¶</h3>
<ul>
<li>Python 3.7 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
<li>pip åŒ…ç®¡ç†å™¨</li>
</ul>
</section>
<section id="å®‰è£…æ­¥éª¤" class="level3">
<h3 class="anchored" data-anchor-id="å®‰è£…æ­¥éª¤">å®‰è£…æ­¥éª¤</h3>
<ol type="1">
<li><p><strong>å…‹éš†ä»“åº“</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/JCwinning/AI_Chat.git</span>
<span id="cb1-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> AI_Chat</span></code></pre></div></div></li>
<li><p><strong>å®‰è£…ä¾èµ–</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> requirements.txt</span></code></pre></div></div></li>
<li><p><strong>é…ç½® API å¯†é’¥</strong>: åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.env</code> æ–‡ä»¶å¹¶æ·»åŠ æ‚¨çš„å¯†é’¥ï¼š</p>
<pre class="env"><code>modelscope=æ‚¨çš„-modelscope-api-key
openrouter=æ‚¨çš„-openrouter-api-key
dashscope=æ‚¨çš„-dashscope-api-key
bigmodel=æ‚¨çš„-bigmodel-api-key
tavily_api_key=æ‚¨çš„-tavily-api-key</code></pre></li>
<li><p><strong>è¿è¡Œåº”ç”¨</strong>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">streamlit</span> run app.py</span></code></pre></div></div></li>
</ol>
</section>
</section>
<section id="æ¶æ„ä¸ç»„ä»¶" class="level1">
<h1>ğŸ—ï¸ æ¶æ„ä¸ç»„ä»¶</h1>
<p>è¯¥é¡¹ç›®æ—¨åœ¨å®ç°æ¨¡å—åŒ–å’Œé«˜æ€§èƒ½ï¼š</p>
<ul>
<li><strong><code>app.py</code></strong>ï¼šä¸»è¦å…¥å£ç‚¹ï¼Œä½¿ç”¨ Streamlit å¤„ç† UI å’Œä¼šè¯ç®¡ç†ã€‚</li>
<li><strong><code>config.py</code></strong>ï¼šé›†ä¸­å¼çš„æ¨¡å‹å®šä¹‰å’Œä¾›åº”å•†è®¾ç½®ã€‚</li>
<li><strong><code>search_providers.py</code></strong>ï¼šå¤„ç†å¸¦æœ‰ç¼“å­˜åŠŸèƒ½çš„ Web æœç´¢é›†æˆã€‚</li>
<li><strong>å¤šçº¿ç¨‹</strong>ï¼šä½¿ç”¨ Python çš„ <code>threading</code> å’Œ <code>Queue</code> å¤„ç†å¹¶è¡Œçš„æ¨¡å‹è¯·æ±‚å’Œæµå¼ä¼ è¾“ã€‚</li>
<li><strong>æ–‡ä»¶å¤„ç†</strong>ï¼šåˆ©ç”¨ <code>markitdown</code> è¿›è¡Œæ–‡æ¡£è½¬æ¢ï¼Œä½¿ç”¨ <code>Pillow</code> è¿›è¡Œå›¾åƒå¤„ç†ã€‚</li>
</ul>
</section>
<section id="ä½¿ç”¨æŠ€å·§" class="level1">
<h1>ğŸ“– ä½¿ç”¨æŠ€å·§</h1>
<section id="å¹¶æ’å¯¹æ¯”" class="level3">
<h3 class="anchored" data-anchor-id="å¹¶æ’å¯¹æ¯”">å¹¶æ’å¯¹æ¯”</h3>
<p>æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯åœ¨â€œğŸ¤– Modelsâ€é€‰é¡¹å¡ä¸­é€‰æ‹©å¤šä¸ªæ¨¡å‹ã€‚å½“æ‚¨å‘é€æ¶ˆæ¯æ—¶ï¼Œåº”ç”¨ä¼šå¹¶è¡ŒæŸ¥è¯¢æ‰€æœ‰é€‰å®šçš„æ¨¡å‹å¹¶å¹¶æ’æ˜¾ç¤ºå®ƒä»¬çš„å›ç­”ï¼Œä»è€Œè½»æ¾å¯¹æ¯”å…¶æ€§èƒ½å’Œå‡†ç¡®æ€§ã€‚</p>
</section>
<section id="ä½¿ç”¨æç¤ºè¯åº“" class="level3">
<h3 class="anchored" data-anchor-id="ä½¿ç”¨æç¤ºè¯åº“">ä½¿ç”¨æç¤ºè¯åº“</h3>
<p>ä¸çŸ¥é“å¦‚ä½•å¼€å§‹ï¼Ÿä½¿ç”¨â€œğŸ“š Prompt Bayâ€å¯»æ‰¾å®Œç¾çš„ç³»ç»Ÿæç¤ºè¯ã€‚æ‚¨å¯ä»¥æŒ‰ç±»åˆ«æˆ–å…³é”®å­—æœç´¢ï¼Œå¹¶ä¸€é”®åº”ç”¨åˆ°å½“å‰ä¼šè¯ä¸­ã€‚</p>
</section>
<section id="é«˜çº§æ–‡ä»¶åˆ†æ" class="level3">
<h3 class="anchored" data-anchor-id="é«˜çº§æ–‡ä»¶åˆ†æ">é«˜çº§æ–‡ä»¶åˆ†æ</h3>
<p>ä¸Šä¼  PDF æˆ– Excel æ–‡ä»¶ï¼Œåº”ç”¨ä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢ä¸º Markdown æˆ–è¡¨æ ¼ï¼Œå¹¶åŒ…å«åœ¨å¯¹è¯ä¸Šä¸‹æ–‡ä¸­ã€‚è¿™å…è®¸æ‚¨ç›´æ¥é’ˆå¯¹æ–‡æ¡£å†…å®¹å‘ AI æé—®ã€‚</p>
<hr>
<p><em>æ¬¢è¿åœ¨ <a href="https://github.com/JCwinning/AI_Chat">GitHub</a> æŸ¥çœ‹å®Œæ•´æºä»£ç ï¼Œå¹¶å¼€å§‹æ„å»ºæ‚¨è‡ªå·±çš„ AI é©±åŠ¨å·¥ä½œæµï¼</em></p>


<!-- -->

</section>
</section>

 ]]></description>
  <category>AI</category>
  <category>Streamlit</category>
  <category>Python</category>
  <category>LLM</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/AI-Chat/</guid>
  <pubDate>Tue, 06 Jan 2026 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/AI-Chat/images/featured.png" medium="image" type="image/png" height="126" width="144"/>
</item>
<item>
  <title>ä½¿ç”¨ AI SQL æ„å»ºçš„äº¤äº’å¼ GDP è¶‹åŠ¿çœ‹æ¿</title>
  <link>https://jcwinning.github.io/LandingPage/posts/gdp-trend/</link>
  <description><![CDATA[ 





<section id="é¡¹ç›®æ¦‚è§ˆ" class="level1">
<h1>é¡¹ç›®æ¦‚è§ˆ</h1>
<p>GDP è¶‹åŠ¿çœ‹æ¿ (GDP Trend Dashboard) æ˜¯ä¸€ä¸ªå¤æ‚çš„ Web åº”ç”¨ç¨‹åºï¼Œç”¨äºå¯è§†åŒ–å’Œåˆ†ææ¥è‡ªä¸–ç•Œé“¶è¡Œ API çš„ç»æµæ•°æ®ã€‚è¯¥ç³»ç»Ÿçš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºå…¶åŒé‡æ–¹æ³•ï¼šå°†ä¼ ç»Ÿçš„äº¤äº’å¼å¯è§†åŒ–ä¸ AI é©±åŠ¨çš„è‡ªç„¶è¯­è¨€æŸ¥è¯¢ç›¸ç»“åˆï¼Œä½¿æŠ€æœ¯åˆ†æå¸ˆå’Œæ™®é€šç”¨æˆ·éƒ½èƒ½è½»æ¾è·å–ç»æµæ•°æ®ã€‚</p>
<p>åœ¨çº¿æ¼”ç¤ºï¼š<a href="https://world-GDP-trend.streamlit.app">https://world-GDP-trend.streamlit.app</a></p>
<p>Githubï¼š<a href="https://github.com/JCwinning/GDP_trend">https://github.com/JCwinning/GDP_trend</a></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true" href="">GDP è¶‹åŠ¿</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false" href="">AI æŸ¥è¯¢ç•Œé¢</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" aria-controls="tabset-1-3" aria-selected="false" href="">AI æ‘˜è¦ç”Ÿæˆ</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<p>äº¤äº’å¼å…¨çƒ GDP è¶‹åŠ¿å¯è§†åŒ–</p>
<p><img src="https://jcwinning.github.io/LandingPage/posts/gdp-trend/images/0.png" class="img-fluid" style="width:100.0%"></p>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<p>äº¤äº’å¼ AI é©±åŠ¨çš„è‡ªç„¶è¯­è¨€è½¬ SQL</p>
<p><img src="https://jcwinning.github.io/LandingPage/posts/gdp-trend/images/1.png" class="img-fluid" style="width:100.0%"></p>
</div>
<div id="tabset-1-3" class="tab-pane" aria-labelledby="tabset-1-3-tab">
<p>AI ç”Ÿæˆçš„ç»æµæ•°æ®æ´è§æ‘˜è¦</p>
<p><img src="https://jcwinning.github.io/LandingPage/posts/gdp-trend/images/2.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
</div>
<section id="æ ¸å¿ƒæ¶æ„" class="level2">
<h2 class="anchored" data-anchor-id="æ ¸å¿ƒæ¶æ„">æ ¸å¿ƒæ¶æ„</h2>
<section id="æŠ€æœ¯æ ˆ" class="level3">
<h3 class="anchored" data-anchor-id="æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>ä¸»è¦æ¡†æ¶</strong>ï¼šç”¨äºäº¤äº’å¼ Web åº”ç”¨çš„ Streamlit</li>
<li><strong>æ•°æ®å¤„ç†</strong>ï¼šç”¨äºæ•°æ®æ“ä½œå’Œåˆ†æçš„ Pandas</li>
<li><strong>å¯è§†åŒ–</strong>ï¼šç”¨äºäº¤äº’å¼å›¾è¡¨çš„ Plotly Express</li>
<li><strong>æ•°æ®åº“</strong>ï¼šç”¨äºé«˜æ•ˆ SQL æŸ¥è¯¢çš„ DuckDB</li>
<li><strong>AI é›†æˆ</strong>ï¼šç”¨äºè‡ªç„¶è¯­è¨€è½¬ SQL çš„ ModelScope GLM-4.6</li>
<li><strong>æ•°æ®æº</strong>ï¼šé€šè¿‡ <code>wbgapi</code> åº“è°ƒç”¨çš„ä¸–ç•Œé“¶è¡Œ API</li>
</ul>
</section>
<section id="å…³é”®ç‰¹æ€§" class="level3">
<h3 class="anchored" data-anchor-id="å…³é”®ç‰¹æ€§">å…³é”®ç‰¹æ€§</h3>
<ol type="1">
<li><strong>å¤šå›½ GDP è¶‹åŠ¿å¯¹æ¯”</strong></li>
<li><strong>æ”¯æŒå¤šç§ç»æµæŒ‡æ ‡</strong>ï¼ˆGDPã€äººå‡ GDPã€äººå£ã€åŒæ¯”å¢é•¿ç‡ï¼‰</li>
<li><strong>AI é©±åŠ¨çš„è‡ªç„¶è¯­è¨€æŸ¥è¯¢</strong></li>
<li><strong>ä½¿ç”¨ DuckDB çš„ç›´æ¥ SQL æ¥å£</strong></li>
<li><strong>å®Œå–„çš„åŒè¯­æ”¯æŒ</strong>ï¼ˆä¸­/è‹±æ–‡ï¼‰</li>
<li><strong>å¸¦äº¤äº’æ§åˆ¶çš„æ—¶é—´èŒƒå›´ç­›é€‰</strong>ï¼ˆ2000å¹´è‡³ä»Šï¼‰</li>
</ol>
</section>
</section>
<section id="æ•°æ®æµæ°´çº¿æ¶æ„" class="level2">
<h2 class="anchored" data-anchor-id="æ•°æ®æµæ°´çº¿æ¶æ„">æ•°æ®æµæ°´çº¿æ¶æ„</h2>
<p>è¯¥åº”ç”¨ç¨‹åºå®ç°äº†ä¸€ä¸ªå¤æ‚çš„æ•°æ®æµæ°´çº¿ï¼Œä»¥ç¡®ä¿æ•°æ®è´¨é‡å’Œå®æ—¶å¯ç”¨æ€§ï¼š</p>
<div class="cell" data-eval="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    A[ä¸–ç•Œé“¶è¡Œ API] --&gt; B[æ•°æ®é‡‡é›†&lt;br/&gt;download_data.py]
    B --&gt; C[æ•°æ®å¤„ç†&lt;br/&gt;å›½å®¶æ˜ å°„ã€æŒ‡æ ‡è®¡ç®—]
    C --&gt; D[æ•°æ®å­˜å‚¨&lt;br/&gt;CSV æ–‡ä»¶]

    D --&gt; E[Streamlit åº”ç”¨&lt;br/&gt;app.py]
    E --&gt; F[DuckDB&lt;br/&gt;å†…å­˜ SQL]

    F --&gt; G[å¯è§†åŒ–å¼•æ“&lt;br/&gt;Plotly Express]
    F --&gt; H[AI æŸ¥è¯¢å¼•æ“&lt;br/&gt;ModelScope API]
    F --&gt; I[ä¼šè¯ç®¡ç†&lt;br/&gt;ç”¨æˆ·çŠ¶æ€]

    G --&gt; J[äº¤äº’å¼å›¾è¡¨]
    H --&gt; K[è‡ªç„¶è¯­è¨€&lt;br/&gt;è½¬ SQL]
    I --&gt; L[æŒä¹…åŒ–&lt;br/&gt;æŸ¥è¯¢ç»“æœ]

    J --&gt; M[ç”¨æˆ·ç•Œé¢]
    K --&gt; M
    L --&gt; M
</pre>
</div>
<p></p><figcaption> GDP åº”ç”¨æ¶æ„</figcaption> </figure><p></p>
</div>
</div>
</div>
</section>
<section id="æ•°æ®é‡‡é›†ä¸å¤„ç†" class="level2">
<h2 class="anchored" data-anchor-id="æ•°æ®é‡‡é›†ä¸å¤„ç†">æ•°æ®é‡‡é›†ä¸å¤„ç†</h2>
<section id="ä¸–ç•Œé“¶è¡Œ-api-é›†æˆ" class="level3">
<h3 class="anchored" data-anchor-id="ä¸–ç•Œé“¶è¡Œ-api-é›†æˆ">ä¸–ç•Œé“¶è¡Œ API é›†æˆ</h3>
<p>åº”ç”¨ç¨‹åºä½¿ç”¨ä¸–ç•Œé“¶è¡Œ API é‡‡é›†å…¨é¢çš„ç»æµæ•°æ®ï¼š</p>
<div id="523bec37" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> wbgapi <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> wb</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pycountry</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> download_economic_data():</span>
<span id="cb1-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ä»ä¸–ç•Œé“¶è¡Œ API ä¸‹è½½æ‰€æœ‰å›½å®¶çš„ GDP æ•°æ®"""</span></span>
<span id="cb1-7"></span>
<span id="cb1-8">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å®šä¹‰è¦ä¸‹è½½çš„ç»æµæŒ‡æ ‡</span></span>
<span id="cb1-9">    indicators <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb1-10">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gdp_current_usd'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'NY.GDP.MKTP.CD'</span>,</span>
<span id="cb1-11">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gdp_per_capita_current_usd'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'NY.GDP.PCAP.CD'</span>,</span>
<span id="cb1-12">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'population_total'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'SP.POP.TOTL'</span></span>
<span id="cb1-13">    }</span>
<span id="cb1-14"></span>
<span id="cb1-15">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä¸‹è½½ 2000 å¹´è‡³ä»Šçš„æ•°æ®</span></span>
<span id="cb1-16">    data_frames <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb1-17">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> indicator_name, indicator_code <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> indicators.items():</span>
<span id="cb1-18">        df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> wb.get_series(</span>
<span id="cb1-19">            series<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>indicator_code,</span>
<span id="cb1-20">            economy<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'all'</span>,</span>
<span id="cb1-21">            time<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'2000:2024'</span>,</span>
<span id="cb1-22">            simplify_index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span>
<span id="cb1-23">        )</span>
<span id="cb1-24"></span>
<span id="cb1-25">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¤„ç†å¹¶æ·»åŠ åˆ°é›†åˆ</span></span>
<span id="cb1-26">        df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df.reset_index()</span>
<span id="cb1-27">        df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'indicator'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> indicator_name</span>
<span id="cb1-28">        data_frames.append(df)</span>
<span id="cb1-29"></span>
<span id="cb1-30">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆå¹¶æ‰€æœ‰æŒ‡æ ‡</span></span>
<span id="cb1-31">    combined_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.concat(data_frames, ignore_index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb1-32">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> combined_df</span>
<span id="cb1-33"></span>
<span id="cb1-34"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> create_country_reference_table():</span>
<span id="cb1-35">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åˆ›å»ºåŒ…å« ISO ä»£ç çš„å®Œæ•´å›½å®¶å…ƒæ•°æ®è¡¨"""</span></span>
<span id="cb1-36">    countries <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>(pycountry.countries)</span>
<span id="cb1-37"></span>
<span id="cb1-38">    df_all <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.DataFrame([{</span>
<span id="cb1-39">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'country_name'</span>: country.name,</span>
<span id="cb1-40">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'country_code_2'</span>: country.alpha_2,</span>
<span id="cb1-41">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'country_code_3'</span>: country.alpha_3</span>
<span id="cb1-42">    } <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> country <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> countries])</span>
<span id="cb1-43"></span>
<span id="cb1-44">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ·»åŠ å¤§æ´²æ˜ å°„</span></span>
<span id="cb1-45">    iso_to_continent <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb1-46">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"US"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"North America"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"CN"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asia"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"JP"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Asia"</span>,</span>
<span id="cb1-47">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DE"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Europe"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GB"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Europe"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"FR"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Europe"</span></span>
<span id="cb1-48">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ... ä¸ºæ‰€æœ‰å›½å®¶å®Œæˆæ˜ å°„</span></span>
<span id="cb1-49">    }</span>
<span id="cb1-50"></span>
<span id="cb1-51">    df_all[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'continent'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_all[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'country_code_2'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">map</span>(iso_to_continent)</span>
<span id="cb1-52">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> df_all</span></code></pre></div></div>
</details>
</div>
</section>
<section id="æ•°æ®æ¨¡å¼ä¸ç»“æ„" class="level3">
<h3 class="anchored" data-anchor-id="æ•°æ®æ¨¡å¼ä¸ç»“æ„">æ•°æ®æ¨¡å¼ä¸ç»“æ„</h3>
<p>åº”ç”¨ç¨‹åºä½¿ç”¨æ¸…æ™°ã€è§„èŒƒåŒ–çš„æ•°æ®ç»“æ„ï¼š</p>
<div id="99433cf5" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--</span> ä¸»è¦æ•°æ®æ¨¡å¼</span>
<span id="cb2-2">CREATE TABLE df_gdp (</span>
<span id="cb2-3">    country_name TEXT,        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--</span> æ˜¾ç¤ºåç§° (è‹±æ–‡)</span>
<span id="cb2-4">    country_code_2 TEXT,      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--</span> ISO alpha<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> ä»£ç </span>
<span id="cb2-5">    country_code_3 TEXT,      <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--</span> ISO alpha<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span> ä»£ç </span>
<span id="cb2-6">    continent TEXT,            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--</span> å¤§æ´²åˆ†ç±»</span>
<span id="cb2-7">    year INTEGER,              <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--</span> æ•°æ®å¹´ä»½</span>
<span id="cb2-8">    indicator TEXT,            <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--</span> ç»æµæŒ‡æ ‡åç§°</span>
<span id="cb2-9">    value REAL                <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--</span> æŒ‡æ ‡æ•°å€¼</span>
<span id="cb2-10">)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb2-11"></span>
<span id="cb2-12"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--</span> ç¤ºä¾‹æ•°æ®</span>
<span id="cb2-13">INSERT INTO df_gdp VALUES</span>
<span id="cb2-14">(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'United States'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'US'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'USA'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'North America'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2023</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gdp_current_usd'</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">27444144.3</span>),</span>
<span id="cb2-15">(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'United States'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'US'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'USA'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'North America'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2023</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gdp_per_capita_current_usd'</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">81254.2</span>),</span>
<span id="cb2-16">(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'United States'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'US'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'USA'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'North America'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2023</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'population_total'</span>, <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">334914895.0</span>)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="äº¤äº’å¼å¯è§†åŒ–ç³»ç»Ÿ" class="level2">
<h2 class="anchored" data-anchor-id="äº¤äº’å¼å¯è§†åŒ–ç³»ç»Ÿ">äº¤äº’å¼å¯è§†åŒ–ç³»ç»Ÿ</h2>
<section id="plotly-express-å®ç°" class="level3">
<h3 class="anchored" data-anchor-id="plotly-express-å®ç°">Plotly Express å®ç°</h3>
<p>åº”ç”¨ç¨‹åºä½¿ç”¨ Plotly Express åˆ›å»ºäº¤äº’å¼å›¾è¡¨ï¼Œå¹¶ä¿æŒä¸€è‡´çš„é¢œè‰²ç¼–ç ï¼š</p>
<div id="3f57170a" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> plotly.express <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> px</span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@st.cache_data</span></span>
<span id="cb3-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> load_data():</span>
<span id="cb3-5">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åŠ è½½å¹¶ç¼“å­˜ GDP æ•°æ®"""</span></span>
<span id="cb3-6">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'data/gdp_data_2000_present.csv'</span>)</span>
<span id="cb3-7"></span>
<span id="cb3-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> create_gdp_trend_chart(selected_countries, selected_indicator, year_range):</span>
<span id="cb3-9">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åˆ›å»ºäº¤äº’å¼ GDP è¶‹åŠ¿å¯è§†åŒ–"""</span></span>
<span id="cb3-10"></span>
<span id="cb3-11">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ è½½ç­›é€‰åçš„æ•°æ®</span></span>
<span id="cb3-12">    df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> load_data()</span>
<span id="cb3-13"></span>
<span id="cb3-14">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åº”ç”¨ç­›é€‰æ¡ä»¶</span></span>
<span id="cb3-15">    filtered_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df[</span>
<span id="cb3-16">        (df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'country_name'</span>].isin(selected_countries)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span></span>
<span id="cb3-17">        (df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'indicator'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> selected_indicator) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span></span>
<span id="cb3-18">        (df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'year'</span>].between(year_range[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>], year_range[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]))</span>
<span id="cb3-19">    ]</span>
<span id="cb3-20"></span>
<span id="cb3-21">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»ºäº¤äº’å¼æŠ˜çº¿å›¾</span></span>
<span id="cb3-22">    fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> px.line(</span>
<span id="cb3-23">        filtered_df,</span>
<span id="cb3-24">        x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'year'</span>,</span>
<span id="cb3-25">        y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'value'</span>,</span>
<span id="cb3-26">        color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'country_name'</span>,</span>
<span id="cb3-27">        title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>selected_indicator<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>replace(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>title()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> è¶‹åŠ¿'</span>,</span>
<span id="cb3-28">        labels<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb3-29">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'year'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'å¹´ä»½'</span>,</span>
<span id="cb3-30">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'value'</span>: format_indicator_label(selected_indicator),</span>
<span id="cb3-31">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'country_name'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'å›½å®¶'</span></span>
<span id="cb3-32">        }</span>
<span id="cb3-33">    )</span>
<span id="cb3-34"></span>
<span id="cb3-35">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è‡ªå®šä¹‰å›¾è¡¨å¤–è§‚</span></span>
<span id="cb3-36">    fig.update_layout(</span>
<span id="cb3-37">        xaxis_title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å¹´ä»½"</span>,</span>
<span id="cb3-38">        yaxis_title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>format_indicator_label(selected_indicator),</span>
<span id="cb3-39">        hovermode<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'x unified'</span>,</span>
<span id="cb3-40">        showlegend<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>,</span>
<span id="cb3-41">        legend<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">dict</span>(</span>
<span id="cb3-42">            orientation<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"h"</span>,</span>
<span id="cb3-43">            yanchor<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottom"</span>,</span>
<span id="cb3-44">            y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.02</span>,</span>
<span id="cb3-45">            xanchor<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"right"</span>,</span>
<span id="cb3-46">            x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb3-47">        )</span>
<span id="cb3-48">    )</span>
<span id="cb3-49"></span>
<span id="cb3-50">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> fig</span>
<span id="cb3-51"></span>
<span id="cb3-52"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> format_indicator_label(indicator):</span>
<span id="cb3-53">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""æ ¼å¼åŒ–æŒ‡æ ‡åç§°ä»¥ä¾›æ˜¾ç¤º"""</span></span>
<span id="cb3-54">    labels <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb3-55">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gdp_current_usd'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'GDP (ç°ä»·ç¾å…ƒ)'</span>,</span>
<span id="cb3-56">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gdp_per_capita_current_usd'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'äººå‡ GDP (ç°ä»·ç¾å…ƒ)'</span>,</span>
<span id="cb3-57">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'population_total'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'æ€»äººå£'</span>,</span>
<span id="cb3-58">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gdp_per_capita_current_usd_yoy'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'äººå‡ GDP åŒæ¯”å¢é•¿ç‡ (%)'</span></span>
<span id="cb3-59">    }</span>
<span id="cb3-60">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> labels.get(indicator, indicator.replace(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'_'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">' '</span>).title())</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="ai-é©±åŠ¨çš„åˆ†æ" class="level2">
<h2 class="anchored" data-anchor-id="ai-é©±åŠ¨çš„åˆ†æ">AI é©±åŠ¨çš„åˆ†æ</h2>
<section id="è‡ªç„¶è¯­è¨€è½¬-sql" class="level3">
<h3 class="anchored" data-anchor-id="è‡ªç„¶è¯­è¨€è½¬-sql">è‡ªç„¶è¯­è¨€è½¬ SQL</h3>
<p>è¯¥ç¨‹åºæœ€å…·åˆ›æ–°æ€§çš„åŠŸèƒ½æ˜¯ AI é©±åŠ¨çš„è‡ªç„¶è¯­è¨€æŸ¥è¯¢ï¼š</p>
<div id="f3df571a" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb4-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> duckdb</span>
<span id="cb4-3"></span>
<span id="cb4-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> generate_sql_from_question(question, language):</span>
<span id="cb4-5">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ä½¿ç”¨ ModelScope API å°†è‡ªç„¶è¯­è¨€é—®é¢˜è½¬æ¢ä¸º SQL æŸ¥è¯¢"""</span></span>
<span id="cb4-6"></span>
<span id="cb4-7">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è·å–æ•°æ®åº“æ¨¡å¼ä¸Šä¸‹æ–‡</span></span>
<span id="cb4-8">    schema_info <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"""</span></span>
<span id="cb4-9"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    è¡¨å: df_gdp</span></span>
<span id="cb4-10"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    åˆ—å:</span></span>
<span id="cb4-11"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    - country_name (TEXT): å›½å®¶æ˜¾ç¤ºåç§°</span></span>
<span id="cb4-12"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    - country_code_2 (TEXT): ISO alpha-2 å›½å®¶ä»£ç </span></span>
<span id="cb4-13"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    - continent (TEXT): å¤§æ´²åˆ†ç±»</span></span>
<span id="cb4-14"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    - year (INTEGER): æ•°æ®å¹´ä»½ (2000-2024)</span></span>
<span id="cb4-15"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    - indicator (TEXT): ç»æµæŒ‡æ ‡åç§°</span></span>
<span id="cb4-16"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    - value (REAL): æŒ‡æ ‡æ•°å€¼</span></span>
<span id="cb4-17"></span>
<span id="cb4-18"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    å¯ç”¨æŒ‡æ ‡:</span></span>
<span id="cb4-19"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    - gdp_current_usd: ç°ä»· GDP (ç¾å…ƒ)</span></span>
<span id="cb4-20"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    - gdp_per_capita_current_usd: ç°ä»·äººå‡ GDP (ç¾å…ƒ)</span></span>
<span id="cb4-21"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    - population_total: æ€»äººå£</span></span>
<span id="cb4-22"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    - gdp_per_capita_current_usd_yoy: äººå‡ GDP åŒæ¯”å¢é•¿ç‡ (%)</span></span>
<span id="cb4-23"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    """</span></span>
<span id="cb4-24"></span>
<span id="cb4-25">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»ºç‰¹å®šè¯­è¨€çš„æç¤ºè¯</span></span>
<span id="cb4-26">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> language <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zh"</span>:</span>
<span id="cb4-27">        prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"""è¯·å°†ä»¥ä¸‹è‡ªç„¶è¯­è¨€é—®é¢˜è½¬æ¢ä¸ºSQLæŸ¥è¯¢ï¼Œä»…è¿”å›SQLè¯­å¥ï¼Œä¸è¦è§£é‡Šã€‚</span></span>
<span id="cb4-28"></span>
<span id="cb4-29"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">æ•°æ®åº“ä¿¡æ¯ï¼š</span></span>
<span id="cb4-30"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>schema_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb4-31"></span>
<span id="cb4-32"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">ç”¨æˆ·é—®é¢˜ï¼š</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>question<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb4-33"></span>
<span id="cb4-34"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">è¦æ±‚ï¼š</span></span>
<span id="cb4-35"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">1. åªè¿”å›æ ‡å‡†çš„SELECTè¯­å¥</span></span>
<span id="cb4-36"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">2. ä¸è¦æ·»åŠ ä»»ä½•è§£é‡Šæˆ–æ³¨é‡Š</span></span>
<span id="cb4-37"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">3. ä½¿ç”¨LIMIT 50é™åˆ¶ç»“æœæ•°é‡"""</span></span>
<span id="cb4-38">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb4-39">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># (ä¿æŒåŸè‹±æ–‡ prompt)</span></span>
<span id="cb4-40">        prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"""Convert the following natural language question to SQL query. Return only the SQL statement, no explanation.</span></span>
<span id="cb4-41"></span>
<span id="cb4-42"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Database information:</span></span>
<span id="cb4-43"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>schema_info<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb4-44"></span>
<span id="cb4-45"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">User question: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>question<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb4-46"></span>
<span id="cb4-47"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Requirements:</span></span>
<span id="cb4-48"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">1. Return only standard SELECT statement</span></span>
<span id="cb4-49"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">2. Do not add any explanation or comments</span></span>
<span id="cb4-50"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">3. Use LIMIT 50 to restrict results"""</span></span>
<span id="cb4-51"></span>
<span id="cb4-52">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è°ƒç”¨ ModelScope API</span></span>
<span id="cb4-53">    client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb4-54">        api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'MODELSCOPE_API_KEY'</span>),</span>
<span id="cb4-55">        base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span></span>
<span id="cb4-56">    )</span>
<span id="cb4-57"></span>
<span id="cb4-58">    response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.chat.completions.create(</span>
<span id="cb4-59">        model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qwen/Qwen3-235B"</span>,</span>
<span id="cb4-60">        messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[{<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: prompt}],</span>
<span id="cb4-61">        temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.1</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ä½æ¸©åº¦ä»¥è·å¾—ä¸€è‡´çš„ SQL</span></span>
<span id="cb4-62">        max_tokens<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span></span>
<span id="cb4-63">    )</span>
<span id="cb4-64"></span>
<span id="cb4-65">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content.strip()</span></code></pre></div></div>
</details>
</div>
</section>
<section id="æŸ¥è¯¢æ‰§è¡Œä¸-ai-æ‘˜è¦" class="level3">
<h3 class="anchored" data-anchor-id="æŸ¥è¯¢æ‰§è¡Œä¸-ai-æ‘˜è¦">æŸ¥è¯¢æ‰§è¡Œä¸ AI æ‘˜è¦</h3>
<div id="0e757453" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> execute_query_with_ai_summary(sql_query, original_question):</span>
<span id="cb5-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""æ‰§è¡Œ SQL æŸ¥è¯¢å¹¶ç”Ÿæˆ AI æ‘˜è¦"""</span></span>
<span id="cb5-3"></span>
<span id="cb5-4">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb5-5">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ DuckDB æ‰§è¡ŒæŸ¥è¯¢</span></span>
<span id="cb5-6">        conn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> duckdb.<span class="ex" style="color: null;
background-color: null;
font-style: inherit;">connect</span>()</span>
<span id="cb5-7">        result_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> conn.execute(sql_query).fetchdf()</span>
<span id="cb5-8"></span>
<span id="cb5-9">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å°†ç»“æœå­˜å…¥ä¼šè¯çŠ¶æ€</span></span>
<span id="cb5-10">        st.session_state.sql_result <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> result_df</span>
<span id="cb5-11">        st.session_state.sql_query <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sql_query</span>
<span id="cb5-12"></span>
<span id="cb5-13">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¦‚æœæœ‰æ•°æ®ï¼Œç”Ÿæˆ AI æ‘˜è¦</span></span>
<span id="cb5-14">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> result_df.empty:</span>
<span id="cb5-15">            generate_ai_summary(result_df, original_question)</span>
<span id="cb5-16"></span>
<span id="cb5-17">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> result_df</span>
<span id="cb5-18"></span>
<span id="cb5-19">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb5-20">        st.error(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"æŸ¥è¯¢æ‰§è¡Œé”™è¯¯: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(e)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-21">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb5-22"></span>
<span id="cb5-23"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> generate_ai_summary(data_frame, question):</span>
<span id="cb5-24">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ç”ŸæˆæŸ¥è¯¢ç»“æœçš„ AI æ‘˜è¦"""</span></span>
<span id="cb5-25"></span>
<span id="cb5-26">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å°† DataFrame è½¬æ¢ä¸ºæ–‡æœ¬ä»¥ä¾¿åˆ†æ</span></span>
<span id="cb5-27">    data_summary <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> data_frame.to_string(index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb5-28"></span>
<span id="cb5-29">    summary_prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"""æ ¹æ®ä»¥ä¸‹æ•°æ®åˆ†æç»“æœï¼Œæä¾›ä¸€ä¸ªç®€æ˜æ‰¼è¦çš„æ‘˜è¦ï¼š</span></span>
<span id="cb5-30"></span>
<span id="cb5-31"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">åŸå§‹é—®é¢˜ï¼š</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>question<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-32"></span>
<span id="cb5-33"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">æŸ¥è¯¢ç»“æœï¼š</span></span>
<span id="cb5-34"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>data_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-35"></span>
<span id="cb5-36"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">è¯·æä¾›ï¼š</span></span>
<span id="cb5-37"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">1. å…³é”®å‘ç°çš„ç®€è¦åˆ†æ</span></span>
<span id="cb5-38"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">2. ä»»ä½•å€¼å¾—æ³¨æ„çš„è¶‹åŠ¿æˆ–æ¨¡å¼</span></span>
<span id="cb5-39"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">3. æ¥è‡ªæ•°æ®çš„é‡è¦è§è§£</span></span>
<span id="cb5-40"></span>
<span id="cb5-41"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">è¯·å°†æ‘˜è¦æ§åˆ¶åœ¨ 200 å­—ä»¥å†…ï¼Œå¹¶ç¡®ä¿é€šä¿—æ˜“æ‡‚ã€‚"""</span></span>
<span id="cb5-42"></span>
<span id="cb5-43">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ AI ç”Ÿæˆæ‘˜è¦</span></span>
<span id="cb5-44">    client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb5-45">        api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'MODELSCOPE_API_KEY'</span>),</span>
<span id="cb5-46">        base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span></span>
<span id="cb5-47">    )</span>
<span id="cb5-48"></span>
<span id="cb5-49">    response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.chat.completions.create(</span>
<span id="cb5-50">        model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qwen/Qwen3-235B"</span>,</span>
<span id="cb5-51">        messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[{<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: summary_prompt}],</span>
<span id="cb5-52">        temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span>,</span>
<span id="cb5-53">        max_tokens<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span></span>
<span id="cb5-54">    )</span>
<span id="cb5-55"></span>
<span id="cb5-56">    st.session_state.ai_summary <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> response.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content</span></code></pre></div></div>
</details>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://jcwinning.github.io/LandingPage/posts/gdp-trend/images/1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>AI æŸ¥è¯¢ç•Œé¢ - è‡ªç„¶è¯­è¨€å¤„ç†</figcaption>
</figure>
</div>
</section>
</section>
<section id="åŒè¯­æ”¯æŒç³»ç»Ÿ" class="level2">
<h2 class="anchored" data-anchor-id="åŒè¯­æ”¯æŒç³»ç»Ÿ">åŒè¯­æ”¯æŒç³»ç»Ÿ</h2>
<section id="å›½é™…åŒ–æ¶æ„" class="level3">
<h3 class="anchored" data-anchor-id="å›½é™…åŒ–æ¶æ„">å›½é™…åŒ–æ¶æ„</h3>
<p>åº”ç”¨ç¨‹åºå®ç°äº†å…¨é¢çš„ä¸­/è‹±æ–‡æ”¯æŒï¼š</p>
<div id="d43e8624" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># language.py - å®Œæ•´çš„ç¿»è¯‘ç³»ç»Ÿ</span></span>
<span id="cb6-2">translations <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb6-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span>: {</span>
<span id="cb6-4">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸŒ GDP Trend Dashboard"</span>,</span>
<span id="cb6-5">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gdp_trend"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GDP Trend"</span>,</span>
<span id="cb6-6">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ai_powered_chat"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI-Powered Data Chat"</span>,</span>
<span id="cb6-7">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"default_question"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"What is the average GDP per capita for China, Japan, and Korea during 2020 to 2023?"</span></span>
<span id="cb6-8">    },</span>
<span id="cb6-9">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zh"</span>: {</span>
<span id="cb6-10">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸŒ GDP è¶‹åŠ¿çœ‹æ¿"</span>,</span>
<span id="cb6-11">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gdp_trend"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"GDP è¶‹åŠ¿"</span>,</span>
<span id="cb6-12">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ai_powered_chat"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI æ•°æ®å¯¹è¯"</span>,</span>
<span id="cb6-13">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"default_question"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2020å¹´è‡³2023å¹´æœŸé—´ï¼Œä¸­å›½ã€æ—¥æœ¬å’ŒéŸ©å›½çš„å¹³å‡äººå‡GDPæ˜¯å¤šå°‘ï¼Ÿ"</span></span>
<span id="cb6-14">    }</span>
<span id="cb6-15">}</span>
<span id="cb6-16"></span>
<span id="cb6-17"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_text(key):</span>
<span id="cb6-18">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""è·å–å½“å‰è¯­è¨€çš„ç¿»è¯‘æ–‡æœ¬"""</span></span>
<span id="cb6-19">    language <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.session_state.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"language"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span>)</span>
<span id="cb6-20">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> translations.get(language, {}).get(key, key)</span>
<span id="cb6-21"></span>
<span id="cb6-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># UI ä¸­çš„è¯­è¨€åˆ‡æ¢</span></span>
<span id="cb6-23">col1, col2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.columns([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb6-24"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> col1:</span>
<span id="cb6-25">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> st.button(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"English"</span>):</span>
<span id="cb6-26">        st.session_state.language <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span></span>
<span id="cb6-27">        st.rerun()</span>
<span id="cb6-28"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> col2:</span>
<span id="cb6-29">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> st.button(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä¸­æ–‡"</span>):</span>
<span id="cb6-30">        st.session_state.language <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zh"</span></span>
<span id="cb6-31">        st.rerun()</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="ç”¨æˆ·ç•Œé¢è®¾è®¡" class="level2">
<h2 class="anchored" data-anchor-id="ç”¨æˆ·ç•Œé¢è®¾è®¡">ç”¨æˆ·ç•Œé¢è®¾è®¡</h2>
<section id="ä¸»åº”ç”¨ç¨‹åºç»“æ„" class="level3">
<h3 class="anchored" data-anchor-id="ä¸»åº”ç”¨ç¨‹åºç»“æ„">ä¸»åº”ç”¨ç¨‹åºç»“æ„</h3>
<div id="f437212a" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> main():</span>
<span id="cb7-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""é‡‡ç”¨æ ‡ç­¾é¡µå¯¼èˆªçš„ä¸»åº”ç”¨ç¨‹åº"""</span></span>
<span id="cb7-3"></span>
<span id="cb7-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å³ä¸Šè§’çš„è¯­è¨€åˆ‡æ¢</span></span>
<span id="cb7-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> st.container():</span>
<span id="cb7-6">        st.markdown(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"""</span></span>
<span id="cb7-7"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">        &lt;div class="language-toggle"&gt;</span></span>
<span id="cb7-8"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">            &lt;button onclick="setLanguage('en')"&gt;EN&lt;/button&gt;</span></span>
<span id="cb7-9"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">            &lt;button onclick="setLanguage('zh')"&gt;ä¸­æ–‡&lt;/button&gt;</span></span>
<span id="cb7-10"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">        &lt;/div&gt;</span></span>
<span id="cb7-11"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">        """</span>, unsafe_allow_html<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb7-12"></span>
<span id="cb7-13">    st.title(get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>))</span>
<span id="cb7-14"></span>
<span id="cb7-15">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ ‡ç­¾é¡µç•Œé¢</span></span>
<span id="cb7-16">    tab1, tab2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.tabs([get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gdp_trend"</span>), get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"query"</span>)])</span>
<span id="cb7-17"></span>
<span id="cb7-18">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> tab1:</span>
<span id="cb7-19">        render_gdp_trends_tab()</span>
<span id="cb7-20"></span>
<span id="cb7-21">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> tab2:</span>
<span id="cb7-22">        render_query_interface_tab()</span>
<span id="cb7-23"></span>
<span id="cb7-24"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> render_gdp_trends_tab():</span>
<span id="cb7-25">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""æ¸²æŸ“ GDP è¶‹åŠ¿å¯è§†åŒ–æ ‡ç­¾é¡µ"""</span></span>
<span id="cb7-26"></span>
<span id="cb7-27">    st.header(get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gdp_trend"</span>))</span>
<span id="cb7-28"></span>
<span id="cb7-29">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ è½½æ•°æ®</span></span>
<span id="cb7-30">    df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> load_data()</span>
<span id="cb7-31"></span>
<span id="cb7-32">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç­›é€‰æ§åˆ¶</span></span>
<span id="cb7-33">    col1, col2, col3 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.columns([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb7-34"></span>
<span id="cb7-35">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> col1:</span>
<span id="cb7-36">        selected_countries <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.multiselect(</span>
<span id="cb7-37">            get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"select_countries"</span>),</span>
<span id="cb7-38">            options<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'country_name'</span>].unique(),</span>
<span id="cb7-39">            default<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'United States'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'China'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Japan'</span>]</span>
<span id="cb7-40">        )</span>
<span id="cb7-41"></span>
<span id="cb7-42">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> col2:</span>
<span id="cb7-43">        selected_indicator <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.selectbox(</span>
<span id="cb7-44">            get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"select_indicator"</span>),</span>
<span id="cb7-45">            options<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb7-46">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gdp_current_usd'</span>,</span>
<span id="cb7-47">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gdp_per_capita_current_usd'</span>,</span>
<span id="cb7-48">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'population_total'</span>,</span>
<span id="cb7-49">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gdp_per_capita_current_usd_yoy'</span></span>
<span id="cb7-50">            ],</span>
<span id="cb7-51">            format_func<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">lambda</span> x: format_indicator_label(x)</span>
<span id="cb7-52">        )</span>
<span id="cb7-53"></span>
<span id="cb7-54">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> col3:</span>
<span id="cb7-55">        year_range <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.slider(</span>
<span id="cb7-56">            get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"select_year_range"</span>),</span>
<span id="cb7-57">            min_value<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>,</span>
<span id="cb7-58">            max_value<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2024</span>,</span>
<span id="cb7-59">            value<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2010</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2024</span>),</span>
<span id="cb7-60">            step<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb7-61">        )</span>
<span id="cb7-62"></span>
<span id="cb7-63">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç”Ÿæˆå¹¶æ˜¾ç¤ºå›¾è¡¨</span></span>
<span id="cb7-64">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> selected_countries <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">and</span> selected_indicator:</span>
<span id="cb7-65">        fig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> create_gdp_trend_chart(selected_countries, selected_indicator, year_range)</span>
<span id="cb7-66">        st.plotly_chart(fig, use_container_width<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb7-67"></span>
<span id="cb7-68">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ˜¾ç¤ºåŸå§‹æ•°æ®é€‰é¡¹</span></span>
<span id="cb7-69">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> st.checkbox(get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"show_raw_data"</span>)):</span>
<span id="cb7-70">            display_filtered_data_table(selected_countries, selected_indicator, year_range)</span>
<span id="cb7-71"></span>
<span id="cb7-72"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> render_query_interface_tab():</span>
<span id="cb7-73">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""æ¸²æŸ“ AI é©±åŠ¨çš„æŸ¥è¯¢ç•Œé¢æ ‡ç­¾é¡µ"""</span></span>
<span id="cb7-74"></span>
<span id="cb7-75">    st.header(get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ai_powered_chat"</span>))</span>
<span id="cb7-76">    st.markdown(get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ai_chat_description"</span>))</span>
<span id="cb7-77"></span>
<span id="cb7-78">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è‡ªç„¶è¯­è¨€è¾“å…¥</span></span>
<span id="cb7-79">    user_question <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.text_input(</span>
<span id="cb7-80">        get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"your_question"</span>),</span>
<span id="cb7-81">        value<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>st.session_state.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user_question"</span>, get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"default_question"</span>))</span>
<span id="cb7-82">    )</span>
<span id="cb7-83"></span>
<span id="cb7-84">    col1, col2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.columns([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb7-85"></span>
<span id="cb7-86">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> col1:</span>
<span id="cb7-87">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> st.button(get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"run_ai"</span>), <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"primary"</span>):</span>
<span id="cb7-88">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> user_question:</span>
<span id="cb7-89">                <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> st.spinner(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI æ­£åœ¨å¤„ç†..."</span>):</span>
<span id="cb7-90">                    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä»è‡ªç„¶è¯­è¨€ç”Ÿæˆ SQL</span></span>
<span id="cb7-91">                    sql_query <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> generate_sql_from_question(</span>
<span id="cb7-92">                        user_question,</span>
<span id="cb7-93">                        st.session_state.language</span>
<span id="cb7-94">                    )</span>
<span id="cb7-95"></span>
<span id="cb7-96">                    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> sql_query:</span>
<span id="cb7-97">                        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ‰§è¡ŒæŸ¥è¯¢å¹¶ç”Ÿæˆæ‘˜è¦</span></span>
<span id="cb7-98">                        result_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> execute_query_with_ai_summary(sql_query, user_question)</span>
<span id="cb7-99"></span>
<span id="cb7-100">                        st.session_state.user_question <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> user_question</span>
<span id="cb7-101">                        st.session_state.should_generate_ai_summary <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span>
<span id="cb7-102"></span>
<span id="cb7-103">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ˜¾ç¤ºç»“æœ</span></span>
<span id="cb7-104">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> st.session_state.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sql_result"</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>:</span>
<span id="cb7-105">        display_query_results()</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="æ€§èƒ½ä¼˜åŒ–" class="level2">
<h2 class="anchored" data-anchor-id="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</h2>
<section id="æ•°æ®ç¼“å­˜ä¸æ•ˆç‡" class="level3">
<h3 class="anchored" data-anchor-id="æ•°æ®ç¼“å­˜ä¸æ•ˆç‡">æ•°æ®ç¼“å­˜ä¸æ•ˆç‡</h3>
<div id="7f0ecdba" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Streamlit æ•°æ®æ“ä½œç¼“å­˜</span></span>
<span id="cb8-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@st.cache_data</span>(ttl<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3600</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¼“å­˜ 1 å°æ—¶</span></span>
<span id="cb8-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> load_data():</span>
<span id="cb8-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åŠ è½½å¹¶ç¼“å­˜ GDP æ•°æ®"""</span></span>
<span id="cb8-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'data/gdp_data_2000_present.csv'</span>)</span>
<span id="cb8-6"></span>
<span id="cb8-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@st.cache_data</span>(ttl<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1800</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¼“å­˜ 30 åˆ†é’Ÿ</span></span>
<span id="cb8-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_country_list():</span>
<span id="cb8-9">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""è·å–å¹¶ç¼“å­˜å”¯ä¸€çš„å›½å®¶åˆ—è¡¨"""</span></span>
<span id="cb8-10">    df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> load_data()</span>
<span id="cb8-11">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sorted</span>(df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'country_name'</span>].unique())</span>
<span id="cb8-12"></span>
<span id="cb8-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># AI äº¤äº’çš„ä¼šè¯çŠ¶æ€ç®¡ç†</span></span>
<span id="cb8-14"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> init_session_state():</span>
<span id="cb8-15">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åˆå§‹åŒ–æ‰€æœ‰ä¼šè¯çŠ¶æ€å˜é‡"""</span></span>
<span id="cb8-16">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sql_result"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> st.session_state:</span>
<span id="cb8-17">        st.session_state.sql_result <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb8-18">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ai_summary"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> st.session_state:</span>
<span id="cb8-19">        st.session_state.ai_summary <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb8-20">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"should_generate_ai_summary"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> st.session_state:</span>
<span id="cb8-21">        st.session_state.should_generate_ai_summary <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span></span></code></pre></div></div>
</details>
</div>
</section>
<section id="é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ" class="level3">
<h3 class="anchored" data-anchor-id="é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ">é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ</h3>
<div id="3e412006" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> safe_api_call(func, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>args, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>kwargs):</span>
<span id="cb9-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å¸¦é”™è¯¯å¤„ç†çš„å®‰å…¨ API è°ƒç”¨"""</span></span>
<span id="cb9-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb9-4">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> func(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>args, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>kwargs)</span>
<span id="cb9-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb9-6">        st.error(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"API é”™è¯¯: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(e)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb9-7">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb9-8"></span>
<span id="cb9-9"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> validate_sql_query(sql_query):</span>
<span id="cb9-10">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åŸºç¡€ SQL æŸ¥è¯¢éªŒè¯"""</span></span>
<span id="cb9-11">    sql_lower <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sql_query.lower().strip()</span>
<span id="cb9-12"></span>
<span id="cb9-13">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŸºç¡€å®‰å…¨æ£€æŸ¥</span></span>
<span id="cb9-14">    dangerous_keywords <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'drop'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'delete'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'update'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'insert'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'alter'</span>]</span>
<span id="cb9-15">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> keyword <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> dangerous_keywords:</span>
<span id="cb9-16">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> keyword <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> sql_lower:</span>
<span id="cb9-17">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">raise</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">ValueError</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"æ£€æµ‹åˆ°å±é™© SQL å…³é”®å­—: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>keyword<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb9-18"></span>
<span id="cb9-19">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¡®ä¿æŸ¥è¯¢ä»¥ SELECT å¼€å¤´</span></span>
<span id="cb9-20">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> sql_lower.startswith(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'select'</span>):</span>
<span id="cb9-21">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">raise</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">ValueError</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä»…å…è®¸æ‰§è¡Œ SELECT æŸ¥è¯¢"</span>)</span>
<span id="cb9-22"></span>
<span id="cb9-23">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="éƒ¨ç½²ä¸å¯è®¿é—®æ€§" class="level2">
<h2 class="anchored" data-anchor-id="éƒ¨ç½²ä¸å¯è®¿é—®æ€§">éƒ¨ç½²ä¸å¯è®¿é—®æ€§</h2>
<section id="ç¯å¢ƒé…ç½®" class="level3">
<h3 class="anchored" data-anchor-id="ç¯å¢ƒé…ç½®">ç¯å¢ƒé…ç½®</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¯å¢ƒé…ç½®</span></span>
<span id="cb10-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># .env æ–‡ä»¶</span></span>
<span id="cb10-3"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">MODELSCOPE_API_KEY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>your_modelscope_key</span>
<span id="cb10-4"></span>
<span id="cb10-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å®‰è£…ä¾èµ–</span></span>
<span id="cb10-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> requirements.txt</span>
<span id="cb10-7"></span>
<span id="cb10-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ•°æ®é‡‡é›†</span></span>
<span id="cb10-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python</span> download_data.py</span>
<span id="cb10-10"></span>
<span id="cb10-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è¿è¡Œåº”ç”¨ç¨‹åº</span></span>
<span id="cb10-12"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">streamlit</span> run app.py</span></code></pre></div></div>
</section>
<section id="å¿…éœ€çš„ä¾èµ–é¡¹" class="level3">
<h3 class="anchored" data-anchor-id="å¿…éœ€çš„ä¾èµ–é¡¹">å¿…éœ€çš„ä¾èµ–é¡¹</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb11-1">streamlit&gt;=1.28.0</span>
<span id="cb11-2">pandas&gt;=1.5.0</span>
<span id="cb11-3">plotly&gt;=5.15.0</span>
<span id="cb11-4">duckdb&gt;=0.8.0</span>
<span id="cb11-5">openai&gt;=1.0.0</span>
<span id="cb11-6">python-dotenv&gt;=1.0.0</span>
<span id="cb11-7">wbgapi&gt;=1.0.0</span>
<span id="cb11-8">pycountry&gt;=22.0.0</span>
<span id="cb11-9">numpy&gt;=1.24.0</span></code></pre></div></div>
</section>
</section>
<section id="æŠ€æœ¯äº®ç‚¹" class="level2">
<h2 class="anchored" data-anchor-id="æŠ€æœ¯äº®ç‚¹">æŠ€æœ¯äº®ç‚¹</h2>
<section id="å…³é”®åˆ›æ–°ç‚¹" class="level3">
<h3 class="anchored" data-anchor-id="å…³é”®åˆ›æ–°ç‚¹">å…³é”®åˆ›æ–°ç‚¹</h3>
<ol type="1">
<li><strong>åŒç•Œé¢æ–¹æ¡ˆ</strong>ï¼šåŒæ—¶æä¾›è§†è§‰å’Œè‡ªç„¶è¯­è¨€è®¿é—®æ•°æ®çš„æ–¹å¼</li>
<li><strong>AI é©±åŠ¨çš„ SQL ç”Ÿæˆ</strong>ï¼šä½¿ç”¨ç®€å•çš„ä¸­/è‹±æ–‡å³å¯è¿›è¡Œå¤æ‚çš„ç»æµæŸ¥è¯¢</li>
<li><strong>å®æ—¶æ•°æ®å¤„ç†</strong>ï¼šé«˜æ•ˆçš„ç¼“å­˜å’Œä¼šè¯ç®¡ç†</li>
<li><strong>å…¨é¢çš„å›½é™…åŒ–</strong>ï¼šçœŸæ­£çš„åŒè¯­æ”¯æŒåŠæœ¬åœ°åŒ–æ•°æ®æ˜¾ç¤º</li>
<li><strong>ç”Ÿäº§å°±ç»ªçš„éƒ¨ç½²</strong>ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ€§èƒ½ä¼˜åŒ–</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://jcwinning.github.io/LandingPage/posts/gdp-trend/images/2.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>AI æ‘˜è¦ç”Ÿæˆ</figcaption>
</figure>
</div>
</section>
</section>
<section id="ç»æµåˆ†æç¤ºä¾‹" class="level2">
<h2 class="anchored" data-anchor-id="ç»æµåˆ†æç¤ºä¾‹">ç»æµåˆ†æç¤ºä¾‹</h2>
<section id="æ”¯æŒçš„æŸ¥è¯¢ç±»å‹" class="level3">
<h3 class="anchored" data-anchor-id="æ”¯æŒçš„æŸ¥è¯¢ç±»å‹">æ”¯æŒçš„æŸ¥è¯¢ç±»å‹</h3>
<ol type="1">
<li><strong>å¯¹æ¯”åˆ†æ</strong>
<ul>
<li>â€œå¯¹æ¯” 2010 å¹´è‡³ 2020 å¹´ä¸­å›½å’Œæ—¥æœ¬çš„ GDP å¢é•¿â€</li>
<li>â€œ2023 å¹´å“ªäº›å›½å®¶çš„äººå‡ GDP æœ€é«˜ï¼Ÿâ€</li>
</ul></li>
<li><strong>æ—¶åºåˆ†æ</strong>
<ul>
<li>â€œæ˜¾ç¤ºè¿‡å»åå¹´é‡‘ç –å›½å®¶çš„ GDP è¶‹åŠ¿â€</li>
<li>â€œ2000 å¹´è‡³ 2020 å¹´å°åº¦çš„äººå£å¢é•¿ç‡æ˜¯å¤šå°‘ï¼Ÿâ€</li>
</ul></li>
<li><strong>ç»Ÿè®¡æŸ¥è¯¢</strong>
<ul>
<li>â€œè®¡ç®—æ¬§æ´²å›½å®¶çš„å¹³å‡ GDP å¢é•¿ç‡â€</li>
<li>â€œæ‰¾å‡º 2022 å¹´äººå‡ GDP è¶…è¿‡ 50,000 ç¾å…ƒçš„å›½å®¶â€</li>
</ul></li>
<li><strong>å¤æ‚å¤šå˜é‡åˆ†æ</strong>
<ul>
<li>â€œäºšæ´²å›½å®¶çš„äººå£ä¸ GDP ä¹‹é—´æœ‰ä»€ä¹ˆç›¸å…³æ€§ï¼Ÿâ€</li>
<li>â€œåˆ—å‡ºè¿ç»­ 3 å¹´äººå‡ GDP å¢é•¿è¶…è¿‡ 5% çš„å›½å®¶â€</li>
</ul></li>
</ol>
</section>
</section>
<section id="ç»“è®º" class="level2">
<h2 class="anchored" data-anchor-id="ç»“è®º">ç»“è®º</h2>
<p>è¿™ä¸ª GDP è¶‹åŠ¿çœ‹æ¿ä»£è¡¨äº†ç»æµæ•°æ®åˆ†æçš„åˆ›æ–°æ–¹æ³•ï¼Œå°†ä¼ ç»Ÿçš„è§†è§‰åŒ–æŠ€æœ¯ä¸å°–ç«¯çš„ AI èƒ½åŠ›ç›¸ç»“åˆã€‚è¯¥é¡¹ç›®å±•ç¤ºäº†ï¼š</p>
<ul>
<li><strong>å…ˆè¿›çš„æ•°æ®é›†æˆ</strong>ï¼šé›†æˆä¸–ç•Œé“¶è¡Œ API ä¸å…¨é¢çš„ç»æµæŒ‡æ ‡</li>
<li><strong>è‡ªç„¶è¯­è¨€å¤„ç†</strong>ï¼šAI é©±åŠ¨çš„ SQL ç”Ÿæˆï¼Œå®ç°ä¾¿æ·çš„æ•°æ®æŸ¥è¯¢</li>
<li><strong>ä¸“ä¸šçš„è§†è§‰åŒ–</strong>ï¼šé‡‡ç”¨ä¸€è‡´è®¾è®¡çš„äº¤äº’å¼ Plotly å›¾è¡¨</li>
<li><strong>åŒè¯­æ”¯æŒ</strong>ï¼šå®Œæ•´çš„è‹±/ä¸­æœ¬åœ°åŒ–</li>
<li><strong>ç”Ÿäº§çº§æ¶æ„</strong>ï¼šç¨³å¥çš„é”™è¯¯å¤„ç†ã€ç¼“å­˜å’Œéƒ¨ç½²</li>
</ul>
<p>æ— è®ºæ‚¨æ˜¯ç»æµå­¦å®¶ã€æ•°æ®ç§‘å­¦å®¶è¿˜æ˜¯æ”¿ç­–åˆ†æå¸ˆï¼Œè¯¥åº”ç”¨ç¨‹åºéƒ½å±•ç¤ºäº†ç°ä»£ AI æŠ€æœ¯å¦‚ä½•é€šè¿‡ç›´è§‚çš„ç•Œé¢å’Œæ™ºèƒ½è‡ªåŠ¨åŒ–ï¼Œä½¿å¤æ‚çš„ç»æµæ•°æ®å˜å¾—æ›´åŠ æ˜“äºè·å–å’Œåˆ©ç”¨ã€‚</p>
<hr>
<p><strong>æŠ€æœ¯æ ˆ</strong>ï¼šStreamlit, DuckDB, Plotly, ModelScope API, World Bank API</p>
<p><strong>æ•°æ®æº</strong>ï¼šä¸–ç•Œé“¶è¡Œ (2000-2024, 200+ å›½å®¶, 15,000+ æ•°æ®ç‚¹)</p>


<!-- -->

</section>
</section>

 ]]></description>
  <category>Data Visualization</category>
  <category>Streamlit</category>
  <category>Economic Analysis</category>
  <category>AI</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/gdp-trend/</guid>
  <pubDate>Mon, 17 Nov 2025 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/gdp-trend/images/0.png" medium="image" type="image/png" height="83" width="144"/>
</item>
<item>
  <title>Shop Map Manager (åº—é“ºåœ°å›¾ç®¡ç†ç³»ç»Ÿ)</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/shop-map-manager/</link>
  <description><![CDATA[ 





<p>ä¸€ä¸ªå¼ºå¤§ä¸”ä¼˜é›…çš„ä¸ªäººåº—é“ºç®¡ç†ç³»ç»Ÿã€‚æ— è®ºæ‚¨æ˜¯åœ¨è¿½è¸ªå¿ƒçˆ±çš„å’–å•¡é¦†ã€é£æ™¯åèƒœï¼Œè¿˜æ˜¯åœ¨è§„åˆ’æœªæ¥çš„è¡Œç¨‹ï¼Œè¯¥åº”ç”¨ç¨‹åºéƒ½èƒ½ä¸ºæ‚¨æä¾›ä¸€ä¸ªå¼ºå¤§çš„å¯è§†åŒ–å’Œæ•°æ®ç®¡ç†å¹³å°ã€‚</p>
<p>åœ¨çº¿æ¼”ç¤º (Streamlit): <a href="https://china-map.streamlit.app">https://china-map.streamlit.app</a> (Vercel): <a href="https://china-mapping.vercel.app/">https://china-mapping.vercel.app/</a></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true" href="">åœ°å›¾è§†å›¾</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false" href="">è¡¨æ ¼è§†å›¾</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" aria-controls="tabset-1-3" aria-selected="false" href="">åº—é“ºç…§ç‰‡</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/shop-map-manager/images/Picture1.png" class="img-fluid" style="width:100.0%"></p>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/shop-map-manager/images/Picture2.png" class="img-fluid" style="width:100.0%"></p>
</div>
<div id="tabset-1-3" class="tab-pane" aria-labelledby="tabset-1-3-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/shop-map-manager/images/Picture3.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
</div>
<section id="æ ¸å¿ƒæ¶æ„æ¼”å˜åŒæ¨¡å¼å­˜å‚¨" class="level2">
<h2 class="anchored" data-anchor-id="æ ¸å¿ƒæ¶æ„æ¼”å˜åŒæ¨¡å¼å­˜å‚¨">æ ¸å¿ƒæ¶æ„æ¼”å˜ï¼šåŒæ¨¡å¼å­˜å‚¨</h2>
<p>æœ¬é¡¹ç›®æœ€é‡è¦çš„æ›´æ–°æ˜¯å¼•å…¥äº† <strong>åŒæ•°æ®å­˜å‚¨æ¨¡å¼</strong>ï¼ŒåŒæ—¶å…¼é¡¾äº†éšç§å’Œä¾¿æºæ€§ï¼š</p>
<ul>
<li><strong>æœ¬åœ°æ¨¡å¼</strong>ï¼šæ•°æ®å®‰å…¨åœ°å­˜å‚¨åœ¨æœ¬åœ° <code>shops.csv</code> æ–‡ä»¶ä¸­ã€‚é€‚åˆæ— éœ€ä»»ä½•é…ç½®çš„å¿«é€Ÿä½¿ç”¨ã€‚</li>
<li><strong>äº‘ç«¯æ¨¡å¼</strong>ï¼šåˆ©ç”¨ <strong>Supabase</strong> è¿›è¡Œè·¨è®¾å¤‡çš„å®æ—¶åŒæ­¥ã€‚è®©æ‚¨çš„æ—…ç¨‹è®°å½•éšè¡Œã€‚</li>
</ul>
</section>
<section id="åŠŸèƒ½ç‰¹æ€§" class="level2">
<h2 class="anchored" data-anchor-id="åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</h2>
<ul>
<li><strong>ğŸ” æ— é™æ¢ç´¢</strong>ï¼šæ— ç¼é›†æˆ <strong>é«˜å¾·åœ°å›¾ (Amap) API</strong>ã€‚ä¸€é”®æœç´¢å¹¶æ·»åŠ ä»»ä½•åœ°ç‚¹åˆ°æ‚¨çš„æ”¶è—ã€‚</li>
<li><strong>ğŸ¨ åŠ¨æ€å¯è§†åŒ–</strong>ï¼šåŸºäº <strong>Folium</strong> çš„äº¤äº’å¼åœ°å›¾ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹è‰²ï¼š
<ul>
<li>é’ˆå¯¹ä¸åŒç±»åˆ«çš„è‡ªå®šä¹‰å›¾æ ‡ï¼ˆå’–å•¡ã€é¤é¥®ã€é£æ™¯ç­‰ï¼‰ã€‚</li>
<li>ç›´è§‚çš„é¢œè‰²ç¼–ç ï¼š<strong>çº¢è‰²</strong> è¡¨ç¤º â€œå·²å»è¿‡â€ï¼Œ<strong>ç»¿è‰²</strong> è¡¨ç¤º â€œæƒ³å»â€ã€‚</li>
</ul></li>
<li><strong>ğŸ“¸ è§†è§‰è®°å¿†</strong>ï¼šï¼ˆäº‘ç«¯æ¨¡å¼ï¼‰ä¸ºæ¯ä¸ªåœ°ç‚¹æ‹æ‘„å¹¶ä¸Šä¼ å¤šå¼ ç…§ç‰‡ï¼Œå®‰å…¨æ‰˜ç®¡åœ¨ Supabase Storageã€‚</li>
<li><strong>â­ æ·±åº¦æ´å¯Ÿ</strong>ï¼šä¸ä»…è®°å½•åœ°ç‚¹ã€‚è¿˜å¯ä»¥å­˜å‚¨æ˜Ÿçº§è¯„åˆ† (1-5)ã€ä¸ªäººç¬”è®°å’Œè®¿é—®æ—¶é—´æˆ³ã€‚</li>
<li><strong>âš¡ å®æ—¶è¿‡æ»¤</strong>ï¼šæ ¹æ®è¡Œç¨‹ç±»å‹æˆ–è®¿é—®çŠ¶æ€å³æ—¶è¿‡æ»¤è§†å›¾ï¼Œä¸“æ³¨äºæ‚¨å…³å¿ƒçš„å†…å®¹ã€‚</li>
</ul>
</section>
<section id="æŠ€æœ¯æ ˆ" class="level2">
<h2 class="anchored" data-anchor-id="æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>ç»„ä»¶</th>
<th>æŠ€æœ¯</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>å‰ç«¯</strong></td>
<td><a href="https://streamlit.io/">Streamlit</a></td>
</tr>
<tr class="even">
<td><strong>åœ°å›¾</strong></td>
<td><a href="https://python-visualization.github.io/folium/">Folium</a></td>
</tr>
<tr class="odd">
<td><strong>æ•°æ®åº“/è®¤è¯</strong></td>
<td><a href="https://supabase.com/">Supabase</a></td>
</tr>
<tr class="even">
<td><strong>API</strong></td>
<td><a href="https://lbs.amap.com/">é«˜å¾·åœ°å›¾ API</a></td>
</tr>
<tr class="odd">
<td><strong>æ•°æ®é€»è¾‘</strong></td>
<td>Python &amp; Pandas</td>
</tr>
</tbody>
</table>
</section>
<section id="å¿«é€Ÿä¸Šæ‰‹" class="level2">
<h2 class="anchored" data-anchor-id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<section id="å®‰è£…" class="level3">
<h3 class="anchored" data-anchor-id="å®‰è£…">1. å®‰è£…</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/JCwinning/map_app.git</span>
<span id="cb1-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> map_app</span>
<span id="cb1-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> requirements.txt</span></code></pre></div></div>
</section>
<section id="ç¯å¢ƒé…ç½®" class="level3">
<h3 class="anchored" data-anchor-id="ç¯å¢ƒé…ç½®">2. ç¯å¢ƒé…ç½®</h3>
<p>åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>.env</code> æ–‡ä»¶ï¼š</p>
<pre class="env"><code># å¿…å¡«
GAODE_API_KEY=æ‚¨çš„å¯†é’¥

# å¯é€‰ï¼šç”¨äºäº‘ç«¯æ¨¡å¼
SUPABASE_URL=æ‚¨çš„ supabase url
SUPABASE_KEY=æ‚¨çš„ supabase anon å¯†é’¥</code></pre>
</section>
<section id="å¯åŠ¨" class="level3">
<h3 class="anchored" data-anchor-id="å¯åŠ¨">3. å¯åŠ¨</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">streamlit</span> run app.py</span></code></pre></div></div>
</section>
</section>
<section id="æ•°æ®ç®¡ç†" class="level2">
<h2 class="anchored" data-anchor-id="æ•°æ®ç®¡ç†">æ•°æ®ç®¡ç†</h2>
<p>æ— è®ºæ˜¯å­˜å‚¨åœ¨æ‰å¹³çš„ CSV è¿˜æ˜¯å…³ç³»å‹çš„ Supabase è¡¨ä¸­ï¼Œè¯¥åº”ç”¨éƒ½èƒ½ä¼˜é›…åœ°å¤„ç†å¤æ‚çš„æ•°æ®ç»“æ„ï¼š</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>åˆ—å</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>shop_name</code></td>
<td>åœ°ç‚¹åç§°</td>
</tr>
<tr class="even">
<td><code>visit_status</code></td>
<td>å½“å‰çŠ¶æ€ (å·²å»è¿‡ / æƒ³å»)</td>
</tr>
<tr class="odd">
<td><code>rating</code></td>
<td>æ‚¨çš„ä¸ªäººæ˜Ÿçº§è¯„åˆ† (1-5)</td>
</tr>
<tr class="even">
<td><code>shop_type</code></td>
<td>ç±»åˆ« (ä¾‹å¦‚: å’–å•¡, é›¶å”®, é£æ™¯)</td>
</tr>
<tr class="odd">
<td><code>images</code></td>
<td>(äº‘ç«¯æ¨¡å¼) æ‰˜ç®¡å›¾åƒçš„ URL æ•°ç»„</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="ç»“è®º" class="level2">
<h2 class="anchored" data-anchor-id="ç»“è®º">ç»“è®º</h2>
<p><strong>Shop Map Manager</strong> å·²ä»ä¸€ä¸ªç®€å•çš„ CSV å¯è§†åŒ–å·¥å…·æ¼”å˜ä¸ºä¸€ä¸ªå…¨é¢çš„ä¸ªäººæ—…è¡Œå’Œæ¢ç´¢ä¼´ä¾£ã€‚é€šè¿‡è¿æ¥æœ¬åœ°çš„ä¾¿æ·æ€§ä¸äº‘ç«¯çš„å¼ºå¤§åŠŸèƒ½ï¼Œå®ƒä¸ºç°ä»£æ¢ç´¢è€…æä¾›äº†æè‡´çš„çµæ´»æ€§ã€‚</p>


<!-- -->

</section>

 ]]></description>
  <category>AI</category>
  <category>API</category>
  <category>map</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/shop-map-manager/</guid>
  <pubDate>Fri, 07 Nov 2025 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/shop-map-manager/images/0.png" medium="image" type="image/png" height="82" width="144"/>
</item>
<item>
  <title>ç»“åˆ AI é¢„æµ‹çš„ Streamlit å¤©æ°”é¢„æŠ¥åº”ç”¨</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/weather-trend/</link>
  <description><![CDATA[ 





<section id="é¡¹ç›®æ¦‚è§ˆ" class="level1">
<h1>é¡¹ç›®æ¦‚è§ˆ</h1>
<p>åœ¨è¿™ä¸€è¯¦å°½çš„æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†æŒ‡å¯¼æ‚¨åˆ›å»ºä¸€ä¸ªç²¾è‡´çš„å¤©æ°”é¢„æŠ¥åº”ç”¨ç¨‹åºï¼Œè¯¥åº”ç”¨å°†ç°ä»£ Web å¼€å‘ä¸äººå·¥æ™ºèƒ½ç›¸ç»“åˆã€‚æœ¬é¡¹ç›®æ¼”ç¤ºäº†å¦‚ä½•æ„å»ºä¸€ä¸ªå…·å¤‡äº¤äº’å¼åœ°å›¾ã€åŒè¯­æ”¯æŒã€å®æ—¶æ•°æ®å¯è§†åŒ–å’Œ AI é©±åŠ¨çš„å¤©æ°”åˆ†æåŠŸèƒ½çš„ç”Ÿäº§çº§å¤©æ°”åº”ç”¨ã€‚</p>
<p>åœ¨çº¿æ¼”ç¤º: <a href="https://weather-trend.streamlit.app/">https://weather-trend.streamlit.app/</a></p>
<p>Github: <a href="https://github.com/JCwinning/weather_trend">https://github.com/JCwinning/weather_trend</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://jcwinning.github.io/LandingPage/posts/weather-trend/images/0.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>å¤©æ°”é¢„æŠ¥åº”ç”¨ä¸»ç•Œé¢</figcaption>
</figure>
</div>
<p>è¿™æ¬¾å¤©æ°”é¢„æŠ¥åº”ç”¨ä¸ä»…ä»…æä¾›åŸºç¡€çš„å¤©æ°”æ•°æ®ï¼Œè¿˜é›†æˆäº†å¤šé¡¹é«˜çº§åŠŸèƒ½ï¼š</p>
<ul>
<li><strong>äº¤äº’å¼ä½ç½®é€‰æ‹©</strong>ï¼šç‚¹å‡»åœ°å›¾ä¸Šçš„ä»»æ„ä½ç½®æˆ–é€šè¿‡åŸå¸‚åç§°æœç´¢</li>
<li><strong>åŒè¯­ç•Œé¢</strong>ï¼šå®Œæ•´çš„è‹±æ–‡/ä¸­æ–‡è¯­è¨€æ”¯æŒåŠåˆ‡æ¢åŠŸèƒ½</li>
<li><strong>AI é©±åŠ¨çš„åˆ†æ</strong>ï¼šä½¿ç”¨ DeepSeek AI æä¾›å¤©æ°”åˆ†æå’Œå»ºè®®</li>
<li><strong>é«˜çº§å¯è§†åŒ–</strong>ï¼šæ¸©åº¦è¶‹åŠ¿ã€ç©ºæ°”è´¨é‡ç›‘æµ‹å’Œé™é›¨æ¦‚ç‡</li>
<li><strong>å®æ—¶æ•°æ®</strong>ï¼š7 å¤©å†å²æ•°æ®å’Œ 5 å¤©é¢„æŠ¥æ•°æ®</li>
<li><strong>å“åº”å¼è®¾è®¡</strong>ï¼šåœ¨æ¡Œé¢ã€å¹³æ¿å’Œç§»åŠ¨è®¾å¤‡ä¸Šè¿è¡Œæ— é˜»</li>
</ul>
<section id="æŠ€æœ¯æ¶æ„" class="level2">
<h2 class="anchored" data-anchor-id="æŠ€æœ¯æ¶æ„">æŠ€æœ¯æ¶æ„</h2>
<div class="cell" data-eval="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    A[ç”¨æˆ·ç•Œé¢&lt;br/&gt;Streamlit Web åº”ç”¨] --&gt; B[ä½ç½®æœåŠ¡]
    A --&gt; C[å¤©æ°”æ•°æ® API]
    A --&gt; D[AI é›†æˆå±‚]
    A --&gt; E[å¯è§†åŒ–å¼•æ“]

    B --&gt; F[äº¤äº’å¼åœ°å›¾&lt;br/&gt;Folium + OpenStreetMap]
    B --&gt; G[åŸå¸‚æœç´¢&lt;br/&gt;Nominatim åœ°ç†ç¼–ç ]

    C --&gt; H[Open-Meteo API&lt;br/&gt;å¤©æ°” + ç©ºæ°”è´¨é‡]
    C --&gt; I[æ•°æ®å¤„ç†&lt;br/&gt;Pandas DataFrame]

    D --&gt; J[ModelScope API&lt;br/&gt;DeepSeek-V3.2 AI]
    D --&gt; K[æ™ºèƒ½åˆ†æ&lt;br/&gt;å¤©æ°”å»ºè®®]

    E --&gt; L[Altair å›¾è¡¨&lt;br/&gt;æ¸©åº¦è¶‹åŠ¿]
    E --&gt; M[æ•°æ®è¡¨æ ¼&lt;br/&gt;å¤©æ°”è¯¦æƒ…]

    F --&gt; A
    G --&gt; A
    I --&gt; E
    K --&gt; A
</pre>
</div>
<p></p><figcaption> å¤©æ°”åº”ç”¨æ¶æ„</figcaption> </figure><p></p>
</div>
</div>
</div>
<section id="æŠ€æœ¯æ ˆ" class="level3">
<h3 class="anchored" data-anchor-id="æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>å‰ç«¯æ¡†æ¶</strong>ï¼šStreamlitï¼Œç”¨äºå¿«é€Ÿå¼€å‘ Web åº”ç”¨ç¨‹åº</li>
<li><strong>åœ°å›¾</strong>ï¼šFolium é…åˆ OpenStreetMap å›¾å±‚ï¼Œå®ç°äº¤äº’å¼ä½ç½®é€‰æ‹©</li>
<li><strong>æ•°æ®å¯è§†åŒ–</strong>ï¼šAltairï¼Œç”¨äºä¸“ä¸šçš„å›¾è¡¨å’Œå›¾å½¢</li>
<li><strong>API é›†æˆ</strong>ï¼šOpen-Meteoï¼Œè·å–å¤©æ°”å’Œç©ºæ°”è´¨é‡æ•°æ®</li>
<li><strong>AI æœåŠ¡</strong>ï¼šé€šè¿‡ ModelScope API ä½¿ç”¨ DeepSeek-V3.2 è¿›è¡Œæ™ºèƒ½åˆ†æ</li>
<li><strong>åœ°ç†ç¼–ç </strong>ï¼šNominatimï¼Œç”¨äºåœ°å€ä¸åæ ‡çš„è½¬æ¢</li>
<li><strong>å›½é™…åŒ–</strong>ï¼šè‡ªå®šä¹‰è¯­è¨€ç³»ç»Ÿï¼Œæ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢</li>
</ul>
</section>
</section>
<section id="å¿«é€Ÿä¸Šæ‰‹" class="level2">
<h2 class="anchored" data-anchor-id="å¿«é€Ÿä¸Šæ‰‹">å¿«é€Ÿä¸Šæ‰‹</h2>
<section id="ç¯å¢ƒè¦æ±‚ä¸å®‰è£…" class="level3">
<h3 class="anchored" data-anchor-id="ç¯å¢ƒè¦æ±‚ä¸å®‰è£…">ç¯å¢ƒè¦æ±‚ä¸å®‰è£…</h3>
<p>åœ¨æ·±å…¥ä»£ç ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ­å»ºå¥½å¼€å‘ç¯å¢ƒï¼š</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. å…‹éš†ä»“åº“</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>your-repo-url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb1-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> weather_trend</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. å®‰è£…æ‰€éœ€è½¯ä»¶åŒ…</span></span>
<span id="cb1-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install streamlit pandas requests altair folium streamlit-folium geopy python-dotenv openai</span>
<span id="cb1-7"></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. ä¸º AI åŠŸèƒ½è®¾ç½®ç¯å¢ƒå˜é‡</span></span>
<span id="cb1-9"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"modelscope=æ‚¨çš„ API å¯†é’¥"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> .env</span></code></pre></div></div>
</section>
<section id="æ ¸å¿ƒä¾èµ–é¡¹è¯´æ˜" class="level3">
<h3 class="anchored" data-anchor-id="æ ¸å¿ƒä¾èµ–é¡¹è¯´æ˜">æ ¸å¿ƒä¾èµ–é¡¹è¯´æ˜</h3>
<ul>
<li><strong>streamlit</strong>ï¼šå…·å¤‡å“åº”å¼ UI ç»„ä»¶çš„ Web åº”ç”¨æ¡†æ¶</li>
<li><strong>pandas</strong>ï¼šç”¨äºå¤©æ°”æ•°æ®é›†çš„æ•°æ®æ“ä½œå’Œåˆ†æ</li>
<li><strong>requests</strong>ï¼šç”¨äº API é€šä¿¡çš„ HTTP å®¢æˆ·ç«¯</li>
<li><strong>altair</strong>ï¼šå£°æ˜å¼ç»Ÿè®¡å¯è§†åŒ–åº“</li>
<li><strong>folium + streamlit-folium</strong>ï¼šäº¤äº’å¼åœ°å›¾é›†æˆ</li>
<li><strong>geopy</strong>ï¼šç”¨äºä½ç½®æŸ¥æ‰¾çš„åœ°ç†ç¼–ç æœåŠ¡</li>
<li><strong>python-dotenv</strong>ï¼šç¯å¢ƒå˜é‡ç®¡ç†</li>
<li><strong>openai</strong>ï¼šAI æ¨¡å‹é›†æˆï¼ˆä¸ ModelScope å…¼å®¹ï¼‰</li>
</ul>
</section>
</section>
<section id="æ ¸å¿ƒåŠŸèƒ½å®ç°" class="level2">
<h2 class="anchored" data-anchor-id="æ ¸å¿ƒåŠŸèƒ½å®ç°">æ ¸å¿ƒåŠŸèƒ½å®ç°</h2>
<section id="å¸¦ä½ç½®é€‰æ‹©çš„äº¤äº’å¼åœ°å›¾" class="level3">
<h3 class="anchored" data-anchor-id="å¸¦ä½ç½®é€‰æ‹©çš„äº¤äº’å¼åœ°å›¾">1. å¸¦ä½ç½®é€‰æ‹©çš„äº¤äº’å¼åœ°å›¾</h3>
<p>åœ°å›¾åŠŸèƒ½å…è®¸ç”¨æˆ·ç‚¹å‡»ä»»æ„ä½ç½®å¹¶è·å–è¯¥åœ°ç‚¹çš„å®æ—¶å¤©æ°”æ•°æ®ï¼š</p>
<div id="e719b45f" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> folium</span>
<span id="cb2-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> streamlit_folium <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> st_folium</span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»ºä»¥é»˜è®¤ä½ç½®ä¸ºä¸­å¿ƒçš„äº¤äº’å¼åœ°å›¾</span></span>
<span id="cb2-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> create_interactive_map(lat<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">40.7128</span>, lon<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">74.0060</span>, zoom<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>):</span>
<span id="cb2-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åˆ›å»ºäº¤äº’å¼ Folium åœ°å›¾"""</span></span>
<span id="cb2-7">    m <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> folium.Map(</span>
<span id="cb2-8">        location<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[lat, lon],</span>
<span id="cb2-9">        zoom_start<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>zoom,</span>
<span id="cb2-10">        tiles<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OpenStreetMap"</span></span>
<span id="cb2-11">    )</span>
<span id="cb2-12"></span>
<span id="cb2-13">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ·»åŠ ç‚¹å‡»äº‹ä»¶å¤„ç†å™¨ä»¥æ•è·åæ ‡</span></span>
<span id="cb2-14">    m.add_child(folium.LatLngPopup())</span>
<span id="cb2-15"></span>
<span id="cb2-16">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> m</span>
<span id="cb2-17"></span>
<span id="cb2-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åœ¨ Streamlit ä¸­æ˜¾ç¤ºåœ°å›¾</span></span>
<span id="cb2-19"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'map_data'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> st.session_state:</span>
<span id="cb2-20">    st.session_state.map_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb2-21"></span>
<span id="cb2-22">map_object <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> create_interactive_map()</span>
<span id="cb2-23">st_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st_folium(map_object, width<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">700</span>, height<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>)</span>
<span id="cb2-24"></span>
<span id="cb2-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ•è·ç‚¹å‡»å¤„çš„åæ ‡</span></span>
<span id="cb2-26"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> st_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'last_clicked'</span>]:</span>
<span id="cb2-27">    lat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'last_clicked'</span>][<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lat'</span>]</span>
<span id="cb2-28">    lon <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'last_clicked'</span>][<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lng'</span>]</span>
<span id="cb2-29">    st.session_state.clicked_location <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (lat, lon)</span>
<span id="cb2-30">    get_weather_for_coordinates(lat, lon)</span></code></pre></div></div>
</details>
</div>
<p><strong>å…³é”®ç‰¹æ€§ï¼š</strong> - <strong>ç‚¹å‡»é€‰æ‹©</strong>ï¼šç”¨æˆ·å¯ä»¥ç‚¹å‡»åœ°å›¾ä¸Šçš„ä»»ä½•åœ°æ–¹ - <strong>ç¼©æ”¾æ§åˆ¶</strong>ï¼šæ ‡å‡†çš„åœ°å›¾å¯¼èˆªåŠŸèƒ½ - <strong>å“åº”å¼è®¾è®¡</strong>ï¼šé€‚åº”ä¸åŒçš„å±å¹•å°ºå¯¸ - <strong>åæ ‡æ•è·</strong>ï¼šè‡ªåŠ¨æå–æ‰€é€‰ä½ç½®çš„ä¿¡æ¯</p>
</section>
<section id="åŒè¯­åŸå¸‚æœç´¢ç³»ç»Ÿ" class="level3">
<h3 class="anchored" data-anchor-id="åŒè¯­åŸå¸‚æœç´¢ç³»ç»Ÿ">2. åŒè¯­åŸå¸‚æœç´¢ç³»ç»Ÿ</h3>
<p>æ­¤åº”ç”¨æ”¯æŒä¸­è‹±æ–‡åŸå¸‚åç§°ï¼Œå¹¶å…·å¤‡æ™ºèƒ½çš„å›é€€æœºåˆ¶ï¼š</p>
<div id="bb7ce36c" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> re</span>
<span id="cb3-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> geopy.geocoders <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Nominatim</span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ‰©å±•çš„ä¸­æ–‡å­—ç¬¦æ£€æµ‹</span></span>
<span id="cb3-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> contains_chinese(text):</span>
<span id="cb3-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""æ£€æŸ¥æ–‡æœ¬æ˜¯å¦åŒ…å«ä¸­æ–‡å­—ç¬¦ï¼ŒåŒ…æ‹¬ CJK ç»Ÿä¸€æ±‰å­—"""</span></span>
<span id="cb3-7">    chinese_pattern <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> re.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">compile</span>(</span>
<span id="cb3-8">        <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">r"</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\u4e00</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">-</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\u9fff\u3400</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">-</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\u4dbf\U00020000</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">-</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\U0002a6df\U0002a700</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">-</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\U0002b73f</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">]</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb3-9">    )</span>
<span id="cb3-10">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">bool</span>(chinese_pattern.search(text))</span>
<span id="cb3-11"></span>
<span id="cb3-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä¸­æ–‡åŸå¸‚æ˜ å°„ï¼Œä»¥è·å¾—æ›´å¥½çš„è§£ææ•ˆæœ</span></span>
<span id="cb3-13">CHINESE_CITY_MAPPING <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb3-14">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"çº½çº¦"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"New York"</span>,</span>
<span id="cb3-15">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä¸œäº¬"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Tokyo"</span>,</span>
<span id="cb3-16">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä¼¦æ•¦"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"London"</span>,</span>
<span id="cb3-17">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å·´é»"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Paris"</span>,</span>
<span id="cb3-18">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ´›æ‰çŸ¶"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Los Angeles"</span>,</span>
<span id="cb3-19">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ... æ›´å¤šæ˜ å°„</span></span>
<span id="cb3-20">}</span>
<span id="cb3-21"></span>
<span id="cb3-22"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_coordinates_for_city(city_name):</span>
<span id="cb3-23">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""è·å–åŸå¸‚åæ ‡ï¼Œæ”¯æŒå¤šè¯­è¨€"""</span></span>
<span id="cb3-24">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ£€æŸ¥ä¸­æ–‡åŸå¸‚åç§°æ˜ å°„</span></span>
<span id="cb3-25">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> contains_chinese(city_name) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">and</span> city_name <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> CHINESE_CITY_MAPPING:</span>
<span id="cb3-26">        city_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> CHINESE_CITY_MAPPING[city_name]</span>
<span id="cb3-27"></span>
<span id="cb3-28">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¯¹åŸå¸‚è¿›è¡Œåœ°ç†ç¼–ç </span></span>
<span id="cb3-29">    geolocator <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> Nominatim(user_agent<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"weather_app"</span>)</span>
<span id="cb3-30">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb3-31">        location <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> geolocator.geocode(city_name)</span>
<span id="cb3-32">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> (location.latitude, location.longitude) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> location <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb3-33">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span>:</span>
<span id="cb3-34">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span></code></pre></div></div>
</details>
</div>
<p><strong>åŒè¯­ç‰¹æ€§ï¼š</strong> - <strong>ä¸­æ–‡å­—ç¬¦æ£€æµ‹</strong>ï¼šé’ˆå¯¹ CJK å­—ç¬¦çš„é«˜çº§æ­£åˆ™æ¨¡å¼ - <strong>åŸå¸‚åç§°æ˜ å°„</strong>ï¼šä¸»è¦åŸå¸‚çš„ç¿»è¯‘æ•°æ®åº“ - <strong>é”™è¯¯å¤„ç†</strong>ï¼šå½“åœ°ç†ç¼–ç å¤±è´¥æ—¶ä¿æŒç³»ç»Ÿç¨³å®š - <strong>Unicode æ”¯æŒ</strong>ï¼šå®Œæ•´æ”¯æŒå›½é™…åŒ–å­—ç¬¦</p>
</section>
<section id="å¤©æ°”æ•°æ®é›†æˆ" class="level3">
<h3 class="anchored" data-anchor-id="å¤©æ°”æ•°æ®é›†æˆ">3. å¤©æ°”æ•°æ®é›†æˆ</h3>
<p>è¯¥åº”ç”¨ç¨‹åºä» Open-Meteo API è·å–å…¨é¢çš„å¤©æ°”æ•°æ®ï¼š</p>
<div id="d8752498" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> requests</span>
<span id="cb4-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb4-3"></span>
<span id="cb4-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_weather_data(latitude, longitude):</span>
<span id="cb4-5">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""è·å– 12 å¤©çš„å¤©æ°”æ•°æ®ï¼ˆ7 å¤©å†å² + 5 å¤©é¢„æŠ¥ï¼‰"""</span></span>
<span id="cb4-6"></span>
<span id="cb4-7">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># API ç«¯ç‚¹é…ç½®</span></span>
<span id="cb4-8">    url <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://api.open-meteo.com/v1/forecast"</span></span>
<span id="cb4-9">    params <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb4-10">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'latitude'</span>: latitude,</span>
<span id="cb4-11">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'longitude'</span>: longitude,</span>
<span id="cb4-12">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'daily'</span>: [</span>
<span id="cb4-13">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_2m_max'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_2m_min'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_2m_mean'</span>,</span>
<span id="cb4-14">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'weathercode'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'windspeed_10m_max'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'precipitation_probability_max'</span>,</span>
<span id="cb4-15">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pm10'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pm2_5'</span></span>
<span id="cb4-16">        ],</span>
<span id="cb4-17">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'timezone'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'auto'</span>,</span>
<span id="cb4-18">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'past_days'</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è·å–å†å²æ•°æ®</span></span>
<span id="cb4-19">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'forecast_days'</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è·å–æœªæ¥é¢„æŠ¥</span></span>
<span id="cb4-20">    }</span>
<span id="cb4-21"></span>
<span id="cb4-22">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb4-23">        response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> requests.get(url, params<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>params, timeout<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb4-24">        response.raise_for_status()</span>
<span id="cb4-25"></span>
<span id="cb4-26">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¤„ç†å“åº”æ•°æ®</span></span>
<span id="cb4-27">        data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> response.json()</span>
<span id="cb4-28">        df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> process_weather_data(data)</span>
<span id="cb4-29"></span>
<span id="cb4-30">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> df</span>
<span id="cb4-31"></span>
<span id="cb4-32">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> requests.RequestException <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb4-33">        st.error(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"API è¯·æ±‚å¤±è´¥: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>e<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb4-34">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb4-35"></span>
<span id="cb4-36"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> process_weather_data(data):</span>
<span id="cb4-37">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å°† API å“åº”è½¬æ¢ä¸ºç»“æ„åŒ– DataFrame"""</span></span>
<span id="cb4-38">    daily_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'daily'</span>]</span>
<span id="cb4-39"></span>
<span id="cb4-40">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»ºæ—¥æœŸèŒƒå›´ï¼ˆå†å² + æœªæ¥ï¼‰</span></span>
<span id="cb4-41">    dates <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.date_range(</span>
<span id="cb4-42">        start<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>pd.to_datetime(daily_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'time'</span>][<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]),</span>
<span id="cb4-43">        periods<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(daily_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'time'</span>]),</span>
<span id="cb4-44">        freq<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'D'</span></span>
<span id="cb4-45">    )</span>
<span id="cb4-46"></span>
<span id="cb4-47">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ„å»º DataFrame</span></span>
<span id="cb4-48">    df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.DataFrame({</span>
<span id="cb4-49">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'date'</span>: dates,</span>
<span id="cb4-50">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_max'</span>: daily_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_2m_max'</span>],</span>
<span id="cb4-51">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_min'</span>: daily_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_2m_min'</span>],</span>
<span id="cb4-52">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_mean'</span>: daily_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_2m_mean'</span>],</span>
<span id="cb4-53">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'weather_code'</span>: daily_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'weathercode'</span>],</span>
<span id="cb4-54">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'wind_speed_max'</span>: daily_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'windspeed_10m_max'</span>],</span>
<span id="cb4-55">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rain_probability'</span>: daily_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'precipitation_probability_max'</span>],</span>
<span id="cb4-56">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pm2_5'</span>: daily_data.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pm2_5'</span>, [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(dates))</span>
<span id="cb4-57">    })</span>
<span id="cb4-58"></span>
<span id="cb4-59">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ·»åŠ è¡ç”Ÿåˆ—</span></span>
<span id="cb4-60">    df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'is_today'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'date'</span>].dt.date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> pd.Timestamp.now().date()</span>
<span id="cb4-61">    df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'is_future'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'date'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> pd.Timestamp.now()</span>
<span id="cb4-62"></span>
<span id="cb4-63">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> df</span></code></pre></div></div>
</details>
</div>
<p><strong>æ•°æ®å¤„ç†ç‰¹æ€§ï¼š</strong> - <strong>å†å² + é¢„æŠ¥</strong>ï¼š7 å¤©è¿‡å» + 5 å¤©æœªæ¥ - <strong>ç©ºæ°”è´¨é‡é›†æˆ</strong>ï¼šPM2.5 å’Œ PM10 æ•°æ® - <strong>æŒ‡æ ‡è¡ç”Ÿ</strong>ï¼šä»Šæ—¥æ£€æµ‹å’Œæœªæ¥è¶‹åŠ¿åˆ†æ - <strong>é”™è¯¯ç®¡ç†</strong>ï¼šå¥å£®çš„ API é”™è¯¯å¤„ç†æœºåˆ¶</p>
</section>
<section id="é«˜çº§æ•°æ®å¯è§†åŒ–" class="level3">
<h3 class="anchored" data-anchor-id="é«˜çº§æ•°æ®å¯è§†åŒ–">4. é«˜çº§æ•°æ®å¯è§†åŒ–</h3>
<p>æ¸©åº¦è¶‹åŠ¿å›¾ï¼Œæ¸…æ™°åœ°åŒºåˆ†äº†å†å²æ•°æ®å’Œé¢„æŠ¥æ•°æ®ï¼š</p>
<div id="3d7325f3" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> altair <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> alt</span>
<span id="cb5-2"></span>
<span id="cb5-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> create_temperature_chart(weather_df):</span>
<span id="cb5-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åˆ›å»ºäº¤äº’å¼æ¸©åº¦è¶‹åŠ¿å›¾"""</span></span>
<span id="cb5-5"></span>
<span id="cb5-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŒ…å«æ¸©åº¦çº¿çš„åŸºå‡†å›¾è¡¨</span></span>
<span id="cb5-7">    base_chart <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> alt.Chart(weather_df).mark_line(</span>
<span id="cb5-8">        point<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>,</span>
<span id="cb5-9">        strokeWidth<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,</span>
<span id="cb5-10">        opacity<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span></span>
<span id="cb5-11">    ).encode(</span>
<span id="cb5-12">        x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>alt.X(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'date:T'</span>, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'æ—¥æœŸ'</span>),</span>
<span id="cb5-13">        y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>alt.Y(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_mean:Q'</span>, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'æ¸©åº¦ (Â°C)'</span>, scale<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>alt.Scale(domain<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[weather_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_min'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">min</span>()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, weather_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_max'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">max</span>()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>]))</span>
<span id="cb5-14">    ).properties(</span>
<span id="cb5-15">        width<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">800</span>,</span>
<span id="cb5-16">        height<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">400</span>,</span>
<span id="cb5-17">        title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'æ¸©åº¦è¶‹åŠ¿å›¾'</span></span>
<span id="cb5-18">    )</span>
<span id="cb5-19"></span>
<span id="cb5-20">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å†å²æ•°æ®ï¼ˆå®çº¿ï¼‰</span></span>
<span id="cb5-21">    historical_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> weather_df[weather_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'is_future'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>]</span>
<span id="cb5-22">    historical_line <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> base_chart.transform_filter(</span>
<span id="cb5-23">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'datum.is_future == false'</span></span>
<span id="cb5-24">    ).encode(</span>
<span id="cb5-25">        color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>alt.value(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'blue'</span>),</span>
<span id="cb5-26">        strokeDash<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>alt.value([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>])  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å®çº¿</span></span>
<span id="cb5-27">    )</span>
<span id="cb5-28"></span>
<span id="cb5-29">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æœªæ¥é¢„æŠ¥ï¼ˆè™šçº¿ï¼‰</span></span>
<span id="cb5-30">    future_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> weather_df[weather_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'is_future'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>]</span>
<span id="cb5-31">    future_line <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> base_chart.transform_filter(</span>
<span id="cb5-32">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'datum.is_future == true'</span></span>
<span id="cb5-33">    ).encode(</span>
<span id="cb5-34">        color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>alt.value(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'red'</span>),</span>
<span id="cb5-35">        strokeDash<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>alt.value([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>])  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è™šçº¿</span></span>
<span id="cb5-36">    )</span>
<span id="cb5-37"></span>
<span id="cb5-38">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä»Šæ—¥æŒ‡ç¤ºçº¿</span></span>
<span id="cb5-39">    today_line <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> alt.Chart(pd.DataFrame({<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'x'</span>: [pd.Timestamp.now()]})).mark_rule(</span>
<span id="cb5-40">        strokeDash<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>],</span>
<span id="cb5-41">        stroke<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'green'</span>,</span>
<span id="cb5-42">        strokeWidth<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb5-43">    ).encode(x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'x:T'</span>)</span>
<span id="cb5-44"></span>
<span id="cb5-45">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> (historical_line <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> future_line <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> today_line).resolve_scale(color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'independent'</span>)</span></code></pre></div></div>
</details>
</div>
<p><strong>å¯è§†åŒ–ç‰¹æ€§ï¼š</strong> - <strong>çº¿æ¡æ ·å¼åŒºåˆ†</strong>ï¼šå®çº¿ï¼ˆå†å²ï¼‰å¯¹æ¯”è™šçº¿ï¼ˆé¢„æŠ¥ï¼‰ - <strong>ä»Šæ—¥æŒ‡ç¤ºå™¨</strong>ï¼šå¯¹å½“å‰æ—¥æœŸçš„è§†è§‰æ ‡è®° - <strong>é¢œè‰²ç¼–ç </strong>ï¼šè“è‰²ä»£è¡¨è¿‡å»ï¼Œçº¢è‰²ä»£è¡¨æœªæ¥ - <strong>äº¤äº’å¼æç¤º</strong>ï¼šæ‚¬åœæ—¶æ˜¾ç¤ºæ•°æ®ç‚¹ä¿¡æ¯</p>
</section>
<section id="ç©ºæ°”è´¨é‡ç›‘æµ‹" class="level3">
<h3 class="anchored" data-anchor-id="ç©ºæ°”è´¨é‡ç›‘æµ‹">5. ç©ºæ°”è´¨é‡ç›‘æµ‹</h3>
<p>ç¬¦åˆ EPA æ ‡å‡†çš„ PM2.5 æ°´å¹³é¢œè‰²ç¼–ç ï¼š</p>
<div id="bdf36778" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_air_quality_level(pm25_value):</span>
<span id="cb6-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åŸºäºç¾å›½ EPA PM2.5 æ ‡å‡†è·å–ç©ºæ°”è´¨é‡ç­‰çº§"""</span></span>
<span id="cb6-3"></span>
<span id="cb6-4">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> pm25_value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>:</span>
<span id="cb6-5">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {</span>
<span id="cb6-6">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'level'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ä¼˜'</span>,</span>
<span id="cb6-7">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'color'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#00e400'</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ·±ç»¿</span></span>
<span id="cb6-8">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'text_color'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'white'</span>,</span>
<span id="cb6-9">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'icon'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ğŸŸ¢'</span></span>
<span id="cb6-10">        }</span>
<span id="cb6-11">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">elif</span> pm25_value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">35.4</span>:</span>
<span id="cb6-12">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {</span>
<span id="cb6-13">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'level'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'è‰¯'</span>,</span>
<span id="cb6-14">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'color'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#ffff00'</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æµ…é»„</span></span>
<span id="cb6-15">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'text_color'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black'</span>,</span>
<span id="cb6-16">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'icon'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ğŸŸ¢'</span></span>
<span id="cb6-17">        }</span>
<span id="cb6-18">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">elif</span> pm25_value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">55.4</span>:</span>
<span id="cb6-19">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {</span>
<span id="cb6-20">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'level'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'è½»åº¦æ±¡æŸ“'</span>,</span>
<span id="cb6-21">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'color'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#ff7e00'</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ©™é»„</span></span>
<span id="cb6-22">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'text_color'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black'</span>,</span>
<span id="cb6-23">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'icon'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ğŸŸ¡'</span></span>
<span id="cb6-24">        }</span>
<span id="cb6-25">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">elif</span> pm25_value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">150.4</span>:</span>
<span id="cb6-26">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {</span>
<span id="cb6-27">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'level'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ä¸­åº¦æ±¡æŸ“'</span>,</span>
<span id="cb6-28">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'color'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#ff0000'</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># çº¢è‰²</span></span>
<span id="cb6-29">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'text_color'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'white'</span>,</span>
<span id="cb6-30">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'icon'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ğŸŸ '</span></span>
<span id="cb6-31">        }</span>
<span id="cb6-32">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">elif</span> pm25_value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">250.4</span>:</span>
<span id="cb6-33">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {</span>
<span id="cb6-34">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'level'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'é‡åº¦æ±¡æŸ“'</span>,</span>
<span id="cb6-35">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'color'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#8f3f97'</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç´«è‰²</span></span>
<span id="cb6-36">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'text_color'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'white'</span>,</span>
<span id="cb6-37">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'icon'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ğŸ”´'</span></span>
<span id="cb6-38">        }</span>
<span id="cb6-39">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb6-40">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {</span>
<span id="cb6-41">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'level'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ä¸¥é‡æ±¡æŸ“'</span>,</span>
<span id="cb6-42">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'color'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'#7e0023'</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ·±è¤</span></span>
<span id="cb6-43">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'text_color'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'white'</span>,</span>
<span id="cb6-44">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'icon'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'âš«'</span></span>
<span id="cb6-45">        }</span>
<span id="cb6-46"></span>
<span id="cb6-47"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> display_air_quality_badge(pm25_value):</span>
<span id="cb6-48">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""æ˜¾ç¤ºå¸¦è§†è§‰æŒ‡ç¤ºçš„ç©ºæ°”è´¨é‡å¾½ç« """</span></span>
<span id="cb6-49">    aq_info <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_air_quality_level(pm25_value)</span>
<span id="cb6-50"></span>
<span id="cb6-51">    st.markdown(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"""</span></span>
<span id="cb6-52"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    &lt;div style="background-color: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>aq_info[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'color'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">; color: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>aq_info[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'text_color'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">;</span></span>
<span id="cb6-53"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">                padding: 10px; border-radius: 5px; text-align: center; margin: 5px 0;"&gt;</span></span>
<span id="cb6-54"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        &lt;strong&gt;</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>aq_info[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'icon'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> PM2.5: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>pm25_value<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> Î¼g/mÂ³&lt;/strong&gt;&lt;br&gt;</span></span>
<span id="cb6-55"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        &lt;small&gt;</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>aq_info[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'level'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">&lt;/small&gt;</span></span>
<span id="cb6-56"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    &lt;/div&gt;</span></span>
<span id="cb6-57"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    """</span>, unsafe_allow_html<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span></code></pre></div></div>
</details>
</div>
<p><strong>ç©ºæ°”è´¨é‡åŠŸèƒ½ç‰¹æ€§ï¼š</strong> - <strong>EPA æ ‡å‡†</strong>ï¼šåŸºäºç¾å›½ç¯å¢ƒä¿æŠ¤ç½²çš„æ ‡å‡† - <strong>è§†è§‰æŒ‡ç¤ºå™¨</strong>ï¼šå¸¦å›¾æ ‡çš„é¢œè‰²ç¼–ç å¾½ç«  - <strong>å¯è®¿é—®æ€§</strong>ï¼šé«˜å¯¹æ¯”åº¦è‰²å€¼ç¡®ä¿å¯è¯»æ€§ - <strong>ç§‘æ™®æ€§</strong>ï¼šé€šè¿‡ç­‰çº§è¯´æ˜å¸®åŠ©ç”¨æˆ·ç†è§£</p>
</section>
</section>
<section id="ai-é©±åŠ¨çš„å¤©æ°”æ™ºèƒ½" class="level2">
<h2 class="anchored" data-anchor-id="ai-é©±åŠ¨çš„å¤©æ°”æ™ºèƒ½">AI é©±åŠ¨çš„å¤©æ°”æ™ºèƒ½</h2>
<section id="é›†æˆ-deepseek-ai" class="level3">
<h3 class="anchored" data-anchor-id="é›†æˆ-deepseek-ai">é›†æˆ DeepSeek AI</h3>
<p>æœ¬é¡¹ç›®æœ€å…·åˆ›æ–°æ€§çš„åŠŸèƒ½æ˜¯ä½¿ç”¨ ModelScope å¹³å°ä¸Šçš„ DeepSeek-V3.2 æ¨¡å‹æä¾› AI å¤©æ°”åˆ†æï¼š</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://jcwinning.github.io/LandingPage/posts/weather-trend/images/1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>AI å¤©æ°”åˆ†æå»ºè®®</figcaption>
</figure>
</div>
<div id="aa6bb07f" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb7-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb7-3"></span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆå§‹åŒ– ModelScope çš„ AI å®¢æˆ·ç«¯</span></span>
<span id="cb7-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> init_ai_client():</span>
<span id="cb7-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åˆå§‹åŒ–ç”¨äº ModelScope API çš„ OpenAI å®¢æˆ·ç«¯"""</span></span>
<span id="cb7-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> OpenAI(</span>
<span id="cb7-8">        base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>,</span>
<span id="cb7-9">        api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"modelscope"</span>),</span>
<span id="cb7-10">    )</span>
<span id="cb7-11"></span>
<span id="cb7-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> generate_weather_insights(weather_df, location_name, language<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span>):</span>
<span id="cb7-13">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ç”Ÿæˆ AI é©±åŠ¨çš„å¤©æ°”åˆ†æå»ºè®®"""</span></span>
<span id="cb7-14"></span>
<span id="cb7-15">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å‡†å¤‡ç”¨äº AI åˆ†æçš„å¤©æ°”æ•°æ®</span></span>
<span id="cb7-16">    today_index <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> weather_df[weather_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'is_today'</span>]].index[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">any</span>(weather_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'is_today'</span>]) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb7-17">    historical_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> weather_df.iloc[:today_index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æˆªè‡³ä»Šæ—¥</span></span>
<span id="cb7-18">    future_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> weather_df.iloc[today_index:]  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä»Šæ—¥èµ·</span></span>
<span id="cb7-19"></span>
<span id="cb7-20">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä¸º AI åˆ›å»ºå¤©æ°”æ‘˜è¦</span></span>
<span id="cb7-21">    weather_summary <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"""</span></span>
<span id="cb7-22"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    åœ°ç‚¹: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>location_name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb7-23"></span>
<span id="cb7-24"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    å†å²å¤©æ°” (è¿‡å» </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(historical_data)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> å¤©):</span></span>
<span id="cb7-25"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    - æ¸©åº¦èŒƒå›´: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>historical_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_min'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">min</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.1f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Â°C åˆ° </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>historical_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_max'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">max</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.1f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Â°C</span></span>
<span id="cb7-26"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    - å¹³å‡æ¸©åº¦: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>historical_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_mean'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>mean()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.1f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Â°C</span></span>
<span id="cb7-27"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    - ç©ºæ°”è´¨é‡èŒƒå›´: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>historical_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pm2_5'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">min</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.1f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> åˆ° </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>historical_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pm2_5'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">max</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.1f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> PM2.5</span></span>
<span id="cb7-28"></span>
<span id="cb7-29"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    å¤©æ°”é¢„æŠ¥ (æœªæ¥ </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(future_data)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> å¤©):</span></span>
<span id="cb7-30"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    - æ¸©åº¦èŒƒå›´: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>future_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_min'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">min</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.1f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Â°C åˆ° </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>future_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_max'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">max</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.1f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Â°C</span></span>
<span id="cb7-31"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    - å¹³å‡é™é›¨æ¦‚ç‡: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>future_data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rain_probability'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>mean()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.0f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">%</span></span>
<span id="cb7-32"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    """</span></span>
<span id="cb7-33"></span>
<span id="cb7-34">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ ¹æ®è¯­è¨€ç”Ÿæˆæç¤ºè¯</span></span>
<span id="cb7-35">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> language <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zh"</span>:</span>
<span id="cb7-36">        prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"""</span></span>
<span id="cb7-37"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        åŸºäºä»¥ä¸‹å¤©æ°”æ•°æ®ï¼Œè¯·æä¾›ç®€æ´å®ç”¨çš„å¤©æ°”å»ºè®®ï¼ˆ100-200å­—ï¼‰ï¼š</span></span>
<span id="cb7-38"></span>
<span id="cb7-39"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>weather_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb7-40"></span>
<span id="cb7-41"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        è¯·åŒ…æ‹¬ï¼š</span></span>
<span id="cb7-42"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        1. å¤©æ°”æ¨¡å¼åˆ†æ</span></span>
<span id="cb7-43"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        2. ç©¿è¡£å»ºè®®</span></span>
<span id="cb7-44"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        3. æˆ·å¤–æ´»åŠ¨å»ºè®®</span></span>
<span id="cb7-45"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        4. å¥åº·æ³¨æ„äº‹é¡¹ï¼ˆå¦‚ç©ºæ°”è´¨é‡ç›¸å…³ï¼‰</span></span>
<span id="cb7-46"></span>
<span id="cb7-47"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        è¯·ç”¨ä¸­æ–‡å›å¤ï¼Œè¯­æ°”å‹å¥½å®ç”¨ã€‚</span></span>
<span id="cb7-48"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        """</span></span>
<span id="cb7-49">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb7-50">        prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"""</span></span>
<span id="cb7-51"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        Based on the following weather data, please provide concise and practical weather advice (100-200 words):</span></span>
<span id="cb7-52"></span>
<span id="cb7-53"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>weather_summary<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb7-54"></span>
<span id="cb7-55"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        Please include:</span></span>
<span id="cb7-56"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        1. Weather pattern analysis</span></span>
<span id="cb7-57"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        2. Clothing recommendations</span></span>
<span id="cb7-58"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        3. Outdoor activity suggestions</span></span>
<span id="cb7-59"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        4. Health considerations (related to air quality if applicable)</span></span>
<span id="cb7-60"></span>
<span id="cb7-61"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        Please respond in </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>language<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> with a friendly and practical tone.</span></span>
<span id="cb7-62"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">        """</span></span>
<span id="cb7-63"></span>
<span id="cb7-64">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb7-65">        client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> init_ai_client()</span>
<span id="cb7-66">        response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.chat.completions.create(</span>
<span id="cb7-67">            model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"deepseek-ai/DeepSeek-V3"</span>,</span>
<span id="cb7-68">            messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[{<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: prompt}],</span>
<span id="cb7-69">            max_tokens<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>,</span>
<span id="cb7-70">            temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span></span>
<span id="cb7-71">        )</span>
<span id="cb7-72"></span>
<span id="cb7-73">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content</span>
<span id="cb7-74"></span>
<span id="cb7-75">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb7-76">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"AI æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ã€‚é”™è¯¯ä¿¡æ¯: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(e)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb7-77"></span>
<span id="cb7-78"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åœ¨ Streamlit åº”ç”¨ä¸­</span></span>
<span id="cb7-79"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> st.button(get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ai_button"</span>, language)):</span>
<span id="cb7-80">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> st.spinner(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ­£åœ¨è·å– AI å¤©æ°”å»ºè®®..."</span>):</span>
<span id="cb7-81">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'weather_df'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> st.session_state <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">and</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'location_name'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> st.session_state:</span>
<span id="cb7-82">            ai_insights <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> generate_weather_insights(</span>
<span id="cb7-83">                st.session_state.weather_df,</span>
<span id="cb7-84">                st.session_state.location_name,</span>
<span id="cb7-85">                language</span>
<span id="cb7-86">            )</span>
<span id="cb7-87">            st.markdown(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"### ğŸ¤– AI å¤©æ°”åˆ†æ"</span>)</span>
<span id="cb7-88">            st.write(ai_insights)</span>
<span id="cb7-89">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb7-90">            st.warning(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"è¯·å…ˆè·å–å¤©æ°”æ•°æ®ã€‚"</span>)</span></code></pre></div></div>
</details>
</div>
<p><strong>AI ç‰¹æ€§ï¼š</strong> - <strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥åˆ†æ</strong>ï¼šåŒæ—¶å¤„ç†å†å²å’Œé¢„æŠ¥æ•°æ® - <strong>å¤šè¯­è¨€æ”¯æŒ</strong>ï¼šAI æ ¹æ®ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€å›å¤ - <strong>å®ç”¨å»ºè®®</strong>ï¼šæä¾›ç©¿è¡£ã€æ´»åŠ¨å’Œå¥åº·æ–¹é¢çš„è§è§£ - <strong>å®¹é”™å¤„ç†</strong>ï¼šåœ¨ AI æœåŠ¡ä¸å¯ç”¨æ—¶ä¼˜é›…åœ°æç¤º</p>
</section>
<section id="ai-æç¤ºè¯å·¥ç¨‹" class="level3">
<h3 class="anchored" data-anchor-id="ai-æç¤ºè¯å·¥ç¨‹">AI æç¤ºè¯å·¥ç¨‹</h3>
<p>AI ç³»ç»Ÿé€šè¿‡ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯ç”Ÿæˆæœ‰ä»·å€¼çš„è§è§£ï¼š</p>
<p><strong>æç¤ºè¯ç»“æ„ï¼š</strong> 1. <strong>æ•°æ®ä¸Šä¸‹æ–‡</strong>ï¼šå…¨é¢çš„å¤©æ°”ç»Ÿè®¡ä¿¡æ¯ 2. <strong>ä»»åŠ¡å®šä¹‰</strong>ï¼šæ˜ç¡®çš„åˆ†æè¦æ±‚ 3. <strong>è¾“å‡ºæ ¼å¼</strong>ï¼šç»“æ„åŒ–çš„å›å¤ç±»åˆ« 4. <strong>è¯­è¨€é€‚é…</strong>ï¼šä¸ UI è¯­è¨€ä¿æŒä¸€è‡´</p>
<p><strong>å»ºè®®ç±»åˆ«ï¼š</strong> - <strong>å¤©æ°”æ¨¡å¼åˆ†æ</strong>ï¼šè¶‹åŠ¿å’Œå¼‚å¸¸åˆ†æ - <strong>ç©¿è¡£å»ºè®®</strong>ï¼šå®ç”¨çš„ç©¿ç€æŒ‡å¯¼ - <strong>æ´»åŠ¨å»ºè®®</strong>ï¼šæˆ·å¤–è®¡åˆ’çš„æ¨è - <strong>å¥åº·æ³¨æ„äº‹é¡¹</strong>ï¼šç©ºæ°”è´¨é‡åŠå¤©æ°”å½±å“</p>
</section>
</section>
<section id="å›½é™…åŒ–ç³»ç»Ÿ" class="level2">
<h2 class="anchored" data-anchor-id="å›½é™…åŒ–ç³»ç»Ÿ">å›½é™…åŒ–ç³»ç»Ÿ</h2>
<section id="è¯­è¨€ç®¡ç†æ¶æ„" class="level3">
<h3 class="anchored" data-anchor-id="è¯­è¨€ç®¡ç†æ¶æ„">è¯­è¨€ç®¡ç†æ¶æ„</h3>
<p>åº”ç”¨å®ç°äº†ä¸€ä¸ªå…¨é¢çš„åŒè¯­ç³»ç»Ÿï¼š</p>
<div id="f544aa0c" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># language.py - ç¿»è¯‘ç®¡ç†</span></span>
<span id="cb8-2">TRANSLATIONS <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb8-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span>: {</span>
<span id="cb8-4">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"app_title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Weather Forecast App"</span>,</span>
<span id="cb8-5">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sidebar_header"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Weather Query"</span>,</span>
<span id="cb8-6">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"city_input_placeholder"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Enter a city name"</span>,</span>
<span id="cb8-7">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"get_weather_button"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Get Weather"</span>,</span>
<span id="cb8-8">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"weather_trends_title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Weather Trends for"</span>,</span>
<span id="cb8-9">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ai_button"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI Weather Advice"</span>,</span>
<span id="cb8-10">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ... æ›´å¤šç¿»è¯‘</span></span>
<span id="cb8-11">    },</span>
<span id="cb8-12">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zh"</span>: {</span>
<span id="cb8-13">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"app_title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å¤©æ°”é¢„æŠ¥åº”ç”¨"</span>,</span>
<span id="cb8-14">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sidebar_header"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å¤©æ°”æŸ¥è¯¢"</span>,</span>
<span id="cb8-15">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"city_input_placeholder"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"è¾“å…¥åŸå¸‚åç§°"</span>,</span>
<span id="cb8-16">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"get_weather_button"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"è·å–å¤©æ°”"</span>,</span>
<span id="cb8-17">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"weather_trends_title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å¤©æ°”è¶‹åŠ¿"</span>,</span>
<span id="cb8-18">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ai_button"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AIå¤©æ°”å»ºè®®"</span>,</span>
<span id="cb8-19">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ... æ›´å¤šç¿»è¯‘</span></span>
<span id="cb8-20">    }</span>
<span id="cb8-21">}</span>
<span id="cb8-22"></span>
<span id="cb8-23"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_text(key, language<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span>):</span>
<span id="cb8-24">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""è·å–æŒ‡å®šé”®å’Œè¯­è¨€çš„ç¿»è¯‘æ–‡æœ¬"""</span></span>
<span id="cb8-25">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> TRANSLATIONS.get(language, {}).get(key, key)</span>
<span id="cb8-26"></span>
<span id="cb8-27"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_available_languages():</span>
<span id="cb8-28">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""è·å–å¯ç”¨çš„è¯­è¨€é€‰é¡¹"""</span></span>
<span id="cb8-29">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"English"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zh"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä¸­æ–‡"</span>}</span>
<span id="cb8-30"></span>
<span id="cb8-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åœ¨ä¸»ç¨‹åº (app.py) ä¸­</span></span>
<span id="cb8-32"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> main():</span>
<span id="cb8-33">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è¯­è¨€çŠ¶æ€ç®¡ç†</span></span>
<span id="cb8-34">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'language'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> st.session_state:</span>
<span id="cb8-35">        st.session_state.language <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span></span>
<span id="cb8-36"></span>
<span id="cb8-37">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è¯­è¨€åˆ‡æ¢æŒ‰é’®</span></span>
<span id="cb8-38">    current_lang <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.session_state.language</span>
<span id="cb8-39">    available_langs <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_available_languages()</span>
<span id="cb8-40"></span>
<span id="cb8-41">    col1, col2, col3 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.columns([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>])</span>
<span id="cb8-42">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> col1:</span>
<span id="cb8-43">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> st.button(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"EN"</span>, disabled<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>current_lang<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span>):</span>
<span id="cb8-44">            st.session_state.language <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span></span>
<span id="cb8-45">            st.rerun()</span>
<span id="cb8-46"></span>
<span id="cb8-47">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> col2:</span>
<span id="cb8-48">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> st.button(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä¸­æ–‡"</span>, disabled<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>current_lang<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zh"</span>):</span>
<span id="cb8-49">            st.session_state.language <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zh"</span></span>
<span id="cb8-50">            st.rerun()</span>
<span id="cb8-51"></span>
<span id="cb8-52">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åœ¨æ‰€æœ‰ UI å…ƒç´ ä¸­ä½¿ç”¨å½“å‰è¯­è¨€</span></span>
<span id="cb8-53">    language <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.session_state.language</span>
<span id="cb8-54">    st.title(get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"app_title"</span>, language))</span>
<span id="cb8-55">    st.sidebar.header(get_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sidebar_header"</span>, language))</span></code></pre></div></div>
</details>
</div>
<p><strong>å›½é™…åŒ–ç‰¹æ€§ï¼š</strong> - <strong>å®Œæ•´çš„ UI ç¿»è¯‘</strong>ï¼šæœ¬åœ°åŒ–æ‰€æœ‰ç•Œé¢å…ƒç´  - <strong>åŠ¨æ€è¯­è¨€åˆ‡æ¢</strong>ï¼šè¯­è¨€æ›´æ”¹æ—¶å³æ—¶æ›´æ–° UI - <strong>ä¸­æ–‡å­—ç¬¦æ”¯æŒ</strong>ï¼šå®Œæ•´çš„ Unicode å’Œ CJK æ”¯æŒ - <strong>è¯­å¢ƒä¸€è‡´</strong>ï¼šAI å›å¤ä¸ UI è¯­è¨€ç›¸åŒ¹é…</p>
</section>
</section>
<section id="é«˜çº§-ui-ç»„ä»¶" class="level2">
<h2 class="anchored" data-anchor-id="é«˜çº§-ui-ç»„ä»¶">é«˜çº§ UI ç»„ä»¶</h2>
<section id="å¸¦è§†è§‰æŒ‡ç¤ºçš„å¤©æ°”æ•°æ®è¡¨" class="level3">
<h3 class="anchored" data-anchor-id="å¸¦è§†è§‰æŒ‡ç¤ºçš„å¤©æ°”æ•°æ®è¡¨">å¸¦è§†è§‰æŒ‡ç¤ºçš„å¤©æ°”æ•°æ®è¡¨</h3>
<p>å¤©æ°”è¡¨ç»“åˆäº†æ•°æ®ä¸è§†è§‰å…ƒç´ ï¼Œæ–¹ä¾¿ç”¨æˆ·å¿«é€Ÿç†è§£ï¼š</p>
<div id="16638b34" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> create_weather_table(weather_df, language<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span>):</span>
<span id="cb9-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åˆ›å»ºå¢å¼ºçš„å¤©æ°”è¡¨ï¼ŒåŒ…å«å›¾æ ‡å’Œé¢œè‰²æ˜¾ç¤º"""</span></span>
<span id="cb9-3"></span>
<span id="cb9-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¤©æ°”ä»£ç åˆ° Emoji çš„æ˜ å°„</span></span>
<span id="cb9-5">    WEATHER_ICONS <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb9-6">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"â˜€ï¸"</span>,   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ™´</span></span>
<span id="cb9-7">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"â›…"</span>,   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ™´é—´å¤šäº‘</span></span>
<span id="cb9-8">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"â˜ï¸"</span>,   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¤šäº‘</span></span>
<span id="cb9-9">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"â˜ï¸"</span>,   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é˜´</span></span>
<span id="cb9-10">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">45</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸŒ«ï¸"</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é›¾</span></span>
<span id="cb9-11">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">48</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸŒ¦ï¸"</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é˜µé›¨</span></span>
<span id="cb9-12">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">51</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸŒ§ï¸"</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é›¨</span></span>
<span id="cb9-13">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">53</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"â„ï¸"</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é›ª</span></span>
<span id="cb9-14">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">95</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"â›ˆï¸"</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é›·é˜µé›¨</span></span>
<span id="cb9-15">    }</span>
<span id="cb9-16"></span>
<span id="cb9-17">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> format_weather_row(row):</span>
<span id="cb9-18">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""æ ¼å¼åŒ–å•è¡Œå¤©æ°”æƒ…å†µå¹¶æ·»åŠ æ ·å¼"""</span></span>
<span id="cb9-19">        date_str <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'date'</span>].strftime(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'%Y-%m-</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%d</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>)</span>
<span id="cb9-20">        temp_range <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_min'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.1f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Â° ~ </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'temperature_max'</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.1f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Â°"</span></span>
<span id="cb9-21">        weather_icon <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> WEATHER_ICONS.get(row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'weather_code'</span>], <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸŒ¡ï¸"</span>)</span>
<span id="cb9-22"></span>
<span id="cb9-23">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç©ºæ°”è´¨é‡å¾½ç« </span></span>
<span id="cb9-24">        aq_info <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_air_quality_level(row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pm2_5'</span>])</span>
<span id="cb9-25">        aq_badge <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'&lt;span style="background-color: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>aq_info[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"color"</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">; color: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>aq_info[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text_color"</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">; padding: 2px 6px; border-radius: 3px; font-size: 0.8em;"&gt;</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>aq_info[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"icon"</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pm2_5"</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.0f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">&lt;/span&gt;'</span></span>
<span id="cb9-26"></span>
<span id="cb9-27">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é™é›¨æ¦‚ç‡æŒ‡ç¤º</span></span>
<span id="cb9-28">        rain_color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'red'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rain_probability'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'orange'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rain_probability'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gray'</span></span>
<span id="cb9-29">        rain_indicator <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'&lt;span style="color: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>rain_color<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">;"&gt;ğŸ”´ </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rain_probability"</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.0f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">%&lt;/span&gt;'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rain_probability'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'&lt;span style="color: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>rain_color<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">;"&gt;ğŸŸ¢ </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rain_probability"</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.0f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">%&lt;/span&gt;'</span></span>
<span id="cb9-30"></span>
<span id="cb9-31">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># â€œä»Šæ—¥â€è¡Œé«˜äº®æ˜¾ç¤º</span></span>
<span id="cb9-32">        row_style <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'font-size: 1.2em; font-weight: bold;'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'is_today'</span>] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span></span>
<span id="cb9-33"></span>
<span id="cb9-34">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {</span>
<span id="cb9-35">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'æ—¥æœŸ'</span>: <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'&lt;span style="</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>row_style<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"&gt;</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>date_str<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">&lt;/span&gt;'</span>,</span>
<span id="cb9-36">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'å¤©æ°”'</span>: <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'&lt;span style="</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>row_style<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"&gt;</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>weather_icon<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">&lt;/span&gt;'</span>,</span>
<span id="cb9-37">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'æ¸©åº¦'</span>: <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'&lt;span style="</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>row_style<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"&gt;</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>temp_range<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">&lt;/span&gt;'</span>,</span>
<span id="cb9-38">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'é£é€Ÿ'</span>: <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'&lt;span style="</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>row_style<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"&gt;ğŸ’¨ </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"wind_speed_max"</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.1f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> km/h&lt;/span&gt;'</span>,</span>
<span id="cb9-39">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'é™é›¨'</span>: rain_indicator,</span>
<span id="cb9-40">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ç©ºæ°”è´¨é‡'</span>: aq_badge</span>
<span id="cb9-41">        }</span>
<span id="cb9-42"></span>
<span id="cb9-43">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¯¹æ‰€æœ‰è¡Œåº”ç”¨æ ¼å¼åŒ–</span></span>
<span id="cb9-44">    formatted_rows <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [format_weather_row(row) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> _, row <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> weather_df.iterrows()]</span>
<span id="cb9-45"></span>
<span id="cb9-46">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> pd.DataFrame(formatted_rows)</span>
<span id="cb9-47"></span>
<span id="cb9-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åœ¨ Streamlit ä¸­æ˜¾ç¤º</span></span>
<span id="cb9-49">st.markdown(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"### ğŸ“Š å¤©æ°”è¯¦æƒ…"</span>)</span>
<span id="cb9-50">st.dataframe(</span>
<span id="cb9-51">    create_weather_table(weather_df, language),</span>
<span id="cb9-52">    width<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1200</span>,</span>
<span id="cb9-53">    hide_index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>,</span>
<span id="cb9-54">    unsafe_allow_html<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span>
<span id="cb9-55">)</span></code></pre></div></div>
</details>
</div>
<p><strong>è¡¨æ ¼ç‰¹æ€§ï¼š</strong> - <strong>å¤©æ°”å›¾æ ‡</strong>ï¼šEmoji è¡¨è¾¾æ–¹å¼ï¼Œç›´è§‚æ˜“æ‡‚ - <strong>ä»Šæ—¥é«˜äº®</strong>ï¼šå¯¹å½“å¤©æ—¥æœŸä½¿ç”¨æ›´å¤§ã€åŠ ç²—çš„æ–‡å­— - <strong>ç©ºæ°”è´¨é‡å¾½ç« </strong>ï¼šé¢œè‰²ç¼–ç çš„ PM2.5 æŒ‡æ ‡ - <strong>é™é›¨æ¦‚ç‡</strong>ï¼šåŸºäº Material Design è‰²ç³»çš„è§†è§‰æŒ‡ç¤º - <strong>å“åº”å¼å¸ƒå±€</strong>ï¼šé€‚åº”å„ç§å±å¹•å®½åº¦</p>
</section>
</section>
<section id="éƒ¨ç½²ä¸ç”Ÿäº§" class="level2">
<h2 class="anchored" data-anchor-id="éƒ¨ç½²ä¸ç”Ÿäº§">éƒ¨ç½²ä¸ç”Ÿäº§</h2>
<section id="ç¯å¢ƒé…ç½®" class="level3">
<h3 class="anchored" data-anchor-id="ç¯å¢ƒé…ç½®">ç¯å¢ƒé…ç½®</h3>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ—¶ï¼Œè¯·é…ç½®ç¯å¢ƒå˜é‡ï¼š</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># .env æ–‡ä»¶</span></span>
<span id="cb10-2"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">modelscope</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>æ‚¨çš„ <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">API</span> å¯†é’¥</span>
<span id="cb10-3"></span>
<span id="cb10-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å…¶ä»–ç”Ÿäº§ç¯å¢ƒè®¾ç½®</span></span>
<span id="cb10-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è€ƒè™‘é¢‘ç‡é™åˆ¶ã€ç¼“å­˜æœºåˆ¶å’Œç›‘æ§</span></span></code></pre></div></div>
</section>
<section id="éƒ¨ç½²åˆ°-streamlit-cloud" class="level3">
<h3 class="anchored" data-anchor-id="éƒ¨ç½²åˆ°-streamlit-cloud">éƒ¨ç½²åˆ° Streamlit Cloud</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. å®‰è£… Streamlit CLI</span></span>
<span id="cb11-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install streamlit</span>
<span id="cb11-3"></span>
<span id="cb11-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. ç™»å½• Streamlit</span></span>
<span id="cb11-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">streamlit</span> login</span>
<span id="cb11-6"></span>
<span id="cb11-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. éƒ¨ç½²åˆ° Streamlit Cloud</span></span>
<span id="cb11-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">streamlit</span> run app.py  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é¦–å…ˆåœ¨æœ¬åœ°æµ‹è¯•</span></span>
<span id="cb11-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç„¶åé€šè¿‡ cloud.streamlit.io æˆ– CLI è¿›è¡Œéƒ¨ç½²</span></span></code></pre></div></div>
</section>
<section id="docker-éƒ¨ç½²-å¯é€‰" class="level3">
<h3 class="anchored" data-anchor-id="docker-éƒ¨ç½²-å¯é€‰">Docker éƒ¨ç½² (å¯é€‰)</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode dockerfile code-with-copy"><code class="sourceCode dockerfile"><span id="cb12-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">FROM</span> python:3.9-slim</span>
<span id="cb12-2"></span>
<span id="cb12-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WORKDIR</span> /app</span>
<span id="cb12-4"></span>
<span id="cb12-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> requirements.txt .</span>
<span id="cb12-6"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> requirements.txt</span>
<span id="cb12-7"></span>
<span id="cb12-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> . .</span>
<span id="cb12-9"></span>
<span id="cb12-10"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">EXPOSE</span> 8501</span>
<span id="cb12-11"></span>
<span id="cb12-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CMD</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"streamlit"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"run"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"app.py"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--server.address"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0.0.0.0"</span>]</span></code></pre></div></div>
</section>
</section>
<section id="æ€§èƒ½ä¼˜åŒ–" class="level2">
<h2 class="anchored" data-anchor-id="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</h2>
<section id="ç¼“å­˜ç­–ç•¥" class="level3">
<h3 class="anchored" data-anchor-id="ç¼“å­˜ç­–ç•¥">ç¼“å­˜ç­–ç•¥</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@st.cache_data</span>(ttl<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3600</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¼“å­˜ 1 å°æ—¶</span></span>
<span id="cb13-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_weather_data_cached(lat, lon):</span>
<span id="cb13-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ç¼“å­˜å¤©æ°”æ•°æ®è·å–æ“ä½œ"""</span></span>
<span id="cb13-4">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> get_weather_data(lat, lon)</span>
<span id="cb13-5"></span>
<span id="cb13-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@st.cache_resource</span></span>
<span id="cb13-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_ai_client():</span>
<span id="cb13-8">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ç¼“å­˜ AI å®¢æˆ·ç«¯åˆå§‹åŒ–"""</span></span>
<span id="cb13-9">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> init_ai_client()</span>
<span id="cb13-10"></span>
<span id="cb13-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¼“å­˜åœ°å›¾ç”Ÿæˆ</span></span>
<span id="cb13-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@st.cache_data</span>(ttl<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3600</span>)</span>
<span id="cb13-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> create_map_cached(lat, lon):</span>
<span id="cb13-14">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ç¼“å­˜åœ°å›¾åˆ›å»ºæ“ä½œ"""</span></span>
<span id="cb13-15">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> create_interactive_map(lat, lon)</span></code></pre></div></div>
</section>
<section id="é”™è¯¯å¤„ç†ä¸å®¹é”™" class="level3">
<h3 class="anchored" data-anchor-id="é”™è¯¯å¤„ç†ä¸å®¹é”™">é”™è¯¯å¤„ç†ä¸å®¹é”™</h3>
<div id="b57baa86" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> robust_api_call(func, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>args, max_retries<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>kwargs):</span>
<span id="cb14-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å¸¦é‡è¯•é€»è¾‘çš„é«˜å¯ç”¨ API è°ƒç”¨"""</span></span>
<span id="cb14-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> attempt <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(max_retries):</span>
<span id="cb14-4">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb14-5">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> func(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>args, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>kwargs)</span>
<span id="cb14-6">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> requests.exceptions.Timeout:</span>
<span id="cb14-7">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> attempt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> max_retries <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>:</span>
<span id="cb14-8">                st.error(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å¤©æ°”æœåŠ¡æš‚æ—¶ä¸å¯ç”¨"</span>)</span>
<span id="cb14-9">                <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb14-10">            time.sleep(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span> attempt)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æŒ‡æ•°é€€é¿é‡è¯•</span></span>
<span id="cb14-11">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> requests.exceptions.RequestException <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb14-12">            st.error(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"API é”™è¯¯: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>e<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb14-13">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span></code></pre></div></div>
</details>
</div>
<ul>
<li><strong>æ•°æ®å¯è§†åŒ–</strong>ï¼šä¸“ä¸šå›¾è¡¨ä¸äº¤äº’å¼åœ°å›¾ã€‚</li>
<li><strong>AI é›†æˆ</strong>ï¼šå°†è¯­è¨€æ¨¡å‹å®é™…åº”ç”¨äºæ•°æ®åˆ†æã€‚</li>
<li><strong>å›½é™…åŒ–</strong>ï¼šå®Œæ•´çš„åŒè¯­æ”¯æŒã€‚</li>
<li><strong>ç”Ÿäº§å°±ç»ª</strong>ï¼šåŒ…å«é”™è¯¯å¤„ç†ã€ç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–ã€‚</li>
</ul>
<p>æ— è®ºæ‚¨æ˜¯åœ¨æ„å»ºå¤©æ°”åº”ç”¨ã€æ•°æ®çœ‹æ¿è¿˜æ˜¯ AI é©±åŠ¨çš„å·¥å…·ï¼Œè¯¥é¡¹ç›®éƒ½ä¸ºåˆ›å»ºå¤æ‚ä¸”ç”¨æˆ·å‹å¥½çš„åº”ç”¨ç¨‹åºæä¾›äº†åšå®çš„åŸºç¡€ã€‚</p>


<!-- -->

</section>
</section>
</section>

 ]]></description>
  <category>Python</category>
  <category>Streamlit</category>
  <category>AI</category>
  <category>tutorial</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/weather-trend/</guid>
  <pubDate>Wed, 05 Nov 2025 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/weather-trend/images/0.png" medium="image" type="image/png" height="83" width="144"/>
</item>
<item>
  <title>ç»“åˆ AI åˆ†æçš„ Shiny å’Œ Streamlit ä½“é‡è¿½è¸ªçœ‹æ¿</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/weight-tracking/</link>
  <description><![CDATA[ 





<section id="é¡¹ç›®æ¦‚è§ˆ" class="level1">
<h1>é¡¹ç›®æ¦‚è§ˆ</h1>
<p>ä½“é‡è¿½è¸ªåº”ç”¨æ˜¯ä¸€æ¬¾å…¨é¢çš„ R Shiny Web åº”ç”¨ç¨‹åºï¼Œå¯å¸®åŠ©ç”¨æˆ·ç›‘æµ‹ä½“é‡è¶‹åŠ¿ã€è®¡ç®— BMIï¼Œå¹¶è·å¾—åŸºäº AI çš„ä¸ªæ€§åŒ–å¥åº·å»ºè®®ã€‚æœ¬é¡¹ç›®çš„ä¸€ä¸ªç‰¹åˆ«ä¹‹å¤„åœ¨äºå®ƒé›†æˆäº†å¤šä¸ª AI æœåŠ¡å•†ï¼Œå¹¶å…·å¤‡å®æ—¶æ•°æ®åŒæ­¥åŠŸèƒ½ã€‚</p>
<p>åœ¨çº¿æ¼”ç¤º: <a href="https://jcflyingco.shinyapps.io/weight_tracking/">https://jcflyingco.shinyapps.io/weight_tracking/</a></p>
<p>Github: <a href="https://github.com/JCwinning/weight_tracking">https://github.com/JCwinning/weight_tracking</a></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true" href="">ä½“é‡è¶‹åŠ¿å›¾</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false" href="">AI åé¦ˆ</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/weight-tracking/images/0.png" class="img-fluid" style="width:100.0%"></p>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/weight-tracking/images/3.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
</div>
<section id="æ ¸å¿ƒåŠŸèƒ½" class="level2">
<h2 class="anchored" data-anchor-id="æ ¸å¿ƒåŠŸèƒ½">æ ¸å¿ƒåŠŸèƒ½</h2>
<section id="å¥åº·ç›‘æµ‹èƒ½åŠ›" class="level3">
<h3 class="anchored" data-anchor-id="å¥åº·ç›‘æµ‹èƒ½åŠ›">å¥åº·ç›‘æµ‹èƒ½åŠ›</h3>
<ul>
<li><strong>ä½“é‡è¿½è¸ª</strong>ï¼šäº¤äº’å¼çš„ä½“é‡è®°å½•å’Œéšæ—¶é—´å˜åŒ–çš„å¯è§†åŒ–ã€‚</li>
<li><strong>BMI è®¡ç®—å™¨</strong>ï¼šè‡ªåŠ¨è®¡ç®— BMI å¹¶ä¸å¥åº·èŒƒå›´è¿›è¡Œå¯¹æ¯”ã€‚</li>
<li><strong>å•ä½è½¬æ¢</strong>ï¼šåœ¨å…¬åˆ¶ï¼ˆkg/cmï¼‰å’Œè‹±åˆ¶ï¼ˆç£…/è‹±å¯¸ï¼‰ä¹‹é—´æ— ç¼åˆ‡æ¢ã€‚</li>
<li><strong>å®æ—¶æ›´æ–°</strong>ï¼šå½“ä¿®æ”¹ Excel æ–‡ä»¶æ—¶ï¼Œæ•°æ®ä¼šè‡ªåŠ¨åˆ·æ–°ã€‚</li>
</ul>
</section>
<section id="é«˜çº§æŠ€æœ¯ç‰¹æ€§" class="level3">
<h3 class="anchored" data-anchor-id="é«˜çº§æŠ€æœ¯ç‰¹æ€§">é«˜çº§æŠ€æœ¯ç‰¹æ€§</h3>
<ul>
<li><strong>å¤šæœåŠ¡å•† AI é›†æˆ</strong>ï¼šæ”¯æŒ Modelscopeã€OpenRouterã€Gemini å’Œ OpenAI å…¼å®¹çš„ APIã€‚</li>
<li><strong>å®Œå–„çš„å›½é™…åŒ–</strong>ï¼šå®Œæ•´çš„è‹±æ–‡/ä¸­æ–‡åŒè¯­æ”¯æŒï¼ŒåŒ…å« 50+ ä¸ªç¿»è¯‘å­—æ®µã€‚</li>
<li><strong>å®æ—¶æ–‡ä»¶ç›‘æ§</strong>ï¼šå½“æ•°æ®æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒUI ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</li>
<li><strong>äº¤äº’å¼å¯è§†åŒ–</strong>ï¼šå…·å¤‡ç¼©æ”¾ã€å¹³ç§»å’Œæ‚¬åœåŠŸèƒ½çš„ Plotly å›¾è¡¨ã€‚</li>
<li><strong>æ•°æ®ç®¡ç†</strong>ï¼šæ”¯æŒ Excel å¯¼å…¥/å¯¼å‡ºï¼Œå¹¶å…·å¤‡å“åº”å¼æ•°æ®æ›´æ–°ã€‚</li>
</ul>
</section>
</section>
<section id="æŠ€æœ¯æ¶æ„" class="level2">
<h2 class="anchored" data-anchor-id="æŠ€æœ¯æ¶æ„">æŠ€æœ¯æ¶æ„</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>

</div>
<p></p><figcaption> ä½“é‡è¿½è¸ªåº”ç”¨æ¶æ„</figcaption> </figure><p></p>
</div>
</div>
</div>
<section id="æŠ€æœ¯æ ˆ" class="level3">
<h3 class="anchored" data-anchor-id="æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>ä¸»è¦æ¡†æ¶</strong>ï¼šR Shinyï¼ˆç»å…¸æ¶æ„ï¼‰</li>
<li><strong>UI ç»„ä»¶</strong>ï¼šåŸºäº Bootstrap çš„å“åº”å¼è®¾è®¡ï¼Œä½¿ç”¨ <code>bslib</code></li>
<li><strong>æ•°æ®å¤„ç†</strong>ï¼š<code>tidyverse</code>, <code>readxl</code>, <code>openxlsx</code></li>
<li><strong>å¯è§†åŒ–</strong>ï¼šä½¿ç”¨ <code>plotly</code> å®ç°äº¤äº’å¼å›¾è¡¨</li>
<li><strong>AI é›†æˆ</strong>ï¼šä½¿ç”¨ <code>ellmer</code> æ”¯æŒå¤šæœåŠ¡å•† AI</li>
</ul>
</section>
<section id="æ–‡ä»¶ç»“æ„åˆ†æ" class="level3">
<h3 class="anchored" data-anchor-id="æ–‡ä»¶ç»“æ„åˆ†æ">æ–‡ä»¶ç»“æ„åˆ†æ</h3>
<pre><code>weight_tracking/
â”œâ”€â”€ ui.R              # åŒ…å«æ§ä»¶çš„å¤šæ ‡ç­¾ç•Œé¢
â”œâ”€â”€ server.R          # æœåŠ¡å™¨é€»è¾‘å’Œæ•°æ®ç®¡ç†
â”œâ”€â”€ global.R          # URL ä¹¦ç­¾é…ç½®
â”œâ”€â”€ ai_config.R       # ç»Ÿä¸€çš„ AI æœåŠ¡å•†ç®¡ç†
â”œâ”€â”€ language.R        # å®Œæ•´çš„å›½é™…åŒ–ç³»ç»Ÿ
â”œâ”€â”€ weight.xlsx       # ä¸»è¦æ•°æ®å­˜å‚¨
â”œâ”€â”€ www/logo.png      # åº”ç”¨å“ç‰Œæ ‡è¯†
â””â”€â”€ images/           # åº”ç”¨æˆªå›¾</code></pre>
</section>
</section>
<section id="æ•°æ®ç®¡ç†ç³»ç»Ÿ" class="level2">
<h2 class="anchored" data-anchor-id="æ•°æ®ç®¡ç†ç³»ç»Ÿ">æ•°æ®ç®¡ç†ç³»ç»Ÿ</h2>
<p>è¯¥åº”ç”¨å®ç°äº†ä¸€å¥—ç²¾è‡´çš„æ•°æ®å¤„ç†æµç¨‹ï¼Œç¡®ä¿äº†å®æ—¶åŒæ­¥å’Œé«˜æ•ˆçš„æ•°æ®å¤„ç†ã€‚</p>
<section id="æ•°æ®å¤„ç†å·¥ä½œæµ" class="level3">
<h3 class="anchored" data-anchor-id="æ•°æ®å¤„ç†å·¥ä½œæµ">æ•°æ®å¤„ç†å·¥ä½œæµ</h3>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>

</div>
<p></p><figcaption> æ•°æ®å¤„ç†å·¥ä½œæµ</figcaption> </figure><p></p>
</div>
</div>
</div>
</section>
<section id="å®æ—¶æ–‡ä»¶ç›‘æ§" class="level3">
<h3 class="anchored" data-anchor-id="å®æ—¶æ–‡ä»¶ç›‘æ§">å®æ—¶æ–‡ä»¶ç›‘æ§</h3>
<p>åº”ç”¨ä½¿ç”¨ <code>reactivePoll()</code> æ¥ç›‘æ§ Excel æ•°æ®æ–‡ä»¶çš„æ›´æ”¹ï¼š</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å®æ—¶æ•°æ®ç›‘æ§ï¼Œé—´éš”ä¸º 1000ms</span></span>
<span id="cb2-2">weight_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reactivePoll</span>(</span>
<span id="cb2-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">intervalMillis =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>,</span>
<span id="cb2-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">session =</span> session,</span>
<span id="cb2-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">checkFunc =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>() {</span>
<span id="cb2-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ£€æŸ¥æ–‡ä»¶ä¿®æ”¹æ—¶é—´</span></span>
<span id="cb2-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file.exists</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"weight.xlsx"</span>)) {</span>
<span id="cb2-8">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file.info</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"weight.xlsx"</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>mtime</span>
<span id="cb2-9">    } <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb2-10">      <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb2-11">    }</span>
<span id="cb2-12">  },</span>
<span id="cb2-13">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">valueFunc =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>() {</span>
<span id="cb2-14">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è¯»å–å¹¶å¤„ç† Excel æ–‡ä»¶</span></span>
<span id="cb2-15">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file.exists</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"weight.xlsx"</span>)) {</span>
<span id="cb2-16">      data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_excel</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"weight.xlsx"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-17">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb2-18">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Date =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">anytime</span>(Date),</span>
<span id="cb2-19">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">BMI =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb2-20">            Unit <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"kg"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> Weight <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (Height<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb2-21">            Unit <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pound"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> (Weight <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.453592</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> ((Height <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.54</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb2-22">          )</span>
<span id="cb2-23">        )</span>
<span id="cb2-24">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(data)</span>
<span id="cb2-25">    }</span>
<span id="cb2-26">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>())</span>
<span id="cb2-27">  }</span>
<span id="cb2-28">)</span></code></pre></div></div>
</details>
</div>
</section>
<section id="bmi-è®¡ç®—ç®—æ³•" class="level3">
<h3 class="anchored" data-anchor-id="bmi-è®¡ç®—ç®—æ³•">BMI è®¡ç®—ç®—æ³•</h3>
<p>åº”ç”¨å®ç°äº†åŒ…å«å•ä½è½¬æ¢çš„å…¨é¢ BMI è®¡ç®—ï¼š</p>
<section id="bmi-ç±»åˆ«å’Œå¥åº·èŒƒå›´" class="level4">
<h4 class="anchored" data-anchor-id="bmi-ç±»åˆ«å’Œå¥åº·èŒƒå›´">BMI ç±»åˆ«å’Œå¥åº·èŒƒå›´</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>BMI èŒƒå›´</th>
<th>ç±»åˆ«</th>
<th>å¥åº·é£é™©</th>
<th>é¢œè‰²ä»£ç </th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&lt; 18.5</td>
<td>ä½“é‡è¿‡è½»</td>
<td>ä¸­åº¦é£é™©</td>
<td>é»„è‰²</td>
</tr>
<tr class="even">
<td>18.5 - 24.9</td>
<td>ä½“é‡æ­£å¸¸</td>
<td>é£é™©æœ€å°</td>
<td>ç»¿è‰²</td>
</tr>
<tr class="odd">
<td>25.0 - 29.9</td>
<td>è¶…é‡</td>
<td>é£é™©å¢åŠ </td>
<td>æ©™è‰²</td>
</tr>
<tr class="even">
<td>â‰¥ 30.0</td>
<td>è‚¥èƒ–</td>
<td>é«˜é£é™©</td>
<td>çº¢è‰²</td>
</tr>
</tbody>
</table>
</section>
<section id="å•ä½è½¬æ¢ç¤ºä¾‹" class="level4">
<h4 class="anchored" data-anchor-id="å•ä½è½¬æ¢ç¤ºä¾‹">å•ä½è½¬æ¢ç¤ºä¾‹</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å…¬åˆ¶å’Œè‹±åˆ¶å•ä½çš„ BMI è®¡ç®—</span></span>
<span id="cb3-2">calculate_bmi <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(weight, height, unit) {</span>
<span id="cb3-3">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (unit <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"kg"</span>) {</span>
<span id="cb3-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å…¬åˆ¶è®¡ç®—</span></span>
<span id="cb3-5">    bmi <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> weight <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> ((height<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb3-6">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb3-7">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è‹±åˆ¶è®¡ç®—å¹¶è½¬æ¢</span></span>
<span id="cb3-8">    weight_kg <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> weight <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.453592</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç£…è½¬æ¢ä¸ºåƒå…‹</span></span>
<span id="cb3-9">    height_m <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> height <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.54</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è‹±å¯¸è½¬æ¢ä¸ºç±³</span></span>
<span id="cb3-10">    bmi <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> weight_kg <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (height_m<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb3-11">  }</span>
<span id="cb3-12"></span>
<span id="cb3-13">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># BMI åˆ†ç±»</span></span>
<span id="cb3-14">  category <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb3-15">    bmi <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">18.5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"underweight"</span>,</span>
<span id="cb3-16">    bmi <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"normal"</span>,</span>
<span id="cb3-17">    bmi <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"overweight"</span>,</span>
<span id="cb3-18">    <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"obese"</span></span>
<span id="cb3-19">  )</span>
<span id="cb3-20"></span>
<span id="cb3-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bmi =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(bmi, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">category =</span> category))</span>
<span id="cb3-22">}</span></code></pre></div></div>
</details>
</div>
</section>
</section>
</section>
<section id="ai-é›†æˆæ¶æ„" class="level2">
<h2 class="anchored" data-anchor-id="ai-é›†æˆæ¶æ„">AI é›†æˆæ¶æ„</h2>
<section id="å¤šæœåŠ¡å•†-ai-ç³»ç»Ÿ" class="level3">
<h3 class="anchored" data-anchor-id="å¤šæœåŠ¡å•†-ai-ç³»ç»Ÿ">å¤šæœåŠ¡å•† AI ç³»ç»Ÿ</h3>
<p>åº”ç”¨æ”¯æŒå¤šä¸ª AI æœåŠ¡å•†ï¼Œå¹¶å¯åŠ¨æ€åˆ‡æ¢ï¼š</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># AI æœåŠ¡å•†é…ç½®</span></span>
<span id="cb4-2">ai_providers <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb4-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">modelscope =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb4-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">provider_url =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://api-inference.modelscope.cn/v1"</span>,</span>
<span id="cb4-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">models =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zhipuAI/GLM-4.6"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Qwen/Qwen3-Next-80B-A3B-Instruct"</span>)</span>
<span id="cb4-6">  ),</span>
<span id="cb4-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">openrouter =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb4-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">provider_url =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb4-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">models =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-oss-120b:exacto"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"minimax/minimax-m2:free"</span>)</span>
<span id="cb4-10">  ),</span>
<span id="cb4-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Gemini =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb4-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">provider_url =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://generativelanguage.googleapis.com/v1beta/openai/"</span>,</span>
<span id="cb4-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">models =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gemini-2.5-flash"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gemini-2.5-pro"</span>)</span>
<span id="cb4-14">  )</span>
<span id="cb4-15">)</span>
<span id="cb4-16"></span>
<span id="cb4-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ¨æ€æœåŠ¡å•†é€‰æ‹©</span></span>
<span id="cb4-18"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">observeEvent</span>(input<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ai_provider, {</span>
<span id="cb4-19">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_current_provider</span>(input<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ai_provider)</span>
<span id="cb4-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">updateSelectInput</span>(session, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ai_model"</span>,</span>
<span id="cb4-21">                    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">choices =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_provider_models</span>(input<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ai_provider))</span>
<span id="cb4-22">})</span></code></pre></div></div>
</details>
</div>
</section>
<section id="ai-å¥åº·å»ºè®®ç³»ç»Ÿ" class="level3">
<h3 class="anchored" data-anchor-id="ai-å¥åº·å»ºè®®ç³»ç»Ÿ">AI å¥åº·å»ºè®®ç³»ç»Ÿ</h3>
<p>AI æ ¹æ®ä½“é‡è¶‹åŠ¿ç”Ÿæˆä¸ªæ€§åŒ–å¥åº·å»ºè®®ï¼š</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># AI å»ºè®®ç”Ÿæˆ</span></span>
<span id="cb5-2">get_ai_suggestion <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(weight_data, api_key, model, provider) {</span>
<span id="cb5-3">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å‡†å¤‡ AI åˆ†ææ•°æ®</span></span>
<span id="cb5-4">  recent_trend <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">analyze_weight_trend</span>(weight_data)</span>
<span id="cb5-5">  current_bmi <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_current_bmi</span>(weight_data)</span>
<span id="cb5-6"></span>
<span id="cb5-7">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»ºç‰¹å®šè¯­è¨€çš„æç¤ºè¯</span></span>
<span id="cb5-8">  prompt <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (current_language <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zh"</span>) {</span>
<span id="cb5-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"åŸºäºä»¥ä¸‹ä½“é‡æ•°æ®åˆ†æï¼Œè¯·æä¾›ä¸ªæ€§åŒ–çš„å¥åº·å»ºè®®ï¼š"</span>,</span>
<span id="cb5-10">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æœ€è¿‘ä½“é‡è¶‹åŠ¿ï¼š"</span>, recent_trend,</span>
<span id="cb5-11">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å½“å‰BMIï¼š"</span>, current_bmi,</span>
<span id="cb5-12">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"è¯·ç”¨ä¸­æ–‡å›å¤ï¼ŒåŒ…å«å…·ä½“çš„é¥®é£Ÿå’Œè¿åŠ¨å»ºè®®ã€‚"</span>)</span>
<span id="cb5-13">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb5-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Based on the following weight data analysis, please provide personalized health advice:"</span>,</span>
<span id="cb5-15">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Recent weight trend:"</span>, recent_trend,</span>
<span id="cb5-16">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Current BMI:"</span>, current_bmi,</span>
<span id="cb5-17">          <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Please respond in English with specific diet and exercise recommendations."</span>)</span>
<span id="cb5-18">  }</span>
<span id="cb5-19"></span>
<span id="cb5-20">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è°ƒç”¨é€‰å®šæœåŠ¡å•†çš„ API</span></span>
<span id="cb5-21">  response <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ellmer<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat_completion</span>(</span>
<span id="cb5-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model =</span> model,</span>
<span id="cb5-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">messages =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb5-24">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">role =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">content =</span> prompt)</span>
<span id="cb5-25">    ),</span>
<span id="cb5-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">api_key =</span> api_key,</span>
<span id="cb5-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_url =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_provider_url</span>(provider)</span>
<span id="cb5-28">  )</span>
<span id="cb5-29"></span>
<span id="cb5-30">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(response<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>choices[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>message<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>content)</span>
<span id="cb5-31">}</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="ç”¨æˆ·ç•Œé¢è®¾è®¡" class="level2">
<h2 class="anchored" data-anchor-id="ç”¨æˆ·ç•Œé¢è®¾è®¡">ç”¨æˆ·ç•Œé¢è®¾è®¡</h2>
<section id="å¤šæ ‡ç­¾å¯¼èˆªç»“æ„" class="level3">
<h3 class="anchored" data-anchor-id="å¤šæ ‡ç­¾å¯¼èˆªç»“æ„">å¤šæ ‡ç­¾å¯¼èˆªç»“æ„</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŸºäºæ ‡ç­¾é¡µçš„ç•Œé¢ç»„ç»‡</span></span>
<span id="cb6-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mainPanel</span>(</span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tabsetPanel</span>(</span>
<span id="cb6-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tabPanel</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_text</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plot_tab"</span>),</span>
<span id="cb6-5">             <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½“é‡å’Œ BMI å›¾è¡¨</span></span>
<span id="cb6-6">             <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fluidRow</span>(</span>
<span id="cb6-7">               <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">column</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plotlyOutput</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"weight_plot"</span>)),</span>
<span id="cb6-8">               <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">column</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plotlyOutput</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bmi_plot"</span>))</span>
<span id="cb6-9">             )</span>
<span id="cb6-10">    ),</span>
<span id="cb6-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tabPanel</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_text</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ui_tab"</span>),</span>
<span id="cb6-12">             <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŒ…å«è¯­æ³•é«˜äº®çš„ UI ä»£ç æŸ¥çœ‹å™¨</span></span>
<span id="cb6-13">             <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">verbatimTextOutput</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ui_code"</span>)</span>
<span id="cb6-14">    ),</span>
<span id="cb6-15">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tabPanel</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_text</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"server_tab"</span>),</span>
<span id="cb6-16">             <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Server ä»£ç æŸ¥çœ‹å™¨</span></span>
<span id="cb6-17">             <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">verbatimTextOutput</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"server_code"</span>)</span>
<span id="cb6-18">    ),</span>
<span id="cb6-19">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tabPanel</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_text</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data_tab"</span>),</span>
<span id="cb6-20">             <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># äº¤äº’å¼æ•°æ®è¡¨æ ¼</span></span>
<span id="cb6-21">             DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dataTableOutput</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data_table"</span>)</span>
<span id="cb6-22">    )</span>
<span id="cb6-23">  )</span>
<span id="cb6-24">)</span></code></pre></div></div>
</details>
</div>
</section>
<section id="å›½é™…åŒ–ç³»ç»Ÿ" class="level3">
<h3 class="anchored" data-anchor-id="å›½é™…åŒ–ç³»ç»Ÿ">å›½é™…åŒ–ç³»ç»Ÿ</h3>
<p>å®Œå–„çš„åŒè¯­æ”¯æŒï¼Œå…·å¤‡åŠ¨æ€è¯­è¨€åˆ‡æ¢åŠŸèƒ½ï¼š</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è¯­è¨€ç¿»è¯‘ç³»ç»Ÿ</span></span>
<span id="cb7-2">translations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb7-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">en =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb7-4">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">app_title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Weight tracking"</span>,</span>
<span id="cb7-5">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">your_weight =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Your weight:"</span>,</span>
<span id="cb7-6">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">your_bmi =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Your BMI:"</span>,</span>
<span id="cb7-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">get_ai_suggestion =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Get AI Suggestion"</span></span>
<span id="cb7-8">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ... æ›´å¤šç¿»è¯‘</span></span>
<span id="cb7-9">  ),</span>
<span id="cb7-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">zh =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb7-11">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">app_title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä½“é‡è¿½è¸ª"</span>,</span>
<span id="cb7-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">your_weight =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ‚¨çš„ä½“é‡:"</span>,</span>
<span id="cb7-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">your_bmi =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ‚¨çš„BMI:"</span>,</span>
<span id="cb7-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">get_ai_suggestion =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"è·å–AIå»ºè®®"</span></span>
<span id="cb7-15">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ... æ›´å¤šç¿»è¯‘</span></span>
<span id="cb7-16">  )</span>
<span id="cb7-17">)</span>
<span id="cb7-18"></span>
<span id="cb7-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è¯­è¨€åˆ‡æ¢å¤„ç†å™¨</span></span>
<span id="cb7-20"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">observeEvent</span>(input<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>lang_en, {</span>
<span id="cb7-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">current_lang</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span>)</span>
<span id="cb7-22">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_language</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span>)</span>
<span id="cb7-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">updateUI</span>()  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è§¦å‘ UI æ›´æ–°</span></span>
<span id="cb7-24">})</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="æ•°æ®å¯è§†åŒ–" class="level2">
<h2 class="anchored" data-anchor-id="æ•°æ®å¯è§†åŒ–">æ•°æ®å¯è§†åŒ–</h2>
<section id="äº¤äº’å¼-plotly-å›¾è¡¨" class="level3">
<h3 class="anchored" data-anchor-id="äº¤äº’å¼-plotly-å›¾è¡¨">äº¤äº’å¼ Plotly å›¾è¡¨</h3>
<p>åº”ç”¨å…·å¤‡å¸¦å¥åº·æŒ‡æ ‡çš„åŠ¨æ€å›¾è¡¨ï¼š</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¸¦å¥åº·èŒƒå›´çš„ BMI å›¾è¡¨</span></span>
<span id="cb8-2">output<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bmi_plot <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">renderPlotly</span>({</span>
<span id="cb8-3">  data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">weight_data</span>()</span>
<span id="cb8-4"></span>
<span id="cb8-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">plot_ly</span>(data, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>Date, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span>BMI, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'scatter'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mode =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lines+markers'</span>,</span>
<span id="cb8-6">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_text</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chart_bmi_legend"</span>),</span>
<span id="cb8-7">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">line =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'blue'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">width =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>),</span>
<span id="cb8-8">          <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">marker =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-9">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ·»åŠ å¥åº·èŒƒå›´å¸¦</span></span>
<span id="cb8-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_trace</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">18.5</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(data)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mode =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lines'</span>,</span>
<span id="cb8-11">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">line =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'green'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dash =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'dash'</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ç†æƒ³èŒƒå›´èµ·ç‚¹"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">add_trace</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">24.9</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(data)), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mode =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'lines'</span>,</span>
<span id="cb8-13">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">line =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'red'</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dash =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'dash'</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ç†æƒ³èŒƒå›´ç»ˆç‚¹"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb8-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">layout</span>(</span>
<span id="cb8-15">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_text</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chart_bmi_title"</span>),</span>
<span id="cb8-16">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xaxis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ—¥æœŸ"</span>),</span>
<span id="cb8-17">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yaxis =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BMI"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">range =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">35</span>)),</span>
<span id="cb8-18">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">hovermode =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'x unified'</span></span>
<span id="cb8-19">    )</span>
<span id="cb8-20">})</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="éƒ¨ç½²ä¸é…ç½®" class="level2">
<h2 class="anchored" data-anchor-id="éƒ¨ç½²ä¸é…ç½®">éƒ¨ç½²ä¸é…ç½®</h2>
<section id="shinyapps.io-éƒ¨ç½²" class="level3">
<h3 class="anchored" data-anchor-id="shinyapps.io-éƒ¨ç½²">ShinyApps.io éƒ¨ç½²</h3>
<p>åº”ç”¨å·²éƒ¨ç½²å¹¶å¯é€šè¿‡ä»¥ä¸‹é“¾æ¥è®¿é—®ï¼š <strong>https://jcflyingco.shinyapps.io/weight-tracking/</strong></p>
</section>
<section id="url-ä¹¦ç­¾ç³»ç»Ÿ" class="level3">
<h3 class="anchored" data-anchor-id="url-ä¹¦ç­¾ç³»ç»Ÿ">URL ä¹¦ç­¾ç³»ç»Ÿ</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åœ¨ global.R ä¸­å¯ç”¨ URL ä¹¦ç­¾</span></span>
<span id="cb9-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">shinyServer</span>(</span>
<span id="cb9-3">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(input, output, session) {</span>
<span id="cb9-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä¹¦ç­¾é…ç½®</span></span>
<span id="cb9-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">enableBookmarking</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"url"</span>)</span>
<span id="cb9-6"></span>
<span id="cb9-7">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä¿å­˜/æ¢å¤ UI çŠ¶æ€</span></span>
<span id="cb9-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">setBookmarkExclude</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lang_en"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lang_zh"</span>))  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ’é™¤è¯­è¨€æŒ‰é’®</span></span>
<span id="cb9-9">  }</span>
<span id="cb9-10">)</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="æ€§èƒ½ä¼˜åŒ–" class="level2">
<h2 class="anchored" data-anchor-id="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</h2>
<section id="å“åº”å¼ç¼–ç¨‹æœ€ä½³å®è·µ" class="level3">
<h3 class="anchored" data-anchor-id="å“åº”å¼ç¼–ç¨‹æœ€ä½³å®è·µ">å“åº”å¼ç¼–ç¨‹æœ€ä½³å®è·µ</h3>
<p>åº”ç”¨å®ç°äº†é«˜æ•ˆçš„å“åº”å¼ç¼–ç¨‹ï¼š</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é«˜æ•ˆçš„å¸¦ç¼“å­˜æ•°æ®å¤„ç†</span></span>
<span id="cb10-2">processed_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reactive</span>({</span>
<span id="cb10-3">  data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">weight_data</span>()</span>
<span id="cb10-4">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(data) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>)</span>
<span id="cb10-5"></span>
<span id="cb10-6">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä»…è®¡ç®—ä¸€æ¬¡æ´¾ç”ŸæŒ‡æ ‡</span></span>
<span id="cb10-7">  data <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb10-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb10-9">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Weight_Change =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">diff</span>(Weight)),</span>
<span id="cb10-10">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">BMI_Category =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">case_when</span>(</span>
<span id="cb10-11">        BMI <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">18.5</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"underweight"</span>,</span>
<span id="cb10-12">        BMI <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"normal"</span>,</span>
<span id="cb10-13">        BMI <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"overweight"</span>,</span>
<span id="cb10-14">        <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"obese"</span></span>
<span id="cb10-15">      ),</span>
<span id="cb10-16">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Date_Formatted =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">format</span>(Date, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%Y-%m-%d"</span>)</span>
<span id="cb10-17">    )</span>
<span id="cb10-18">})</span>
<span id="cb10-19"></span>
<span id="cb10-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç”¨äºå¤šä¸ªè¾“å‡ºçš„å…±äº«è®¡ç®—</span></span>
<span id="cb10-21">current_stats <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reactive</span>({</span>
<span id="cb10-22">  data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">processed_data</span>()</span>
<span id="cb10-23">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.null</span>(data) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">||</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(data) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>) <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>)</span>
<span id="cb10-24"></span>
<span id="cb10-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb10-26">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">last_weight =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tail</span>(data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Weight, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb10-27">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">last_bmi =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tail</span>(data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>BMI, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),</span>
<span id="cb10-28">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">trend =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">calculate_trend</span>(data<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>Weight),</span>
<span id="cb10-29">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">days_tracked =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(data)</span>
<span id="cb10-30">  )</span>
<span id="cb10-31">})</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="å®‰å…¨ä¸æœ€ä½³å®è·µ" class="level2">
<h2 class="anchored" data-anchor-id="å®‰å…¨ä¸æœ€ä½³å®è·µ">å®‰å…¨ä¸æœ€ä½³å®è·µ</h2>
<section id="api-å¯†é’¥ç®¡ç†" class="level3">
<h3 class="anchored" data-anchor-id="api-å¯†é’¥ç®¡ç†">API å¯†é’¥ç®¡ç†</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å®‰å…¨çš„ API å¯†é’¥å¤„ç†ï¼ˆä»…é™ä¼šè¯å­˜å‚¨ï¼‰</span></span>
<span id="cb11-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">observeEvent</span>(input<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>get_ai_suggestion, {</span>
<span id="cb11-3">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.null</span>(input<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>api_key) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">||</span> input<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>api_key <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>) {</span>
<span id="cb11-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">showNotification</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_text</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"please_provide_api_key"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"error"</span>)</span>
<span id="cb11-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>()</span>
<span id="cb11-6">  }</span>
<span id="cb11-7"></span>
<span id="cb11-8">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ä¼šè¯ä¸­çš„ API å¯†é’¥ï¼ˆä¸æŒä¹…åŒ–ï¼‰</span></span>
<span id="cb11-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">withBusyIndicator</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ­£åœ¨è·å– AI å»ºè®®..."</span>, {</span>
<span id="cb11-10">    suggestion <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_ai_suggestion</span>(</span>
<span id="cb11-11">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">weight_data =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">weight_data</span>(),</span>
<span id="cb11-12">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">api_key =</span> input<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>api_key,</span>
<span id="cb11-13">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model =</span> input<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ai_model,</span>
<span id="cb11-14">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">provider =</span> input<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ai_provider</span>
<span id="cb11-15">    )</span>
<span id="cb11-16"></span>
<span id="cb11-17">    output<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>ai_response <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">renderUI</span>({</span>
<span id="cb11-18">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">div</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">class =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"markdown-content"</span>,</span>
<span id="cb11-19">          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">HTML</span>(markdown<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">renderMarkdown</span>(suggestion))</span>
<span id="cb11-20">      )</span>
<span id="cb11-21">    })</span>
<span id="cb11-22">  })</span>
<span id="cb11-23">})</span></code></pre></div></div>
</details>
</div>
</section>
<section id="é”™è¯¯å¤„ç†" class="level3">
<h3 class="anchored" data-anchor-id="é”™è¯¯å¤„ç†">é”™è¯¯å¤„ç†</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å…¨é¢çš„é”™è¯¯å¤„ç†</span></span>
<span id="cb12-2">get_ai_suggestion <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(...) {</span>
<span id="cb12-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tryCatch</span>({</span>
<span id="cb12-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># API è°ƒç”¨é€»è¾‘</span></span>
<span id="cb12-5">    response <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ellmer<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat_completion</span>(...)</span>
<span id="cb12-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(response<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>choices[[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>message<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>content)</span>
<span id="cb12-7">  }, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(e) {</span>
<span id="cb12-8">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é”™è¯¯æ—¥å¿—è®°å½•å’Œç”¨æˆ·åé¦ˆ</span></span>
<span id="cb12-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">log_error</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI API é”™è¯¯:"</span>, e<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>message))</span>
<span id="cb12-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get_text</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ai_error_check_config"</span>))</span>
<span id="cb12-11">  })</span>
<span id="cb12-12">}</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="ä½¿ç”¨ç¤ºä¾‹ä¸ç”¨æˆ·å·¥ä½œæµ" class="level2">
<h2 class="anchored" data-anchor-id="ä½¿ç”¨ç¤ºä¾‹ä¸ç”¨æˆ·å·¥ä½œæµ">ä½¿ç”¨ç¤ºä¾‹ä¸ç”¨æˆ·å·¥ä½œæµ</h2>
<section id="æ¯æ—¥ä½“é‡è¿½è¸ªå·¥ä½œæµ" class="level3">
<h3 class="anchored" data-anchor-id="æ¯æ—¥ä½“é‡è¿½è¸ªå·¥ä½œæµ">æ¯æ—¥ä½“é‡è¿½è¸ªå·¥ä½œæµ</h3>
<ol type="1">
<li>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åº”ç”¨ç¨‹åºã€‚</li>
<li>æŸ¥çœ‹å½“å‰ä½“é‡è¶‹åŠ¿å›¾å’Œ BMI å›¾è¡¨ã€‚</li>
<li>é€šè¿‡ Excel ä¸Šä¼ æ·»åŠ æ–°çš„ä½“é‡æ•°æ®ã€‚</li>
<li>è·å– AI é©±åŠ¨çš„å¥åº·å»ºè®®ã€‚</li>
<li>ä¸‹è½½æ›´æ–°åçš„æ•°æ®ä¾›ç¦»çº¿ä½¿ç”¨ã€‚</li>
</ol>
</section>
<section id="å¤šè¯­è¨€ä½¿ç”¨" class="level3">
<h3 class="anchored" data-anchor-id="å¤šè¯­è¨€ä½¿ç”¨">å¤šè¯­è¨€ä½¿ç”¨</h3>
<ol type="1">
<li>ä½¿ç”¨å³ä¸Šè§’çš„æŒ‰é’®åœ¨ EN/ä¸­æ–‡ ä¹‹é—´åˆ‡æ¢ã€‚</li>
<li>æ‰€æœ‰ UI å…ƒç´ åŠ¨æ€æ›´æ–°ã€‚</li>
<li>AI æç¤ºè¯é€‚é…æ‰€é€‰è¯­è¨€ã€‚</li>
<li>å›¾è¡¨å’Œæ•°æ®ä¿æŒè¯­å¢ƒä¸€è‡´ã€‚</li>
</ol>
</section>
</section>
<section id="æŠ€æœ¯æˆå°±" class="level2">
<h2 class="anchored" data-anchor-id="æŠ€æœ¯æˆå°±">æŠ€æœ¯æˆå°±</h2>
<section id="æ ¸å¿ƒåˆ›æ–°" class="level3">
<h3 class="anchored" data-anchor-id="æ ¸å¿ƒåˆ›æ–°">æ ¸å¿ƒåˆ›æ–°</h3>
<ol type="1">
<li><strong>å®æ—¶ Excel åŒæ­¥</strong>ï¼šæ•°æ®æ›´æ”¹æ—¶ UI è‡ªåŠ¨æ›´æ–°ã€‚</li>
<li><strong>å¤šæœåŠ¡å•† AI é›†æˆ</strong>ï¼šçµæ´»çš„ AI æœåŠ¡å•†åˆ‡æ¢ã€‚</li>
<li><strong>å®Œå–„çš„å›½é™…åŒ–</strong>ï¼šå®Œæ•´çš„åŒè¯­æ”¯æŒã€‚</li>
<li><strong>ä¸“ä¸š UI è®¾è®¡</strong>ï¼šåŸºäº Bootstrap çš„å“åº”å¼å¸ƒå±€ã€‚</li>
<li><strong>äº¤äº’å¼å¯è§†åŒ–</strong>ï¼šå¯ç¼©æ”¾ã€å¯æ‚¬åœçš„ Plotly å›¾è¡¨ã€‚</li>
</ol>
</section>
<section id="æ€§èƒ½æŒ‡æ ‡" class="level3">
<h3 class="anchored" data-anchor-id="æ€§èƒ½æŒ‡æ ‡">æ€§èƒ½æŒ‡æ ‡</h3>
<ul>
<li><strong>æ•°æ®åˆ·æ–°</strong>ï¼š1 ç§’è½®è¯¢é—´éš”ã€‚</li>
<li><strong>å›¾è¡¨æ¸²æŸ“</strong>ï¼šå…¸å‹æ•°æ®é›†æ¸²æŸ“æ—¶é—´ &lt; 100msã€‚</li>
<li><strong>API å“åº”</strong>ï¼šAI å»ºè®®å“åº”æ—¶é—´ä¸º 2-5 ç§’ã€‚</li>
<li><strong>å†…å­˜å ç”¨</strong>ï¼š1000+ æ¡è®°å½•ä¸‹å†…å­˜å ç”¨ &lt; 50MBã€‚</li>
</ul>
</section>
</section>
<section id="æœªæ¥å¢å¼ºæ–¹å‘" class="level2">
<h2 class="anchored" data-anchor-id="æœªæ¥å¢å¼ºæ–¹å‘">æœªæ¥å¢å¼ºæ–¹å‘</h2>
<p>ä¸‹ä¸€ç‰ˆæœ¬çš„æ½œåœ¨æ”¹è¿›ç‚¹ï¼š</p>
<ol type="1">
<li><strong>æ•°æ®åº“é›†æˆ</strong>ï¼šå°† Excel æ›¿æ¢ä¸º SQLite/PostgreSQLã€‚</li>
<li><strong>ç”¨æˆ·è®¤è¯</strong>ï¼šæ”¯æŒå¤šç”¨æˆ·ï¼Œå®ç°ä¸ªäººæ•°æ®éš”ç¦»ã€‚</li>
<li><strong>ç§»åŠ¨ç«¯ä¼˜åŒ–</strong>ï¼šä¸ºç§»åŠ¨è®¾å¤‡æä¾› PWA ç‰¹æ€§ã€‚</li>
<li><strong>é«˜çº§åˆ†æ</strong>ï¼šä½¿ç”¨æ—¶é—´åºåˆ—æ„å»ºä½“é‡é¢„æµ‹æ¨¡å‹ã€‚</li>
<li><strong>é›†æˆ API</strong>ï¼šè¿æ¥å¥èº«è¿½è¸ªå™¨å’Œå¥åº·åº”ç”¨ã€‚</li>
</ol>
</section>
<section id="ç»“è®º" class="level2">
<h2 class="anchored" data-anchor-id="ç»“è®º">ç»“è®º</h2>
<p>è¿™æ¬¾ä½“é‡è¿½è¸ªåº”ç”¨å±•ç¤ºäº†å°† R Shiny çš„å“åº”å¼ç¼–ç¨‹ä¸ç°ä»£ AI æŠ€æœ¯ç›¸ç»“åˆçš„å¼ºå¤§åŠ›é‡ã€‚é¡¹ç›®å±•ç¤ºäº†ï¼š</p>
<ul>
<li><strong>ç²¾ç»†çš„æ•°æ®ç®¡ç†</strong>ï¼šå®æ—¶æ–‡ä»¶ç›‘æ§å’Œå“åº”å¼æ›´æ–°ã€‚</li>
<li><strong>AI é›†æˆ</strong>ï¼šé›†æˆå¤šæœåŠ¡å•†å¹¶æä¾›ä¸ªæ€§åŒ–å¥åº·å»ºè®®ã€‚</li>
<li><strong>å›½é™…åŒ–</strong>ï¼šå®Œæ•´çš„åŒè¯­å®ç°ã€‚</li>
<li><strong>ä¸“ä¸šçš„ UI/UX</strong>ï¼šç°ä»£å“åº”å¼è®¾è®¡é…åˆäº¤äº’å¼å¯è§†åŒ–ã€‚</li>
</ul>
<p>æ— è®ºæ‚¨æ˜¯å…³æ³¨å¥åº·ç›‘æµ‹ã€æ•°æ®å¯è§†åŒ–ï¼Œè¿˜æ˜¯ AI é›†æˆï¼Œæœ¬é¡¹ç›®éƒ½ä¸ºæ‚¨æä¾›äº†ä¸€ä¸ªä½¿ç”¨ R Shiny æ„å»ºç”Ÿäº§çº§ Web åº”ç”¨çš„ç»ä½³èŒƒä¾‹ã€‚</p>
<hr>


<!-- -->

</section>
</section>

 ]]></description>
  <category>AI</category>
  <category>API</category>
  <category>tutorial</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/weight-tracking/</guid>
  <pubDate>Tue, 04 Nov 2025 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/weight-tracking/images/0.png" medium="image" type="image/png" height="84" width="144"/>
</item>
<item>
  <title>ç¾é…’è¯„é‰´Agentç³»ç»Ÿï¼šåŸºäºé…’è¯„å®¶RAG</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/whisky-tasting/</link>
  <description><![CDATA[ 





<section id="é¡¹ç›®æ¦‚è§ˆ" class="level1">
<h1>é¡¹ç›®æ¦‚è§ˆ</h1>
<p>å¨å£«å¿Œå“é‰´åº”ç”¨æ˜¯ä¸€æ¬¾å…ˆè¿›çš„ AI é©±åŠ¨ Web åº”ç”¨ç¨‹åºï¼Œå¯ç”Ÿæˆè¯¦ç»†ã€ä¸“ä¸šçš„å¨å£«å¿Œå“é‰´ç¬”è®°å’Œå»ºè®®ã€‚è¯¥ç³»ç»Ÿçš„ç‰¹åˆ«ä¹‹å¤„åœ¨äºå…¶é‡‡ç”¨äº†å¤š Agent æ¶æ„ï¼Œå¹¶é…å¤‡äº†ä¸“é—¨çš„ AI äººæ ¼ï¼Œæ¯ä¸ªäººæ ¼éƒ½ç»è¿‡äº†ä¸åŒå¨å£«å¿Œè¯„è®ºæºå’Œè¯­è¨€é£æ ¼çš„è®­ç»ƒã€‚</p>
<p>åœ¨çº¿æ¼”ç¤º (Modelscope): <a href="https://modelscope.cn/studios/ttflying/whisky_AI_tasting">https://modelscope.cn/studios/ttflying/whisky_AI_tasting</a></p>
<p>åœ¨çº¿æ¼”ç¤º (Shinyapp): <a href="https://jcflyingco.shinyapps.io/ai-whisky-tasting">https://jcflyingco.shinyapps.io/ai-whisky-tasting/</a></p>
<p>Github: <a href="https://github.com/JCwinning/whisky_tasting">https://github.com/JCwinning/whisky_tasting</a></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true" href="">AI å“é‰´è¯</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false" href="">AI æ¨è</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/whisky-tasting/images/0.png" class="img-fluid" style="width:100.0%"></p>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<p><img src="https://jcwinning.github.io/LandingPage/posts/whisky-tasting/images/1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
</div>
<section id="æ ¸å¿ƒæ¶æ„" class="level2">
<h2 class="anchored" data-anchor-id="æ ¸å¿ƒæ¶æ„">æ ¸å¿ƒæ¶æ„</h2>
<section id="å¤š-agent-ai-ç³»ç»Ÿ" class="level3">
<h3 class="anchored" data-anchor-id="å¤š-agent-ai-ç³»ç»Ÿ">å¤š Agent AI ç³»ç»Ÿ</h3>
<p>è¯¥åº”ç”¨åŒ…å«ä¸‰ä¸ªä¸“é—¨çš„ AI Agentï¼Œæ¯ä¸ª Agent éƒ½æœ‰ç‹¬ç‰¹çš„ç‰¹å¾å’Œæ•°æ®æºï¼š</p>
<ol type="1">
<li><strong>DrunkTony (dt)</strong> - ä¸­æ–‡ Agentï¼Œä¸“æ³¨äºä¸­æ–‡å¨å£«å¿Œè¯„è®ºã€‚</li>
<li><strong>WhiskyFunny (wf)</strong> - è‹±æ–‡ Agentï¼Œæ•°æ®æºè‡ª whiskyfun.comã€‚</li>
<li><strong>WhiskyNotebook (wn)</strong> - è‹±æ–‡ Agentï¼Œæ•°æ®æºè‡ª whiskynotes.beã€‚</li>
</ol>
</section>
<section id="æŠ€æœ¯æ ˆ" class="level3">
<h3 class="anchored" data-anchor-id="æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>ä¸»è¦è¯­è¨€</strong>: Python 3.13+</li>
<li><strong>Web æ¡†æ¶</strong>: Streamlit (ä¸»é€‰) + Shiny for Python (å¤‡é€‰)</li>
<li><strong>æ•°æ®åº“</strong>: DuckDB (376MBï¼Œé’ˆå¯¹å‘é‡æ“ä½œè¿›è¡Œäº†ä¼˜åŒ–)</li>
<li><strong>AI/ML</strong>: OpenAI API, å‘é‡åµŒå…¥ (Vector embeddings), RAG ç³»ç»Ÿ</li>
<li><strong>æ•°æ®æº</strong>: ä½¿ç”¨ BeautifulSoup4 è¿›è¡Œç½‘é¡µæŠ“å–</li>
</ul>
</section>
</section>
<section id="æ•°æ®åº“æ¶æ„" class="level2">
<h2 class="anchored" data-anchor-id="æ•°æ®åº“æ¶æ„">æ•°æ®åº“æ¶æ„</h2>
<section id="æ•°æ®æ¨¡å¼ä¸æ¥æº" class="level3">
<h3 class="anchored" data-anchor-id="æ•°æ®æ¨¡å¼ä¸æ¥æº">æ•°æ®æ¨¡å¼ä¸æ¥æº</h3>
<p>ç³»ç»Ÿä½¿ç”¨ DuckDB ä½œä¸ºä¸»æ•°æ®åº“ï¼Œå› å…¶åœ¨å‘é‡æ“ä½œæ–¹é¢è¡¨ç°å“è¶Šï¼š</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- æ•°æ®åº“ç»“æ„</span></span>
<span id="cb1-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">TABLE</span> drinktony_embed (</span>
<span id="cb1-3">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">full</span> TEXT,</span>
<span id="cb1-4">    bottle_embedding <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">FLOAT</span>[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span>]  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- 1024 ç»´å‘é‡</span></span>
<span id="cb1-5">);</span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">TABLE</span> whiskyfun_embed (</span>
<span id="cb1-8">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">full</span> TEXT,</span>
<span id="cb1-9">    bottle_embedding <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">FLOAT</span>[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span>]</span>
<span id="cb1-10">);</span>
<span id="cb1-11"></span>
<span id="cb1-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">TABLE</span> whiskynote_embed (</span>
<span id="cb1-13">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">full</span> TEXT,</span>
<span id="cb1-14">    bottle_embedding <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">FLOAT</span>[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span>]</span>
<span id="cb1-15">);</span></code></pre></div></div>
</section>
<section id="æ•°æ®é‡‡é›†æµç¨‹" class="level3">
<h3 class="anchored" data-anchor-id="æ•°æ®é‡‡é›†æµç¨‹">æ•°æ®é‡‡é›†æµç¨‹</h3>
<div id="4d2650a3" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># get_data_dt.py ä¸­çš„ç½‘é¡µæŠ“å–ç¤ºä¾‹</span></span>
<span id="cb2-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> scrape_drinktony_reviews():</span>
<span id="cb2-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ä» drinktony.netlify.app æŠ“å–ä¸­æ–‡å¨å£«å¿Œè¯„è®º"""</span></span>
<span id="cb2-4">    url <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://drinktony.netlify.app/"</span></span>
<span id="cb2-5">    response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> requests.get(url)</span>
<span id="cb2-6">    soup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> BeautifulSoup(response.content, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"html.parser"</span>)</span>
<span id="cb2-7"></span>
<span id="cb2-8">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æŸ¥æ‰¾æ‰€æœ‰è¯„è®ºé“¾æ¥</span></span>
<span id="cb2-9">    post_links <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [urljoin(url, a.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"href"</span>))</span>
<span id="cb2-10">                 <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> a <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> soup.select(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"a.quarto-grid-link"</span>)]</span>
<span id="cb2-11"></span>
<span id="cb2-12">    all_reviews <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb2-13">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> post_url <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> post_links:</span>
<span id="cb2-14">        response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> requests.get(post_url)</span>
<span id="cb2-15">        soup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> BeautifulSoup(response.content, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"html.parser"</span>)</span>
<span id="cb2-16"></span>
<span id="cb2-17">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æå–è¯„è®ºç« èŠ‚</span></span>
<span id="cb2-18">        review_sections <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> soup.select(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"section.level1"</span>)</span>
<span id="cb2-19">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> section <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> review_sections:</span>
<span id="cb2-20">            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è§£æå¨å£«å¿Œåç§°å’Œè¯„è®ºå†…å®¹</span></span>
<span id="cb2-21">            whisky_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> extract_whisky_name(section)</span>
<span id="cb2-22">            review_text <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> extract_review_text(section)</span>
<span id="cb2-23">            all_reviews.append({</span>
<span id="cb2-24">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'whisky'</span>: whisky_name,</span>
<span id="cb2-25">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'review'</span>: review_text</span>
<span id="cb2-26">            })</span>
<span id="cb2-27"></span>
<span id="cb2-28">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> all_reviews</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="aiml-å®ç°" class="level2">
<h2 class="anchored" data-anchor-id="aiml-å®ç°">AI/ML å®ç°</h2>
<section id="å‘é‡åµŒå…¥æŠ€æœ¯" class="level3">
<h3 class="anchored" data-anchor-id="å‘é‡åµŒå…¥æŠ€æœ¯">å‘é‡åµŒå…¥æŠ€æœ¯</h3>
<p>åº”ç”¨ä½¿ç”¨å°–ç«¯çš„åµŒå…¥æŠ€æœ¯å°†æ–‡æœ¬è½¬æ¢ä¸ºé«˜ç»´å‘é‡ï¼Œä»¥ä¾¿è¿›è¡Œè¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢ã€‚</p>
<section id="åµŒå…¥æ¨¡å‹è¯¦æƒ…" class="level4">
<h4 class="anchored" data-anchor-id="åµŒå…¥æ¨¡å‹è¯¦æƒ…">åµŒå…¥æ¨¡å‹è¯¦æƒ…</h4>
<p><strong>æ¨¡å‹</strong>: BAAI/bge-large-zh-v1.5 - <strong>ç»´åº¦</strong>: 1024 - <strong>æœåŠ¡å•†</strong>: SiliconFlow API - <strong>ç”¨é€”</strong>: è·¨è¯­è¨€æ–‡æœ¬ç†è§£ï¼ˆåœ¨ä¸­è‹±æ–‡æ–¹é¢è¡¨ç°å‡å¾ˆå‡ºè‰²ï¼‰</p>
</section>
<section id="ä¸ºä»€ä¹ˆé€‰æ‹©-bge-large-zh" class="level4">
<h4 class="anchored" data-anchor-id="ä¸ºä»€ä¹ˆé€‰æ‹©-bge-large-zh">ä¸ºä»€ä¹ˆé€‰æ‹© BGE-Large-ZH?</h4>
<ol type="1">
<li><strong>è·¨è¯­è¨€èƒ½åŠ›</strong>: åœ¨ç†è§£ä¸­è‹±æ–‡å¨å£«å¿Œä¸“ä¸šæœ¯è¯­æ–¹é¢è¡¨ç°ä¼˜å¼‚ã€‚</li>
<li><strong>é«˜æ€§èƒ½</strong>: ä¸é€šç”¨åµŒå…¥æ¨¡å‹ç›¸æ¯”ï¼Œå…·å¤‡æ›´å‡ºè‰²çš„è¯­ä¹‰ç†è§£èƒ½åŠ›ã€‚</li>
<li><strong>é«˜æ•ˆå°ºå¯¸</strong>: 1024 ç»´åº¦åœ¨æ€§èƒ½å’Œå­˜å‚¨æ•ˆç‡ä¹‹é—´è¾¾åˆ°äº†å¹³è¡¡ã€‚</li>
<li><strong>API è®¿é—®</strong>: é€šè¿‡ SiliconFlow æä¾›ç¨³å®šçš„æœåŠ¡ã€‚</li>
</ol>
</section>
<section id="åµŒå…¥æµç¨‹" class="level4">
<h4 class="anchored" data-anchor-id="åµŒå…¥æµç¨‹">åµŒå…¥æµç¨‹</h4>
<p>è¯¥åº”ç”¨ä½¿ç”¨ BGE-Large-ZH-v1.5 æ¨¡å‹ç”ŸæˆåµŒå…¥å‘é‡ï¼š</p>
<div id="bae349e0" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_embedding(text: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, api_key: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>):</span>
<span id="cb3-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ä½¿ç”¨ SiliconFlow API ç”Ÿæˆæ–‡æœ¬åµŒå…¥"""</span></span>
<span id="cb3-3">    client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb3-4">        api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>api_key,</span>
<span id="cb3-5">        base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://api.siliconflow.cn/v1"</span></span>
<span id="cb3-6">    )</span>
<span id="cb3-7">    response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.embeddings.create(</span>
<span id="cb3-8">        model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BAAI/bge-large-zh-v1.5"</span>,</span>
<span id="cb3-9">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[text]</span>
<span id="cb3-10">    )</span>
<span id="cb3-11">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> np.array(response.data[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].embedding)</span>
<span id="cb3-12"></span>
<span id="cb3-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> cosine_similarity(v1, v2):</span>
<span id="cb3-14">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""è®¡ç®—ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦"""</span></span>
<span id="cb3-15">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> v1 <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">is</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">or</span> v2 <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">is</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>:</span>
<span id="cb3-16">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb3-17">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> np.dot(v1, v2) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (np.linalg.norm(v1) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> np.linalg.norm(v2))</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="rag-ç³»ç»Ÿæ¶æ„" class="level3">
<h3 class="anchored" data-anchor-id="rag-ç³»ç»Ÿæ¶æ„">RAG ç³»ç»Ÿæ¶æ„</h3>
<p>æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG) ç³»ç»Ÿæ˜¯æ­¤åº”ç”¨çš„æ ¸å¿ƒåˆ›æ–°ã€‚è®©æˆ‘ä»¬è¯¦ç»†æ¢è®¨å…¶ç»„ä»¶ã€‚</p>
</section>
<section id="rag-å·¥ä½œæµ" class="level3">
<h3 class="anchored" data-anchor-id="rag-å·¥ä½œæµ">RAG å·¥ä½œæµ</h3>
<p>æ£€ç´¢å¢å¼ºç”Ÿæˆè¿‡ç¨‹éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š</p>
<pre class="mermaid"><code>%%| fig-cap: "å¨å£«å¿Œå“é‰´çš„ RAG å·¥ä½œæµ"
flowchart TD
    A[ç”¨æˆ·è¾“å…¥&lt;br/&gt;å¨å£«å¿Œåç§°] --&gt; B[ç”ŸæˆåµŒå…¥å‘é‡]
    B --&gt; C[DuckDB ä¸­çš„&lt;br/&gt;å‘é‡ç›¸ä¼¼åº¦æœç´¢]
    C --&gt; D[æ£€ç´¢å‰ 10 æ¡&lt;br/&gt;ç›¸ä¼¼è¯„è®º]
    D --&gt; E[ä¸º LLM æ ¼å¼åŒ–ä¸Šä¸‹æ–‡]
    E --&gt; F[ä¸» LLM&lt;br/&gt;ç”Ÿæˆå“é‰´ç¬”è®°]
    F --&gt; G[å‰¯ LLM&lt;br/&gt;ç”Ÿæˆæ¨èå»ºè®®]
    G --&gt; H[æ ¼å¼åŒ–å¹¶&lt;br/&gt;æ˜¾ç¤ºç»“æœ]

    C --&gt; I[æ•°æ®åº“]
    I --&gt; J[drinktony_embed&lt;br/&gt;1200 æ¡ä¸­æ–‡è¯„è®º]
    I --&gt; K[whiskyfun_embed&lt;br/&gt;2 ä¸‡æ¡è‹±æ–‡è¯„è®º]
    I --&gt; L[whiskynote_embed&lt;br/&gt;5000 æ¡è‹±æ–‡è¯„è®º]</code></pre>
</section>
<section id="ç›¸ä¼¼åº¦æœç´¢å®ç°" class="level3">
<h3 class="anchored" data-anchor-id="ç›¸ä¼¼åº¦æœç´¢å®ç°">ç›¸ä¼¼åº¦æœç´¢å®ç°</h3>
<div id="de066a17" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> find_similar_chunks(</span>
<span id="cb5-2">    query_embedding,</span>
<span id="cb5-3">    db_path,</span>
<span id="cb5-4">    table_name,</span>
<span id="cb5-5">    text_col,</span>
<span id="cb5-6">    embedding_col,</span>
<span id="cb5-7">    top_n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,</span>
<span id="cb5-8">):</span>
<span id="cb5-9">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦åœ¨æ•°æ®åº“ä¸­æŸ¥æ‰¾æœ€ç›¸ä¼¼çš„æ–‡æœ¬å—"""</span></span>
<span id="cb5-10">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb5-11">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> duckdb.<span class="ex" style="color: null;
background-color: null;
font-style: inherit;">connect</span>(database<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>db_path, read_only<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> con:</span>
<span id="cb5-12">            df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> con.execute(</span>
<span id="cb5-13">                <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'SELECT "</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>text_col<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">", "</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>embedding_col<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">" FROM "</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>table_name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"'</span></span>
<span id="cb5-14">            ).fetchdf()</span>
<span id="cb5-15"></span>
<span id="cb5-16">            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è®¡ç®—ç›¸ä¼¼åº¦</span></span>
<span id="cb5-17">            similarities <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb5-18">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> _, row <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> df.iterrows():</span>
<span id="cb5-19">                text <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> row[text_col]</span>
<span id="cb5-20">                embedding <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.array(row[embedding_col])</span>
<span id="cb5-21">                similarity <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> cosine_similarity(query_embedding, embedding)</span>
<span id="cb5-22">                similarities.append((text, similarity))</span>
<span id="cb5-23"></span>
<span id="cb5-24">            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æŒ‰ç›¸ä¼¼åº¦æ’åºå¹¶è¿”å›å‰ N æ¡</span></span>
<span id="cb5-25">            similarities.sort(key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">lambda</span> x: x[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], reverse<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb5-26">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> similarities[:top_n]</span>
<span id="cb5-27"></span>
<span id="cb5-28">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb5-29">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"æœç´¢ç›¸ä¼¼å—æ—¶å‡ºé”™: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>e<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-30">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> []</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="ä¸“é—¨-agent-çš„å®ç°" class="level2">
<h2 class="anchored" data-anchor-id="ä¸“é—¨-agent-çš„å®ç°">ä¸“é—¨ Agent çš„å®ç°</h2>
<section id="drunktony-ä¸­æ–‡-agent" class="level3">
<h3 class="anchored" data-anchor-id="drunktony-ä¸­æ–‡-agent">DrunkTony (ä¸­æ–‡ Agent)</h3>
<div id="b1e12845" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> run_conversation(query, api_key, model):</span>
<span id="cb6-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ç”Ÿæˆä¸­æ–‡æ ¼å¼çš„å¨å£«å¿Œå“é‰´ç¬”è®°"""</span></span>
<span id="cb6-3"></span>
<span id="cb6-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¬¬ 1 æ­¥ï¼šç”ŸæˆåµŒå…¥å¹¶æŸ¥æ‰¾ç›¸ä¼¼è¯„è®º</span></span>
<span id="cb6-5">    query_embedding <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_embedding(query, api_key)</span>
<span id="cb6-6">    similar_reviews <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> find_similar_chunks(</span>
<span id="cb6-7">        query_embedding<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>query_embedding,</span>
<span id="cb6-8">        db_path<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/whisky_database.duckdb"</span>,</span>
<span id="cb6-9">        table_name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"drinktony_embed"</span>,</span>
<span id="cb6-10">        text_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"full"</span>,</span>
<span id="cb6-11">        embedding_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottle_embedding"</span></span>
<span id="cb6-12">    )</span>
<span id="cb6-13"></span>
<span id="cb6-14">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¬¬ 2 æ­¥ï¼šä¸º LLM å‡†å¤‡ä¸Šä¸‹æ–‡</span></span>
<span id="cb6-15">    context <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">---</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>.join([review[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> review <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> similar_reviews])</span>
<span id="cb6-16"></span>
<span id="cb6-17">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¬¬ 3 æ­¥ï¼šç”Ÿæˆå“é‰´ç¬”è®°</span></span>
<span id="cb6-18">    prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"""ä½œä¸ºå¨å£«å¿Œä¸“å®¶ï¼ŒåŸºäºä»¥ä¸‹å¨å£«å¿Œå“é‰´ç¬”è®°ï¼Œä¸º"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>query<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"ç”Ÿæˆä¸“ä¸šçš„å“é‰´æŠ¥å‘Šï¼š</span></span>
<span id="cb6-19"></span>
<span id="cb6-20"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">å‚è€ƒå“é‰´ç¬”è®°ï¼š</span></span>
<span id="cb6-21"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>context<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb6-22"></span>
<span id="cb6-23"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">è¯·æŒ‰ä»¥ä¸‹æ ¼å¼è¾“å‡ºï¼š</span></span>
<span id="cb6-24"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>query<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb6-25"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">é—»é¦™: [è¯¦ç»†æè¿°]</span></span>
<span id="cb6-26"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">å“å‘³: [è¯¦ç»†æè¿°]</span></span>
<span id="cb6-27"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">æ‰“åˆ†: [90-100åˆ†]</span></span>
<span id="cb6-28"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"""</span></span>
<span id="cb6-29"></span>
<span id="cb6-30">    response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> llm_client.chat.completions.create(</span>
<span id="cb6-31">        model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model,</span>
<span id="cb6-32">        messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb6-33">            {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"system"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„å¨å£«å¿Œå“é‰´å¸ˆï¼Œæ“…é•¿ç”Ÿæˆè¯¦ç»†å‡†ç¡®çš„å“é‰´ç¬”è®°ã€‚"</span>},</span>
<span id="cb6-34">            {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: prompt}</span>
<span id="cb6-35">        ],</span>
<span id="cb6-36">        temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>,</span>
<span id="cb6-37">        max_tokens<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span></span>
<span id="cb6-38">    )</span>
<span id="cb6-39"></span>
<span id="cb6-40">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content</span></code></pre></div></div>
</details>
</div>
</section>
<section id="whiskyfunny-è‹±æ–‡-agent" class="level3">
<h3 class="anchored" data-anchor-id="whiskyfunny-è‹±æ–‡-agent">WhiskyFunny (è‹±æ–‡ Agent)</h3>
<div id="7891c3fb" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> run_conversation(query, api_key, model):</span>
<span id="cb7-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ç”Ÿæˆè‹±æ–‡æ ¼å¼çš„å¨å£«å¿Œå“é‰´ç¬”è®°"""</span></span>
<span id="cb7-3"></span>
<span id="cb7-4">    query_embedding <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_embedding(query, api_key)</span>
<span id="cb7-5">    similar_reviews <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> find_similar_chunks(</span>
<span id="cb7-6">        query_embedding<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>query_embedding,</span>
<span id="cb7-7">        db_path<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/whisky_database.duckdb"</span>,</span>
<span id="cb7-8">        table_name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"whiskyfun_embed"</span>,</span>
<span id="cb7-9">        text_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"full"</span>,</span>
<span id="cb7-10">        embedding_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bottle_embedding"</span></span>
<span id="cb7-11">    )</span>
<span id="cb7-12"></span>
<span id="cb7-13">    context <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">---</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>.join([review[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> review <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> similar_reviews])</span>
<span id="cb7-14"></span>
<span id="cb7-15">    prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"""As a whisky expert, generate professional tasting notes for "</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>query<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">" based on these reference reviews:</span></span>
<span id="cb7-16"></span>
<span id="cb7-17"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Reference reviews:</span></span>
<span id="cb7-18"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>context<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb7-19"></span>
<span id="cb7-20"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Please output in this format:</span></span>
<span id="cb7-21"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Colour: [detailed description]</span></span>
<span id="cb7-22"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Nose: [detailed aroma description]</span></span>
<span id="cb7-23"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Mouth: [detailed taste description]</span></span>
<span id="cb7-24"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Finish: [detailed finish description]</span></span>
<span id="cb7-25"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Comments: [overall impression]</span></span>
<span id="cb7-26"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">SGP: xxx - xx points</span></span>
<span id="cb7-27"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"""</span></span>
<span id="cb7-28"></span>
<span id="cb7-29">    response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> llm_client.chat.completions.create(</span>
<span id="cb7-30">        model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model,</span>
<span id="cb7-31">        messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb7-32">            {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"system"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"You are a professional whisky taster specializing in detailed sensory analysis."</span>},</span>
<span id="cb7-33">            {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: prompt}</span>
<span id="cb7-34">        ],</span>
<span id="cb7-35">        temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>,</span>
<span id="cb7-36">        max_tokens<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1200</span></span>
<span id="cb7-37">    )</span>
<span id="cb7-38"></span>
<span id="cb7-39">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="æ¨èå¼•æ“" class="level2">
<h2 class="anchored" data-anchor-id="æ¨èå¼•æ“">æ¨èå¼•æ“</h2>
<section id="åŒ-llm-æ¨èç³»ç»Ÿ" class="level3">
<h3 class="anchored" data-anchor-id="åŒ-llm-æ¨èç³»ç»Ÿ">åŒ LLM æ¨èç³»ç»Ÿ</h3>
<p>åº”ç”¨ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„ LLM æ¥ç”Ÿæˆå¨å£«å¿Œæ¨èå»ºè®®ï¼š</p>
<div id="9431b39f" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> recommend_whiskies_by_profile(tasting_notes, api_key, model):</span>
<span id="cb8-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åŸºäºå“é‰´ç‰¹å¾ç”Ÿæˆå¨å£«å¿Œæ¨è"""</span></span>
<span id="cb8-3"></span>
<span id="cb8-4">    prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"""Based on these tasting notes, recommend 2 similar whiskies that the user might enjoy:</span></span>
<span id="cb8-5"></span>
<span id="cb8-6"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>Tasting Notes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:}</span></span>
<span id="cb8-7"><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>tasting_notes<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb8-8"></span>
<span id="cb8-9"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Please provide:</span></span>
<span id="cb8-10"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">1. Whisky name with brief description</span></span>
<span id="cb8-11"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">2. Why it matches the user's preference</span></span>
<span id="cb8-12"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">3. Price range and availability</span></span>
<span id="cb8-13"></span>
<span id="cb8-14"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">Format each recommendation as:</span></span>
<span id="cb8-15"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">**Recommendation [1/2]:** [Whisky Name]</span></span>
<span id="cb8-16"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">**Why it matches:** [detailed reasoning]</span></span>
<span id="cb8-17"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">**Details:** [price, availability, tasting profile]</span></span>
<span id="cb8-18"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"""</span></span>
<span id="cb8-19"></span>
<span id="cb8-20">    response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> recommendation_client.chat.completions.create(</span>
<span id="cb8-21">        model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ¨èä½¿ç”¨ä¸åŒçš„æ¨¡å‹</span></span>
<span id="cb8-22">        messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb8-23">            {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"system"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"You are a whisky recommendation expert with deep knowledge of global whisky brands and profiles."</span>},</span>
<span id="cb8-24">            {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: prompt}</span>
<span id="cb8-25">        ],</span>
<span id="cb8-26">        temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>,</span>
<span id="cb8-27">        max_tokens<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">800</span></span>
<span id="cb8-28">    )</span>
<span id="cb8-29"></span>
<span id="cb8-30">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="ç”¨æˆ·ç•Œé¢è®¾è®¡" class="level2">
<h2 class="anchored" data-anchor-id="ç”¨æˆ·ç•Œé¢è®¾è®¡">ç”¨æˆ·ç•Œé¢è®¾è®¡</h2>
<section id="streamlit-å®ç°" class="level3">
<h3 class="anchored" data-anchor-id="streamlit-å®ç°">Streamlit å®ç°</h3>
<div id="bc60f3bb" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä¸»åº”ç”¨ç¨‹åºç•Œé¢</span></span>
<span id="cb9-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> main():</span>
<span id="cb9-3">    st.set_page_config(</span>
<span id="cb9-4">        page_title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI å¨å£«å¿Œå“é‰´ç³»ç»Ÿ"</span>,</span>
<span id="cb9-5">        page_icon<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸ¥ƒ"</span>,</span>
<span id="cb9-6">        layout<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"wide"</span></span>
<span id="cb9-7">    )</span>
<span id="cb9-8"></span>
<span id="cb9-9">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä¾§è¾¹æ  Agent é€‰æ‹©</span></span>
<span id="cb9-10">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> st.sidebar:</span>
<span id="cb9-11">        st.header(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸ¥ƒ å¨å£«å¿Œ AI å“é‰´"</span>)</span>
<span id="cb9-12"></span>
<span id="cb9-13">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Agent é€‰æ‹©</span></span>
<span id="cb9-14">        agent_type <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.selectbox(</span>
<span id="cb9-15">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"é€‰æ‹©å“é‰´ Agent:"</span>,</span>
<span id="cb9-16">            [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DrunkTony (ä¸­æ–‡)"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WhiskyFunny (English)"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WhiskyNotebook (English)"</span>],</span>
<span id="cb9-17">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">help</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ¯ä¸ª Agent éƒ½æœ‰ä¸åŒçš„æ€§æ ¼å’Œæ•°æ®æº"</span></span>
<span id="cb9-18">        )</span>
<span id="cb9-19"></span>
<span id="cb9-20">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ¨¡å‹é€‰æ‹©</span></span>
<span id="cb9-21">        model_options <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_model_options(agent_type)</span>
<span id="cb9-22">        selected_model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.selectbox(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ¨¡å‹:"</span>, model_options)</span>
<span id="cb9-23"></span>
<span id="cb9-24">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä¸»å†…å®¹åŒºåŸŸ</span></span>
<span id="cb9-25">    st.header(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä¸“ä¸šçš„å¨å£«å¿Œå“é‰´ç¬”è®°ç”Ÿæˆå™¨"</span>)</span>
<span id="cb9-26"></span>
<span id="cb9-27">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è¾“å…¥éƒ¨åˆ†</span></span>
<span id="cb9-28">    col1, col2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.columns([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb9-29">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> col1:</span>
<span id="cb9-30">        whisky_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.text_input(</span>
<span id="cb9-31">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"è¾“å…¥å¨å£«å¿Œåç§°:"</span>,</span>
<span id="cb9-32">            placeholder<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä¾‹å¦‚: Macallan 18 Year Old"</span>,</span>
<span id="cb9-33">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">help</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"è¾“å…¥å®Œæ•´çš„å¨å£«å¿Œåç§°ï¼ŒåŒ…æ‹¬å¹´ä»½å’Œæ¡¶å‹"</span></span>
<span id="cb9-34">        )</span>
<span id="cb9-35"></span>
<span id="cb9-36">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> col2:</span>
<span id="cb9-37">        st.write(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é—´è·</span></span>
<span id="cb9-38">        generate_btn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.button(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸ· ç”Ÿæˆå“é‰´ç¬”è®°"</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"primary"</span>)</span>
<span id="cb9-39">        recommend_btn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.button(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸ¯ è·å–æ¨è"</span>)</span>
<span id="cb9-40"></span>
<span id="cb9-41">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è¾“å‡ºéƒ¨åˆ†</span></span>
<span id="cb9-42">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> generate_btn:</span>
<span id="cb9-43">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> whisky_name:</span>
<span id="cb9-44">            st.error(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"è¯·è¾“å…¥å¨å£«å¿Œåç§°"</span>)</span>
<span id="cb9-45">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb9-46">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> st.spinner(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ­£åœ¨åˆ†æå¨å£«å¿Œ..."</span>):</span>
<span id="cb9-47">                tasting_notes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> generate_tasting_notes(whisky_name, agent_type, selected_model)</span>
<span id="cb9-48">                st.markdown(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"### ğŸ¥ƒ å“é‰´ç¬”è®°"</span>)</span>
<span id="cb9-49">                st.markdown(tasting_notes)</span>
<span id="cb9-50"></span>
<span id="cb9-51">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> recommend_btn:</span>
<span id="cb9-52">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> st.spinner(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ­£åœ¨æŸ¥æ‰¾æ¨è..."</span>):</span>
<span id="cb9-53">            recommendations <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_recommendations(tasting_notes, agent_type)</span>
<span id="cb9-54">            st.markdown(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"### ğŸ¯ ä¸ªæ€§åŒ–æ¨è"</span>)</span>
<span id="cb9-55">            st.markdown(recommendations)</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="é¢‘ç‡é™åˆ¶ä¸æˆæœ¬ç®¡ç†" class="level2">
<h2 class="anchored" data-anchor-id="é¢‘ç‡é™åˆ¶ä¸æˆæœ¬ç®¡ç†">é¢‘ç‡é™åˆ¶ä¸æˆæœ¬ç®¡ç†</h2>
<section id="api-ä½¿ç”¨æ§åˆ¶" class="level3">
<h3 class="anchored" data-anchor-id="api-ä½¿ç”¨æ§åˆ¶">API ä½¿ç”¨æ§åˆ¶</h3>
<div id="aac94e55" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é¢‘ç‡é™åˆ¶å®ç°</span></span>
<span id="cb10-2">RATE_LIMIT_FILE <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rate_limit.json"</span></span>
<span id="cb10-3">MAX_RUNS_PER_DAY <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span></span>
<span id="cb10-4"></span>
<span id="cb10-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_rate_limit_data():</span>
<span id="cb10-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""è·å–å½“å‰ä½¿ç”¨æ•°æ®"""</span></span>
<span id="cb10-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb10-8">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(RATE_LIMIT_FILE, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"r"</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> f:</span>
<span id="cb10-9">            data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> json.load(f)</span>
<span id="cb10-10">            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¡®ä¿é”®å­˜åœ¨</span></span>
<span id="cb10-11">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> data <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">or</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> data:</span>
<span id="cb10-12">                <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date"</span>: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(datetime.date.today()), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>}</span>
<span id="cb10-13">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> data</span>
<span id="cb10-14">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> (<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">FileNotFoundError</span>, json.JSONDecodeError):</span>
<span id="cb10-15">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date"</span>: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(datetime.date.today()), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>}</span>
<span id="cb10-16"></span>
<span id="cb10-17"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> check_rate_limit():</span>
<span id="cb10-18">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¶…å‡ºäº†æ¯æ—¥é™åˆ¶"""</span></span>
<span id="cb10-19">    data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_rate_limit_data()</span>
<span id="cb10-20">    today <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(datetime.date.today())</span>
<span id="cb10-21"></span>
<span id="cb10-22">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> today:</span>
<span id="cb10-23">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä¸ºæ–°çš„ä¸€å¤©é‡ç½®è®¡æ•°å™¨</span></span>
<span id="cb10-24">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date"</span>: today, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"can_run"</span>: <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>}</span>
<span id="cb10-25"></span>
<span id="cb10-26">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> MAX_RUNS_PER_DAY:</span>
<span id="cb10-27">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date"</span>: today, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>: data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>], <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"can_run"</span>: <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>}</span>
<span id="cb10-28"></span>
<span id="cb10-29">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"date"</span>: today, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>: data[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"count"</span>], <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"can_run"</span>: <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>}</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="æ€§èƒ½ä¼˜åŒ–" class="level2">
<h2 class="anchored" data-anchor-id="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</h2>
<section id="å‘é‡æ•°æ®åº“æ€§èƒ½" class="level3">
<h3 class="anchored" data-anchor-id="å‘é‡æ•°æ®åº“æ€§èƒ½">å‘é‡æ•°æ®åº“æ€§èƒ½</h3>
<div id="7555d103" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é’ˆå¯¹å¤§æ•°æ®çš„åˆ†æ‰¹ä¼˜åŒ–ç›¸ä¼¼åº¦æœç´¢</span></span>
<span id="cb11-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> batch_similarity_search(query_embedding, db_path, table_name, batch_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span>):</span>
<span id="cb11-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""é’ˆå¯¹å¤§å‹æ•°æ®é›†çš„åˆ†æ‰¹ç›¸ä¼¼åº¦æœç´¢ä¼˜åŒ–"""</span></span>
<span id="cb11-4"></span>
<span id="cb11-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> duckdb.<span class="ex" style="color: null;
background-color: null;
font-style: inherit;">connect</span>(database<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>db_path, read_only<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> con:</span>
<span id="cb11-6">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è·å–æ€»è¡Œæ•°</span></span>
<span id="cb11-7">        total_rows <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> con.execute(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"SELECT COUNT(*) FROM </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>table_name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>).fetchone()[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]</span>
<span id="cb11-8"></span>
<span id="cb11-9">        all_similarities <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb11-10"></span>
<span id="cb11-11">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ†æ‰¹å¤„ç†ä»¥ç®¡ç†å†…å­˜</span></span>
<span id="cb11-12">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> offset <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, total_rows, batch_size):</span>
<span id="cb11-13">            batch_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> con.execute(</span>
<span id="cb11-14">                <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'SELECT full, bottle_embedding FROM </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>table_name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> LIMIT </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>batch_size<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> OFFSET </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>offset<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span></span>
<span id="cb11-15">            ).fetchdf()</span>
<span id="cb11-16"></span>
<span id="cb11-17">            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è®¡ç®—è¯¥æ‰¹æ¬¡çš„ç›¸ä¼¼åº¦</span></span>
<span id="cb11-18">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> _, row <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> batch_df.iterrows():</span>
<span id="cb11-19">                embedding <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.array(row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bottle_embedding'</span>])</span>
<span id="cb11-20">                similarity <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> cosine_similarity(query_embedding, embedding)</span>
<span id="cb11-21">                all_similarities.append((row[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'full'</span>], similarity))</span>
<span id="cb11-22"></span>
<span id="cb11-23">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ’åºå¹¶è¿”å›å‰å‡ æ¡ç»“æœ</span></span>
<span id="cb11-24">        all_similarities.sort(key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">lambda</span> x: x[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], reverse<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb11-25">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> all_similarities[:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>]</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="éƒ¨ç½²ä¸é…ç½®" class="level2">
<h2 class="anchored" data-anchor-id="éƒ¨ç½²ä¸é…ç½®">éƒ¨ç½²ä¸é…ç½®</h2>
<section id="ç¯å¢ƒæ­å»º" class="level3">
<h3 class="anchored" data-anchor-id="ç¯å¢ƒæ­å»º">ç¯å¢ƒæ­å»º</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡</span></span>
<span id="cb12-2"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">SILICONFLOW_API_KEY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>æ‚¨çš„ <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">SiliconFlow</span> å¯†é’¥</span>
<span id="cb12-3"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">MODELSCOPE_API_KEY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>æ‚¨çš„ <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ModelScope</span> å¯†é’¥</span>
<span id="cb12-4"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">GEMINI_API_KEY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>æ‚¨çš„ <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">Gemini</span> å¯†é’¥  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¯é€‰</span></span>
<span id="cb12-5"></span>
<span id="cb12-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ•°æ®åº“åˆå§‹åŒ–</span></span>
<span id="cb12-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">python</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb12-8"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">import duckdb</span></span>
<span id="cb12-9"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">conn = duckdb.connect('data/whisky_database.duckdb')</span></span>
<span id="cb12-10"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"># åˆ›å»ºæ”¯æŒå‘é‡çš„è¡¨æ ¼</span></span>
<span id="cb12-11"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span></code></pre></div></div>
</section>
<section id="shiny-for-python-å¤‡é€‰æ–¹æ¡ˆ" class="level3">
<h3 class="anchored" data-anchor-id="shiny-for-python-å¤‡é€‰æ–¹æ¡ˆ">Shiny for Python å¤‡é€‰æ–¹æ¡ˆ</h3>
<div id="7ed9edbf" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ Shiny å®ç°çš„å¤‡é€‰ UI</span></span>
<span id="cb13-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> shiny <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> App, ui, render, reactive, req</span>
<span id="cb13-3"></span>
<span id="cb13-4">app_ui <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ui.page_fluid(</span>
<span id="cb13-5">    ui.h2(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ğŸ¥ƒ AI å¨å£«å¿Œå“é‰´ç³»ç»Ÿ"</span>),</span>
<span id="cb13-6">    ui.layout_sidebar(</span>
<span id="cb13-7">        ui.sidebar(</span>
<span id="cb13-8">            ui.input_select(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"agent"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"é€‰æ‹© Agent:"</span>, [</span>
<span id="cb13-9">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DrunkTony (ä¸­æ–‡)"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WhiskyFunny (English)"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WhiskyNotebook (English)"</span></span>
<span id="cb13-10">            ]),</span>
<span id="cb13-11">            ui.input_text(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"whisky_name"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å¨å£«å¿Œåç§°:"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>),</span>
<span id="cb13-12">            ui.input_action_button(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"generate"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ç”Ÿæˆå“é‰´ç¬”è®°"</span>)</span>
<span id="cb13-13">        ),</span>
<span id="cb13-14">        ui.output_text_verbatim(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tasting_notes"</span>),</span>
<span id="cb13-15">        ui.output_text_verbatim(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"recommendations"</span>)</span>
<span id="cb13-16">    )</span>
<span id="cb13-17">)</span>
<span id="cb13-18"></span>
<span id="cb13-19"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> server(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span>, output, session):</span>
<span id="cb13-20">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@output</span></span>
<span id="cb13-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">@render.text</span></span>
<span id="cb13-22">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> tasting_notes():</span>
<span id="cb13-23">        req(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span>.generate())</span>
<span id="cb13-24">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç”Ÿæˆå“é‰´ç¬”è®°é€»è¾‘</span></span>
<span id="cb13-25">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> generate_tasting_notes(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span>.whisky_name(), <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span>.agent())</span>
<span id="cb13-26"></span>
<span id="cb13-27">app <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> App(app_ui, server)</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="æŠ€æœ¯æˆå°±" class="level2">
<h2 class="anchored" data-anchor-id="æŠ€æœ¯æˆå°±">æŠ€æœ¯æˆå°±</h2>
<section id="æ ¸å¿ƒåˆ›æ–°" class="level3">
<h3 class="anchored" data-anchor-id="æ ¸å¿ƒåˆ›æ–°">æ ¸å¿ƒåˆ›æ–°</h3>
<ol type="1">
<li><strong>å¤š Agent æ¶æ„</strong>: æ‹¥æœ‰ä¸åŒçš„ AI äººæ ¼å’Œæ•°æ®æºã€‚</li>
<li><strong>RAG å®ç°</strong>: ä½¿ç”¨çœŸå®å¨å£«å¿Œè¯„è®ºè¿›è¡Œæ£€ç´¢å¢å¼ºç”Ÿæˆã€‚</li>
<li><strong>å‘é‡æ•°æ®åº“</strong>: ä½¿ç”¨ 376MB æ•°æ®åº“è¿›è¡Œé«˜æ•ˆç›¸ä¼¼åº¦æœç´¢ã€‚</li>
<li><strong>åŒè¯­æ”¯æŒ</strong>: æä¾›ä¸­æ–‡å’Œè‹±æ–‡ Agentã€‚</li>
<li><strong>æˆæœ¬ç®¡ç†</strong>: å†…ç½®é¢‘ç‡é™åˆ¶å’Œ API ä¼˜åŒ–ã€‚</li>
<li><strong>ä¸“ä¸šå“é‰´æ ¼å¼</strong>: ç¬¦åˆè¡Œä¸šæ ‡å‡†çš„ç¬”è®°ç»“æ„ã€‚</li>
</ol>
</section>
<section id="æ€§èƒ½æŒ‡æ ‡" class="level3">
<h3 class="anchored" data-anchor-id="æ€§èƒ½æŒ‡æ ‡">æ€§èƒ½æŒ‡æ ‡</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>æŒ‡æ ‡</th>
<th>æ•°å€¼</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>æ•°æ®åº“å¤§å°</td>
<td>376MB (26,000+ æ¡è¯„è®º)</td>
</tr>
<tr class="even">
<td>åµŒå…¥ç»´åº¦</td>
<td>1024</td>
</tr>
<tr class="odd">
<td>æœç´¢å»¶è¿Ÿ</td>
<td>&lt; 2 ç§’</td>
</tr>
<tr class="even">
<td>æ¯æ—¥è¯·æ±‚é™åˆ¶</td>
<td>80 æ¬¡è¯·æ±‚</td>
</tr>
<tr class="odd">
<td>æ”¯æŒè¯­è¨€</td>
<td>2 (EN/ZH)</td>
</tr>
<tr class="even">
<td>æ•°æ®æº</td>
<td>3 (drinktony, whiskyfun, whiskynotes)</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="æœªæ¥å¢å¼ºæ–¹å‘" class="level2">
<h2 class="anchored" data-anchor-id="æœªæ¥å¢å¼ºæ–¹å‘">æœªæ¥å¢å¼ºæ–¹å‘</h2>
<p>ä¸‹ä¸€ç‰ˆæœ¬çš„æ½œåœ¨æ”¹è¿›ç‚¹ï¼š</p>
<ol type="1">
<li><strong>é«˜çº§ç›¸ä¼¼åº¦ç®—æ³•</strong>: å®ç°æ–‡æœ¬ + å…ƒæ•°æ®çš„æ··åˆæœç´¢ã€‚</li>
<li><strong>ç”¨æˆ·ä¸ªæ€§åŒ–</strong>: éšç€æ—¶é—´æ¨ç§»å­¦ä¹ ç”¨æˆ·çš„åå¥½ã€‚</li>
<li><strong>ç§»åŠ¨ç«¯åº”ç”¨</strong>: åŸç”Ÿçš„ iOS/Android åº”ç”¨ç¨‹åºã€‚</li>
<li><strong>å®æ—¶æ•°æ®æ›´æ–°</strong>: è‡ªåŠ¨åŒ–çš„ç½‘é¡µæŠ“å–æµæ°´çº¿ã€‚</li>
<li><strong>å£å‘³ç‰¹å¾åˆ†æ</strong>: æ ¹æ®ç”¨æˆ·åå¥½ç”Ÿæˆå…¶å£å‘³ç‰¹å¾å›¾è°±ã€‚</li>
<li><strong>ç¤¾äº¤åŠŸèƒ½</strong>: ä¸ç¤¾åŒºåˆ†äº«å“é‰´ç¬”è®°å’Œæ¨èã€‚</li>
</ol>
</section>
<section id="ç»“è®º" class="level2">
<h2 class="anchored" data-anchor-id="ç»“è®º">ç»“è®º</h2>
<p>è¿™æ¬¾å¨å£«å¿Œå“é‰´åº”ç”¨å±•ç¤ºäº†å°† RAG æŠ€æœ¯ä¸ä¸“é—¨çš„ AI Agent ç›¸ç»“åˆï¼Œä»è€Œæ„å»ºå¤æ‚çš„é¢†åŸŸç‰¹å®šç³»ç»Ÿçš„å¼ºå¤§åŠ›é‡ã€‚æœ¬é¡¹ç›®å±•ç¤ºäº†ï¼š</p>
<ul>
<li><strong>å…ˆè¿›çš„ AI æ¶æ„</strong>: å…·å¤‡ä¸åŒäººæ ¼çš„å¤š Agent ç³»ç»Ÿã€‚</li>
<li><strong>æ•°æ®å·¥ç¨‹</strong>: å¤§è§„æ¨¡å‘é‡æ•°æ®åº“ç®¡ç†ã€‚</li>
<li><strong>ä¸“ä¸šçŸ¥è¯†</strong>: è¡Œä¸šæ ‡å‡†çš„å“é‰´ç¬”è®°æ ¼å¼ã€‚</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>: è·¨å¹³å°çš„ç®€æ´ã€ç›´è§‚ç•Œé¢ã€‚</li>
<li><strong>æˆæœ¬æ•ˆç›Š</strong>: æ™ºèƒ½çš„é¢‘ç‡é™åˆ¶å’Œä¼˜åŒ–ã€‚</li>
</ul>
<p>æ— è®ºæ‚¨æ˜¯å¨å£«å¿Œçˆ±å¥½è€…ã€AI å¼€å‘äººå‘˜è¿˜æ˜¯æ•°æ®ç§‘å­¦å®¶ï¼Œæœ¬é¡¹ç›®éƒ½ä¸ºæ‚¨æä¾›äº†ä¸€ä¸ªæä½³çš„èŒƒä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ç»“åˆçœŸå®ä¸–ç•Œæ•°æ®ä¸å…ˆè¿›æœºå™¨å­¦ä¹ æŠ€æœ¯æ¥æ„å»ºç”Ÿäº§çº§ AI åº”ç”¨ã€‚</p>
<hr>
<p><strong>æŠ€æœ¯æ ˆ</strong>: Python, Streamlit, DuckDB, OpenAI API, å‘é‡åµŒå…¥ (Vector Embeddings)</p>
<p><strong>æ•°æ®åº“</strong>: æ¶µç›– 3 ä¸ªä¸“é—¨æ¥æºçš„ 26,000+ æ¡çœŸå®å¨å£«å¿Œè¯„è®ºã€‚</p>


<!-- -->

</section>
</section>

 ]]></description>
  <category>AI</category>
  <category>API</category>
  <category>tutorial</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/whisky-tasting/</guid>
  <pubDate>Tue, 04 Nov 2025 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/whisky-tasting/images/0.png" medium="image" type="image/png" height="66" width="144"/>
</item>
<item>
  <title>ä½¿ç”¨ Streamlit æ„å»ºçš„ YOLO ç›®æ ‡æ£€æµ‹åº”ç”¨</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/yolo-app/</link>
  <description><![CDATA[ 





<section id="é¡¹ç›®æ¦‚è§ˆ" class="level1">
<h1>é¡¹ç›®æ¦‚è§ˆ</h1>
<p>è¯¥åº”ç”¨æ˜¯ä¸€ä¸ªå…¨é¢çš„ Streamlit Web åº”ç”¨ç¨‹åºï¼Œåˆ©ç”¨ YOLO11ï¼ˆUltralytics æ¡†æ¶ï¼‰æä¾›ç›®æ ‡æ£€æµ‹åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§è¾“å…¥æºå’Œå¤„ç†åç«¯ã€‚è¯¥é¡¹ç›®çš„ç‰¹åˆ«ä¹‹å¤„åœ¨äºå…¶å¤šæ¨¡å‹æ¶æ„å’Œç”Ÿäº§çº§åˆ«çš„ç‰¹æ€§ã€‚</p>
<p>åœ¨çº¿æ¼”ç¤º: <a href="https://yolo-live.streamlit.app/">https://yolo-live.streamlit.app/</a></p>
<p>Github: <a href="https://github.com/JCwinning/YOLO_app">https://github.com/JCwinning/YOLO_app</a></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true" href="">ç›®æ ‡æ£€æµ‹</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false" href="">ç‰©ä½“è¯†åˆ«</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://jcwinning.github.io/LandingPage/posts/yolo-app/images/0.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>åº”ç”¨ç¨‹åºæˆªå›¾ - ä¸»ç•Œé¢</figcaption>
</figure>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://jcwinning.github.io/LandingPage/posts/yolo-app/images/1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>åº”ç”¨ç¨‹åºæˆªå›¾ - æ£€æµ‹ç»“æœ</figcaption>
</figure>
</div>
</div>
</div>
</div>
<section id="æ ¸å¿ƒç‰¹æ€§" class="level2">
<h2 class="anchored" data-anchor-id="æ ¸å¿ƒç‰¹æ€§">æ ¸å¿ƒç‰¹æ€§</h2>
<section id="å¤šè¾“å…¥æ”¯æŒ" class="level3">
<h3 class="anchored" data-anchor-id="å¤šè¾“å…¥æ”¯æŒ">å¤šè¾“å…¥æ”¯æŒ</h3>
<p>åº”ç”¨æ”¯æŒå¤šç§è¾“å…¥æ–¹å¼ï¼š - <strong>æ–‡ä»¶ä¸Šä¼ </strong>ï¼šä»æœ¬åœ°å­˜å‚¨ä¸Šä¼ å›¾åƒå’Œè§†é¢‘ã€‚ - <strong>URL è¾“å…¥</strong>ï¼šç›´æ¥ä»ç½‘ç»œè¾“å…¥å›¾åƒ URLã€‚ - <strong>å®æ—¶ç›¸æœº</strong>ï¼šä½¿ç”¨è®¾å¤‡ç›¸æœºè¿›è¡Œå®æ—¶ç…§ç‰‡æ•è·ã€‚</p>
</section>
<section id="å¤šæ¨¡å‹æ¶æ„" class="level3">
<h3 class="anchored" data-anchor-id="å¤šæ¨¡å‹æ¶æ„">å¤šæ¨¡å‹æ¶æ„</h3>
<p>å…¶æœ€çªå‡ºçš„ç‰¹æ€§ä¹‹ä¸€æ˜¯æ”¯æŒä¸åŒçš„ AI æ¨¡å‹ï¼š</p>
<section id="æœ¬åœ°-yolo11-æ¨¡å‹" class="level4">
<h4 class="anchored" data-anchor-id="æœ¬åœ°-yolo11-æ¨¡å‹">1. æœ¬åœ° YOLO11 æ¨¡å‹</h4>
<ul>
<li>äº”ç§ä¸åŒçš„æ¨¡å‹å˜ä½“ï¼ˆnano, small, medium, large, extra-largeï¼‰ã€‚</li>
<li>è‡ªåŠ¨è®¾å¤‡æ£€æµ‹ï¼Œæ”¯æŒ Apple Silicon çš„ MPS åŠ é€Ÿã€‚</li>
<li>åœ¨ä¸æ”¯æŒåŠ é€Ÿçš„æƒ…å†µä¸‹è‡ªåŠ¨å›é€€è‡³ CPUï¼Œç¡®ä¿æ›´å¹¿çš„å…¼å®¹æ€§ã€‚</li>
</ul>
</section>
<section id="äº‘ç«¯æ¨¡å‹" class="level4">
<h4 class="anchored" data-anchor-id="äº‘ç«¯æ¨¡å‹">2. äº‘ç«¯æ¨¡å‹</h4>
<ul>
<li>é€šè¿‡ DashScope API è°ƒç”¨ <strong>Qwen-Image-Edit</strong> è¿›è¡Œé«˜çº§å›¾åƒæ ‡æ³¨ã€‚</li>
<li>é€šè¿‡ OpenRouter API è°ƒç”¨ <strong>Gemini 2.5 Flash Image</strong> è¿›è¡Œå‰æ²¿çš„å›¾åƒå¤„ç†ã€‚</li>
</ul>
</section>
</section>
<section id="é«˜çº§åŠŸèƒ½" class="level3">
<h3 class="anchored" data-anchor-id="é«˜çº§åŠŸèƒ½">é«˜çº§åŠŸèƒ½</h3>
<ul>
<li><strong>åŒè¯­ç•Œé¢</strong>ï¼šå®Œæ•´çš„è‹±æ–‡/ä¸­æ–‡æ”¯æŒï¼ŒåŒ…å« 113+ ä¸ªç¿»è¯‘å­—æ®µã€‚</li>
<li><strong>æ™ºèƒ½ UI ç®¡ç†</strong>ï¼šå¤„ç†åè‡ªåŠ¨éšè—è¾“å…¥å›¾åƒã€‚</li>
<li><strong>ä¸‹è½½åŠŸèƒ½</strong>ï¼šæ”¯æŒå°†æ ‡æ³¨åçš„ç»“æœä¿å­˜åˆ°æœ¬åœ°ã€‚</li>
<li><strong>è¿›åº¦è¿½è¸ª</strong>ï¼šè§†é¢‘å¤„ç†è¿‡ç¨‹ä¸­çš„å®æ—¶è¿›åº¦æ›´æ–°ã€‚</li>
<li><strong>ä¼šè¯ç®¡ç†</strong>ï¼šåœ¨ç”¨æˆ·äº¤äº’è¿‡ç¨‹ä¸­ä¿æŒæŒä¹…åŒ–çŠ¶æ€ã€‚</li>
</ul>
</section>
</section>
<section id="æŠ€æœ¯æ¶æ„" class="level2">
<h2 class="anchored" data-anchor-id="æŠ€æœ¯æ¶æ„">æŠ€æœ¯æ¶æ„</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>

</div>
<p></p><figcaption> ç³»ç»Ÿæ¶æ„å›¾</figcaption> </figure><p></p>
</div>
</div>
</div>
<section id="æ ¸å¿ƒä¾èµ–" class="level3">
<h3 class="anchored" data-anchor-id="æ ¸å¿ƒä¾èµ–">æ ¸å¿ƒä¾èµ–</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb1-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[project]</span></span>
<span id="cb1-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yolo-app"</span></span>
<span id="cb1-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">requires-python</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&gt;=3.12"</span></span>
<span id="cb1-4"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dependencies</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb1-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dashscope&gt;=1.17.0"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span>      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é˜¿é‡Œäº‘ API</span></span>
<span id="cb1-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"opencv-python&gt;=4.11.0.86"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è®¡ç®—æœºè§†è§‰</span></span>
<span id="cb1-7">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"streamlit&gt;=1.50.0"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span>       <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Web æ¡†æ¶</span></span>
<span id="cb1-8">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"torch&gt;=2.2"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span>              <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ·±åº¦å­¦ä¹ </span></span>
<span id="cb1-9">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ultralytics&gt;=8.3.0"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span>      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># YOLO æ¡†æ¶</span></span>
<span id="cb1-10"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div></div>
</section>
<section id="åº”ç”¨ç¨‹åºç»“æ„" class="level3">
<h3 class="anchored" data-anchor-id="åº”ç”¨ç¨‹åºç»“æ„">åº”ç”¨ç¨‹åºç»“æ„</h3>
<p>ä¸»åº”ç”¨ç¨‹åº (<code>app.py</code>) ç”± 1,000 å¤šè¡Œç»“æ„è‰¯å¥½çš„ Python ä»£ç ç»„æˆï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªç»„ä»¶ï¼š</p>
<section id="å›½é™…åŒ–ç³»ç»Ÿ" class="level4">
<h4 class="anchored" data-anchor-id="å›½é™…åŒ–ç³»ç»Ÿ">1. å›½é™…åŒ–ç³»ç»Ÿ</h4>
<div id="e9a018b1" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> language <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> translations</span>
<span id="cb2-2"></span>
<span id="cb2-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_translation(key, <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>kwargs):</span>
<span id="cb2-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ä½¿ç”¨å½“å‰ä¼šè¯è¯­è¨€çš„ç¿»è¯‘å‡½æ•°"""</span></span>
<span id="cb2-5">    lang <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.session_state.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"language"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span>)</span>
<span id="cb2-6">    text <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> translations[lang].get(key, translations[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span>].get(key, key))</span>
<span id="cb2-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> text.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>kwargs) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> kwargs <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> text</span></code></pre></div></div>
</details>
</div>
</section>
<section id="è®¾å¤‡ä¼˜åŒ–" class="level4">
<h4 class="anchored" data-anchor-id="è®¾å¤‡ä¼˜åŒ–">2. è®¾å¤‡ä¼˜åŒ–</h4>
<div id="0fc36c3e" class="cell" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_device():</span>
<span id="cb3-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""è‡ªåŠ¨æ£€æµ‹æœ€ä½³å¯ç”¨è®¾å¤‡"""</span></span>
<span id="cb3-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> torch.backends.mps.is_available():</span>
<span id="cb3-4">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mps"</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Apple Silicon GPU åŠ é€Ÿ</span></span>
<span id="cb3-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cpu"</span>      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å›é€€è‡³ CPU</span></span>
<span id="cb3-6"> </span>
<span id="cb3-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ¨¡å‹åŠ è½½ä¸è®¾å¤‡ä¼˜åŒ–</span></span>
<span id="cb3-8">device <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_device()</span>
<span id="cb3-9">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> YOLO(selected_model).to(device)</span>
<span id="cb3-10">st.info(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Using device: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>device<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>upper()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div></div>
</details>
</div>
</section>
<section id="å›¾åƒå¤„ç†æµæ°´çº¿" class="level4">
<h4 class="anchored" data-anchor-id="å›¾åƒå¤„ç†æµæ°´çº¿">3. å›¾åƒå¤„ç†æµæ°´çº¿</h4>
<div id="cbbc6a43" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> encode_image_to_base64(image):</span>
<span id="cb4-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å°† PIL å›¾åƒç¼–ç ä¸º base64 å­—ç¬¦ä¸²å¹¶è¿›è¡Œå°ºå¯¸å‹ç¼©"""</span></span>
<span id="cb4-3">    max_size_bytes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 8MB é™åˆ¶</span></span>
<span id="cb4-4"></span>
<span id="cb4-5">    formats_and_qualities <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb4-6">        (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"JPEG"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">95</span>), (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"JPEG"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">85</span>), (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"JPEG"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">75</span>),</span>
<span id="cb4-7">        (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WEBP"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">95</span>), (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WEBP"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">85</span>), (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WEBP"</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">75</span>),</span>
<span id="cb4-8">    ]</span>
<span id="cb4-9"></span>
<span id="cb4-10">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> fmt, quality <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> formats_and_qualities:</span>
<span id="cb4-11">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å°è¯•ä¸åŒçš„å‹ç¼©ç­–ç•¥</span></span>
<span id="cb4-12">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ... å‹ç¼©é€»è¾‘</span></span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="å¤šæ¨¡å‹å¤„ç†" class="level3">
<h3 class="anchored" data-anchor-id="å¤šæ¨¡å‹å¤„ç†">å¤šæ¨¡å‹å¤„ç†</h3>
<section id="æœ¬åœ°-yolo-å¤„ç†" class="level4">
<h4 class="anchored" data-anchor-id="æœ¬åœ°-yolo-å¤„ç†">æœ¬åœ° YOLO å¤„ç†</h4>
<p>åº”ç”¨æ”¯æŒæ‰€æœ‰ YOLO11 æ¨¡å‹å˜ä½“ï¼Œå¹¶å…·å¤‡è‡ªåŠ¨æ€§èƒ½ä¼˜åŒ–ï¼š</p>
<div id="0288c7d6" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ¨¡å‹é€‰æ‹©ç•Œé¢</span></span>
<span id="cb5-2">model_options <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yolo11n.pt"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yolo11s.pt"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yolo11m.pt"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yolo11l.pt"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yolo11x.pt"</span>]</span>
<span id="cb5-3">model_descriptions <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb5-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yolo11n.pt"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Nano - æœ€å¿«ï¼Œç²¾åº¦æœ€ä½"</span>,</span>
<span id="cb5-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yolo11s.pt"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Small - å‡è¡¡æ€§å¥½"</span>,</span>
<span id="cb5-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yolo11m.pt"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Medium - æ¨èä½¿ç”¨"</span>,</span>
<span id="cb5-7">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yolo11l.pt"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Large - ç²¾åº¦è¾ƒé«˜"</span>,</span>
<span id="cb5-8">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yolo11x.pt"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Extra Large - ç²¾åº¦æœ€é«˜"</span></span>
<span id="cb5-9">}</span>
<span id="cb5-10"></span>
<span id="cb5-11">selected_model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> st.sidebar.selectbox(</span>
<span id="cb5-12">    get_translation(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"model_selection"</span>),</span>
<span id="cb5-13">    model_options,</span>
<span id="cb5-14">    index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model_options.index(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"yolo11s.pt"</span>),</span>
<span id="cb5-15">    format_func<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">lambda</span> x: <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>model_descriptions[x]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> (</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>x<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">)"</span></span>
<span id="cb5-16">)</span>
<span id="cb5-17"></span>
<span id="cb5-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¸¦è¿›åº¦è¿½è¸ªçš„æ£€æµ‹è¿‡ç¨‹</span></span>
<span id="cb5-19"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> detect_objects(image, model, confidence_threshold<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>):</span>
<span id="cb5-20">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""æ‰§è¡Œå¸¦è¿›åº¦è¿½è¸ªçš„ç›®æ ‡æ£€æµ‹"""</span></span>
<span id="cb5-21">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> st.spinner(get_translation(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"processing"</span>)):</span>
<span id="cb5-22">        results <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model.predict(image, conf<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>confidence_threshold)</span>
<span id="cb5-23"></span>
<span id="cb5-24">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¤„ç†ç»“æœ</span></span>
<span id="cb5-25">        detections <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb5-26">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> result <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> results:</span>
<span id="cb5-27">            boxes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> result.boxes</span>
<span id="cb5-28">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> box <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> boxes:</span>
<span id="cb5-29">                x1, y1, x2, y2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> box.xyxy[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].cpu().numpy()</span>
<span id="cb5-30">                conf <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> box.conf[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].cpu().numpy()</span>
<span id="cb5-31">                cls <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">int</span>(box.cls[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].cpu().numpy())</span>
<span id="cb5-32">                class_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model.names[cls]</span>
<span id="cb5-33"></span>
<span id="cb5-34">                detections.append({</span>
<span id="cb5-35">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'class'</span>: class_name,</span>
<span id="cb5-36">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'confidence'</span>: conf,</span>
<span id="cb5-37">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bbox'</span>: [x1, y1, x2, y2]</span>
<span id="cb5-38">                })</span>
<span id="cb5-39"></span>
<span id="cb5-40">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> detections, results</span></code></pre></div></div>
</details>
</div>
</section>
<section id="äº‘ç«¯-api-é›†æˆ" class="level4">
<h4 class="anchored" data-anchor-id="äº‘ç«¯-api-é›†æˆ">äº‘ç«¯ API é›†æˆ</h4>
<p>å¯¹äºäº‘ç«¯æ¨¡å‹ï¼Œåº”ç”¨è´Ÿè´£ API èº«ä»½éªŒè¯å’Œè¯·æ±‚æ ¼å¼åŒ–ï¼š</p>
<div id="3217db15" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> process_with_qwen(image, api_key):</span>
<span id="cb6-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ä½¿ç”¨é˜¿é‡Œäº‘ DashScope æä¾›çš„ Qwen-Image-Edit å¤„ç†å›¾åƒ"""</span></span>
<span id="cb6-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb6-4">        response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> MultiModalConversation.call(</span>
<span id="cb6-5">            model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'qwen-image-edit'</span>,</span>
<span id="cb6-6">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb6-7">                {</span>
<span id="cb6-8">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'role'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'user'</span>,</span>
<span id="cb6-9">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'content'</span>: [</span>
<span id="cb6-10">                        {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'image'</span>: <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"data:image/jpeg;base64,</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>image_b64<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>},</span>
<span id="cb6-11">                        {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'text'</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Please identify and label all objects in this image.'</span>}</span>
<span id="cb6-12">                    ]</span>
<span id="cb6-13">                }</span>
<span id="cb6-14">            ]</span>
<span id="cb6-15">        )</span>
<span id="cb6-16">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response</span>
<span id="cb6-17">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb6-18">        st.error(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"API Error: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(e)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb6-19">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span></code></pre></div></div>
</details>
</div>
</section>
</section>
</section>
<section id="ç”¨æˆ·ç•Œé¢è®¾è®¡" class="level2">
<h2 class="anchored" data-anchor-id="ç”¨æˆ·ç•Œé¢è®¾è®¡">ç”¨æˆ·ç•Œé¢è®¾è®¡</h2>
<section id="å¸ƒå±€ç»“æ„" class="level3">
<h3 class="anchored" data-anchor-id="å¸ƒå±€ç»“æ„">å¸ƒå±€ç»“æ„</h3>
<p>åº”ç”¨ç¨‹åºé‡‡ç”¨ä¸“ä¸šçš„ä¸‰ä¸ªåˆ†æ å¸ƒå±€ï¼š</p>
<ol type="1">
<li><strong>ä¾§è¾¹æ </strong>ï¼šæ¨¡å‹é€‰æ‹©ã€ç½®ä¿¡åº¦é˜ˆå€¼ã€è¯­è¨€è®¾ç½®ã€‚</li>
<li><strong>ä¸»åŒºåŸŸ</strong>ï¼šè¾“å…¥æ–¹å¼é€‰æ‹©ã€å›¾åƒ/è§†é¢‘æ˜¾ç¤ºã€ç»“æœå±•ç¤ºã€‚</li>
<li><strong>ç»“æœé¢æ¿</strong>ï¼šæ£€æµ‹ç»Ÿè®¡ã€ä¸‹è½½é€‰é¡¹ã€‚</li>
</ol>
</section>
<section id="åŒè¯­æ”¯æŒ" class="level3">
<h3 class="anchored" data-anchor-id="åŒè¯­æ”¯æŒ">åŒè¯­æ”¯æŒ</h3>
<p>ç¿»è¯‘ç³»ç»Ÿç®¡ç†æ‰€æœ‰çš„ UI å…ƒç´ ï¼š</p>
<div id="34a243be" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">translations <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb7-2">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en"</span>: {</span>
<span id="cb7-3">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"YOLO11 Object Detection"</span>,</span>
<span id="cb7-4">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"upload_file"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Upload File"</span>,</span>
<span id="cb7-5">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"camera_input"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Use Camera"</span>,</span>
<span id="cb7-6">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ... æ›´å¤šå­—æ®µ</span></span>
<span id="cb7-7">    },</span>
<span id="cb7-8">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zh"</span>: {</span>
<span id="cb7-9">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"YOLO11 ç›®æ ‡æ£€æµ‹"</span>,</span>
<span id="cb7-10">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"upload_file"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä¸Šä¼ æ–‡ä»¶"</span>,</span>
<span id="cb7-11">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"camera_input"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä½¿ç”¨ç›¸æœº"</span>,</span>
<span id="cb7-12">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ... å¯¹åº”çš„ä¸­æ–‡ç¿»è¯‘</span></span>
<span id="cb7-13">    }</span>
<span id="cb7-14">}</span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="æ€§èƒ½ä¼˜åŒ–" class="level2">
<h2 class="anchored" data-anchor-id="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</h2>
<section id="æ¨¡å‹æ€§èƒ½å¯¹æ¯”" class="level3">
<h3 class="anchored" data-anchor-id="æ¨¡å‹æ€§èƒ½å¯¹æ¯”">æ¨¡å‹æ€§èƒ½å¯¹æ¯”</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>æ¨¡å‹</th>
<th>å‚æ•°é‡</th>
<th>mAP</th>
<th>æ¨ç†æ—¶é—´ (CPU)</th>
<th>æ¨ç†æ—¶é—´ (MPS)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>YOLO11n</td>
<td>2.6M</td>
<td>37.2</td>
<td>15ms</td>
<td>3ms</td>
</tr>
<tr class="even">
<td>YOLO11s</td>
<td>9.4M</td>
<td>45.5</td>
<td>28ms</td>
<td>6ms</td>
</tr>
<tr class="odd">
<td>YOLO11m</td>
<td>25.4M</td>
<td>51.2</td>
<td>52ms</td>
<td>12ms</td>
</tr>
<tr class="even">
<td>YOLO11l</td>
<td>43.7M</td>
<td>53.4</td>
<td>84ms</td>
<td>18ms</td>
</tr>
<tr class="odd">
<td>YOLO11x</td>
<td>68.2M</td>
<td>54.7</td>
<td>126ms</td>
<td>26ms</td>
</tr>
</tbody>
</table>
</section>
<section id="apple-silicon-åŠ é€Ÿ" class="level3">
<h3 class="anchored" data-anchor-id="apple-silicon-åŠ é€Ÿ">Apple Silicon åŠ é€Ÿ</h3>
<p>è¯¥åº”ç”¨ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶åœ¨ Apple Silicon è®¾å¤‡ä¸Šåˆ©ç”¨ Metal Performance Shaders (MPS)ï¼š</p>
<div id="99a3bce5" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">device <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mps"</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> torch.backends.mps.is_available() <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cpu"</span></span>
<span id="cb8-2">model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> YOLO(selected_model).to(device)</span>
<span id="cb8-3"></span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ€§èƒ½ç›‘æ§</span></span>
<span id="cb8-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> time</span>
<span id="cb8-6">start_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> time.time()</span>
<span id="cb8-7">results <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model.predict(image)</span>
<span id="cb8-8">inference_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (time.time() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> start_time) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000</span></span>
<span id="cb8-9"></span>
<span id="cb8-10">st.metric(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"æ¨ç†æ—¶é—´ (</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>device<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>upper()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">)"</span>, <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>inference_time<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.1f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">ms"</span>)</span></code></pre></div></div>
</details>
</div>
</section>
<section id="äº‘ç«¯-api-çš„å›¾åƒå‹ç¼©" class="level3">
<h3 class="anchored" data-anchor-id="äº‘ç«¯-api-çš„å›¾åƒå‹ç¼©">äº‘ç«¯ API çš„å›¾åƒå‹ç¼©</h3>
<p>ä¸ºäº†æ»¡è¶³ API çš„å¤§å°é™åˆ¶ï¼Œåº”ç”¨å®ç°äº†æ™ºèƒ½å›¾åƒå‹ç¼©ï¼š</p>
<div id="1df2e271" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> compress_image_for_api(image, max_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span>):</span>
<span id="cb9-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å‹ç¼©å›¾åƒä»¥æ»¡è¶³ API è¦æ±‚"""</span></span>
<span id="cb9-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> quality <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">95</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">85</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">75</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">65</span>]:</span>
<span id="cb9-4">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> fmt <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"JPEG"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WEBP"</span>]:</span>
<span id="cb9-5">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">buffer</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> BytesIO()</span>
<span id="cb9-6">            image.save(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">buffer</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>fmt, quality<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>quality)</span>
<span id="cb9-7">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">buffer</span>.tell() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> max_size:</span>
<span id="cb9-8">                <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">buffer</span>.getvalue()</span>
<span id="cb9-9">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="éƒ¨ç½²ä¸ç”Ÿäº§ç‰¹æ€§" class="level2">
<h2 class="anchored" data-anchor-id="éƒ¨ç½²ä¸ç”Ÿäº§ç‰¹æ€§">éƒ¨ç½²ä¸ç”Ÿäº§ç‰¹æ€§</h2>
<section id="ä¼šè¯ç®¡ç†" class="level3">
<h3 class="anchored" data-anchor-id="ä¼šè¯ç®¡ç†">ä¼šè¯ç®¡ç†</h3>
<p>åº”ç”¨ç¨‹åºç»´æŠ¤ç€å…¨é¢çš„ä¼šè¯çŠ¶æ€ï¼š</p>
<div id="e939fe1f" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1">session_state_vars <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb10-2">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"current_image"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"uploaded_image_bytes"</span>,</span>
<span id="cb10-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"current_video"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"uploaded_video_bytes"</span>,</span>
<span id="cb10-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"camera_active"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"camera_frame"</span>,</span>
<span id="cb10-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qwen_processed"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gemini_processed"</span>,</span>
<span id="cb10-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"language"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"input_method_index"</span></span>
<span id="cb10-7">]</span></code></pre></div></div>
</details>
</div>
</section>
<section id="é”™è¯¯å¤„ç†" class="level3">
<h3 class="anchored" data-anchor-id="é”™è¯¯å¤„ç†">é”™è¯¯å¤„ç†</h3>
<p>å¥å£®çš„é”™è¯¯å¤„ç†ç¡®ä¿äº†ä¼˜é›…çš„é™çº§æœåŠ¡ï¼š</p>
<div id="d8a1421f" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb11-2">    result <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model.predict(image, conf<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>confidence_threshold)</span>
<span id="cb11-3">    st.success(get_translation(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"detection_success"</span>))</span>
<span id="cb11-4"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb11-5">    st.error(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"æ£€æµ‹å¤±è´¥: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(e)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb11-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å›é€€è‡³å¤‡é€‰å¤„ç†æ–¹æ³•</span></span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="å¿«é€Ÿå¼€å§‹" class="level2">
<h2 class="anchored" data-anchor-id="å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</h2>
<section id="å‰ææ¡ä»¶" class="level3">
<h3 class="anchored" data-anchor-id="å‰ææ¡ä»¶">å‰ææ¡ä»¶</h3>
<ul>
<li>Python 3.12 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
<li>ç°ä»£åŒ…ç®¡ç†å™¨ï¼ˆæ¨èä½¿ç”¨ uvï¼‰</li>
<li>å¯¹äºäº‘ç«¯æ¨¡å‹ï¼šéœ€è¦ DashScope å’Œ OpenRouter çš„ API å¯†é’¥</li>
</ul>
</section>
<section id="å®‰è£…æ­¥éª¤" class="level3">
<h3 class="anchored" data-anchor-id="å®‰è£…æ­¥éª¤">å®‰è£…æ­¥éª¤</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å…‹éš†ä»“åº“</span></span>
<span id="cb12-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>repository-url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span></span>
<span id="cb12-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> YOLO_app</span>
<span id="cb12-4"></span>
<span id="cb12-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ uv åŒæ­¥ä¾èµ–ï¼ˆæ¨èï¼‰</span></span>
<span id="cb12-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> sync</span>
<span id="cb12-7"></span>
<span id="cb12-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¤‡é€‰ï¼šä½¿ç”¨ pip å®‰è£…</span></span>
<span id="cb12-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> requirements.txt</span>
<span id="cb12-10"></span>
<span id="cb12-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è¿è¡Œåº”ç”¨</span></span>
<span id="cb12-12"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">streamlit</span> run app.py</span></code></pre></div></div>
</section>
<section id="api-é…ç½®" class="level3">
<h3 class="anchored" data-anchor-id="api-é…ç½®">API é…ç½®</h3>
<p>åˆ›å»ºä¸€ä¸ªåŒ…å« API å¯†é’¥çš„ <code>.env</code> æ–‡ä»¶ï¼š</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é˜¿é‡Œäº‘ DashScope API</span></span>
<span id="cb13-2"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">DASHSCOPE_API_KEY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>æ‚¨çš„å¯†é’¥</span>
<span id="cb13-3"></span>
<span id="cb13-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># OpenRouter API (ç”¨äº Gemini)</span></span>
<span id="cb13-5"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">OPENROUTER_API_KEY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>æ‚¨çš„å¯†é’¥</span></code></pre></div></div>
</section>
<section id="å¿«é€Ÿä½¿ç”¨ç¤ºä¾‹" class="level3">
<h3 class="anchored" data-anchor-id="å¿«é€Ÿä½¿ç”¨ç¤ºä¾‹">å¿«é€Ÿä½¿ç”¨ç¤ºä¾‹</h3>
<section id="åŸºç¡€å›¾åƒæ£€æµ‹" class="level4">
<h4 class="anchored" data-anchor-id="åŸºç¡€å›¾åƒæ£€æµ‹">åŸºç¡€å›¾åƒæ£€æµ‹</h4>
<ol type="1">
<li>å¯åŠ¨åº”ç”¨ç¨‹åºã€‚</li>
<li>ä¸Šä¼ å›¾åƒæˆ–æä¾›å›¾åƒ URLã€‚</li>
<li>é€‰æ‹©æ‚¨åå¥½çš„ YOLO11 æ¨¡å‹ï¼ˆæ¨èä½¿ç”¨ yolo11s.ptï¼‰ã€‚</li>
<li>æ ¹æ®éœ€è¦è°ƒæ•´ç½®ä¿¡åº¦é˜ˆå€¼ã€‚</li>
<li>ç‚¹å‡»â€œå¼€å§‹æ£€æµ‹â€ã€‚</li>
<li>æŸ¥çœ‹ç»“æœå¹¶ä¸‹è½½æ ‡æ³¨åçš„å›¾åƒã€‚</li>
</ol>
</section>
<section id="å®æ—¶ç›¸æœºæ£€æµ‹" class="level4">
<h4 class="anchored" data-anchor-id="å®æ—¶ç›¸æœºæ£€æµ‹">å®æ—¶ç›¸æœºæ£€æµ‹</h4>
<ol type="1">
<li>é€‰æ‹©â€œä½¿ç”¨ç›¸æœºâ€è¾“å…¥æ–¹å¼ã€‚</li>
<li>åœ¨æç¤ºæ—¶æˆäºˆç›¸æœºæƒé™ã€‚</li>
<li>æ‹æ‘„ç…§ç‰‡ã€‚</li>
<li>é€‰æ‹©æ£€æµ‹æ¨¡å‹ã€‚</li>
<li>è·å–å³æ—¶çš„ç›®æ ‡æ£€æµ‹ç»“æœã€‚</li>
</ol>
</section>
<section id="äº‘ç«¯æ¨¡å‹å¤„ç†" class="level4">
<h4 class="anchored" data-anchor-id="äº‘ç«¯æ¨¡å‹å¤„ç†">äº‘ç«¯æ¨¡å‹å¤„ç†</h4>
<ol type="1">
<li>åœ¨ä¾§è¾¹æ è¾“å…¥æ‚¨çš„ API å¯†é’¥ã€‚</li>
<li>ä¸Šä¼ å›¾åƒã€‚</li>
<li>é€‰æ‹© â€œQwen-Image-Editâ€ æˆ– â€œGemini 2.5 Flashâ€ æ¨¡å‹ã€‚</li>
<li>åˆ©ç”¨å…ˆè¿›çš„ AI èƒ½åŠ›å¤„ç†å›¾åƒã€‚</li>
<li>å°†ç»“æœä¸æœ¬åœ° YOLO æ¨¡å‹è¿›è¡Œå¯¹æ¯”ã€‚</li>
</ol>
</section>
</section>
</section>
<section id="æœªæ¥å¢å¼ºæ–¹å‘" class="level2">
<h2 class="anchored" data-anchor-id="æœªæ¥å¢å¼ºæ–¹å‘">æœªæ¥å¢å¼ºæ–¹å‘</h2>
<p>æœªæ¥ç‰ˆæœ¬çš„æ½œåœ¨æ”¹è¿›ç‚¹ï¼š</p>
<ol type="1">
<li><strong>æ›´å¤šæ¨¡å‹</strong>ï¼šé›†æˆæ›´å¤šçš„äº‘ç«¯ AI æœåŠ¡ã€‚</li>
<li><strong>å®æ—¶è§†é¢‘å¤„ç†</strong>ï¼šå¢å¼ºè§†é¢‘æµå¤„ç†èƒ½åŠ›ã€‚</li>
<li><strong>è‡ªå®šä¹‰æ¨¡å‹è®­ç»ƒ</strong>ï¼šå…è®¸ç”¨æˆ·è®­ç»ƒè‡ªå®šä¹‰ YOLO æ¨¡å‹ã€‚</li>
<li><strong>ç§»åŠ¨ç«¯ä¼˜åŒ–</strong>ï¼šä¸ºç§»åŠ¨è®¾å¤‡æ”¯æŒæä¾› PWA ç‰¹æ€§ã€‚</li>
<li><strong>æ‰¹é‡å¤„ç†</strong>ï¼šåŒæ—¶å¤„ç†å¤šå¼ å›¾åƒã€‚</li>
</ol>
</section>
<section id="ç»“è®º" class="level2">
<h2 class="anchored" data-anchor-id="ç»“è®º">ç»“è®º</h2>
<p>è¿™æ¬¾ YOLO ç›®æ ‡æ£€æµ‹åº”ç”¨å±•ç¤ºäº†å¦‚ä½•æ„å»ºä¸€ä¸ªå¤æ‚çš„ã€ç”Ÿäº§çº§åˆ«çš„è®¡ç®—æœºè§†è§‰ç³»ç»Ÿã€‚æœ¬åœ°å’Œäº‘ç«¯æ¨¡å‹çš„ç»“åˆã€åŒè¯­æ”¯æŒä»¥åŠå…¨é¢çš„é”™è¯¯å¤„ç†ï¼Œä½¿å…¶ä¸ä»…é€‚ç”¨äºå¼€å‘ç¯å¢ƒï¼Œä¹Ÿé€‚ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚</p>
<p>è¯¥é¡¹ç›®å±•ç¤ºäº†ä»¥ä¸‹æ–¹é¢çš„æœ€ä½³å®è·µï¼š - ä½¿ç”¨ç°ä»£åŒ…ç®¡ç†å·¥å…·è¿›è¡Œ Python å¼€å‘ã€‚ - Streamlit Web åº”ç”¨ç¨‹åºæ¶æ„ã€‚ - è®¡ç®—æœºè§†è§‰ API é›†æˆã€‚ - å›½é™…åŒ–ä¸å¯è®¿é—®æ€§ã€‚ - é’ˆå¯¹ä¸åŒç¡¬ä»¶å¹³å°çš„æ€§èƒ½ä¼˜åŒ–ã€‚</p>
<p>æ— è®ºæ‚¨æ˜¯å¯¹è®¡ç®—æœºè§†è§‰ã€Web å¼€å‘è¿˜æ˜¯ AI åº”ç”¨æ„Ÿå…´è¶£ï¼Œæœ¬é¡¹ç›®éƒ½ä¸ºæ‚¨æä¾›äº†ä¸€ä¸ªæ„å»ºå…ˆè¿› AI é©±åŠ¨ Web åº”ç”¨çš„åšå®åŸºç¡€ã€‚</p>
<hr>


<!-- -->

</section>
</section>

 ]]></description>
  <category>AI</category>
  <category>API</category>
  <category>tutorial</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/yolo-app/</guid>
  <pubDate>Tue, 04 Nov 2025 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/yolo-app/images/0.png" medium="image" type="image/png" height="83" width="144"/>
</item>
<item>
  <title>MCP æ•™ç¨‹ï¼šå°†éº¦å½“åŠ³æœåŠ¡ä¸ AI Agent é›†æˆ</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/MCP/</link>
  <description><![CDATA[ 





<section id="ä»€ä¹ˆæ˜¯æ¨¡å‹ä¸Šä¸‹æ–‡åè®®-mcp" class="level1">
<h1>ä»€ä¹ˆæ˜¯æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP)ï¼Ÿ</h1>
<p><strong>æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (Model Context Protocol, MCP)</strong> æ˜¯ä¸€é¡¹å¼€æ”¾æ ‡å‡†ï¼Œæ—¨åœ¨ä½¿ AI æ¨¡å‹èƒ½å¤Ÿæ— ç¼è¿æ¥å¤–éƒ¨æ•°æ®æºå’Œå·¥å…·ã€‚ å®ƒç”± Anthropic å¼€å‘ï¼Œå……å½“ä¸€ä¸ªé€šç”¨æ¥å£ï¼ˆç±»ä¼¼äº USB æ¥å£ï¼‰ï¼Œå…è®¸å¼€å‘è€…ä¸ºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æä¾›å¯¹æœ¬åœ°æ–‡ä»¶ã€æ•°æ®åº“å’Œç¬¬ä¸‰æ–¹ API çš„æ ‡å‡†åŒ–ã€å®‰å…¨è®¿é—®ï¼Œè€Œæ— éœ€ä¸ºæ¯ä¸ªç‰¹å®šæœåŠ¡ç¼–å†™è‡ªå®šä¹‰é›†æˆã€‚</p>
<p>é€šè¿‡ä½¿ç”¨ MCPï¼ŒAI Agent å¯ä»¥â€œè§¦åŠâ€ç‰©ç†ä¸–ç•Œï¼Œæ‰§è¡Œè¯¸å¦‚æŸ¥çœ‹åº“å­˜ã€æŸ¥è¯¢è¥å…»æ•°æ®ï¼Œç”šè‡³é¢†å–ä¼˜æƒ åˆ¸ç­‰ä»»åŠ¡â€”â€”æ­£å¦‚æˆ‘ä»¬å°†åœ¨æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨éº¦å½“åŠ³æœåŠ¡æ‰€æ¼”ç¤ºçš„é‚£æ ·ã€‚</p>
</section>
<section id="è®¾ç½®-mcp" class="level1">
<h1>è®¾ç½® MCP</h1>
<section id="è·å–å¯†é’¥" class="level2">
<h2 class="anchored" data-anchor-id="è·å–å¯†é’¥">è·å–å¯†é’¥</h2>
<ol type="1">
<li><p>ä» https://openrouter.ai è·å– LLM æ¨¡å‹ API Keyã€‚</p></li>
<li><p>ä» https://open.mcd.cn/mcp è·å–è®¿é—® mcd-mcp çš„ <code>MCD_TOKEN</code>ã€‚</p></li>
</ol>
<p>å¹¶å°†å®ƒä»¬ä¿å­˜åˆ° <code>.env</code> æ–‡ä»¶ä¸­ï¼š</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1">OPENROUTER_API_KEY<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span>xxxxxx</span>
<span id="cb1-2"></span>
<span id="cb1-3">MCD_TOKEN<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span>XXXX</span></code></pre></div>
</details>
</div>
</section>
</section>
<section id="åœ¨ä»£ç ä¸­ä½¿ç”¨-mcp" class="level1">
<h1>åœ¨ä»£ç ä¸­ä½¿ç”¨ MCP</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true" href="">R ä»£ç å®ç°</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false" href="">Python ä»£ç å®ç°</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<section id="åˆå§‹åŒ–é›†æˆ-mcp-å·¥å…·çš„èŠå¤©" class="level3">
<h3 class="anchored" data-anchor-id="åˆå§‹åŒ–é›†æˆ-mcp-å·¥å…·çš„èŠå¤©">åˆå§‹åŒ–é›†æˆ MCP å·¥å…·çš„èŠå¤©</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ellmer)</span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(mcptools)</span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dotenv)</span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load environment variables</span></span>
<span id="cb2-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">load_dot_env</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">file =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".env"</span>)</span>
<span id="cb2-6"></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define model </span></span>
<span id="cb2-8">model_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x-ai/grok-4.1-fast"</span></span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create an ellmer chat object (using OpenRouter as example)</span></span>
<span id="cb3-2">chat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat_openrouter</span>(</span>
<span id="cb3-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">system_prompt =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ‚¨æ˜¯ä¸€ä½éº¦å½“åŠ³åŠ©æ‰‹ã€‚è¯·ç®€çŸ­å›ç­”ã€‚"</span>,</span>
<span id="cb3-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">api_key =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.getenv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>),</span>
<span id="cb3-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model =</span> model_name,</span>
<span id="cb3-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">echo =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"output"</span></span>
<span id="cb3-7">)</span>
<span id="cb3-8"></span>
<span id="cb3-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create dynamic configuration with token from environment</span></span>
<span id="cb3-10">config_data <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb3-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">mcpServers =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb3-12">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcd-mcp"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb3-13">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">command =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"npx"</span>,</span>
<span id="cb3-14">      <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">args =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(</span>
<span id="cb3-15">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcp-remote"</span>,</span>
<span id="cb3-16">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://mcp.mcd.cn/mcp-servers/mcd-mcp"</span>,</span>
<span id="cb3-17">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--header"</span>,</span>
<span id="cb3-18">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Authorization: Bearer "</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.getenv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MCD_TOKEN"</span>))</span>
<span id="cb3-19">      )</span>
<span id="cb3-20">    )</span>
<span id="cb3-21">  )</span>
<span id="cb3-22">)</span>
<span id="cb3-23"></span>
<span id="cb3-24">config_file <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tempfile</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fileext =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".json"</span>)</span>
<span id="cb3-25">jsonlite<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">write_json</span>(config_data, config_file, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">auto_unbox =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb3-26"></span>
<span id="cb3-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load MCP tools via the temporary configuration file</span></span>
<span id="cb3-28">mcd_tools <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mcp_tools</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">config =</span> config_file)</span>
<span id="cb3-29"></span>
<span id="cb3-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Register the MCP tools with the chat</span></span>
<span id="cb3-31">chat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">set_tools</span>(mcd_tools)</span></code></pre></div>
</details>
</div>
</section>
<section id="é›†æˆ-mcp-çš„å¯¹è¯æµ‹è¯•" class="level3">
<h3 class="anchored" data-anchor-id="é›†æˆ-mcp-çš„å¯¹è¯æµ‹è¯•">é›†æˆ MCP çš„å¯¹è¯æµ‹è¯•</h3>
<p>ç°åœ¨ä½ å¯ä»¥æé—®ï¼ŒAI å°†ä½¿ç”¨éº¦å½“åŠ³ MCP å·¥å…·ï¼š</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Query available coupons</span></span>
<span id="cb4-2">chat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ç›®å‰æœ‰ä»€ä¹ˆä¼˜æƒ åˆ¸"</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>æ‚¨å½“å‰å¯ç”¨çš„éº¦éº¦çœä¼˜æƒ åˆ¸ï¼ˆå‡å·²é¢†å–ï¼‰ï¼š

- åŒ—éè›‹é£å‘³éº¦æ»¡åˆ†ç‰¹æƒ ç»„åˆ
- 9.9å…ƒå¤§è–¯æ¡
- 9.9å…ƒæ–°æ´¾ç»„åˆ
- åŒ—éè›‹é£å‘³éº¦æ»¡åˆ†</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Auto-claim all coupons</span></span>
<span id="cb6-2">chat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å¸®æˆ‘é¢†å–æ‰€æœ‰ä¼˜æƒ åˆ¸"</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>æš‚æ— å¯é¢†å–çš„ä¼˜æƒ åˆ¸ï¼Œæ‰€æœ‰å¯ç”¨åˆ¸å·²é¢†å–ï¼</code></pre>
</div>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Get nutrition information</span></span>
<span id="cb8-2">chat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å¸®æˆ‘å»ºè®®ä¸€ä¸ª1000å¡è·¯é‡Œçš„å¥—é¤ï¼Œéœ€è¦åŒ…æ‹¬æœ‰ç³–å¯ä¹ã€‚"</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>**æ¨èå¥—é¤ï¼ˆæ€»çƒ­é‡ â‰ˆ1011 kcalï¼‰ï¼š**

- éº¦è¾£é¸¡è…¿æ±‰å ¡ï¼ˆ485 kcalï¼‰
- å¤§è–¯æ¡ï¼ˆ379 kcalï¼Œä½¿ç”¨9.9å…ƒä¼˜æƒ åˆ¸ï¼‰
- å¯ä¹ä¸­æ¯ï¼ˆ147 kcalï¼‰

è¥å…»å‡è¡¡ï¼Œè¾£å‘³ä¸»é£Ÿ+è–¯æ¡+ç”œé¥®ï¼Œè¶…å€¼ï¼</code></pre>
</div>
</div>
</section>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<section id="åˆå§‹åŒ–é›†æˆ-mcp-å·¥å…·çš„èŠå¤©-1" class="level3">
<h3 class="anchored" data-anchor-id="åˆå§‹åŒ–é›†æˆ-mcp-å·¥å…·çš„èŠå¤©-1">åˆå§‹åŒ–é›†æˆ MCP å·¥å…·çš„èŠå¤©</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb10-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> asyncio</span>
<span id="cb10-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb10-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_mcp_adapters.client <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> MultiServerMCPClient</span>
<span id="cb10-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> ChatOpenAI</span>
<span id="cb10-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langgraph.prebuilt <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> create_react_agent</span>
<span id="cb10-7"></span>
<span id="cb10-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load environment variables</span></span>
<span id="cb10-9">load_dotenv()</span>
<span id="cb10-10"></span>
<span id="cb10-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define model (using OpenRouter)</span></span>
<span id="cb10-12">model_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x-ai/grok-4.1-fast"</span></span>
<span id="cb10-13"></span>
<span id="cb10-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create the LLM with OpenRouter</span></span>
<span id="cb10-15">llm <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ChatOpenAI(</span>
<span id="cb10-16">    model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model_name,</span>
<span id="cb10-17">    openai_api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>),</span>
<span id="cb10-18">    openai_api_base<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb10-19">    temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb10-20">)</span>
<span id="cb10-21"></span>
<span id="cb10-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Build the mcp-remote command with authorization header</span></span>
<span id="cb10-23">mcd_token <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MCD_TOKEN"</span>)</span>
<span id="cb10-24">mcp_command_args <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb10-25">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcp-remote"</span>,</span>
<span id="cb10-26">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://mcp.mcd.cn/mcp-servers/mcd-mcp"</span>,</span>
<span id="cb10-27">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--header"</span>,</span>
<span id="cb10-28">    <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Authorization: Bearer </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>mcd_token<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb10-29">]</span>
<span id="cb10-30"></span>
<span id="cb10-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Configure the MCP client</span></span>
<span id="cb10-32">mcp_config <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb10-33">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcd-mcp"</span>: {</span>
<span id="cb10-34">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"command"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"npx"</span>,</span>
<span id="cb10-35">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"args"</span>: mcp_command_args,</span>
<span id="cb10-36">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"transport"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stdio"</span></span>
<span id="cb10-37">    }</span>
<span id="cb10-38">}</span>
<span id="cb10-39"></span>
<span id="cb10-40"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">async</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> run_mcp_agent(query: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>):</span>
<span id="cb10-41">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""Run an MCP-enabled agent with the given query."""</span></span>
<span id="cb10-42">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create client (no context manager in v0.1.0+)</span></span>
<span id="cb10-43">    client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> MultiServerMCPClient(mcp_config)</span>
<span id="cb10-44">    </span>
<span id="cb10-45">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Get tools from MCP server (await required)</span></span>
<span id="cb10-46">    tools <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">await</span> client.get_tools()</span>
<span id="cb10-47">    </span>
<span id="cb10-48">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create a ReAct agent with the tools</span></span>
<span id="cb10-49">    agent <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> create_react_agent(llm, tools)</span>
<span id="cb10-50">    </span>
<span id="cb10-51">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Run the agent</span></span>
<span id="cb10-52">    result <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">await</span> agent.ainvoke({</span>
<span id="cb10-53">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"messages"</span>: [</span>
<span id="cb10-54">            {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"system"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"You are a helpful assistant that can interact with McDonald's services. Please be concise."</span>},</span>
<span id="cb10-55">            {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: query}</span>
<span id="cb10-56">        ]</span>
<span id="cb10-57">    })</span>
<span id="cb10-58">    </span>
<span id="cb10-59">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Return the final response</span></span>
<span id="cb10-60">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> result[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"messages"</span>][<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>].content</span></code></pre></div>
</details>
</div>
</section>
<section id="é›†æˆ-mcp-çš„å¯¹è¯æµ‹è¯•-1" class="level3">
<h3 class="anchored" data-anchor-id="é›†æˆ-mcp-çš„å¯¹è¯æµ‹è¯•-1">é›†æˆ MCP çš„å¯¹è¯æµ‹è¯•</h3>
<p>ç°åœ¨ä½ å¯ä»¥æé—®ï¼ŒAI å°†ä½¿ç”¨éº¦å½“åŠ³ MCP å·¥å…·ï¼š</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Query available coupons</span></span>
<span id="cb11-2">asyncio.run(run_mcp_agent(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"What coupons are available right now?"</span>))</span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Auto-claim all coupons</span></span>
<span id="cb12-2">asyncio.run(run_mcp_agent(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Help me claim all available coupons."</span>))</span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Check your coupons</span></span>
<span id="cb13-2">asyncio.run(run_mcp_agent(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Show me all my current coupons."</span>))</span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Query campaign calendar</span></span>
<span id="cb14-2">asyncio.run(run_mcp_agent(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"What exciting activities are happening in the next 15 days?"</span>))</span></code></pre></div>
</details>
</div>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Get nutrition information</span></span>
<span id="cb15-2">asyncio.run(run_mcp_agent(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Help me design a 1000-calorie meal that includes a sugared cola and costs no more than 30 yuan."</span>))</span></code></pre></div>
</details>
</div>
</section>
</div>
</div>
</div>
</section>
<section id="åœ¨-agent-ä¸­ä½¿ç”¨-mcp" class="level1">
<h1>åœ¨ Agent ä¸­ä½¿ç”¨ MCP</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" aria-controls="tabset-2-1" aria-selected="true" href="">Claude Code CLI</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" aria-controls="tabset-2-2" aria-selected="false" href="">Gemini CLI</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" aria-controls="tabset-2-3" aria-selected="false" href="">Opencode CLI</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" aria-controls="tabset-2-4" aria-selected="false" href="">Antigravity IDE</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-5" aria-controls="tabset-2-5" aria-selected="false" href="">Trae IDE</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-6" aria-controls="tabset-2-6" aria-selected="false" href="">Cody Buddy</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-7" aria-controls="tabset-2-7" aria-selected="false" href="">Qoder</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-8" aria-controls="tabset-2-8" aria-selected="false" href="">Cline VS Code</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" aria-labelledby="tabset-2-1-tab">
<p>å°† â€œxxxâ€ æ›¿æ¢ä¸ºä½ çš„ Tokenï¼Œå¹¶å°†ä»¥ä¸‹è®¾ç½®æ·»åŠ åˆ°ç”¨æˆ·çº§æˆ–é¡¹ç›®çº§é…ç½®æ–‡ä»¶ä¸­ã€‚</p>
<section id="json-æ–‡ä»¶é…ç½®" class="level3">
<h3 class="anchored" data-anchor-id="json-æ–‡ä»¶é…ç½®">JSON æ–‡ä»¶é…ç½®</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1">{</span>
<span id="cb16-2">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcpServers"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb16-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcd-mcp"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb16-4">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"http"</span>,</span>
<span id="cb16-5">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"url"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://mcp.mcd.cn/mcp-servers/mcd-mcp"</span>,</span>
<span id="cb16-6">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"headers"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> {</span>
<span id="cb16-7">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Authorization"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bearer xxx"</span></span>
<span id="cb16-8">      }</span>
<span id="cb16-9">    }</span>
<span id="cb16-10">  }</span>
<span id="cb16-11">}</span></code></pre></div>
</details>
</div>
<p><em>ç”¨æˆ·çº§é…ç½®æ–‡ä»¶</em>:</p>
<p>~/.claude.json</p>
<p><em>é¡¹ç›®çº§é…ç½®æ–‡ä»¶</em>:</p>
<p>your_project/.mcp.json</p>
</section>
<section id="æé—®-what-coupons-are-available-right-now" class="level3">
<h3 class="anchored" data-anchor-id="æé—®-what-coupons-are-available-right-now">æé—®: â€œWhat coupons are available right now?â€</h3>
<p><img src="https://jcwinning.github.io/LandingPage/posts/MCP/images/clipboard-3343486679.png" class="img-fluid" width="700"></p>
</section>
</div>
<div id="tabset-2-2" class="tab-pane" aria-labelledby="tabset-2-2-tab">
<p>å°† â€œxxxâ€ æ›¿æ¢ä¸ºä½ çš„ Tokenï¼Œå¹¶å°†ä»¥ä¸‹è®¾ç½®æ·»åŠ åˆ°ç”¨æˆ·çº§æˆ–é¡¹ç›®çº§é…ç½®æ–‡ä»¶ä¸­ã€‚</p>
<section id="json-æ–‡ä»¶é…ç½®-1" class="level3">
<h3 class="anchored" data-anchor-id="json-æ–‡ä»¶é…ç½®-1">JSON æ–‡ä»¶é…ç½®</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1">{</span>
<span id="cb17-2"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcpServers"</span>: {</span>
<span id="cb17-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcd-mcp"</span>: {</span>
<span id="cb17-4">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"url"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://mcp.mcd.cn/mcp-servers/mcd-mcp"</span>,</span>
<span id="cb17-5">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"headers"</span>: {</span>
<span id="cb17-6">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Authorization"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bearer xxx"</span></span>
<span id="cb17-7">      }</span>
<span id="cb17-8">    }</span>
<span id="cb17-9">  } </span>
<span id="cb17-10">} </span></code></pre></div>
</details>
</div>
<p><em>ç”¨æˆ·çº§é…ç½®</em>:</p>
<p>~/.gemini/settings.json</p>
<p><em>é¡¹ç›®çº§é…ç½®</em>:</p>
<p>your_project/.gemini/settings.json</p>
</section>
<section id="æé—®-what-coupons-are-available-right-now-1" class="level3">
<h3 class="anchored" data-anchor-id="æé—®-what-coupons-are-available-right-now-1">æé—®: â€œWhat coupons are available right now?â€</h3>
<p><img src="https://jcwinning.github.io/LandingPage/posts/MCP/images/clipboard-1202098417.png" class="img-fluid" width="700"></p>
</section>
</div>
<div id="tabset-2-3" class="tab-pane" aria-labelledby="tabset-2-3-tab">
<p>å°† â€œxxxâ€ æ›¿æ¢ä¸ºä½ çš„ Tokenï¼Œå¹¶å°†ä»¥ä¸‹è®¾ç½®æ·»åŠ åˆ°ç”¨æˆ·çº§æˆ–é¡¹ç›®çº§é…ç½®æ–‡ä»¶ä¸­ã€‚</p>
<section id="json-æ–‡ä»¶é…ç½®-2" class="level3">
<h3 class="anchored" data-anchor-id="json-æ–‡ä»¶é…ç½®-2">JSON æ–‡ä»¶é…ç½®</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1">{</span>
<span id="cb18-2">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$schema"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://opencode.ai/config.json"</span>,</span>
<span id="cb18-3">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcp"</span>: {</span>
<span id="cb18-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcd-mcp"</span>: {</span>
<span id="cb18-5">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"remote"</span>,</span>
<span id="cb18-6">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"url"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://mcp.mcd.cn/mcp-servers/mcd-mcp"</span>,</span>
<span id="cb18-7">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"enabled"</span>: true,</span>
<span id="cb18-8">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"headers"</span>: {</span>
<span id="cb18-9">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Authorization"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bearer xxx"</span></span>
<span id="cb18-10">      }</span>
<span id="cb18-11">    }</span>
<span id="cb18-12">  }</span>
<span id="cb18-13">}</span></code></pre></div>
</details>
</div>
<p><em>ç”¨æˆ·çº§é…ç½®</em>:</p>
<p>~/.opencode.json</p>
<p><em>é¡¹ç›®çº§é…ç½®</em>:</p>
<p>.config/opencode/opencode.json</p>
</section>
<section id="æé—®-what-coupons-are-available-right-now-2" class="level3">
<h3 class="anchored" data-anchor-id="æé—®-what-coupons-are-available-right-now-2">æé—®: â€œWhat coupons are available right now?â€</h3>
<p><img src="https://jcwinning.github.io/LandingPage/posts/MCP/images/clipboard-4015309059.png" class="img-fluid"></p>
</section>
</div>
<div id="tabset-2-4" class="tab-pane" aria-labelledby="tabset-2-4-tab">
<p>å°† â€œxxxâ€ æ›¿æ¢ä¸ºä½ çš„ Tokenï¼Œå¹¶å°†ä»¥ä¸‹è®¾ç½®æ·»åŠ åˆ°ç”¨æˆ·çº§æˆ–é¡¹ç›®çº§é…ç½®æ–‡ä»¶ä¸­ã€‚</p>
<section id="json-æ–‡ä»¶é…ç½®-3" class="level3">
<h3 class="anchored" data-anchor-id="json-æ–‡ä»¶é…ç½®-3">JSON æ–‡ä»¶é…ç½®</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1">{</span>
<span id="cb19-2">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcpServers"</span>: {</span>
<span id="cb19-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcd-mcp"</span>: {</span>
<span id="cb19-4">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"serverUrl"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://mcp.mcd.cn/mcp-servers/mcd-mcp"</span>,</span>
<span id="cb19-5">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"headers"</span>: {</span>
<span id="cb19-6">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Authorization"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bearer xxx"</span></span>
<span id="cb19-7">      }</span>
<span id="cb19-8">    }</span>
<span id="cb19-9">  }</span>
<span id="cb19-10">}</span></code></pre></div>
</details>
</div>
<p><em>ç”¨æˆ·çº§é…ç½®</em>:</p>
<p>~/.gemini/antigravity/mcp_config.json</p>
<p><em>é¡¹ç›®çº§é…ç½®</em>:</p>
<p>æš‚ä¸æ”¯æŒ</p>
</section>
<section id="æé—®-what-coupons-are-available-right-now-3" class="level3">
<h3 class="anchored" data-anchor-id="æé—®-what-coupons-are-available-right-now-3">æé—®: â€œWhat coupons are available right now?â€</h3>
<p><img src="https://jcwinning.github.io/LandingPage/posts/MCP/images/clipboard-4292207523.png" class="img-fluid"></p>
</section>
</div>
<div id="tabset-2-5" class="tab-pane" aria-labelledby="tabset-2-5-tab">
<p>å°† â€œxxxâ€ æ›¿æ¢ä¸ºä½ çš„ Tokenï¼Œå¹¶å°†ä»¥ä¸‹è®¾ç½®æ·»åŠ åˆ°ç”¨æˆ·çº§æˆ–é¡¹ç›®çº§é…ç½®æ–‡ä»¶ä¸­ã€‚</p>
<section id="json-æ–‡ä»¶é…ç½®-4" class="level3">
<h3 class="anchored" data-anchor-id="json-æ–‡ä»¶é…ç½®-4">JSON æ–‡ä»¶é…ç½®</h3>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1">{</span>
<span id="cb20-2">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcpServers"</span>: {</span>
<span id="cb20-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcd-mcp"</span>: {</span>
<span id="cb20-4">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"command"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"npx"</span>,</span>
<span id="cb20-5">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"args"</span>: [</span>
<span id="cb20-6">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mcp-remote"</span>,</span>
<span id="cb20-7">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://mcp.mcd.cn/mcp-servers/mcd-mcp"</span>,</span>
<span id="cb20-8">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--header"</span>,</span>
<span id="cb20-9">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Authorization: Bearer xxx"</span></span>
<span id="cb20-10">      ]</span>
<span id="cb20-11">    }</span>
<span id="cb20-12">  }</span>
<span id="cb20-13">}</span></code></pre></div>
</details>
</div>
<p><em>ç”¨æˆ·çº§é…ç½®</em>:</p>
<p>~/user/Library/Application Support/Trae/User/mcp.json</p>
<p><em>é¡¹ç›®çº§é…ç½®</em>:</p>
<p>your_project/.trae/mcp.json</p>
</section>
<section id="å¼€å¯-trae-é¡¹ç›®çº§è®¾ç½®-setting---beta---enable-project-mcp" class="level3">
<h3 class="anchored" data-anchor-id="å¼€å¯-trae-é¡¹ç›®çº§è®¾ç½®-setting---beta---enable-project-mcp">å¼€å¯ Trae é¡¹ç›®çº§è®¾ç½®: Setting -&gt; Beta -&gt; Enable project MCP</h3>
</section>
<section id="åˆ‡æ¢æ¨¡å¼ä¸º-builder-å¹¶æé—®-what-coupons-are-available-right-now" class="level3">
<h3 class="anchored" data-anchor-id="åˆ‡æ¢æ¨¡å¼ä¸º-builder-å¹¶æé—®-what-coupons-are-available-right-now">åˆ‡æ¢æ¨¡å¼ä¸º <span class="citation" data-cites="Builder">@Builder</span> å¹¶æé—®: â€œWhat coupons are available right now?â€</h3>
<p><img src="https://jcwinning.github.io/LandingPage/posts/MCP/images/clipboard-1218453575.png" class="img-fluid"></p>
</section>
</div>
<div id="tabset-2-6" class="tab-pane" aria-labelledby="tabset-2-6-tab">
<p>Coming soon</p>
</div>
<div id="tabset-2-7" class="tab-pane" aria-labelledby="tabset-2-7-tab">
<p>Coming soon</p>
</div>
<div id="tabset-2-8" class="tab-pane" aria-labelledby="tabset-2-8-tab">
<p>Coming soon</p>
</div>
</div>
</div>


<!-- -->

</section>

 ]]></description>
  <category>AI</category>
  <category>API</category>
  <category>tutorial</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/MCP/</guid>
  <pubDate>Sat, 01 Nov 2025 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/MCP/images/0.png" medium="image" type="image/png" height="74" width="144"/>
</item>
<item>
  <title>R å’Œ Python ä¸­çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG)</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/RAG/</link>
  <description><![CDATA[ 





<section id="ç®€ä»‹" class="level1">
<h1>ç®€ä»‹</h1>
<p>æ£€ç´¢å¢å¼ºç”Ÿæˆ (Retrieval-Augmented Generation, RAG) æ˜¯ä¸€ç§å¼ºå¤§çš„æŠ€æœ¯ï¼Œå®ƒå°†å¤§å‹è¯­è¨€æ¨¡å‹ (LLM) çš„ç”Ÿæˆèƒ½åŠ›ä¸ä¿¡æ¯æ£€ç´¢çš„ç²¾å‡†æ€§ç›¸ç»“åˆã€‚é€šè¿‡å°† LLM çš„å“åº”é”šå®šåœ¨å¤–éƒ¨ã€å¯éªŒè¯çš„æ•°æ®ä¸­ï¼ŒRAG å‡å°‘äº†å¹»è§‰ï¼Œå¹¶ä½¿æ¨¡å‹èƒ½å¤Ÿå›ç­”å…³äºç‰¹å®šã€ç§æœ‰æˆ–æœ€æ–°ä¿¡æ¯çš„é—®é¢˜ã€‚</p>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ R å’Œ Python æ„å»ºä¸€ä¸ª RAG ç³»ç»Ÿã€‚</p>
<p>åœ¨ R ä¸­ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨ <code>ragnar</code> åŒ…å¤„ç† RAG å·¥ä½œæµï¼Œå¹¶ä½¿ç”¨ <code>ellmer</code> æä¾›èŠå¤©ç•Œé¢ã€‚</p>
<p>åœ¨ Python ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>LangChain</code> æ„å»º RAG æµæ°´çº¿ï¼Œä½¿ç”¨ <code>ChromaDB</code> ä½œä¸ºå‘é‡æ•°æ®åº“ï¼Œå¹¶ä½¿ç”¨ <code>OpenAI</code> è¿›è¡Œæ¨¡å‹äº¤äº’ã€‚</p>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªç³»ç»Ÿï¼Œé€šè¿‡çˆ¬å– OpenRouter API çš„æ–‡æ¡£ï¼Œæ¥å›ç­”ä¸å…¶ç›¸å…³çš„é—®é¢˜ã€‚</p>
</section>
<section id="æ•°æ®é‡‡é›†" class="level1">
<h1>æ•°æ®é‡‡é›†</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true" href="">R</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false" href="">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸ºçŸ¥è¯†åº“æ”¶é›†æ•°æ®ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <code>rvest</code> åŒ…ä» OpenRouter æ–‡æ¡£ä¸­çˆ¬å– URLã€‚è¿™å°†ä¸ºæˆ‘ä»¬æä¾›å¾…æ¥å…¥çš„é¡µé¢åˆ—è¡¨ã€‚</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ragnar)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ellmer)</span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dotenv)</span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">load_dot_env</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">file =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".env"</span>)</span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(rvest)</span>
<span id="cb2-2"></span>
<span id="cb2-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¾…çˆ¬å–çš„ URL</span></span>
<span id="cb2-4">url <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/docs/quickstart"</span></span>
<span id="cb2-5"></span>
<span id="cb2-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è¯»å–é¡µé¢çš„ HTML å†…å®¹</span></span>
<span id="cb2-7">page <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_html</span>(url)</span>
<span id="cb2-8"></span>
<span id="cb2-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æå–æ‰€æœ‰å¸¦æœ‰ href çš„ &lt;a&gt; æ ‡ç­¾</span></span>
<span id="cb2-10">links <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> page <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_nodes</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"a"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-12">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">html_attr</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"href"</span>)</span>
<span id="cb2-13"></span>
<span id="cb2-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç§»é™¤ç©ºå€¼å’Œé‡å¤é¡¹</span></span>
<span id="cb2-15">links <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">na.omit</span>(links))</span>
<span id="cb2-16"></span>
<span id="cb2-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¯é€‰ï¼šä»…ä¿ç•™å®Œæ•´ URL</span></span>
<span id="cb2-18">links_full <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai"</span>, links[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grepl</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"^/docs/"</span>, links)])</span>
<span id="cb2-19"></span>
<span id="cb2-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ‰“å°æ‰€æœ‰é“¾æ¥</span></span>
<span id="cb2-21"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(links_full)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "https://openrouter.ai/docs/api-reference/overview"                               
 [2] "https://openrouter.ai/docs/quickstart"                                           
 [3] "https://openrouter.ai/docs/api/reference/overview"                               
 [4] "https://openrouter.ai/docs/sdks/agentic-usage"                                   
 [5] "https://openrouter.ai/docs/guides/overview/principles"                           
 [6] "https://openrouter.ai/docs/guides/overview/models"                               
 [7] "https://openrouter.ai/docs/faq"                                                  
 [8] "https://openrouter.ai/docs/guides/overview/report-feedback"                      
 [9] "https://openrouter.ai/docs/guides/routing/model-fallbacks"                       
[10] "https://openrouter.ai/docs/guides/routing/provider-selection"                    
[11] "https://openrouter.ai/docs/guides/features/presets"                              
[12] "https://openrouter.ai/docs/guides/features/tool-calling"                         
[13] "https://openrouter.ai/docs/guides/features/structured-outputs"                   
[14] "https://openrouter.ai/docs/guides/features/message-transforms"                   
[15] "https://openrouter.ai/docs/guides/features/zero-completion-insurance"            
[16] "https://openrouter.ai/docs/guides/features/zdr"                                  
[17] "https://openrouter.ai/docs/app-attribution"                                      
[18] "https://openrouter.ai/docs/guides/features/guardrails"                           
[19] "https://openrouter.ai/docs/faq#how-are-rate-limits-calculated"                   
[20] "https://openrouter.ai/docs/api/reference/streaming"                              
[21] "https://openrouter.ai/docs/guides/community/frameworks-and-integrations-overview"</code></pre>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸ºçŸ¥è¯†åº“æ”¶é›†æ•°æ®ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <code>requests</code> å’Œ <code>BeautifulSoup</code> ä» OpenRouter æ–‡æ¡£ä¸­çˆ¬å– URLã€‚è¿™å°†ä¸ºæˆ‘ä»¬æä¾›å¾…æ¥å…¥çš„é¡µé¢åˆ—è¡¨ã€‚</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> sys</span>
<span id="cb4-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(sys.executable)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>/Library/Frameworks/Python.framework/Versions/3.13/bin/python3</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> requests</span>
<span id="cb6-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> bs4 <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> BeautifulSoup</span>
<span id="cb6-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb6-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb6-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> markitdown <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> MarkItDown</span>
<span id="cb6-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> io <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> BytesIO</span>
<span id="cb6-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> re</span>
<span id="cb6-8"></span>
<span id="cb6-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ è½½ç¯å¢ƒå˜é‡</span></span>
<span id="cb6-10">load_dotenv()</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è¾…åŠ©å‡½æ•°</span></span>
<span id="cb8-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> fetch_html(url: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">bytes</span>:</span>
<span id="cb8-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ä» URL è·å– HTML å†…å®¹å¹¶ä»¥å­—èŠ‚å½¢å¼è¿”å›ã€‚"""</span></span>
<span id="cb8-4">    resp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> requests.get(url)</span>
<span id="cb8-5">    resp.raise_for_status()</span>
<span id="cb8-6">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> resp.content</span>
<span id="cb8-7"></span>
<span id="cb8-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> html_to_markdown(html_bytes: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">bytes</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>:</span>
<span id="cb8-9">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ä½¿ç”¨ MarkItDown å°† HTML å­—èŠ‚è½¬æ¢ä¸º Markdownã€‚"""</span></span>
<span id="cb8-10">    md <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> MarkItDown()</span>
<span id="cb8-11">    stream <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> BytesIO(html_bytes)</span>
<span id="cb8-12">    result <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> md.convert_stream(stream, mime_type<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text/html"</span>)</span>
<span id="cb8-13">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> result.markdown</span>
<span id="cb8-14"></span>
<span id="cb8-15"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> save_markdown(md_content: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, output_path: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>):</span>
<span id="cb8-16">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å°† Markdown å†…å®¹ä¿å­˜åˆ°æ–‡ä»¶ã€‚"""</span></span>
<span id="cb8-17">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(output_path, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"w"</span>, encoding<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"utf-8"</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> f:</span>
<span id="cb8-18">        f.write(md_content)</span>
<span id="cb8-19"></span>
<span id="cb8-20"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> sanitize_filename(filename: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>:</span>
<span id="cb8-21">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""æ¸…ç† URL ä»¥åˆ›å»ºåˆæ³•çš„æ–‡ä»¶åã€‚"""</span></span>
<span id="cb8-22">    filename <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> re.sub(<span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">r'</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">^</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">https</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">?</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">://</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[^/]</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>, filename)</span>
<span id="cb8-23">    filename <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> re.sub(<span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">r'</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">[^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">\w</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\-</span><span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">_.]</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'_'</span>, filename)</span>
<span id="cb8-24">    filename <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> filename.strip(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'_'</span>)</span>
<span id="cb8-25">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> filename.endswith(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.md'</span>):</span>
<span id="cb8-26">        filename <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.md'</span></span>
<span id="cb8-27">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> filename</span>
<span id="cb8-28"></span>
<span id="cb8-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¾…çˆ¬å–çš„ URL</span></span>
<span id="cb8-30">url <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/docs/quickstart"</span></span>
<span id="cb8-31"></span>
<span id="cb8-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è¯»å–é¡µé¢çš„ HTML å†…å®¹</span></span>
<span id="cb8-33">response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> requests.get(url)</span>
<span id="cb8-34">soup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> BeautifulSoup(response.content, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'html.parser'</span>)</span>
<span id="cb8-35"></span>
<span id="cb8-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æå–æ‰€æœ‰å¸¦æœ‰ href çš„ &lt;a&gt; æ ‡ç­¾</span></span>
<span id="cb8-37">links <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [a[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'href'</span>] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> a <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> soup.find_all(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'a'</span>, href<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)]</span>
<span id="cb8-38"></span>
<span id="cb8-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç§»é™¤é‡å¤é¡¹</span></span>
<span id="cb8-40">links <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(links))</span>
<span id="cb8-41"></span>
<span id="cb8-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä»…ä¿ç•™æ–‡æ¡£çš„å®Œæ•´ URL</span></span>
<span id="cb8-43">links_full <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"https://openrouter.ai</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>link<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> link <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> links <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> link.startswith(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/docs/"</span>)]</span>
<span id="cb8-44"></span>
<span id="cb8-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ˜¾å¼æ·»åŠ  FAQ</span></span>
<span id="cb8-46">links_full.append(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/docs/faq"</span>)</span>
<span id="cb8-47">links_full <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(links_full))</span>
<span id="cb8-48"></span>
<span id="cb8-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ‰“å°æ‰€æœ‰é“¾æ¥</span></span>
<span id="cb8-50"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"æ‰¾åˆ° </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(links_full)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> ä¸ªæ–‡æ¡£ URL"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>æ‰¾åˆ° 21 ä¸ªæ–‡æ¡£ URL</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(links_full)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>['https://openrouter.ai/docs/faq', 'https://openrouter.ai/docs/sdks/agentic-usage', 'https://openrouter.ai/docs/guides/features/message-transforms', 'https://openrouter.ai/docs/api/reference/overview', 'https://openrouter.ai/docs/guides/overview/principles', 'https://openrouter.ai/docs/guides/overview/report-feedback', 'https://openrouter.ai/docs/api-reference/overview', 'https://openrouter.ai/docs/quickstart', 'https://openrouter.ai/docs/guides/community/frameworks-and-integrations-overview', 'https://openrouter.ai/docs/guides/routing/provider-selection', 'https://openrouter.ai/docs/guides/features/structured-outputs', 'https://openrouter.ai/docs/faq#how-are-rate-limits-calculated', 'https://openrouter.ai/docs/guides/features/presets', 'https://openrouter.ai/docs/guides/routing/model-fallbacks', 'https://openrouter.ai/docs/guides/features/guardrails', 'https://openrouter.ai/docs/api/reference/streaming', 'https://openrouter.ai/docs/guides/features/zdr', 'https://openrouter.ai/docs/app-attribution', 'https://openrouter.ai/docs/guides/features/tool-calling', 'https://openrouter.ai/docs/guides/overview/models', 'https://openrouter.ai/docs/guides/features/zero-completion-insurance']</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="å°†ç½‘é¡µå†…å®¹ä¿å­˜åˆ°æœ¬åœ°" class="level1">
<h1>å°†ç½‘é¡µå†…å®¹ä¿å­˜åˆ°æœ¬åœ°</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" aria-controls="tabset-2-1" aria-selected="true" href="">R</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" aria-controls="tabset-2-2" aria-selected="false" href="">Python DuckDB</a></li><li class="nav-item"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" aria-controls="tabset-2-3" aria-selected="false" href="">Python Chroma</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" aria-labelledby="tabset-2-1-tab">
<p>ä¸ºäº†è¿›è¡Œè¯­ä¹‰æœç´¢ï¼Œæˆ‘ä»¬éœ€è¦å°†æ–‡æœ¬æ•°æ®å­˜å‚¨ä¸ºå‘é‡ï¼ˆåµŒå…¥ï¼‰ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <code>DuckDB</code> ä½œä¸ºæœ¬åœ°å‘é‡æ•°æ®åº“ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªåµŒå…¥æ¨¡å‹å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é…ç½® <code>ragnar</code> é€šè¿‡ OpenAI å…¼å®¹çš„ API (SiliconFlow) ä½¿ç”¨ç‰¹å®šçš„åµŒå…¥æ¨¡å‹ã€‚</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pages &lt;- ragnar_find_links(base_url)</span></span>
<span id="cb12-2">pages <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> links_full</span>
<span id="cb12-3">store_location <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openrouter.duckdb"</span></span>
<span id="cb12-4"></span>
<span id="cb12-5">store <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ragnar_store_create</span>(</span>
<span id="cb12-6">    store_location,</span>
<span id="cb12-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">overwrite =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb12-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">embed =</span> \(x) ragnar<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">embed_openai</span>(x,</span>
<span id="cb12-9">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"BAAI/bge-m3"</span>,</span>
<span id="cb12-10">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_url =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://api.siliconflow.cn/v1"</span>,</span>
<span id="cb12-11">        <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">api_key =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.getenv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"siliconflow"</span>)</span>
<span id="cb12-12">    )</span>
<span id="cb12-13">)</span></code></pre></div></div>
</details>
</div>
<p>åœ¨å­˜å‚¨åˆå§‹åŒ–åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ¥å…¥æ•°æ®ã€‚æˆ‘ä»¬éå†ä¹‹å‰çˆ¬å–çš„é¡µé¢åˆ—è¡¨ã€‚å¯¹äºæ¯ä¸ªé¡µé¢ï¼Œæˆ‘ä»¬ï¼š 1. ä»¥ Markdown æ ¼å¼è¯»å–å†…å®¹ã€‚ 2. å°†å†…å®¹æ‹†åˆ†ä¸ºè¾ƒå°çš„å—ï¼ˆçº¦ 600 å­—ç¬¦ï¼‰ã€‚ 3. å°†è¿™äº›å—æ’å…¥åˆ°æˆ‘ä»¬çš„å‘é‡æ•°æ®åº“ä¸­ã€‚</p>
<p>æ­¤è¿‡ç¨‹æ„å»ºäº†æˆ‘ä»¬å°†è¦æœç´¢çš„ç´¢å¼•ã€‚</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># page="https://openrouter.ai/docs/faq"</span></span>
<span id="cb13-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># chunks &lt;- page |&gt;read_as_markdown() |&gt;markdown_chunk(target_size = 2000)</span></span>
<span id="cb13-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ragnar_chunks_view(chunks)</span></span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> (page <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> pages) {</span>
<span id="cb14-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">message</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ­£åœ¨æ¥å…¥: "</span>, page)</span>
<span id="cb14-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(page)</span>
<span id="cb14-4">    chunks <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> page <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb14-5">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_as_markdown</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span></span>
<span id="cb14-6">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">markdown_chunk</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">target_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>)</span>
<span id="cb14-7">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print(chunks)</span></span>
<span id="cb14-8">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print('chunks done')</span></span>
<span id="cb14-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ragnar_store_insert</span>(store, chunks)</span>
<span id="cb14-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ’å…¥å®Œæˆ"</span>)</span>
<span id="cb14-11">}</span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ragnar_store_build_index</span>(store)</span>
<span id="cb15-2"></span>
<span id="cb15-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é‡Šæ”¾è¿æ¥ä»¥ä¾›åç»­ Python ä»£ç ä½¿ç”¨</span></span>
<span id="cb15-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span>(store)</span>
<span id="cb15-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gc</span>()</span></code></pre></div></div>
</details>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb16-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> llama_index.core <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> SimpleDirectoryReader, VectorStoreIndex, StorageContext, Settings</span>
<span id="cb16-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> llama_index.vector_stores.duckdb <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> DuckDBVectorStore</span>
<span id="cb16-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> llama_index.embeddings.openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAIEmbedding</span>
<span id="cb16-5"></span>
<span id="cb16-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># --- 1. é…ç½® ---</span></span>
<span id="cb16-7"></span>
<span id="cb16-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¡®ä¿ API å¯†é’¥å¯ç”¨</span></span>
<span id="cb16-9">openrouter_api_key <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æˆ–ç›´æ¥ç²˜è´´å­—ç¬¦ä¸²</span></span>
<span id="cb16-10"></span>
<span id="cb16-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆå§‹åŒ–æŒ‡å‘ OpenRouter çš„åµŒå…¥æ¨¡å‹</span></span>
<span id="cb16-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æˆ‘ä»¬ä½¿ç”¨ OpenAI ç±»ï¼Œå› ä¸º OpenRouter ä½¿ç”¨äº† OpenAI å…¼å®¹çš„ API ç»“æ„</span></span>
<span id="cb16-13">embed_model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAIEmbedding(</span>
<span id="cb16-14">    api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>openrouter_api_key,</span>
<span id="cb16-15">    base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb16-16">    model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qwen/qwen3-embedding-8b"</span>  </span>
<span id="cb16-17">)</span>
<span id="cb16-18"></span>
<span id="cb16-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ›´æ–°å…¨å±€è®¾ç½®ï¼Œä»¥ä¾¿ LlamaIndex çŸ¥é“ä½¿ç”¨æ­¤æ¨¡å‹</span></span>
<span id="cb16-20">Settings.embed_model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> embed_model</span>
<span id="cb16-21">Settings.chunk_size <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span></span>
<span id="cb16-22">Settings.chunk_overlap <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span></span>
<span id="cb16-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># --- 2. æ¥å…¥ä¸ç´¢å¼• ---</span></span>
<span id="cb16-24"></span>
<span id="cb16-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ è½½æ•°æ®</span></span>
<span id="cb16-26">documents <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> SimpleDirectoryReader(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"markdown_docs"</span>).load_data()</span>
<span id="cb16-27"></span>
<span id="cb16-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆå§‹åŒ– DuckDB å‘é‡æ•°æ®åº“</span></span>
<span id="cb16-29">vector_store <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> DuckDBVectorStore(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openrouter.duckdb"</span>, persist_dir<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"./persist/"</span>)</span>
<span id="cb16-30">storage_context <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> StorageContext.from_defaults(vector_store<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>vector_store)</span>
<span id="cb16-31"></span>
<span id="cb16-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»ºç´¢å¼•</span></span>
<span id="cb16-33"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è¿™å°†è‡ªåŠ¨ä½¿ç”¨ Settings ä¸­å®šä¹‰çš„ Qwen åµŒå…¥</span></span>
<span id="cb16-34">index <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> VectorStoreIndex.from_documents(</span>
<span id="cb16-35">    documents, </span>
<span id="cb16-36">    storage_context<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>storage_context</span>
<span id="cb16-37">)</span></code></pre></div></div>
</details>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" aria-labelledby="tabset-2-3-tab">
<p>ä¸ºäº†è¿›è¡Œè¯­ä¹‰æœç´¢ï¼Œæˆ‘ä»¬éœ€è¦å°†æ–‡æœ¬æ•°æ®è½¬æ¢ä¸ºå‘é‡ï¼ˆåµŒå…¥ï¼‰è¿›è¡Œå­˜å‚¨ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <code>ChromaDB</code> ä½œä¸ºæœ¬åœ°å‘é‡æ•°æ®åº“ã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªåµŒå…¥æ¨¡å‹æŠŠæ–‡æœ¬è½¬ä¸ºå‘é‡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é…ç½®äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>OpenRouterEmbeddings</code> ç±»ï¼Œé€šè¿‡ OpenRouter API ä½¿ç”¨ <code>qwen/qwen3-embedding-8b</code> æ¨¡å‹ã€‚</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb17-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_core.embeddings <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Embeddings</span>
<span id="cb17-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_chroma <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Chroma</span>
<span id="cb17-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> typing <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> List</span>
<span id="cb17-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb17-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb17-7"></span>
<span id="cb17-8">load_dotenv()</span>
<span id="cb17-9"></span>
<span id="cb17-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é’ˆå¯¹ OpenRouter API çš„è‡ªå®šä¹‰åµŒå…¥ç±»</span></span>
<span id="cb17-11"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> OpenRouterEmbeddings(Embeddings):</span>
<span id="cb17-12">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""é’ˆå¯¹ OpenRouter API çš„è‡ªå®šä¹‰åµŒå…¥ç±»ã€‚"""</span></span>
<span id="cb17-13">    </span>
<span id="cb17-14">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, api_key: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, model: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text-embedding-3-small"</span>):</span>
<span id="cb17-15">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb17-16">            base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb17-17">            api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>api_key,</span>
<span id="cb17-18">        )</span>
<span id="cb17-19">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model</span>
<span id="cb17-20">    </span>
<span id="cb17-21">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> embed_documents(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, texts: List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>]) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]]:</span>
<span id="cb17-22">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å¯¹æ–‡æ¡£åˆ—è¡¨è¿›è¡ŒåµŒå…¥ã€‚"""</span></span>
<span id="cb17-23">        response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.client.embeddings.create(</span>
<span id="cb17-24">            extra_headers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb17-25">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HTTP-Referer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://ai-blog.com"</span>,</span>
<span id="cb17-26">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-Title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI Blog RAG"</span>,</span>
<span id="cb17-27">            },</span>
<span id="cb17-28">            model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.model,</span>
<span id="cb17-29">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>texts,</span>
<span id="cb17-30">            encoding_format<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"float"</span></span>
<span id="cb17-31">        )</span>
<span id="cb17-32">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> [item.embedding <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> response.data]</span>
<span id="cb17-33">    </span>
<span id="cb17-34">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> embed_query(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, text: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]:</span>
<span id="cb17-35">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å¯¹å•ä¸ªæŸ¥è¯¢è¿›è¡ŒåµŒå…¥ã€‚"""</span></span>
<span id="cb17-36">        response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.client.embeddings.create(</span>
<span id="cb17-37">            extra_headers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb17-38">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HTTP-Referer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://ai-blog.com"</span>,</span>
<span id="cb17-39">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-Title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI Blog RAG"</span>,</span>
<span id="cb17-40">            },</span>
<span id="cb17-41">            model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.model,</span>
<span id="cb17-42">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>text,</span>
<span id="cb17-43">            encoding_format<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"float"</span></span>
<span id="cb17-44">        )</span>
<span id="cb17-45">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response.data[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].embedding</span>
<span id="cb17-46"></span>
<span id="cb17-47"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è·å– OpenRouter API å¯†é’¥</span></span>
<span id="cb17-48">openrouter_api_key <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>)</span>
<span id="cb17-49"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> openrouter_api_key:</span>
<span id="cb17-50">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">raise</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">ValueError</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æœªåœ¨ç¯å¢ƒå˜é‡ä¸­æ‰¾åˆ° OPENROUTER_API_KEY"</span>)</span>
<span id="cb17-51"></span>
<span id="cb17-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ OpenRouter åˆ›å»ºåµŒå…¥å®ä¾‹</span></span>
<span id="cb17-53">embeddings <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenRouterEmbeddings(</span>
<span id="cb17-54">    api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>openrouter_api_key,</span>
<span id="cb17-55">    model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qwen/qwen3-embedding-8b"</span></span>
<span id="cb17-56">)</span>
<span id="cb17-57"></span>
<span id="cb17-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å®šä¹‰å‘é‡æ•°æ®åº“ä½ç½®</span></span>
<span id="cb17-59">persist_directory <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chroma_db_data"</span></span></code></pre></div></div>
</details>
</div>
<p>åœ¨å­˜å‚¨åˆå§‹åŒ–åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ¥å…¥æ•°æ®ã€‚æˆ‘ä»¬éå†ä¹‹å‰ä¿å­˜çš„ Markdown æ–‡ä»¶ã€‚å¯¹äºæ¯ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬ï¼š 1. åŠ è½½å†…å®¹ã€‚ 2. ä½¿ç”¨ <code>RecursiveCharacterTextSplitter</code> å°†å†…å®¹æ‹†åˆ†ä¸ºè¾ƒå°çš„å—ï¼ˆçº¦ 2000 å­—ç¬¦ï¼‰ã€‚ 3. ä»è¿™äº›å—ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Chroma</code> å‘é‡æ•°æ®åº“ã€‚</p>
<p>æ­¤è¿‡ç¨‹æ„å»ºäº†æˆ‘ä»¬å°†è¦æœç´¢çš„ç´¢å¼•ã€‚</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_core.documents <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Document</span>
<span id="cb18-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_text_splitters <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> RecursiveCharacterTextSplitter</span>
<span id="cb18-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> shutil</span>
<span id="cb18-4"></span>
<span id="cb18-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ è½½ Markdown æ–‡ä»¶çš„è¾…åŠ©å‡½æ•°</span></span>
<span id="cb18-6"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> load_markdown_files(directory: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>[Document]:</span>
<span id="cb18-7">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ä»ç›®å½•åŠ è½½æ‰€æœ‰ Markdown æ–‡ä»¶å¹¶åˆ›å»º Document å¯¹è±¡ã€‚"""</span></span>
<span id="cb18-8">    documents <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb18-9">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> os.path.exists(directory):</span>
<span id="cb18-10">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> documents</span>
<span id="cb18-11">        </span>
<span id="cb18-12">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> filename <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> os.listdir(directory):</span>
<span id="cb18-13">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> filename.endswith(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.md'</span>):</span>
<span id="cb18-14">            filepath <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.path.join(directory, filename)</span>
<span id="cb18-15">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(filepath, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'r'</span>, encoding<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'utf-8'</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> f:</span>
<span id="cb18-16">                content <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> f.read()</span>
<span id="cb18-17">                doc <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> Document(</span>
<span id="cb18-18">                    page_content<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>content,</span>
<span id="cb18-19">                    metadata<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb18-20">                        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source"</span>: filename,</span>
<span id="cb18-21">                        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"filepath"</span>: filepath</span>
<span id="cb18-22">                    }</span>
<span id="cb18-23">                )</span>
<span id="cb18-24">                documents.append(doc)</span>
<span id="cb18-25">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> documents</span>
<span id="cb18-26"></span>
<span id="cb18-27"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»º Markdown æ–‡ä»¶çš„è¾“å‡ºç›®å½•</span></span>
<span id="cb18-28">output_dir <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"markdown_docs"</span></span>
<span id="cb18-29">os.makedirs(output_dir, exist_ok<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb18-30"></span>
<span id="cb18-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å°†æ¯ä¸ª URL è½¬æ¢ä¸º Markdown å¹¶ä¿å­˜</span></span>
<span id="cb18-32"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> i, link_url <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">enumerate</span>(links_full, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>):</span>
<span id="cb18-33">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb18-34">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"æ­£åœ¨å¤„ç† </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>i<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">/</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(links_full)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>link_url<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb18-35">        html_content <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> fetch_html(link_url)</span>
<span id="cb18-36">        markdown_content <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> html_to_markdown(html_content)</span>
<span id="cb18-37">        filename <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> sanitize_filename(link_url)</span>
<span id="cb18-38">        output_path <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.path.join(output_dir, filename)</span>
<span id="cb18-39">        save_markdown(markdown_content, output_path)</span>
<span id="cb18-40">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"  âœ“ å·²ä¿å­˜è‡³ </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>output_path<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb18-41">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb18-42">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"  âœ— å¤„ç† </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>link_url<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> æ—¶å‡ºé”™: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(e)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb18-43"></span>
<span id="cb18-44"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ è½½ Markdown æ–‡æ¡£</span></span>
<span id="cb18-45">documents <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> load_markdown_files(output_dir)</span>
<span id="cb18-46"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">åŠ è½½äº† </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(documents)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> ä¸ª Markdown æ–‡æ¡£"</span>)</span>
<span id="cb18-47"></span>
<span id="cb18-48"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å°†æ–‡æ¡£æ‹†åˆ†ä¸ºå—</span></span>
<span id="cb18-49">text_splitter <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> RecursiveCharacterTextSplitter(</span>
<span id="cb18-50">    chunk_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2000</span>,</span>
<span id="cb18-51">    chunk_overlap<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>,</span>
<span id="cb18-52">    length_function<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>,</span>
<span id="cb18-53">    is_separator_regex<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>,</span>
<span id="cb18-54">)</span>
<span id="cb18-55"></span>
<span id="cb18-56">splits <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> text_splitter.split_documents(documents)</span>
<span id="cb18-57"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"æ‹†åˆ†ä¸º </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(splits)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> ä¸ªå—"</span>)</span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¦‚æœæ•°æ®åº“å·²å­˜åœ¨ï¼Œåˆ™å°†å…¶ç§»é™¤</span></span>
<span id="cb19-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> os.path.exists(persist_directory):</span>
<span id="cb19-3">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"æ­£åœ¨ç§»é™¤ä½äº </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>persist_directory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> çš„ç°æœ‰æ•°æ®åº“..."</span>)</span>
<span id="cb19-4">    shutil.rmtree(persist_directory)</span>
<span id="cb19-5"></span>
<span id="cb19-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»ºæ–°çš„å‘é‡æ•°æ®åº“</span></span>
<span id="cb19-7">vectorstore <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> Chroma.from_documents(</span>
<span id="cb19-8">    documents<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>splits,</span>
<span id="cb19-9">    embedding<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>embeddings,</span>
<span id="cb19-10">    persist_directory<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>persist_directory</span>
<span id="cb19-11">)</span>
<span id="cb19-12"></span>
<span id="cb19-13"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">âœ“ æˆåŠŸåˆ›å»ºäº†åŒ…å« </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(splits)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> ä¸ªå—çš„ ChromaDBï¼"</span>)</span>
<span id="cb19-14"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"âœ“ æ•°æ®åº“å·²ä¿å­˜è‡³: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>persist_directory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="æ£€ç´¢" class="level1">
<h1>æ£€ç´¢</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" aria-controls="tabset-3-1" aria-selected="true" href="">R</a></li><li class="nav-item"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" aria-controls="tabset-3-2" aria-selected="false" href="">Python DuckDB</a></li><li class="nav-item"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" aria-controls="tabset-3-3" aria-selected="false" href="">Python Chroma</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" aria-labelledby="tabset-3-1-tab">
<p>ç°åœ¨æˆ‘ä»¬çš„çŸ¥è¯†åº“å·²ç»å¡«å……å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•æ£€ç´¢ç³»ç»Ÿã€‚æˆ‘ä»¬å¯ä»¥æå‡ºä¸€ä¸ªç‰¹å®šçš„é—®é¢˜ï¼Œä¾‹å¦‚â€œä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“ï¼Ÿ(What are model variants?)â€ï¼Œå¹¶æŸ¥è¯¢å­˜å‚¨åº“ä»¥æŸ¥çœ‹å“ªäº›æ–‡æœ¬å—æœ€ç›¸å…³ã€‚è¿™ç¡®è®¤äº†æˆ‘ä»¬çš„åµŒå…¥å’Œæœç´¢æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
<section id="é—®é¢˜ä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“what-are-model-variants" class="level3">
<h3 class="anchored" data-anchor-id="é—®é¢˜ä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“what-are-model-variants">é—®é¢˜ï¼šä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“ï¼Ÿ(What are model variants?)</h3>
<p>RAG ç»“æœï¼š</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">store_location <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openrouter.duckdb"</span></span>
<span id="cb20-2">text <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"What are model variants?"</span></span>
<span id="cb20-3"></span>
<span id="cb20-4">relevant_chunks <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tryCatch</span>({</span>
<span id="cb20-5">    store <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ragnar_store_connect</span>(store_location)</span>
<span id="cb20-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ragnar_retrieve</span>(store, text, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">top_k =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb20-7">}, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(e) {</span>
<span id="cb20-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">message</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"âš ï¸ æ— æ³•è¿æ¥åˆ° DuckDB (å¯èƒ½è¢«é”å®š): "</span>, e<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>message)</span>
<span id="cb20-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>)</span>
<span id="cb20-10">})</span>
<span id="cb20-11"></span>
<span id="cb20-12"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.null</span>(relevant_chunks)) {</span>
<span id="cb20-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ£€ç´¢åˆ°"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(relevant_chunks), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä¸ªæ–‡æœ¬å—ï¼š</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb20-14">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_len</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(relevant_chunks))) {</span>
<span id="cb20-15">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sprintf</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--- å— %d ---</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">%s</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">\n\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, i, relevant_chunks<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>text[i]))</span>
<span id="cb20-16">    }</span>
<span id="cb20-17">} <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb20-18">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"çŸ¥è¯†åº“å½“å‰ä¸å¯ç”¨ï¼ˆç”±äºæ•°æ®åº“é”å®šï¼‰ã€‚"</span>)</span>
<span id="cb20-19">}</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>æ£€ç´¢åˆ° 6 ä¸ªæ–‡æœ¬å—ï¼š

--- å— 1 ---
[Zero Completion Insurance](/docs/features/zero-completion-insurance)
  + [Provisioning API Keys](/docs/features/provisioning-api-keys)
  + [App Attribution](/docs/app-attribution)
* API Reference

  + [Overview](/docs/api-reference/overview)
  + [Streaming](/docs/api-reference/streaming)
  + [Embeddings](/docs/api-reference/embeddings)
  + [Limits](/docs/api-reference/limits)
  + [Authentication](/docs/api-reference/authentication)
  + [Parameters](/docs/api-reference/parameters)
  + [Errors](/docs/api-reference/errors)
  + Responses API
  + beta.responses
  + Analytics
  + Credits
  + Embeddings
  + Generations
  + Models
  + Endpoints
  + Parameters
  + Providers
  + API Keys
  + O Auth
  + Chat
  + Completions
* SDK Reference (BETA)

  + [Python SDK](/docs/sdks/python)
  + [TypeScript SDK](/docs/sdks/typescript)
* Use Cases

  + [BYOK](/docs/use-cases/byok)
  + [Crypto API](/docs/use-cases/crypto-api)
  + [OAuth PKCE](/docs/use-cases/oauth-pkce)
  + [MCP Servers](/docs/use-cases/mcp-servers)
  + [Organization Management](/docs/use-cases/organization-management)
  + [For Providers](/docs/use-cases/for-providers)
  + [Reasoning Tokens](/docs/use-cases/reasoning-tokens)
  + [Usage Accounting](/docs/use-cases/usage-accounting)
  + [User Tracking](/docs/use-cases/user-tracking)
* Community

  + [Frameworks and Integrations Overview](/docs/community/frameworks-and-integrations-overview)
  + [Effect AI SDK](/docs/community/effect-ai-sdk)
  + [Arize](/docs/community/arize)
  + [LangChain](/docs/community/lang-chain)
  + [LiveKit](/docs/community/live-kit)
  + [Langfuse](/docs/community/langfuse)
  + [Mastra](/docs/community/mastra)
  + [OpenAI SDK](/docs/community/open-ai-sdk)
  + [PydanticAI](/docs/community/pydantic-ai)
  + [Vercel AI SDK](/docs/community/vercel-ai-sdk)
  + [Xcode](/docs/community/xcode)
  + [Zapier](/docs/community/zapier)
  + [Discord](https://discord.gg/openrouter)

Light

On this page

* [Requests](#requests)
* [Completions Request Format](#completions-request-format)
* [Headers](#headers)
* [Assistant Prefill](#assistant-prefill)
* [Responses](#responses)
* [CompletionsResponse Format](#completionsresponse-format)
* [Finish Reason](#finish-reason)
* [Querying Cost and Stats](#querying-cost-and-stats)

[API Reference](/docs/api-reference/overview)



--- å— 2 ---
###### How frequently are new models added?

We work on adding models as quickly as we can. We often have partnerships with
the labs releasing models and can release models as soon as they are
available. If there is a model missing that youâ€™d like OpenRouter to support, feel free to message us on
[Discord](https://discord.gg/openrouter).

###### What are model variants?

Variants are suffixes that can be added to the model slug to change its behavior.

Static variants can only be used with specific models and these are listed in our [models api](https://openrouter.ai/api/v1/models).

1. `:free` - The model is always provided for free and has low rate limits.
2. `:beta` - The model is not moderated by OpenRouter.
3. `:extended` - The model has longer than usual context length.
4. `:exacto` - The model only uses OpenRouter-curated high-quality endpoints.
5. `:thinking` - The model supports reasoning by default.

Dynamic variants can be used on all models and they change the behavior of how the request is routed or used.

1. `:online` - All requests will run a query to extract web results that are attached to the prompt.
2. `:nitro` - Providers will be sorted by throughput rather than the default sort, optimizing for faster response times.
3. `:floor` - Providers will be sorted by price rather than the default sort, prioritizing the most cost-effective options.

###### I am an inference provider, how can I get listed on OpenRouter?

You can read our requirements at the [Providers
page](/docs/use-cases/for-providers). If you would like to contact us, the best
place to reach us is over email.

###### What is the expected latency/response time for different models?

For each model on OpenRouter we show the latency (time to first token) and the token
throughput for all providers. You can use this to estimate how long requests
will take. If you would like to optimize for throughput you can use the
`:nitro` variant to route to the fastest provider.



--- å— 3 ---
###### How frequently are new models added?

We work on adding models as quickly as we can. We often have partnerships with
the labs releasing models and can release models as soon as they are
available. If there is a model missing that youâ€™d like OpenRouter to support, feel free to message us on
[Discord](https://discord.gg/openrouter).

###### What are model variants?

Variants are suffixes that can be added to the model slug to change its behavior.

Static variants can only be used with specific models and these are listed in our [models api](https://openrouter.ai/api/v1/models).

1. `:free` - The model is always provided for free and has low rate limits.
2. `:beta` - The model is not moderated by OpenRouter.
3. `:extended` - The model has longer than usual context length.
4. `:exacto` - The model only uses OpenRouter-curated high-quality endpoints.
5. `:thinking` - The model supports reasoning by default.

Dynamic variants can be used on all models and they change the behavior of how the request is routed or used.

1. `:online` - All requests will run a query to extract web results that are attached to the prompt.
2. `:nitro` - Providers will be sorted by throughput rather than the default sort, optimizing for faster response times.
3. `:floor` - Providers will be sorted by price rather than the default sort, prioritizing the most cost-effective options.

###### I am an inference provider, how can I get listed on OpenRouter?

You can read our requirements at the [Providers
page](/docs/use-cases/for-providers). If you would like to contact us, the best
place to reach us is over email.

###### What is the expected latency/response time for different models?

For each model on OpenRouter we show the latency (time to first token) and the token
throughput for all providers. You can use this to estimate how long requests
will take. If you would like to optimize for throughput you can use the
`:nitro` variant to route to the fastest provider.



--- å— 4 ---
## The `models` parameter

The `models` parameter lets you automatically try other models if the primary modelâ€™s providers are down, rate-limited, or refuse to reply due to content moderation.

TypeScript SDKTypeScript (fetch)Python

```code-block-root not-prose rounded-b-[inherit] rounded-t-none
|  |  |
| --- | --- |
| 1 | import { OpenRouter } from '@openrouter/sdk'; |
| 2 |  |
| 3 | const openRouter = new OpenRouter({ |
| 4 | apiKey: '&lt;OPENROUTER_API_KEY&gt;', |
| 5 | }); |
| 6 |  |
| 7 | const completion = await openRouter.chat.send({ |
| 8 | models: ['anthropic/claude-3.5-sonnet', 'gryphe/mythomax-l2-13b'], |
| 9 | messages: [ |
| 10 | { |
| 11 | role: 'user', |
| 12 | content: 'What is the meaning of life?', |
| 13 | }, |
| 14 | ], |
| 15 | }); |
| 16 |  |
| 17 | console.log(completion.choices[0].message.content); |
```

If the model you selected returns an error, OpenRouter will try to use the fallback model instead. If the fallback model is down or returns an error, OpenRouter will return that error.

By default, any error can trigger the use of a fallback model, including context length validation errors, moderation flags for filtered models, rate-limiting, and downtime.

Requests are priced using the model that was ultimately used, which will be returned in the `model` attribute of the response body.

## Using with OpenAI SDK

To use the `models` array with the OpenAI SDK, include it in the `extra_body` parameter. In the example below, gpt-4o will be tried first, and the `models` array will be tried in order as fallbacks.

PythonTypeScript



--- å— 5 ---
[Web Search](/docs/features/web-search)
  + [Zero Completion Insurance](/docs/features/zero-completion-insurance)
  + [Provisioning API Keys](/docs/features/provisioning-api-keys)
  + [App Attribution](/docs/app-attribution)
* API Reference

  + [Overview](/docs/api-reference/overview)
  + [Streaming](/docs/api-reference/streaming)
  + [Embeddings](/docs/api-reference/embeddings)
  + [Limits](/docs/api-reference/limits)
  + [Authentication](/docs/api-reference/authentication)
  + [Parameters](/docs/api-reference/parameters)
  + [Errors](/docs/api-reference/errors)
  + Responses API
  + beta.responses
  + Analytics
  + Credits
  + Embeddings
  + Generations
  + Models
  + Endpoints
  + Parameters
  + Providers
  + API Keys
  + O Auth
  + Chat
  + Completions
* SDK Reference (BETA)

  + [Python SDK](/docs/sdks/python)
  + [TypeScript SDK](/docs/sdks/typescript)
* Use Cases

  + [BYOK](/docs/use-cases/byok)
  + [Crypto API](/docs/use-cases/crypto-api)
  + [OAuth PKCE](/docs/use-cases/oauth-pkce)
  + [MCP Servers](/docs/use-cases/mcp-servers)
  + [Organization Management](/docs/use-cases/organization-management)
  + [For Providers](/docs/use-cases/for-providers)
  + [Reasoning Tokens](/docs/use-cases/reasoning-tokens)
  + [Usage Accounting](/docs/use-cases/usage-accounting)
  + [User Tracking](/docs/use-cases/user-tracking)
* Community

  + [Frameworks and Integrations Overview](/docs/community/frameworks-and-integrations-overview)
  + [Effect AI SDK](/docs/community/effect-ai-sdk)
  + [Arize](/docs/community/arize)
  + [LangChain](/docs/community/lang-chain)
  + [LiveKit](/docs/community/live-kit)
  + [Langfuse](/docs/community/langfuse)
  + [Mastra](/docs/community/mastra)
  + [OpenAI SDK](/docs/community/open-ai-sdk)
  + [PydanticAI](/docs/community/pydantic-ai)
  + [Vercel AI SDK](/docs/community/vercel-ai-sdk)
  + [Xcode](/docs/community/xcode)
  + [Zapier](/docs/community/zapier)
  + [Discord](https://discord.gg/openrouter)

Light

On this page

* [Within OpenRouter](#within-openrouter)
* [Provider Policies](#provider-policies)
* [Training on Prompts](#training-on-prompts)
* [Data Retention &amp; Logging](#data-retention--logging)
* [Enterprise EU in-region routing](#enterprise-eu-in-region-routing)

[Features](/docs/features/privacy-and-logging)



--- å— 6 ---
[Web Search](/docs/features/web-search)
  + [Zero Completion Insurance](/docs/features/zero-completion-insurance)
  + [Provisioning API Keys](/docs/features/provisioning-api-keys)
  + [App Attribution](/docs/app-attribution)
* API Reference

  + [Overview](/docs/api-reference/overview)
  + [Streaming](/docs/api-reference/streaming)
  + [Embeddings](/docs/api-reference/embeddings)
  + [Limits](/docs/api-reference/limits)
  + [Authentication](/docs/api-reference/authentication)
  + [Parameters](/docs/api-reference/parameters)
  + [Errors](/docs/api-reference/errors)
  + Responses API
  + beta.responses
  + Analytics
  + Credits
  + Embeddings
  + Generations
  + Models
  + Endpoints
  + Parameters
  + Providers
  + API Keys
  + O Auth
  + Chat
  + Completions
* SDK Reference (BETA)

  + [Python SDK](/docs/sdks/python)
  + [TypeScript SDK](/docs/sdks/typescript)
* Use Cases

  + [BYOK](/docs/use-cases/byok)
  + [Crypto API](/docs/use-cases/crypto-api)
  + [OAuth PKCE](/docs/use-cases/oauth-pkce)
  + [MCP Servers](/docs/use-cases/mcp-servers)
  + [Organization Management](/docs/use-cases/organization-management)
  + [For Providers](/docs/use-cases/for-providers)
  + [Reasoning Tokens](/docs/use-cases/reasoning-tokens)
  + [Usage Accounting](/docs/use-cases/usage-accounting)
  + [User Tracking](/docs/use-cases/user-tracking)
* Community

  + [Frameworks and Integrations Overview](/docs/community/frameworks-and-integrations-overview)
  + [Effect AI SDK](/docs/community/effect-ai-sdk)
  + [Arize](/docs/community/arize)
  + [LangChain](/docs/community/lang-chain)
  + [LiveKit](/docs/community/live-kit)
  + [Langfuse](/docs/community/langfuse)
  + [Mastra](/docs/community/mastra)
  + [OpenAI SDK](/docs/community/open-ai-sdk)
  + [PydanticAI](/docs/community/pydantic-ai)
  + [Vercel AI SDK](/docs/community/vercel-ai-sdk)
  + [Xcode](/docs/community/xcode)
  + [Zapier](/docs/community/zapier)
  + [Discord](https://discord.gg/openrouter)

Light

On this page

* [How OpenRouter Manages Data Policies](#how-openrouter-manages-data-policies)
* [Per-Request ZDR Enforcement](#per-request-zdr-enforcement)
* [Usage](#usage)
* [Caching](#caching)
* [OpenRouterâ€™s Retention Policy](#openrouters-retention-policy)
* [Zero Retention Endpoints](#zero-retention-endpoints)

[Features](/docs/features/privacy-and-logging)</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é‡Šæ”¾è¿æ¥ä»¥é¿å…æ–‡ä»¶é”å®š</span></span>
<span id="cb22-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">exists</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"store"</span>)) {</span>
<span id="cb22-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span>(store)</span>
<span id="cb22-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gc</span>()</span>
<span id="cb22-5">}</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          used  (Mb) gc trigger  (Mb) limit (Mb) max used  (Mb)
Ncells 2385439 127.4    4675528 249.8         NA  3250438 173.6
Vcells 4239754  32.4   10146329  77.5      16384  5558189  42.5</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ragnar_store_inspect(store)</span></span>
<span id="cb24-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#ragnar_chunks_view(chunks)</span></span></code></pre></div></div>
</details>
</div>
</section>
</div>
<div id="tabset-3-2" class="tab-pane" aria-labelledby="tabset-3-2-tab">
<p>åœ¨ Python ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>LlamaIndex</code> ä¸æˆ‘ä»¬çš„ DuckDB å‘é‡æ•°æ®åº“è¿›è¡Œäº¤äº’ã€‚åœ¨æ­¤æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬å°†é…ç½®åµŒå…¥æ¨¡å‹å¹¶ä¸ºæŸ¥è¯¢æ£€ç´¢å‰å‡ ä¸ªç›¸å…³å—ï¼Œå¹¶å°†å®ƒä»¬ä¿å­˜åˆ°æ–‡ä»¶ä¸­ä»¥ä¾›æ£€æŸ¥ã€‚æˆ‘ä»¬æš‚ä¸ä½¿ç”¨ LLM è¿›è¡Œç”Ÿæˆï¼Œä»…ä¸“æ³¨äºéªŒè¯æ£€ç´¢è´¨é‡ã€‚</p>
<section id="é—®é¢˜ä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“what-are-model-variants-1" class="level3">
<h3 class="anchored" data-anchor-id="é—®é¢˜ä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“what-are-model-variants-1">é—®é¢˜ï¼šä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“ï¼Ÿ(What are model variants?)</h3>
<p>RAG ç»“æœï¼š</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb25-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> sys</span>
<span id="cb25-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Python å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>sys<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>executable<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Python å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„: /Library/Frameworks/Python.framework/Versions/3.13/bin/python3</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Python è·¯å¾„ (sys.path): </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>sys<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>path<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Python è·¯å¾„ (sys.path): ['', '/Library/Frameworks/Python.framework/Versions/3.13/bin', '/Library/Frameworks/Python.framework/Versions/3.13/lib/python313.zip', '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13', '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/lib-dynload', '/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages', '/Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/library/reticulate/python']</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> typing <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Any, List</span>
<span id="cb29-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb29-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> llama_index.core <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> VectorStoreIndex, Settings</span>
<span id="cb29-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> llama_index.core.embeddings <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> BaseEmbedding</span>
<span id="cb29-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> llama_index.vector_stores.duckdb <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> DuckDBVectorStore</span>
<span id="cb29-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb29-7"></span>
<span id="cb29-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ è½½ç¯å¢ƒå˜é‡</span></span>
<span id="cb29-9">load_dotenv()</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¡®ä¿ API å¯†é’¥å¯ç”¨</span></span>
<span id="cb31-2">openrouter_api_key <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>)</span>
<span id="cb31-3"></span>
<span id="cb31-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é’ˆå¯¹ LlamaIndex çš„è‡ªå®šä¹‰ OpenRouter åµŒå…¥ç±»</span></span>
<span id="cb31-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> OpenRouterEmbedding(BaseEmbedding):</span>
<span id="cb31-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ä¸ LlamaIndex å…¼å®¹çš„ OpenRouter API è‡ªå®šä¹‰åµŒå…¥ç±»ã€‚"""</span></span>
<span id="cb31-7">    </span>
<span id="cb31-8">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>(</span>
<span id="cb31-9">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>,</span>
<span id="cb31-10">        api_key: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>,</span>
<span id="cb31-11">        model: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qwen/qwen3-embedding-8b"</span>,</span>
<span id="cb31-12">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>kwargs: Any</span>
<span id="cb31-13">    ):</span>
<span id="cb31-14">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">super</span>().<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>kwargs)</span>
<span id="cb31-15">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb31-16">            base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb31-17">            api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>api_key,</span>
<span id="cb31-18">        )</span>
<span id="cb31-19">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model</span>
<span id="cb31-20">    </span>
<span id="cb31-21">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> _get_query_embedding(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, query: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]:</span>
<span id="cb31-22">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""è·å–æŸ¥è¯¢å­—ç¬¦ä¸²çš„åµŒå…¥å‘é‡ã€‚"""</span></span>
<span id="cb31-23">        response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._client.embeddings.create(</span>
<span id="cb31-24">            extra_headers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb31-25">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HTTP-Referer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://ai-blog.com"</span>,</span>
<span id="cb31-26">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-Title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI Blog RAG"</span>,</span>
<span id="cb31-27">            },</span>
<span id="cb31-28">            model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._model,</span>
<span id="cb31-29">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>query,</span>
<span id="cb31-30">            encoding_format<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"float"</span></span>
<span id="cb31-31">        )</span>
<span id="cb31-32">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response.data[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].embedding</span>
<span id="cb31-33">    </span>
<span id="cb31-34">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> _get_text_embedding(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, text: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]:</span>
<span id="cb31-35">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""è·å–æ–‡æœ¬å­—ç¬¦ä¸²çš„åµŒå…¥å‘é‡ã€‚"""</span></span>
<span id="cb31-36">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._get_query_embedding(text)</span>
<span id="cb31-37">    </span>
<span id="cb31-38">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">async</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> _aget_query_embedding(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, query: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]:</span>
<span id="cb31-39">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å¼‚æ­¥ç‰ˆæœ¬çš„ get_query_embeddingã€‚"""</span></span>
<span id="cb31-40">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._get_query_embedding(query)</span>
<span id="cb31-41">    </span>
<span id="cb31-42">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">async</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> _aget_text_embedding(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, text: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]:</span>
<span id="cb31-43">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å¼‚æ­¥ç‰ˆæœ¬çš„ get_text_embeddingã€‚"""</span></span>
<span id="cb31-44">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._get_text_embedding(text)</span>
<span id="cb31-45"></span>
<span id="cb31-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. ä½¿ç”¨è‡ªå®šä¹‰ OpenRouter ç±»é…ç½®åµŒå…¥æ¨¡å‹</span></span>
<span id="cb31-47">embed_model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenRouterEmbedding(</span>
<span id="cb31-48">    api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>openrouter_api_key,</span>
<span id="cb31-49">    model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qwen/qwen3-embedding-8b"</span></span>
<span id="cb31-50">)</span>
<span id="cb31-51"></span>
<span id="cb31-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. åº”ç”¨è®¾ç½®</span></span>
<span id="cb31-53">Settings.embed_model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> embed_model</span>
<span id="cb31-54"></span>
<span id="cb31-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ è½½ä¸æ£€ç´¢</span></span>
<span id="cb31-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ è½½ç°æœ‰çš„ DuckDB å‘é‡æ•°æ®åº“</span></span>
<span id="cb31-57"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ­£åœ¨ä» openrouter.duckdb åŠ è½½å‘é‡æ•°æ®åº“..."</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>æ­£åœ¨ä» openrouter.duckdb åŠ è½½å‘é‡æ•°æ®åº“...</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb33-2">    vector_store <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> DuckDBVectorStore(database_name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openrouter.duckdb"</span>, persist_dir<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"./persist/"</span>, read_only<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb33-3">    index <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> VectorStoreIndex.from_vector_store(vector_store<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>vector_store)</span>
<span id="cb33-4"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb33-5">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"âš ï¸ æ— æ³•åŠ è½½å‘é‡æ•°æ®åº“ (å¯èƒ½è¢«é”å®š): </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>e<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb33-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»ºä¸€ä¸ªç©ºç´¢å¼•ä½œä¸ºå¤‡é€‰ï¼Œæˆ–è€…è·³è¿‡</span></span>
<span id="cb33-7">    index <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb33-8"></span>
<span id="cb33-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å®šä¹‰æŸ¥è¯¢</span></span>
<span id="cb33-10">query <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"What are model variants?"</span></span>
<span id="cb33-11"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'='</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
============================================================</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"æŸ¥è¯¢é—®é¢˜: '</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>query<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">'"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>æŸ¥è¯¢é—®é¢˜: 'What are model variants?'</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'='</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>============================================================</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ£€ç´¢å‰ 3 ä¸ªç›¸å…³å—</span></span>
<span id="cb39-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> index:</span>
<span id="cb39-3">    retriever <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> index.as_retriever(similarity_top_k<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb39-4">    nodes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> retriever.retrieve(query)</span>
<span id="cb39-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb39-6">    nodes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb39-7"></span>
<span id="cb39-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ‰“å°è¯¦ç»†æ£€ç´¢ä¿¡æ¯</span></span>
<span id="cb39-9"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"ä» DuckDB ä¸­æ£€ç´¢åˆ° </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(nodes)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> ä¸ªæ–‡æœ¬å—ï¼š</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>ä» DuckDB ä¸­æ£€ç´¢åˆ° 5 ä¸ªæ–‡æœ¬å—ï¼š</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> i, node <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">enumerate</span>(nodes, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>):</span>
<span id="cb41-2">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'â”€'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb41-3">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"å— </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>i<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb41-4">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'â”€'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb41-5"></span>
<span id="cb41-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ‰“å°ç›¸ä¼¼åº¦åˆ†æ•°</span></span>
<span id="cb41-7">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">hasattr</span>(node, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'score'</span>):</span>
<span id="cb41-8">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"ç›¸ä¼¼åº¦åˆ†æ•°: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>node<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>score<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.4f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb41-9"></span>
<span id="cb41-10">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ‰“å°å…ƒæ•°æ®</span></span>
<span id="cb41-11">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">hasattr</span>(node, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'metadata'</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">and</span> node.metadata:</span>
<span id="cb41-12">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"å…ƒæ•°æ®:"</span>)</span>
<span id="cb41-13">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> key, value <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> node.metadata.items():</span>
<span id="cb41-14">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"  - </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>key<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>value<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb41-15"></span>
<span id="cb41-16">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ‰“å°æ–‡æœ¬å†…å®¹ï¼ˆæˆªæ–­æ˜¾ç¤ºï¼‰</span></span>
<span id="cb41-17">    text_preview <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> node.text[:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"..."</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(node.text) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> node.text</span>
<span id="cb41-18">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">å†…å®¹é¢„è§ˆ:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>text_preview<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å— 1
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç›¸ä¼¼åº¦åˆ†æ•°: 0.6170
å…ƒæ•°æ®:
  - file_path: /Users/jinchaoduan/Documents/post_project/AI_Blog/posts/RAG/markdown_docs/docs_features_exacto-variant.md
  - file_name: docs_features_exacto-variant.md
  - file_type: text/markdown
  - file_size: 7972
  - creation_date: 2025-11-21
  - last_modified_date: 2025-11-21

å†…å®¹é¢„è§ˆ:
Search

`/`

Ask AI

[API](/docs/api-reference/overview)[Models](https://openrouter.ai/models)[Chat](https://openrouter.ai/chat)[Ranking](https://openrouter.ai/rankings)

* Overview

  + [Quickstart](/docs/quickstart)
  + [FAQ](/docs/faq)
  + [Principles](/docs/overview/principles)
  + [Models](/docs/overview/models)
  + [Enterprise](https://openrouter.ai/enterprise)
* Features

  + [Privacy and Logging](/docs/features/privacy-and-logging)
  + [Zero Data Retention (ZDR)](/docs/features/zdr)
  + ...

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å— 2
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç›¸ä¼¼åº¦åˆ†æ•°: 0.6101
å…ƒæ•°æ®:
  - file_path: /Users/jinchaoduan/Documents/post_project/AI_Blog/posts/RAG/markdown_docs/docs_overview_models.md
  - file_name: docs_overview_models.md
  - file_type: text/markdown
  - file_size: 9021
  - creation_date: 2025-11-21
  - last_modified_date: 2025-11-21

å†…å®¹é¢„è§ˆ:
Search

`/`

Ask AI

[API](/docs/api-reference/overview)[Models](https://openrouter.ai/models)[Chat](https://openrouter.ai/chat)[Ranking](https://openrouter.ai/rankings)

* Overview

  + [Quickstart](/docs/quickstart)
  + [FAQ](/docs/faq)
  + [Principles](/docs/overview/principles)
  + [Models](/docs/overview/models)
  + [Enterprise](https://openrouter.ai/enterprise)
* Features

  + [Privacy and Logging](/docs/features/privacy-and-logging)
  + [Zero Data Retention (ZDR)](/docs/features/zdr)
  + ...

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å— 3
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç›¸ä¼¼åº¦åˆ†æ•°: 0.5821
å…ƒæ•°æ®:
  - file_path: /Users/jinchaoduan/Documents/post_project/AI_Blog/posts/RAG/markdown_docs/docs_guides_overview_models.md
  - file_name: docs_guides_overview_models.md
  - file_type: text/markdown
  - file_size: 7557
  - creation_date: 2026-01-06
  - last_modified_date: 2026-01-06

å†…å®¹é¢„è§ˆ:
Search

`/`

Ask AI

[Models](https://openrouter.ai/models)[Chat](https://openrouter.ai/chat)[Ranking](https://openrouter.ai/rankings)[Docs](/docs/api-reference/overview)

[Docs](/docs/quickstart)[API Reference](/docs/api/reference/overview)[SDK Reference](/docs/sdks/call-model/overview)

[Docs](/docs/quickstart)[API Reference](/docs/api/reference/overview)[SDK Reference](/docs/sdks/call-model/overview)

* Overview

  + [Quickstart](/docs/quickstart)
  + [Principles](/docs/guides/overview/princi...

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å— 4
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç›¸ä¼¼åº¦åˆ†æ•°: 0.5763
å…ƒæ•°æ®:
  - file_path: /Users/jinchaoduan/Documents/post_project/AI_Blog/posts/RAG/markdown_docs/docs_faq_how-are-rate-limits-calculated.md
  - file_name: docs_faq_how-are-rate-limits-calculated.md
  - file_type: text/markdown
  - file_size: 17710
  - creation_date: 2026-01-06
  - last_modified_date: 2026-01-06

å†…å®¹é¢„è§ˆ:
Search

`/`

Ask AI

[Models](https://openrouter.ai/models)[Chat](https://openrouter.ai/chat)[Ranking](https://openrouter.ai/rankings)[Docs](/docs/api-reference/overview)

[Docs](/docs/quickstart)[API Reference](/docs/api/reference/overview)[SDK Reference](/docs/sdks/call-model/overview)

[Docs](/docs/quickstart)[API Reference](/docs/api/reference/overview)[SDK Reference](/docs/sdks/call-model/overview)

* Overview

  + [Quickstart](/docs/quickstart)
  + [Principles](/docs/guides/overview/princi...

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å— 5
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç›¸ä¼¼åº¦åˆ†æ•°: 0.5703
å…ƒæ•°æ®:
  - file_path: /Users/jinchaoduan/Documents/post_project/AI_Blog/posts/RAG/markdown_docs/docs_features_model-routing.md
  - file_name: docs_features_model-routing.md
  - file_type: text/markdown
  - file_size: 7024
  - creation_date: 2025-11-21
  - last_modified_date: 2025-11-21

å†…å®¹é¢„è§ˆ:
|
| 17 | } |
| 18 | ] |
| 19 | ) |
| 20 |  |
| 21 | print(completion.choices[0].message.content) |
```

Was this page helpful?

YesNo

[Previous](/docs/features/zdr)[#### Provider Routing

Route requests to the best provider

Next](/docs/features/provider-routing)[Built with](https://buildwithfern.com/?utm_campaign=buildWith&amp;utm_medium=docs&amp;utm_source=openrouter.ai)

[![Logo](https://files.buildwithfern.com/openrouter.docs.buildwithfern.com/docs/2025-11-21T16:36:36.134Z/content/assets/logo.svg)!...</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"></span>
<span id="cb43-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Save retrieved chunks to a markdown file for easy inspection</span></span>
<span id="cb43-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># with open("retriever.md", "w", encoding="utf-8") as f:</span></span>
<span id="cb43-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     f.write(f"# Query: {query}\n\n")</span></span>
<span id="cb43-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     f.write(f"# Retrieved {len(nodes)} chunks from openrouter.duckdb\n\n")</span></span>
<span id="cb43-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     for i, node in enumerate(nodes, 1):</span></span>
<span id="cb43-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#         f.write(f"{'â”€'*60}\n")</span></span>
<span id="cb43-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#         f.write(f"## Chunk {i}\n\n")</span></span>
<span id="cb43-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#         if hasattr(node, 'score'):</span></span>
<span id="cb43-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#             f.write(f"**Similarity Score:** {node.score:.4f}\n\n")</span></span>
<span id="cb43-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#         if hasattr(node, 'metadata') and node.metadata:</span></span>
<span id="cb43-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#             f.write(f"**Metadata:**\n")</span></span>
<span id="cb43-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#             for key, value in node.metadata.items():</span></span>
<span id="cb43-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#                 f.write(f"- {key}: {value}\n")</span></span>
<span id="cb43-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#             f.write(f"\n")</span></span>
<span id="cb43-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#         f.write(f"{node.text}\n\n")</span></span></code></pre></div></div>
</details>
</div>
</section>
</div>
<div id="tabset-3-3" class="tab-pane" aria-labelledby="tabset-3-3-tab">
<p>ç°åœ¨æˆ‘ä»¬çš„çŸ¥è¯†åº“å·²ç»å¡«å……å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•æ£€ç´¢ç³»ç»Ÿã€‚æˆ‘ä»¬å¯ä»¥æå‡ºä¸€ä¸ªç‰¹å®šçš„é—®é¢˜ï¼Œä¾‹å¦‚â€œä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“ï¼Ÿ (What are model variants?)â€ï¼Œå¹¶æŸ¥è¯¢ <code>Chroma</code> å­˜å‚¨åº“ä»¥æŸ¥çœ‹å“ªäº›æ–‡æœ¬å—æœ€ç›¸å…³ã€‚è¿™ç¡®è®¤äº†æˆ‘ä»¬çš„åµŒå…¥å’Œæœç´¢æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
<section id="é—®é¢˜ä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“-what-are-model-variants" class="level3">
<h3 class="anchored" data-anchor-id="é—®é¢˜ä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“-what-are-model-variants">é—®é¢˜ï¼šä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“ï¼Ÿ (What are model variants?)</h3>
<p>RAG ç»“æœï¼š</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb44-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_core.embeddings <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Embeddings</span>
<span id="cb44-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_chroma <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Chroma</span>
<span id="cb44-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> typing <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> List</span>
<span id="cb44-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb44-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb44-7"></span>
<span id="cb44-8">load_dotenv()</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é’ˆå¯¹ OpenRouter API çš„è‡ªå®šä¹‰åµŒå…¥ç±»</span></span>
<span id="cb46-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> OpenRouterEmbeddings(Embeddings):</span>
<span id="cb46-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""é’ˆå¯¹ OpenRouter API çš„è‡ªå®šä¹‰åµŒå…¥ç±»ã€‚"""</span></span>
<span id="cb46-4">    </span>
<span id="cb46-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, api_key: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, model: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qwen/qwen3-embedding-8b"</span>):</span>
<span id="cb46-6">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb46-7">            base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb46-8">            api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>api_key,</span>
<span id="cb46-9">        )</span>
<span id="cb46-10">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model</span>
<span id="cb46-11">    </span>
<span id="cb46-12">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> embed_documents(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, texts: List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>]) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]]:</span>
<span id="cb46-13">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å¯¹æ–‡æ¡£åˆ—è¡¨è¿›è¡ŒåµŒå…¥ã€‚"""</span></span>
<span id="cb46-14">        response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.client.embeddings.create(</span>
<span id="cb46-15">            extra_headers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb46-16">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HTTP-Referer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://ai-blog.com"</span>,</span>
<span id="cb46-17">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-Title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI Blog RAG"</span>,</span>
<span id="cb46-18">            },</span>
<span id="cb46-19">            model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.model,</span>
<span id="cb46-20">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>texts,</span>
<span id="cb46-21">            encoding_format<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"float"</span></span>
<span id="cb46-22">        )</span>
<span id="cb46-23">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> [item.embedding <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> item <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> response.data]</span>
<span id="cb46-24">    </span>
<span id="cb46-25">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> embed_query(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, text: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]:</span>
<span id="cb46-26">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å¯¹å•ä¸ªæŸ¥è¯¢è¿›è¡ŒåµŒå…¥ã€‚"""</span></span>
<span id="cb46-27">        response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.client.embeddings.create(</span>
<span id="cb46-28">            extra_headers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb46-29">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HTTP-Referer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://ai-blog.com"</span>,</span>
<span id="cb46-30">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-Title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI Blog RAG"</span>,</span>
<span id="cb46-31">            },</span>
<span id="cb46-32">            model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.model,</span>
<span id="cb46-33">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>text,</span>
<span id="cb46-34">            encoding_format<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"float"</span></span>
<span id="cb46-35">        )</span>
<span id="cb46-36">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response.data[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].embedding</span>
<span id="cb46-37"></span>
<span id="cb46-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è·å– OpenRouter API å¯†é’¥</span></span>
<span id="cb46-39">openrouter_api_key <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>)</span>
<span id="cb46-40"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> openrouter_api_key:</span>
<span id="cb46-41">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">raise</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">ValueError</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æœªåœ¨ç¯å¢ƒå˜é‡ä¸­æ‰¾åˆ° OPENROUTER_API_KEY"</span>)</span>
<span id="cb46-42"></span>
<span id="cb46-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ OpenRouter åˆ›å»ºåµŒå…¥å®ä¾‹</span></span>
<span id="cb46-44">embeddings <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenRouterEmbeddings(</span>
<span id="cb46-45">    api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>openrouter_api_key,</span>
<span id="cb46-46">    model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qwen/qwen3-embedding-8b"</span></span>
<span id="cb46-47">)</span>
<span id="cb46-48"></span>
<span id="cb46-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å®šä¹‰å‘é‡æ•°æ®åº“ä½ç½®</span></span>
<span id="cb46-50">persist_directory <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chroma_db_data"</span></span>
<span id="cb46-51"></span>
<span id="cb46-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ è½½ç°æœ‰çš„å‘é‡æ•°æ®åº“</span></span>
<span id="cb46-53">vectorstore <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> Chroma(</span>
<span id="cb46-54">    persist_directory<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>persist_directory,</span>
<span id="cb46-55">    embedding_function<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>embeddings</span>
<span id="cb46-56">)</span>
<span id="cb46-57"></span>
<span id="cb46-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æµ‹è¯•æŸ¥è¯¢</span></span>
<span id="cb46-59">query <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"What are model variants?"</span></span>
<span id="cb46-60"></span>
<span id="cb46-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ‰§è¡Œç›¸ä¼¼åº¦æœç´¢</span></span>
<span id="cb46-62">results <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> vectorstore.similarity_search(query, k<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb46-63"></span>
<span id="cb46-64"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">æŸ¥è¯¢é—®é¢˜: '</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>query<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">'"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
æŸ¥è¯¢é—®é¢˜: 'What are model variants?'</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"æ‰¾åˆ° </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(results)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> ä¸ªç›¸å…³å—ï¼š</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>æ‰¾åˆ° 5 ä¸ªç›¸å…³å—ï¼š</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> i, doc <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">enumerate</span>(results, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>):</span>
<span id="cb50-2">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"ç»“æœ </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>i<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">:"</span>)</span>
<span id="cb50-3">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"æ¥æº: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>doc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>metadata<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'source'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'æœªçŸ¥'</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb50-4">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"å†…å®¹é¢„è§ˆ: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>doc<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>page_content[:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">800</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">..."</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>ç»“æœ 1:
æ¥æº: docs_faq_how-are-rate-limits-calculated.md
å†…å®¹é¢„è§ˆ: ###### What are model variants?

Variants are suffixes that can be added to the model slug to change its behavior.

Static variants can only be used with specific models and these are listed in our [models api](https://openrouter.ai/api/v1/models).

1. `:free` - The model is always provided for free and has low rate limits.
2. `:beta` - The model is not moderated by OpenRouter.
3. `:extended` - The model has longer than usual context length.
4. `:exacto` - The model only uses OpenRouter-curated high-quality endpoints.
5. `:thinking` - The model supports reasoning by default.

Dynamic variants can be used on all models and they change the behavior of how the request is routed or used.

1. `:online` - All requests will run a query to extract web results that are attached to the prompt.
2. `:...
ç»“æœ 2:
æ¥æº: docs_faq.md
å†…å®¹é¢„è§ˆ: ###### What are model variants?

Variants are suffixes that can be added to the model slug to change its behavior.

Static variants can only be used with specific models and these are listed in our [models api](https://openrouter.ai/api/v1/models).

1. `:free` - The model is always provided for free and has low rate limits.
2. `:beta` - The model is not moderated by OpenRouter.
3. `:extended` - The model has longer than usual context length.
4. `:exacto` - The model only uses OpenRouter-curated high-quality endpoints.
5. `:thinking` - The model supports reasoning by default.

Dynamic variants can be used on all models and they change the behavior of how the request is routed or used.

1. `:online` - All requests will run a query to extract web results that are attached to the prompt.
2. `:...
ç»“æœ 3:
æ¥æº: docs_use-cases_crypto-api.md
å†…å®¹é¢„è§ˆ: [API](/docs/api-reference/overview)[Models](https://openrouter.ai/models)[Chat](https://openrouter.ai/chat)[Ranking](https://openrouter.ai/rankings)...
ç»“æœ 4:
æ¥æº: docs_sdks_typescript.md
å†…å®¹é¢„è§ˆ: [API](/docs/api-reference/overview)[Models](https://openrouter.ai/models)[Chat](https://openrouter.ai/chat)[Ranking](https://openrouter.ai/rankings)...
ç»“æœ 5:
æ¥æº: docs_features_provider-routing.md
å†…å®¹é¢„è§ˆ: Route requests through OpenRouter-curated providers

Next](/docs/features/exacto-variant)[Built with](https://buildwithfern.com/?utm_campaign=buildWith&amp;utm_medium=docs&amp;utm_source=openrouter.ai)

[![Logo](https://files.buildwithfern.com/openrouter.docs.buildwithfern.com/docs/2025-11-21T16:36:36.134Z/content/assets/logo.svg)![Logo](https://files.buildwithfern.com/openrouter.docs.buildwithfern.com/docs/2025-11-21T16:36:36.134Z/content/assets/logo-white.svg)](https://openrouter.ai/)

[API](/docs/api-reference/overview)[Models](https://openrouter.ai/models)[Chat](https://openrouter.ai/chat)[Ranking](https://openrouter.ai/rankings)...</code></pre>
</div>
</div>
</section>
</div>
</div>
</div>
</section>
<section id="ç»“åˆ-rag-è¿›è¡ŒèŠå¤©-chat-with-rag" class="level1">
<h1>ç»“åˆ RAG è¿›è¡ŒèŠå¤© (Chat with RAG)</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" aria-controls="tabset-4-1" aria-selected="true" href="">R</a></li><li class="nav-item"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" aria-controls="tabset-4-2" aria-selected="false" href="">Python chatlas</a></li><li class="nav-item"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" aria-controls="tabset-4-3" aria-selected="false" href="">Python LangChain</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" aria-labelledby="tabset-4-1-tab">
<p>æœ€åä¸€ä¸ªç¯èŠ‚æ˜¯å°†è¿™ç§æ£€ç´¢èƒ½åŠ›è¿æ¥åˆ°èŠå¤©ç•Œé¢ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>ellmer</code> åˆ›å»ºä¸€ä¸ªèŠå¤©å®¢æˆ·ç«¯ã€‚å…³é”®åœ¨äºï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>ragnar_register_tool_retrieve</code> æ³¨å†Œä¸€ä¸ªâ€œæ£€ç´¢å·¥å…·â€ã€‚è¿™ä½¿ LLM èƒ½å¤Ÿåœ¨éœ€è¦ä¿¡æ¯å›ç­”ç”¨æˆ·é—®é¢˜æ—¶ï¼Œè‡ªä¸»æŸ¥è¯¢æˆ‘ä»¬çš„å‘é‡æ•°æ®åº“ã€‚</p>
<p>æˆ‘ä»¬è¿˜æä¾›äº†ä¸€ä¸ªç³»ç»Ÿæç¤ºè¯ï¼ŒæŒ‡ç¤ºæ¨¡å‹å§‹ç»ˆæ£€æŸ¥çŸ¥è¯†åº“å¹¶å¼•ç”¨å…¶æ¥æºã€‚</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ellmer)</span>
<span id="cb52-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dotenv)</span>
<span id="cb52-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ragnar)</span>
<span id="cb52-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">load_dot_env</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">file =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".env"</span>)</span>
<span id="cb52-5"></span>
<span id="cb52-6">chat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat_openrouter</span>(</span>
<span id="cb52-7">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">api_key =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.getenv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>),</span>
<span id="cb52-8">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-oss-120b"</span>,</span>
<span id="cb52-9">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">system_prompt =</span> glue<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">trim</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb52-10"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  ä½ æ˜¯ä¸€ä¸ªè´Ÿè´£é—®ç­”ä»»åŠ¡çš„åŠ©æ‰‹ã€‚è¯·ä¿æŒå›å¤ç®€ç»ƒã€‚</span></span>
<span id="cb52-11"></span>
<span id="cb52-12"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  åœ¨å›å¤ä¹‹å‰ï¼Œè¯·ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ç´ æã€‚å¼•ç”¨æˆ–è½¬è¿°æ®µè½ï¼Œæ¸…æ™°åœ°æ ‡æ³¨å“ªäº›æ˜¯ä½ è‡ªå·±çš„è¯ï¼Œå“ªäº›æ˜¯æ¥æºã€‚</span></span>
<span id="cb52-13"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  ä¸ºä½ å¼•ç”¨çš„æ¯ä¸ªæ¥æºæä¾›ä¸€ä¸ªæœ‰æ•ˆçš„é“¾æ¥ï¼Œä»¥åŠä»»ä½•å…¶ä»–ç›¸å…³çš„é“¾æ¥ã€‚</span></span>
<span id="cb52-14"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">  é™¤éä½ å·²ç»æ£€ç´¢å¹¶å¼•ç”¨äº†æ¥æºï¼Œå¦åˆ™ä¸è¦å›ç­”ã€‚å¦‚æœä½ æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ï¼Œè¯·è¯´â€œæˆ‘åœ¨çŸ¥è¯†åº“ä¸­æ‰¾ä¸åˆ°ä»»ä½•ç›¸å…³ä¿¡æ¯â€ã€‚</span></span>
<span id="cb52-15"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    "</span>)</span>
<span id="cb52-16">)</span>
<span id="cb52-17"></span>
<span id="cb52-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å°è¯•è¿æ¥å­˜å‚¨å¹¶æ³¨å†Œå·¥å…·</span></span>
<span id="cb52-19">store_connected <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span></span>
<span id="cb52-20"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tryCatch</span>({</span>
<span id="cb52-21">    store <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ragnar_store_connect</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openrouter.duckdb"</span>)</span>
<span id="cb52-22">    chat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chat <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ragnar_register_tool_retrieve</span>(store, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">top_k =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb52-23">    store_connected <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb52-24">}, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">error =</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(e) {</span>
<span id="cb52-25">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">message</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"âš ï¸ æ— æ³•è¿æ¥åˆ° DuckDB è¿›è¡Œå·¥å…·æ³¨å†Œ: "</span>, e<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>message)</span>
<span id="cb52-26">})</span></code></pre></div></div>
</details>
</div>
<section id="é—®é¢˜ä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“what-are-model-variants-2" class="level3">
<h3 class="anchored" data-anchor-id="é—®é¢˜ä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“what-are-model-variants-2">é—®é¢˜ï¼šä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“ï¼Ÿ(What are model variants?)</h3>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> (store_connected) {</span>
<span id="cb53-2">    chat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"What are model variants?"</span>)</span>
<span id="cb53-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># èŠå¤©ç»“æŸåç«‹å³é‡Šæ”¾é”</span></span>
<span id="cb53-4">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span>(store)</span>
<span id="cb53-5">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gc</span>()</span>
<span id="cb53-6">} <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> {</span>
<span id="cb53-7">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ç”±äºæ•°æ®åº“é”å®šï¼ŒR èŠå¤©åŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨ã€‚"</span>)</span>
<span id="cb53-8">}</span></code></pre></div></div>
</details>
<p><strong>æ¨¡å‹å˜ä½“ï¼ˆmodel variantsï¼‰</strong>æ˜¯å¯ä»¥åœ¨æ¨¡å‹æ ‡è¯†ï¼ˆslugï¼‰åæ·»åŠ çš„åç¼€ï¼Œç”¨æ¥æ”¹å˜æ¨¡å‹çš„è¡Œä¸ºæ–¹å¼ã€‚</p>
<ul>
<li><strong>é™æ€å˜ä½“</strong>åªèƒ½ç”¨äºç‰¹å®šæ¨¡å‹ï¼Œåˆ—åœ¨â€¯<a href="https://openrouter.ai/api/v1/models">Models API</a>â€¯ä¸­ã€‚ä¾‹å¦‚ï¼š
<ol type="1">
<li><code>:free</code> â€“ å§‹ç»ˆå…è´¹æä¾›ï¼Œä¸”é€Ÿç‡é™åˆ¶è¾ƒä½ã€‚<br>
</li>
<li><code>:beta</code> â€“ ä¸å— OpenRouter å†…å®¹å®¡æŸ¥ã€‚<br>
</li>
<li><code>:extended</code> â€“ æä¾›æ¯”å¸¸è§„æ›´é•¿çš„ä¸Šä¸‹æ–‡é•¿åº¦ã€‚<br>
</li>
<li><code>:exacto</code> â€“ ä»…ä½¿ç”¨ OpenRouter ç²¾é€‰çš„é«˜è´¨é‡ç«¯ç‚¹ã€‚<br>
</li>
<li><code>:thinking</code> â€“ é»˜è®¤æ”¯æŒæ¨ç†ï¼ˆreasoningï¼‰ã€‚</li>
</ol></li>
<li><strong>åŠ¨æ€å˜ä½“</strong>å¯ä»¥åœ¨æ‰€æœ‰æ¨¡å‹ä¸Šä½¿ç”¨ï¼Œæ”¹å˜è¯·æ±‚çš„è·¯ç”±æˆ–ä½¿ç”¨æ–¹å¼ã€‚ä¾‹å¦‚ï¼š
<ol type="1">
<li><code>:online</code> â€“ åœ¨æç¤ºä¸­é™„åŠ ç½‘ç»œæœç´¢ç»“æœã€‚<br>
</li>
<li><code>:nitro</code> â€“ æŒ‰ååé‡æ’åºæä¾›è€…ï¼Œä¼˜å…ˆæ›´å¿«å“åº”ã€‚<br>
</li>
<li><code>:floor</code> â€“ æŒ‰ä»·æ ¼æ’åºæä¾›è€…ï¼Œä¼˜å…ˆæ›´å…·æˆæœ¬æ•ˆç›Šçš„é€‰é¡¹ã€‚</li>
</ol></li>
</ul>
<blockquote class="blockquote">
<p>â€œVariants are suffixes that can be added to the model slug to change its behavior.â€ã€æ¥æº: OpenRouter FAQ â€“ æ¨¡å‹å’Œæä¾›è€…ã€‘(https://openrouter.ai/docs/faq) used (Mb) gc trigger (Mb) limit (Mb) max used (Mb) Ncells 3083914 164.7 4675528 249.8 NA 4675528 249.8 Vcells 5315244 40.6 10146329 77.5 16384 9527284 72.7</p>
</blockquote>
</section>
</div>
<div id="tabset-4-2" class="tab-pane" aria-labelledby="tabset-4-2-tab">
<p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ <code>chatlas</code> åº“æ¥åˆ›å»ºä¸€ä¸ªèŠå¤©ç•Œé¢ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰å·¥å…· <code>retrieve_trusted_content</code>ï¼Œç”¨äºæŸ¥è¯¢æˆ‘ä»¬çš„ DuckDB ç´¢å¼•ã€‚ç„¶åæˆ‘ä»¬å°†è¿™ä¸ªå·¥å…·æ³¨å†Œåˆ°èŠå¤©æ¨¡å‹ä¸­ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨å›ç­”ç”¨æˆ·é—®é¢˜æ—¶å¼•å…¥ç›¸å…³ä¿¡æ¯ã€‚</p>
<section id="é—®é¢˜ä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“what-are-model-variants-3" class="level3">
<h3 class="anchored" data-anchor-id="é—®é¢˜ä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“what-are-model-variants-3">é—®é¢˜ï¼šä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“ï¼Ÿ(What are model variants?)</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb54-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> typing <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Any, List</span>
<span id="cb54-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb54-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> chatlas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> ctl</span>
<span id="cb54-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> llama_index.core <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> VectorStoreIndex, Settings</span>
<span id="cb54-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> llama_index.core.embeddings <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> BaseEmbedding</span>
<span id="cb54-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> llama_index.vector_stores.duckdb <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> DuckDBVectorStore</span>
<span id="cb54-8"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb54-9">load_dotenv()</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¡®ä¿ API å¯†é’¥å¯ç”¨</span></span>
<span id="cb56-2">openrouter_api_key <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>)</span>
<span id="cb56-3"></span>
<span id="cb56-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é’ˆå¯¹ LlamaIndex çš„è‡ªå®šä¹‰ OpenRouter åµŒå…¥ç±»</span></span>
<span id="cb56-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> OpenRouterEmbedding(BaseEmbedding):</span>
<span id="cb56-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ä¸ LlamaIndex å…¼å®¹çš„ OpenRouter API è‡ªå®šä¹‰åµŒå…¥ç±»ã€‚"""</span></span>
<span id="cb56-7"></span>
<span id="cb56-8">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>(</span>
<span id="cb56-9">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>,</span>
<span id="cb56-10">        api_key: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>,</span>
<span id="cb56-11">        model: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qwen/qwen3-embedding-8b"</span>,</span>
<span id="cb56-12">        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>kwargs: Any</span>
<span id="cb56-13">    ):</span>
<span id="cb56-14">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">super</span>().<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>kwargs)</span>
<span id="cb56-15">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb56-16">            base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb56-17">            api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>api_key,</span>
<span id="cb56-18">        )</span>
<span id="cb56-19">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model</span>
<span id="cb56-20"></span>
<span id="cb56-21">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> _get_query_embedding(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, query: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]:</span>
<span id="cb56-22">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""è·å–æŸ¥è¯¢å­—ç¬¦ä¸²çš„åµŒå…¥å‘é‡ã€‚"""</span></span>
<span id="cb56-23">        response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._client.embeddings.create(</span>
<span id="cb56-24">            extra_headers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb56-25">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HTTP-Referer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://ai-blog.com"</span>,</span>
<span id="cb56-26">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-Title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"AI Blog RAG"</span>,</span>
<span id="cb56-27">            },</span>
<span id="cb56-28">            model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._model,</span>
<span id="cb56-29">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>query,</span>
<span id="cb56-30">            encoding_format<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"float"</span></span>
<span id="cb56-31">        )</span>
<span id="cb56-32">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response.data[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].embedding</span>
<span id="cb56-33"></span>
<span id="cb56-34">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> _get_text_embedding(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, text: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]:</span>
<span id="cb56-35">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""è·å–æ–‡æœ¬å­—ç¬¦ä¸²çš„åµŒå…¥å‘é‡ã€‚"""</span></span>
<span id="cb56-36">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._get_query_embedding(text)</span>
<span id="cb56-37"></span>
<span id="cb56-38">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">async</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> _aget_query_embedding(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, query: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]:</span>
<span id="cb56-39">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å¼‚æ­¥ç‰ˆæœ¬çš„ get_query_embeddingã€‚"""</span></span>
<span id="cb56-40">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._get_query_embedding(query)</span>
<span id="cb56-41"></span>
<span id="cb56-42">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">async</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> _aget_text_embedding(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, text: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]:</span>
<span id="cb56-43">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""å¼‚æ­¥ç‰ˆæœ¬çš„ get_text_embeddingã€‚"""</span></span>
<span id="cb56-44">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._get_text_embedding(text)</span>
<span id="cb56-45"></span>
<span id="cb56-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 1. é…ç½®åµŒå…¥æ¨¡å‹</span></span>
<span id="cb56-47">embed_model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenRouterEmbedding(</span>
<span id="cb56-48">    api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>openrouter_api_key,</span>
<span id="cb56-49">    model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qwen/qwen3-embedding-8b"</span></span>
<span id="cb56-50">)</span>
<span id="cb56-51">Settings.embed_model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> embed_model</span>
<span id="cb56-52"></span>
<span id="cb56-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2. åŠ è½½ç´¢å¼•</span></span>
<span id="cb56-54"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb56-55">    vector_store <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> DuckDBVectorStore(database_name<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openrouter.duckdb"</span>, persist_dir<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"./persist/"</span>, read_only<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb56-56">    index <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> VectorStoreIndex.from_vector_store(vector_store<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>vector_store)</span>
<span id="cb56-57">    retriever <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> index.as_retriever(similarity_top_k<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb56-58"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb56-59">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"âš ï¸ æ— æ³•åŠ è½½å‘é‡æ•°æ®åº“: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>e<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb56-60">    index <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb56-61">    retriever <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb56-62"></span>
<span id="cb56-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 3. å®šä¹‰èŠå¤©å·¥å…·</span></span>
<span id="cb56-64"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> retrieve_trusted_content(question: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>:</span>
<span id="cb56-65">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""</span></span>
<span id="cb56-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    åœ¨çŸ¥è¯†åº“ä¸­æ£€ç´¢ä¿¡ä»»çš„å†…å®¹æ¥å›ç­”é—®é¢˜ã€‚</span></span>
<span id="cb56-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    """</span></span>
<span id="cb56-68">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> retriever:</span>
<span id="cb56-69">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"çŸ¥è¯†åº“å½“å‰ä¸å¯ç”¨ï¼ˆç”±äºæ•°æ®åº“é”å®šï¼‰ã€‚"</span></span>
<span id="cb56-70">    nodes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> retriever.retrieve(question)</span>
<span id="cb56-71">    combined_text <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>.join([<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Source Content </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>i<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">:</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>node<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>text<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> i, node <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">enumerate</span>(nodes)])</span>
<span id="cb56-72">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> combined_text</span>
<span id="cb56-73"></span>
<span id="cb56-74"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 4. è®¾ç½®èŠå¤©æ¨¡å‹å¹¶æ³¨å†Œå·¥å…·</span></span>
<span id="cb56-75">chat <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ctl.ChatOpenRouter(</span>
<span id="cb56-76">    model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-oss-120b"</span>,</span>
<span id="cb56-77">    api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>openrouter_api_key,</span>
<span id="cb56-78">    base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb56-79">    system_prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"""</span></span>
<span id="cb56-80"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    ä½ æ˜¯ä¸€ä¸ªè´Ÿè´£é—®ç­”ä»»åŠ¡åŠ©æ‰‹ã€‚è¯·ä¿æŒå›å¤ç®€ç»ƒã€‚</span></span>
<span id="cb56-81"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    åœ¨å›å¤ä¹‹å‰ï¼Œå§‹ç»ˆé€šè¿‡ retrieve_trusted_content å·¥å…·æ£€ç´¢ç›¸å…³ç´ æã€‚</span></span>
<span id="cb56-82"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    """</span></span>
<span id="cb56-83">)</span>
<span id="cb56-84"></span>
<span id="cb56-85">chat.register_tool(retrieve_trusted_content)</span>
<span id="cb56-86"></span>
<span id="cb56-87"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 5. æ‰§è¡ŒèŠå¤©</span></span>
<span id="cb56-88"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb56-89">    response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> chat.chat(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"What are model variants?"</span>)</span>
<span id="cb56-90">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(response)</span>
<span id="cb56-91"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb56-92">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"âš ï¸ èŠå¤©è¿‡ç¨‹å‡ºé”™ (å¯èƒ½æ˜¯æ˜¾ç¤ºå¤„ç†é—®é¢˜): </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>e<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;IPython.core.display.HTML object&gt;
&lt;IPython.core.display.Markdown object&gt;
âš ï¸ èŠå¤©è¿‡ç¨‹å‡ºé”™ (å¯èƒ½æ˜¯æ˜¾ç¤ºå¤„ç†é—®é¢˜): Failed to create display handle</code></pre>
</div>
</div>
</section>
</div>
<div id="tabset-4-3" class="tab-pane" aria-labelledby="tabset-4-3-tab">
<p>åœ¨ Python çš„ LangChain ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ªå®Œæ•´çš„ RAG æµæ°´çº¿ã€‚è¿™åŒ…æ‹¬ï¼š 1. <strong>æ£€ç´¢å™¨ (Retriever)</strong>ï¼šä½¿ç”¨æˆ‘ä»¬çš„ <code>Chroma</code> å‘é‡æ•°æ®åº“ã€‚ 2. <strong>æç¤ºè¯æ¨¡ç‰ˆ (Prompt Template)</strong>ï¼šæŒ‡ç¤ºæ¨¡å‹ä½¿ç”¨æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡æ¥å›ç­”é—®é¢˜ã€‚ 3. <strong>èŠå¤©æ¨¡å‹ (Chat Model)</strong>ï¼šä½¿ç”¨ OpenRouter æä¾›çš„ <code>gpt-4o</code>ã€‚ 4. <strong>è¾“å‡ºè§£æå™¨ (Output Parser)</strong>ï¼šç”¨äºæ ¼å¼åŒ–æœ€ç»ˆå“åº”ã€‚</p>
<p>è¿™ç§æ¨¡å—åŒ–æ–¹æ³•æ˜¯æ„å»ºç”Ÿäº§çº§ AI åº”ç”¨ç¨‹åºçš„å…¸å‹æ–¹å¼ã€‚</p>
<section id="é—®é¢˜ä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“what-are-model-variants-4" class="level3">
<h3 class="anchored" data-anchor-id="é—®é¢˜ä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“what-are-model-variants-4">é—®é¢˜ï¼šä»€ä¹ˆæ˜¯æ¨¡å‹å˜ä½“ï¼Ÿ(What are model variants?)</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> ChatOpenAI</span>
<span id="cb58-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_core.prompts <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> ChatPromptTemplate</span>
<span id="cb58-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_core.runnables <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> RunnablePassthrough</span>
<span id="cb58-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_core.output_parsers <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> StrOutputParser</span>
<span id="cb58-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb58-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_core.embeddings <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Embeddings</span>
<span id="cb58-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> langchain_chroma <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Chroma</span>
<span id="cb58-8"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> typing <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> List</span>
<span id="cb58-9"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb58-10"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb58-11"></span>
<span id="cb58-12">load_dotenv()</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># é’ˆå¯¹ LangChain çš„è‡ªå®šä¹‰ OpenRouter åµŒå…¥ç±»</span></span>
<span id="cb60-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> OpenRouterEmbeddings(Embeddings):</span>
<span id="cb60-3">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, api_key: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>, model: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qwen/qwen3-embedding-8b"</span>):</span>
<span id="cb60-4">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb60-5">            base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb60-6">            api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>api_key,</span>
<span id="cb60-7">        )</span>
<span id="cb60-8">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._model <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model</span>
<span id="cb60-9"></span>
<span id="cb60-10">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> embed_documents(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, texts: List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>]) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]]:</span>
<span id="cb60-11">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åµŒå…¥æ–‡æ¡£åˆ—è¡¨ã€‚"""</span></span>
<span id="cb60-12">        response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._client.embeddings.create(</span>
<span id="cb60-13">            model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._model,</span>
<span id="cb60-14">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>texts</span>
<span id="cb60-15">        )</span>
<span id="cb60-16">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> [d.embedding <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> d <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> response.data]</span>
<span id="cb60-17"></span>
<span id="cb60-18">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> embed_query(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, text: <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> List[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>]:</span>
<span id="cb60-19">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""åµŒå…¥å•ä¸ªæŸ¥è¯¢ã€‚"""</span></span>
<span id="cb60-20">        response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._client.embeddings.create(</span>
<span id="cb60-21">            model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>._model,</span>
<span id="cb60-22">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>text</span>
<span id="cb60-23">        )</span>
<span id="cb60-24">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> response.data[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].embedding</span>
<span id="cb60-25"></span>
<span id="cb60-26"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è·å– OpenRouter API å¯†é’¥</span></span>
<span id="cb60-27">openrouter_api_key <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>)</span>
<span id="cb60-28"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> openrouter_api_key:</span>
<span id="cb60-29">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">raise</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">ValueError</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æœªåœ¨ç¯å¢ƒå˜é‡ä¸­æ‰¾åˆ° OPENROUTER_API_KEY"</span>)</span>
<span id="cb60-30"></span>
<span id="cb60-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ OpenRouter åˆ›å»ºåµŒå…¥å®ä¾‹</span></span>
<span id="cb60-32">embeddings <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenRouterEmbeddings(</span>
<span id="cb60-33">    api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>openrouter_api_key,</span>
<span id="cb60-34">    model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"qwen/qwen3-embedding-8b"</span></span>
<span id="cb60-35">)</span>
<span id="cb60-36"></span>
<span id="cb60-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å®šä¹‰å‘é‡æ•°æ®åº“ä½ç½®</span></span>
<span id="cb60-38">persist_directory <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chroma_db_data"</span></span>
<span id="cb60-39"></span>
<span id="cb60-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åŠ è½½ç°æœ‰çš„å‘é‡æ•°æ®åº“</span></span>
<span id="cb60-41"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"æ­£åœ¨ä» </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>persist_directory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> åŠ è½½ç°æœ‰å‘é‡æ•°æ®åº“..."</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>æ­£åœ¨ä» chroma_db_data åŠ è½½ç°æœ‰å‘é‡æ•°æ®åº“...</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1">vectorstore <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> Chroma(</span>
<span id="cb62-2">    persist_directory<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>persist_directory,</span>
<span id="cb62-3">    embedding_function<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>embeddings</span>
<span id="cb62-4">)</span>
<span id="cb62-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"âœ“ å‘é‡æ•°æ®åº“åŠ è½½æˆåŠŸ"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>âœ“ å‘é‡æ•°æ®åº“åŠ è½½æˆåŠŸ</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ OpenRouter åˆå§‹åŒ– LLM</span></span>
<span id="cb64-2">llm <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ChatOpenAI(</span>
<span id="cb64-3">    model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-oss-120b"</span>,</span>
<span id="cb64-4">    openai_api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>),</span>
<span id="cb64-5">    openai_api_base<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span></span>
<span id="cb64-6">)</span>
<span id="cb64-7"></span>
<span id="cb64-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»ºæç¤ºè¯æ¨¡ç‰ˆ</span></span>
<span id="cb64-9">system_prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (</span>
<span id="cb64-10">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä½ æ˜¯ä¸€ä¸ªè´Ÿè´£é—®ç­”ä»»åŠ¡åŠ©æ‰‹ã€‚"</span></span>
<span id="cb64-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"è¯·ä½¿ç”¨ä»¥ä¸‹æ£€ç´¢åˆ°çš„ç´ ææ¥å›ç­”é—®é¢˜ã€‚"</span></span>
<span id="cb64-12">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å¦‚æœä½ ä¸çŸ¥é“ç­”æ¡ˆï¼Œè¯·ä¸è¦èƒ¡ç¼–ä¹±é€ ã€‚"</span></span>
<span id="cb64-13">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æœ€å¤šä½¿ç”¨ä¸‰å¥è¯ï¼Œå¹¶ä¿æŒå›å¤ç®€ç»ƒã€‚"</span></span>
<span id="cb64-14">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb64-15">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ç´ æ: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{context}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb64-16">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb64-17">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"é—®é¢˜: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{question}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb64-18">)</span>
<span id="cb64-19"></span>
<span id="cb64-20">prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ChatPromptTemplate.from_template(system_prompt)</span>
<span id="cb64-21"></span>
<span id="cb64-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»ºæ£€ç´¢å™¨</span></span>
<span id="cb64-23">retriever <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> vectorstore.as_retriever(search_kwargs<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"k"</span>: <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>})</span>
<span id="cb64-24"></span>
<span id="cb64-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç”¨äºæ ¼å¼åŒ–æ–‡æ¡£çš„è¾…åŠ©å‡½æ•°</span></span>
<span id="cb64-26"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> format_docs(docs):</span>
<span id="cb64-27">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>.join(doc.page_content <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> doc <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> docs)</span>
<span id="cb64-28"></span>
<span id="cb64-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ LCEL æ„å»º RAG é“¾</span></span>
<span id="cb64-30">rag_chain <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (</span>
<span id="cb64-31">    {</span>
<span id="cb64-32">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"context"</span>: retriever <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> format_docs,</span>
<span id="cb64-33">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"question"</span>: RunnablePassthrough()</span>
<span id="cb64-34">    }</span>
<span id="cb64-35">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> prompt</span>
<span id="cb64-36">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> llm</span>
<span id="cb64-37">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> StrOutputParser()</span>
<span id="cb64-38">)</span>
<span id="cb64-39"></span>
<span id="cb64-40"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"âœ“ RAG é“¾åˆ›å»ºæˆåŠŸï¼"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>âœ“ RAG é“¾åˆ›å»ºæˆåŠŸï¼</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb66" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æµ‹è¯• RAG é“¾</span></span>
<span id="cb66-2">question <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"What are model variants?"</span></span>
<span id="cb66-3"></span>
<span id="cb66-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">æŸ¥è¯¢é—®é¢˜: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>question<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
æŸ¥è¯¢é—®é¢˜: What are model variants?</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb68" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç‹¬ç«‹è·å–ä¸Šä¸‹æ–‡æ–‡æ¡£ä»¥ä¾¿å±•ç¤º</span></span>
<span id="cb68-2">context_docs <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> retriever.invoke(question)</span>
<span id="cb68-3"></span>
<span id="cb68-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è°ƒç”¨ RAG é“¾</span></span>
<span id="cb68-5">answer <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rag_chain.invoke(question)</span>
<span id="cb68-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> textwrap</span>
<span id="cb68-7"></span>
<span id="cb68-8"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> line <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> answer.split(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>):</span>
<span id="cb68-9">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(textwrap.fill(line, width<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span>))</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>æ¨¡å‹å˜ä½“æ˜¯å¯ä»¥é™„åŠ åœ¨æ¨¡å‹æ ‡è¯†ç¬¦åé¢çš„åç¼€ï¼Œç”¨æ¥æ”¹å˜åŒ–æ¨¡å‹çš„è¡Œä¸ºæˆ–è·¯ç”±æ–¹å¼ã€‚é™æ€å˜ä½“ï¼ˆå¦‚
`:free`ã€`:beta`ã€`:extended`ã€`:exacto`ã€`:thinking`ï¼‰ä»…é€‚ç”¨äºç‰¹å®šæ¨¡å‹ï¼Œè€ŒåŠ¨æ€å˜ä½“ï¼ˆå¦‚
`:online`ã€`:nitro`ã€`:floor`ï¼‰å¯åœ¨æ‰€æœ‰æ¨¡å‹ä¸Šä½¿ç”¨ï¼Œåˆ†åˆ«æä¾›ç½‘ç»œæœç´¢ã€ä¼˜å…ˆé«˜ååæˆ–ä½ä»·æ ¼çš„è·¯ç”±ç­–ç•¥ã€‚</code></pre>
</div>
</div>
</section>
</div>
</div>
</div>


<!-- -->

</section>

 ]]></description>
  <category>AI</category>
  <category>API</category>
  <category>tutorial</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/RAG/</guid>
  <pubDate>Sat, 01 Nov 2025 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/RAG/images.png" medium="image" type="image/png" height="79" width="144"/>
</item>
<item>
  <title>OpenRouterï¼šå¤š AI æ¨¡å‹çš„ç»Ÿä¸€ API</title>
  <dc:creator>Tony D</dc:creator>
  <link>https://jcwinning.github.io/LandingPage/posts/openrouter/</link>
  <description><![CDATA[ 





<section id="openrouter-ç®€ä»‹" class="level1">
<h1>OpenRouter ç®€ä»‹</h1>
<p>OpenRouter æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¹³å°ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„ API æ¥å£ï¼Œç”¨äºè®¿é—®æ¥è‡ªä¸åŒæä¾›å•†çš„å¤šä¸ª AI æ¨¡å‹ã€‚å¼€å‘äººå‘˜æ— éœ€åˆ†åˆ«ä¸ºæ¯ä¸ª AI æœåŠ¡è¿›è¡Œé›†æˆï¼Œè€Œæ˜¯å¯ä»¥ä½¿ç”¨ OpenRouter çš„å•ä¸€ç«¯ç‚¹è®¿é—®æ¥è‡ª OpenAIã€Anthropicã€Google ç­‰å…¬å¸çš„æ¨¡å‹ã€‚</p>
<section id="openrouter-å…¥é—¨" class="level2">
<h2 class="anchored" data-anchor-id="openrouter-å…¥é—¨">OpenRouter å…¥é—¨</h2>
<p>ä½¿ç”¨ OpenRouter éå¸¸ç®€å•ï¼Œåªéœ€å‡ ä¸ªæ­¥éª¤å³å¯å®Œæˆã€‚è¯¥å¹³å°æ—¨åœ¨æœ€å¤§é™åº¦åœ°å‡å°‘è®¾ç½®æ—¶é—´ï¼ŒåŒæ—¶ä¿æŒå®‰å…¨æœ€ä½³å®è·µã€‚</p>
</section>
<section id="åˆ›å»ºæ‚¨çš„-openrouter-è´¦æˆ·" class="level2">
<h2 class="anchored" data-anchor-id="åˆ›å»ºæ‚¨çš„-openrouter-è´¦æˆ·">1. åˆ›å»ºæ‚¨çš„ OpenRouter è´¦æˆ·</h2>
<p>é¦–å…ˆï¼Œè®¿é—® <a href="https://openrouter.ai">openrouter.ai</a> å¹¶åˆ›å»ºä¸€ä¸ªè´¦æˆ·ã€‚æ³¨å†Œè¿‡ç¨‹éå¸¸ç®€å•ï¼š</p>
<ol type="1">
<li><strong>æ³¨å†Œ</strong>ï¼šä½¿ç”¨æ‚¨çš„ç”µå­é‚®ç®±æˆ–ç¤¾äº¤ç™»å½•ï¼ˆGoogleã€GitHubï¼‰</li>
<li><strong>éªŒè¯é‚®ç®±</strong>ï¼šé€šè¿‡éªŒè¯é“¾æ¥ç¡®è®¤æ‚¨çš„ç”µå­é‚®ç®±åœ°å€</li>
<li><strong>è®¿é—®ä»ªè¡¨æ¿</strong>ï¼šå¯¼èˆªåˆ°ä»ªè¡¨æ¿ï¼Œæ‚¨å¯ä»¥åœ¨é‚£é‡Œæ‰¾åˆ°æ‚¨çš„ API å¯†é’¥</li>
</ol>
<p><strong>ğŸ’¡ ä¸“å®¶æç¤º</strong>ï¼šæ‚¨çš„ä»ªè¡¨æ¿æä¾›äº†å®è´µçš„æ´å¯Ÿï¼ŒåŒ…æ‹¬ï¼š - ä½¿ç”¨ç»Ÿè®¡å’Œæˆæœ¬è¿½è¸ª - æ¨¡å‹æ€§èƒ½æŒ‡æ ‡ - API å¯†é’¥ç®¡ç† - è´¦å•ä¿¡æ¯</p>
</section>
<section id="å®‰å…¨çš„-api-å¯†é’¥ç®¡ç†" class="level2">
<h2 class="anchored" data-anchor-id="å®‰å…¨çš„-api-å¯†é’¥ç®¡ç†">2. å®‰å…¨çš„ API å¯†é’¥ç®¡ç†</h2>
<p>åœ¨ä½¿ç”¨ AI API æ—¶ï¼Œå®‰å…¨è‡³å…³é‡è¦ã€‚åˆ‡å‹¿ç›´æ¥åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  API å¯†é’¥ã€‚ç›¸åï¼Œä½¿ç”¨ç¯å¢ƒå˜æ¥ç¡®ä¿æ‚¨çš„å‡­æ®å®‰å…¨ï¼š</p>
<section id="ä¸ºä»€ä¹ˆç¯å¢ƒå˜é‡å¾ˆé‡è¦" class="level3">
<h3 class="anchored" data-anchor-id="ä¸ºä»€ä¹ˆç¯å¢ƒå˜é‡å¾ˆé‡è¦">ä¸ºä»€ä¹ˆç¯å¢ƒå˜é‡å¾ˆé‡è¦</h3>
<ul>
<li><strong>å®‰å…¨æ€§</strong>ï¼šé˜²æ­¢åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­æ„å¤–æ³„éœ²</li>
<li><strong>çµæ´»æ€§</strong>ï¼šå…è®¸ä¸ºå¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨ä¸åŒçš„å¯†é’¥</li>
<li><strong>åä½œ</strong>ï¼šå›¢é˜Ÿæˆå‘˜å¯ä»¥åœ¨ä¸å…±äº«çš„æƒ…å†µä¸‹ä½¿ç”¨è‡ªå·±çš„å¯†é’¥</li>
<li><strong>éƒ¨ç½²</strong>ï¼šæ˜“äºåœ¨ä¸åŒçš„æ‰˜ç®¡ç¯å¢ƒä¸­è¿›è¡Œç®¡ç†</li>
</ul>
</section>
<section id="è®¾ç½®ç¯å¢ƒå˜é‡" class="level3">
<h3 class="anchored" data-anchor-id="è®¾ç½®ç¯å¢ƒå˜é‡">è®¾ç½®ç¯å¢ƒå˜é‡</h3>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>.env</code> æ–‡ä»¶ï¼š</p>
<p>OPENROUTER_API_KEY=your_actual_api_key_here</p>
<p>å®‰è£… <code>python-dotenv</code> åº“ä»¥åŠ è½½ç¯å¢ƒå˜é‡ï¼š</p>
<p>pip install python-dotenv</p>
</section>
</section>
<section id="æ‚¨çš„ç¬¬ä¸€æ¬¡-api-è°ƒç”¨" class="level2">
<h2 class="anchored" data-anchor-id="æ‚¨çš„ç¬¬ä¸€æ¬¡-api-è°ƒç”¨">3. æ‚¨çš„ç¬¬ä¸€æ¬¡ API è°ƒç”¨</h2>
<p>ç°åœ¨æ‚¨å·²ç»è®¾ç½®å¥½äº† API å¯†é’¥ï¼Œè®©æˆ‘ä»¬è¿›è¡Œç¬¬ä¸€æ¬¡ API è°ƒç”¨ã€‚OpenRouter å·§å¦™åœ°ä½¿ç”¨äº†ä¸ OpenAI ç›¸åŒçš„ API æ ¼å¼ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥ä½¿ç”¨ç†Ÿæ‚‰çš„ <code>openai</code> Python åº“ â€”â€” åªæ˜¯ä½¿ç”¨ä¸åŒçš„åŸºç«¯ç‚¹ URLã€‚</p>
<section id="äº†è§£æ¶æ„" class="level3">
<h3 class="anchored" data-anchor-id="äº†è§£æ¶æ„">äº†è§£æ¶æ„</h3>
<p><strong>ğŸ”§ å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„</strong>ï¼šOpenRouter å……å½“æ™ºèƒ½ä»£ç†ï¼Œè´Ÿè´£ï¼š 1. æ¥æ”¶æ‚¨çš„æ ‡å‡†åŒ– API è¯·æ±‚ 2. å°†å…¶è·¯ç”±åˆ°é€‚å½“çš„ AI æ¨¡å‹æä¾›å•† 3. å¤„ç†ç‰¹å®šäºæä¾›å•†çš„èº«ä»½éªŒè¯å’Œæ ¼å¼åŒ– 4. ä»¥ä¸€è‡´çš„æ ¼å¼è¿”å›å“åº” 5. è¿½è¸ªæ‰€æœ‰æ¨¡å‹çš„ä½¿ç”¨æƒ…å†µå’Œæˆæœ¬</p>
</section>
<section id="å¿…éœ€çš„ä¾èµ–é¡¹" class="level3">
<h3 class="anchored" data-anchor-id="å¿…éœ€çš„ä¾èµ–é¡¹">å¿…éœ€çš„ä¾èµ–é¡¹</h3>
<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²å®‰è£…å¿…è¦çš„ Python åŒ…ï¼š</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pip</span> install openai python-dotenv</span></code></pre></div></div>
<ul>
<li><strong>openai</strong>: å®˜æ–¹çš„ OpenAI Python å®¢æˆ·ç«¯ï¼ˆä¸ OpenRouter å…¼å®¹ï¼‰</li>
<li><strong>python-dotenv</strong>: ç”¨äºä» <code>.env</code> æ–‡ä»¶åŠ è½½ç¯å¢ƒå˜é‡</li>
</ul>
</section>
<section id="åŸºç¡€æ–‡æœ¬ç”Ÿæˆç¤ºä¾‹" class="level3">
<h3 class="anchored" data-anchor-id="åŸºç¡€æ–‡æœ¬ç”Ÿæˆç¤ºä¾‹">åŸºç¡€æ–‡æœ¬ç”Ÿæˆç¤ºä¾‹</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" aria-controls="tabset-1-1" aria-selected="true" href="">Python (ä½¿ç”¨ OpenAI åŒ…)</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" aria-controls="tabset-1-2" aria-selected="false" href="">Python (ä½¿ç”¨ Chatlas åŒ…)</a></li><li class="nav-item"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" aria-controls="tabset-1-3" aria-selected="false" href="">R (ä½¿ç”¨ Ellmer åŒ…)</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb2-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb2-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä» .env æ–‡ä»¶åŠ è½½ç¯å¢ƒå˜é‡</span></span>
<span id="cb2-6">load_dotenv()</span>
<span id="cb2-7"></span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ OpenRouter åˆå§‹åŒ– OpenAI å®¢æˆ·ç«¯</span></span>
<span id="cb2-9">client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb2-10">  base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># OpenRouter çš„ API ç«¯ç‚¹</span></span>
<span id="cb2-11">  api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>),  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ‚¨å®‰å…¨çš„ API å¯†é’¥</span></span>
<span id="cb2-12">)</span>
<span id="cb2-13"></span>
<span id="cb2-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ OpenRouter åˆ›å»ºå¯¹è¯è¡¥å…¨</span></span>
<span id="cb2-15">completion <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.chat.completions.create(</span>
<span id="cb2-16">  extra_headers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb2-17">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HTTP-Referer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://your-site.com"</span>,  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¯é€‰ï¼šå¸®åŠ© OpenRouter æ”¹è¿›æœåŠ¡</span></span>
<span id="cb2-18">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-Title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Your Site Name"</span>,             <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¯é€‰ï¼šç”¨äº OpenRouter æ’åçš„ç½‘ç«™åç§°</span></span>
<span id="cb2-19">  },</span>
<span id="cb2-20">  model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-oss-20b:free"</span>,          <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç”¨äºæµ‹è¯•/å¼€å‘çš„å…è´¹æ¨¡å‹</span></span>
<span id="cb2-21">  messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb2-22">    {</span>
<span id="cb2-23">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>,</span>
<span id="cb2-24">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä½ å¥½ï¼ä½ èƒ½ç”¨ç®€å•çš„æœ¯è¯­è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯ OpenRouter å—ï¼Ÿ"</span></span>
<span id="cb2-25">    }</span>
<span id="cb2-26">  ],</span>
<span id="cb2-27">  temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ§åˆ¶åˆ›é€ åŠ› (0.0 = ç¡®å®šæ€§, 1.0 = éå¸¸æœ‰åˆ›æ„)</span></span>
<span id="cb2-28">)</span>
<span id="cb2-29"></span>
<span id="cb2-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æå–å¹¶æ‰“å°å“åº”</span></span>
<span id="cb2-31"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(completion.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content)</span></code></pre></div></div>
</details>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> chatlas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> ChatOpenRouter</span>
<span id="cb3-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb3-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb3-4"></span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä» .env æ–‡ä»¶åŠ è½½ç¯å¢ƒå˜é‡</span></span>
<span id="cb3-6">load_dotenv()</span>
<span id="cb3-7"></span>
<span id="cb3-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ OpenRouter åˆå§‹åŒ– OpenAI å®¢æˆ·ç«¯</span></span>
<span id="cb3-9">client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ChatOpenRouter(api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>)</span>
<span id="cb3-10">,base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://openrouter.ai/api/v1'</span></span>
<span id="cb3-11"> ,system_prompt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb3-12"> ,model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-oss-20b:free"</span>)</span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">response<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>client.chat(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ³•å›½çš„é¦–éƒ½æ˜¯å“ªé‡Œï¼Ÿ"</span>)</span>
<span id="cb4-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#str(response)</span></span></code></pre></div></div>
</details>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ellmer)</span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(dotenv)</span>
<span id="cb5-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">load_dot_env</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">file =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".env"</span>)</span>
<span id="cb5-4"></span>
<span id="cb5-5">chat <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat_openrouter</span>(</span>
<span id="cb5-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">system_prompt =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span>,</span>
<span id="cb5-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">api_key =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Sys.getenv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>),</span>
<span id="cb5-8"> </span>
<span id="cb5-9">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">model =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-oss-20b:free"</span>,</span>
<span id="cb5-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">echo =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"none"</span></span>
<span id="cb5-11">)</span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">chat<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chat</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ç»™æˆ‘è®²ä¸‰ä¸ªå…³äºç»Ÿè®¡å­¦å®¶çš„ç¬‘è¯"</span>)</span></code></pre></div></div>
</details>
</div>
</div>
</div>
</div>
<p><strong>æ ¸å¿ƒç»„ä»¶è¯´æ˜ï¼š</strong></p>
<ul>
<li><strong><code>base_url</code></strong>ï¼šæŒ‡å‘ OpenRouter çš„ API è€Œé OpenAI çš„</li>
<li><strong><code>model</code></strong>ï¼šä½¿ç”¨ OpenRouter çš„æ¨¡å‹å‘½åæ ¼å¼ (<code>æä¾›å•†/æ¨¡å‹åç§°</code>)</li>
<li><strong><code>extra_headers</code></strong>ï¼šå¯é€‰ï¼Œä½†å»ºè®®ç”¨äº OpenRouter çš„åˆ†æ</li>
<li><strong><code>temperature</code></strong>ï¼šæ§åˆ¶å“åº”çš„åˆ›é€ åŠ›ï¼ˆèŒƒå›´ 0.0-2.0ï¼‰</li>
<li><strong><code>messages</code></strong>ï¼šæ ‡å‡†çš„èŠå¤©æ ¼å¼ï¼Œé‡‡ç”¨åŸºäºè§’è‰²çš„å¯¹è¯ç»“æ„</li>
</ul>
<p><strong>ğŸ’¡ æ¨¡å‹é€‰æ‹©å»ºè®®ï¼š</strong> - <strong>å…è´¹æ¨¡å‹</strong>ï¼šéå¸¸é€‚åˆå¼€å‘é˜¶æ®µï¼ˆä»¥ <code>*free</code> ç»“å°¾ï¼‰ - <strong>ç»æµå‹æ¨¡å‹</strong>ï¼šé€‚åˆç”Ÿäº§ç¯å¢ƒçš„æˆæœ¬æ•ˆç›Šæ¨¡å‹ï¼ˆä»¥ <code>*:budget</code> ç»“å°¾ï¼‰ - <strong>é«˜çº§æ¨¡å‹</strong>ï¼šæœ€ä½³æ€§èƒ½ï¼ˆ<code>*</code>ã€<code>*:pro</code>ã€<code>*:latest</code>ï¼‰ - <strong>ä¸“ä¸šæ¨¡å‹</strong>ï¼šé’ˆå¯¹ç‰¹å®šä»»åŠ¡ä¼˜åŒ–çš„æ¨¡å‹ï¼ˆç¼–ç¨‹ã€æ•°å­¦ã€åˆ›æ„å†™ä½œï¼‰</p>
</section>
</section>
<section id="æŒæ¡ç³»ç»Ÿæç¤ºè¯-system-prompts" class="level2">
<h2 class="anchored" data-anchor-id="æŒæ¡ç³»ç»Ÿæç¤ºè¯-system-prompts">4. æŒæ¡ç³»ç»Ÿæç¤ºè¯ (System Prompts)</h2>
<p>ç³»ç»Ÿæç¤ºè¯æ˜¯å¡‘é€  AI è¡Œä¸ºã€ä¸ªæ€§å’Œå›å¤é£æ ¼çš„å¼ºå¤§å·¥å…·ã€‚å®ƒä»¬è®¾ç½®äº†æ•´ä¸ªå¯¹è¯çš„ä¸Šä¸‹æ–‡å’Œè§„åˆ™ï¼Œåœ¨å¯¹è¯æµä¸­å‡ºç°åœ¨ç”¨æˆ·æ¶ˆæ¯ä¹‹å‰ã€‚</p>
<section id="ä»€ä¹ˆæ˜¯ç³»ç»Ÿæç¤ºè¯" class="level3">
<h3 class="anchored" data-anchor-id="ä»€ä¹ˆæ˜¯ç³»ç»Ÿæç¤ºè¯">ä»€ä¹ˆæ˜¯ç³»ç»Ÿæç¤ºè¯ï¼Ÿ</h3>
<p>ç³»ç»Ÿæç¤ºè¯å……å½“<strong>å…ƒæŒ‡ä»¤</strong>ï¼ŒæŒ‡å¯¼ AI åœ¨æ•´ä¸ªå¯¹è¯ä¸­åº”å¦‚ä½•ååº”ã€‚å®ƒä»¬æœ€å…ˆè¢«å¤„ç†ï¼Œå¹¶å½±å“æ‰€æœ‰åç»­çš„äº¤äº’ã€‚</p>
</section>
<section id="ä¸ºä»€ä¹ˆç³»ç»Ÿæç¤ºè¯å¾ˆé‡è¦" class="level3">
<h3 class="anchored" data-anchor-id="ä¸ºä»€ä¹ˆç³»ç»Ÿæç¤ºè¯å¾ˆé‡è¦">ä¸ºä»€ä¹ˆç³»ç»Ÿæç¤ºè¯å¾ˆé‡è¦</h3>
<ul>
<li><strong>ä¸€è‡´çš„è¡Œä¸º</strong>ï¼šç¡®ä¿ AI åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ä¿æŒæ‰€éœ€çš„ä¸ªæ€§</li>
<li><strong>è¾“å‡ºæ ¼å¼</strong>ï¼šè§„å®šå“åº”ç»“æ„ï¼ˆJSONã€Markdownã€ä»£ç å—ï¼‰</li>
<li><strong>å®‰å…¨çº¦æŸ</strong>ï¼šè®¾ç½®å›å¤çš„è¾¹ç•Œå’Œé™åˆ¶</li>
<li><strong>ä¸Šä¸‹æ–‡è®¾ç½®</strong>ï¼šæä¾›èƒŒæ™¯ä¿¡æ¯ä»¥è·å¾—æ›´å¥½çš„å›å¤</li>
<li><strong>ä»»åŠ¡ä¸“é—¨åŒ–</strong>ï¼šé’ˆå¯¹ç‰¹å®šç”¨ä¾‹ä¼˜åŒ– AI</li>
</ul>
</section>
<section id="æœ‰æ•ˆçš„ç³»ç»Ÿæç¤ºè¯ç¤ºä¾‹" class="level3">
<h3 class="anchored" data-anchor-id="æœ‰æ•ˆçš„ç³»ç»Ÿæç¤ºè¯ç¤ºä¾‹">æœ‰æ•ˆçš„ç³»ç»Ÿæç¤ºè¯ç¤ºä¾‹</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¸¦æœ‰ç³»ç»Ÿæç¤ºè¯çš„ç¤ºä¾‹</span></span>
<span id="cb7-2">completion <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.chat.completions.create(</span>
<span id="cb7-3">  model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-oss-20b:free"</span>,</span>
<span id="cb7-4">  messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb7-5">    {</span>
<span id="cb7-6">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"system"</span>,</span>
<span id="cb7-7">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„ AI åŠ©æ‰‹ï¼Œå¯ä»¥ç”¨ç®€å•çš„æœ¯è¯­è§£é‡ŠæŠ€æœ¯æ¦‚å¿µã€‚å§‹ç»ˆä¿æŒå‹å¥½ï¼Œå¹¶å°½å¯èƒ½ä½¿ç”¨ç±»æ¯”ï¼Œä¿æŒç®€å•ã€‚"</span></span>
<span id="cb7-8">    },</span>
<span id="cb7-9">    {</span>
<span id="cb7-10">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>,</span>
<span id="cb7-11">      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"LLM æ¨¡å‹ä¸­çš„æ¸©åº¦ (temperature) æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"</span></span>
<span id="cb7-12">    }</span>
<span id="cb7-13">  ],</span>
<span id="cb7-14">  temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span></span>
<span id="cb7-15">)</span>
<span id="cb7-16"></span>
<span id="cb7-17"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(completion.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content)</span></code></pre></div></div>
</details>
</div>
<p>å¸¸è§çš„ç³»ç»Ÿæç¤ºè¯æ¨¡å¼ï¼š</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä¸åŒçš„ç³»ç»Ÿæç¤ºè¯ç¤ºä¾‹</span></span>
<span id="cb8-2">system_prompts <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {</span>
<span id="cb8-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"coding_assistant"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä½ æ˜¯ä¸€ä¸ªä¸“å®¶çº§ç¨‹åºå‘˜ã€‚æä¾›æ•´æ´ã€æ³¨é‡Šè‰¯å¥½çš„ä»£ç è§£å†³æ–¹æ¡ˆï¼Œå¹¶è§£é‡Šä½ çš„æ¨ç†ã€‚"</span>,</span>
<span id="cb8-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"creative_writer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä½ æ˜¯ä¸€ä¸ªåˆ›æ„æ•…äº‹è®²è¿°è€…ã€‚ç¼–å†™å…·æœ‰ç”ŸåŠ¨æè¿°å’Œå¼•äººå…¥èƒœè§’è‰²çš„åŠ¨äººå™è¿°ã€‚"</span>,</span>
<span id="cb8-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data_analyst"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä½ æ˜¯ä¸€ä¸ªæ•°æ®åˆ†æå¸ˆã€‚æ ¹æ®æ•°æ®æä¾›è§è§£ï¼Œå»ºè®®å¯è§†åŒ–æ–¹å¼ï¼Œå¹¶æ¸…æ™°åœ°è§£é‡Šç»Ÿè®¡æ¦‚å¿µã€‚"</span>,</span>
<span id="cb8-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tutor"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä½ æ˜¯ä¸€ä¸ªè€å¿ƒçš„å¯¼å¸ˆã€‚å°†å¤æ‚çš„ä¸»é¢˜åˆ†è§£ä¸ºç®€å•çš„æ­¥éª¤å¹¶æä¾›é¼“åŠ±æ€§çš„åé¦ˆã€‚"</span></span>
<span id="cb8-7">}</span>
<span id="cb8-8"></span>
<span id="cb8-9"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> chat_with_persona(persona, user_message):</span>
<span id="cb8-10">    completion <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.chat.completions.create(</span>
<span id="cb8-11">        model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-oss-20b:free"</span>,</span>
<span id="cb8-12">        messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb8-13">            {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"system"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: system_prompts[persona]},</span>
<span id="cb8-14">            {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: user_message}</span>
<span id="cb8-15">        ],</span>
<span id="cb8-16">        temperature<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span></span>
<span id="cb8-17">    )</span>
<span id="cb8-18">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> completion.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content</span>
<span id="cb8-19"></span>
<span id="cb8-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ç¤ºä¾‹ç”¨æ³•</span></span>
<span id="cb8-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#response = chat_with_persona("coding_assistant", "å¦‚ä½•ç”¨ Python åè½¬å­—ç¬¦ä¸²ï¼Ÿ")</span></span>
<span id="cb8-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#print(response)</span></span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="æµå¼å“åº”å®æ—¶-ai-äº¤äº’" class="level2">
<h2 class="anchored" data-anchor-id="æµå¼å“åº”å®æ—¶-ai-äº¤äº’">5. æµå¼å“åº”ï¼šå®æ—¶ AI äº¤äº’</h2>
<p>æµå¼ä¼ è¾“ (Streaming) æ˜¯æå‡ç”¨æˆ·ä½“éªŒçš„åˆ©å™¨ï¼Œç‰¹åˆ«æ˜¯åœ¨èŠå¤©åº”ç”¨å’Œäº¤äº’å¼å·¥å…·ä¸­ã€‚æµå¼ä¼ è¾“ä¸æ˜¯ç­‰å¾…å®Œæ•´çš„å“åº”ï¼Œè€Œæ˜¯åœ¨ç”Ÿæˆå†…å®¹æ—¶ç«‹å³äº¤ä»˜ï¼Œä»è€Œåˆ›é€ è‡ªç„¶ä¸”å¼•äººå…¥èƒœçš„å¯¹è¯ã€‚</p>
<section id="ä¸ºä»€ä¹ˆæµå¼ä¼ è¾“å¾ˆé‡è¦" class="level3">
<h3 class="anchored" data-anchor-id="ä¸ºä»€ä¹ˆæµå¼ä¼ è¾“å¾ˆé‡è¦">ä¸ºä»€ä¹ˆæµå¼ä¼ è¾“å¾ˆé‡è¦</h3>
<p><strong>ğŸš€ ç”¨æˆ·ä½“éªŒä¼˜åŠ¿ï¼š</strong> - <strong>ç«‹å³åé¦ˆ</strong>ï¼šç”¨æˆ·èƒ½ç«‹å³çœ‹åˆ°å“åº”å¼€å§‹ç”Ÿæˆ - <strong>é™ä½æ„ŸçŸ¥å»¶è¿Ÿ</strong>ï¼šå†…å®¹åœ¨ç”Ÿæˆæ—¶å³åˆ»æ˜¾ç¤º - <strong>è‡ªç„¶çš„å¯¹è¯æµ</strong>ï¼šæ¨¡ä»¿äººç±»è¯´è¯çš„æ¨¡å¼ - <strong>è¿›åº¦æŒ‡ç¤º</strong>ï¼šç”¨æˆ·çŸ¥é“ AI æ­£åœ¨å·¥ä½œ - <strong>åŠæ—©ç»ˆæ­¢</strong>ï¼šå¦‚æœéœ€è¦ï¼Œç”¨æˆ·å¯ä»¥åœæ­¢è¿‡é•¿çš„å›å¤</p>
<p><strong>âš¡ æŠ€æœ¯ä¼˜åŠ¿ï¼š</strong> - <strong>æ›´ä½çš„å†…å­˜å ç”¨</strong>ï¼šæ— éœ€ç¼“å†²å®Œæ•´å“åº” - <strong>æ›´å¿«çš„é¦–å­—èŠ‚æ—¶é—´</strong>ï¼šå†…å®¹ç«‹å³å¼€å§‹æµåŠ¨ - <strong>æ›´å¥½çš„é”™è¯¯å¤„ç†</strong>ï¼šåœ¨è¿‡ç¨‹ä¸­æ›´æ—©å‘ç°é—®é¢˜ - <strong>èµ„æºæ•ˆç‡</strong>ï¼šå¢é‡å¤„ç†æ•°æ®</p>
</section>
<section id="åœ¨-openrouter-ä¸­å®ç°æµå¼ä¼ è¾“" class="level3">
<h3 class="anchored" data-anchor-id="åœ¨-openrouter-ä¸­å®ç°æµå¼ä¼ è¾“">åœ¨ OpenRouter ä¸­å®ç°æµå¼ä¼ è¾“</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆå§‹åŒ– OpenAI å®¢æˆ·ç«¯ï¼ˆå¦‚æœå°šæœªå®Œæˆï¼‰</span></span>
<span id="cb9-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb9-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb9-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb9-5"></span>
<span id="cb9-6">load_dotenv()</span>
<span id="cb9-7">client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb9-8">  base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb9-9">  api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>),</span>
<span id="cb9-10">)</span>
<span id="cb9-11"></span>
<span id="cb9-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> stream_response(model, message):</span>
<span id="cb9-13">    stream <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.chat.completions.create(</span>
<span id="cb9-14">        model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>model,</span>
<span id="cb9-15">        messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[{<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: message}],</span>
<span id="cb9-16">        stream<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span>
<span id="cb9-17">    )</span>
<span id="cb9-18"></span>
<span id="cb9-19">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> chunk <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> stream:</span>
<span id="cb9-20">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> chunk.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].delta.content <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>:</span>
<span id="cb9-21">            <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(chunk.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].delta.content, end<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>, flush<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb9-22"></span>
<span id="cb9-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æµå¼ä¼ è¾“ç¤ºä¾‹</span></span>
<span id="cb9-24"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ­£åœ¨æµå¼ä¼ è¾“å“åº”ï¼š"</span>)</span>
<span id="cb9-25">stream_response(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"openai/gpt-oss-20b:free"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"è¯·ç»™æˆ‘è®²ä¸€ä¸ªå…³äº AI çš„çŸ­ç¯‡æ•…äº‹"</span>)</span>
<span id="cb9-26"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>()  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æµå¼ä¼ è¾“ç»“æŸåæ·»åŠ æ¢è¡Œ</span></span></code></pre></div></div>
</details>
</div>
</section>
<section id="æ–‡å­—è½¬å›¾åƒ-text-to-image" class="level3">
<h3 class="anchored" data-anchor-id="æ–‡å­—è½¬å›¾åƒ-text-to-image">6. æ–‡å­—è½¬å›¾åƒ (Text to Image)</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb10-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> base64</span>
<span id="cb10-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> datetime</span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># | eval: false</span></span>
<span id="cb11-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb11-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb11-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb11-5"></span>
<span id="cb11-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä» .env æ–‡ä»¶åŠ è½½ç¯å¢ƒå˜é‡</span></span>
<span id="cb11-7">load_dotenv()</span>
<span id="cb11-8"></span>
<span id="cb11-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ OpenRouter åˆå§‹åŒ– OpenAI å®¢æˆ·ç«¯</span></span>
<span id="cb11-10">client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb11-11">    base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb11-12">    api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>),</span>
<span id="cb11-13">)</span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å›¾åƒç”Ÿæˆè¯·æ±‚</span></span>
<span id="cb12-2">response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.chat.completions.create(</span>
<span id="cb12-3">    extra_headers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb12-4">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HTTP-Referer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"www.tonydotdev.com"</span>,</span>
<span id="cb12-5">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-Title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"TT_AI_blog"</span>,</span>
<span id="cb12-6">    },</span>
<span id="cb12-7">    model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"google/gemini-2.5-flash-image"</span>,</span>
<span id="cb12-8">    messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb12-9">        {</span>
<span id="cb12-10">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>,</span>
<span id="cb12-11">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ç”Ÿæˆä¸€å¼ å®é™ä¸”å†™å®çš„æ—¥å‡ºé›ªå±±é£æ™¯å›¾ã€‚"</span>,</span>
<span id="cb12-12">        }</span>
<span id="cb12-13">    ],</span>
<span id="cb12-14">    modalities<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"image"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>],</span>
<span id="cb12-15">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#image_size="1024x1024",</span></span>
<span id="cb12-16">)</span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> base64</span>
<span id="cb13-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> datetime</span>
<span id="cb13-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æå–æ¶ˆæ¯</span></span>
<span id="cb13-4">message <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> response.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message</span>
<span id="cb13-5"></span>
<span id="cb13-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¤„ç†å›¾åƒè¾“å‡ºï¼ˆbase64 å­—ç¬¦ä¸²ä½äº "data:image/png;base64,..." ä¸­ï¼‰</span></span>
<span id="cb13-7"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> message.images:</span>
<span id="cb13-8">    data_url <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> message.images[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>][<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"image_url"</span>][<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"url"</span>]</span>
<span id="cb13-9"></span>
<span id="cb13-10">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¦‚æœå­˜åœ¨å‰ç¼€åˆ™å°†å…¶å‰¥ç¦»</span></span>
<span id="cb13-11">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> data_url.startswith(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data:image"</span>):</span>
<span id="cb13-12">        _, base64_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> data_url.split(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">","</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb13-13">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb13-14">        base64_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> data_url</span>
<span id="cb13-15"></span>
<span id="cb13-16">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è§£ç å¹¶ä¿å­˜ä¸º PNG</span></span>
<span id="cb13-17">    image_bytes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> base64.b64decode(base64_data)</span>
<span id="cb13-18">    current_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> datetime.datetime.now().strftime(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%H%M"</span>)</span>
<span id="cb13-19">    output_file <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"text_image_gemini_25_openrouter_</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>current_time<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">.png"</span></span>
<span id="cb13-20">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(output_file, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"wb"</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> f:</span>
<span id="cb13-21">        f.write(image_bytes)</span>
<span id="cb13-22"></span>
<span id="cb13-23">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"âœ… å›¾åƒå·²ä¿å­˜ä¸º </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>output_file<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb13-24"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb13-25">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"âŒ å“åº”ä¸­æœªè¿”å›å›¾åƒ"</span>)</span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> IPython.display <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Image, display</span>
<span id="cb14-2"></span>
<span id="cb14-3">display(Image(filename<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text_image_gemini_25_openrouter_1352.png"</span>))</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;IPython.core.display.Image object&gt;</code></pre>
</div>
</div>
</section>
<section id="å›¾åƒè½¬æ–‡å­—-image-to-text" class="level3">
<h3 class="anchored" data-anchor-id="å›¾åƒè½¬æ–‡å­—-image-to-text">7. å›¾åƒè½¬æ–‡å­— (Image to Text)</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> base64</span>
<span id="cb16-2"></span>
<span id="cb16-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å°†æœ¬åœ°å›¾åƒè½¬æ¢ä¸º data URL</span></span>
<span id="cb16-4"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text_image_gemini_25_openrouter_1352.png"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rb"</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> image_file:</span>
<span id="cb16-5">    base64_image <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> base64.b64encode(image_file.read()).decode(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'utf-8'</span>)</span>
<span id="cb16-6">    data_url <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"data:image/png;base64,</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>base64_image<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb16-7"></span>
<span id="cb16-8">completion <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.chat.completions.create(</span>
<span id="cb16-9">  extra_headers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb16-10">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HTTP-Referer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;æ‚¨çš„ç½‘ç«™URL&gt;"</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¯é€‰ï¼šOpenRouter æ’åç”¨çš„ç½‘ç«™ URL</span></span>
<span id="cb16-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-Title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;æ‚¨çš„ç½‘ç«™åç§°&gt;"</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¯é€‰ï¼šOpenRouter æ’åç”¨çš„ç½‘ç«™åç§°</span></span>
<span id="cb16-12">  },</span>
<span id="cb16-13">  extra_body<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{},</span>
<span id="cb16-14">  model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nvidia/nemotron-nano-12b-v2-vl:free"</span>,</span>
<span id="cb16-15">  messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb16-16">              {</span>
<span id="cb16-17">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>,</span>
<span id="cb16-18">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: [</span>
<span id="cb16-19">                  {</span>
<span id="cb16-20">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span id="cb16-21">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"è¿™å¼ å›¾ç‰‡é‡Œæœ‰ä»€ä¹ˆï¼Ÿ"</span></span>
<span id="cb16-22">                  },</span>
<span id="cb16-23">                  {</span>
<span id="cb16-24">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"image_url"</span>,</span>
<span id="cb16-25">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"image_url"</span>: {</span>
<span id="cb16-26">                      <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"url"</span>: data_url</span>
<span id="cb16-27">                    }</span>
<span id="cb16-28">                  }</span>
<span id="cb16-29">                ]</span>
<span id="cb16-30">              }</span>
<span id="cb16-31">            ]</span>
<span id="cb16-32">)</span>
<span id="cb16-33"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(completion.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message.content)</span></code></pre></div></div>
</details>
</div>
</section>
<section id="æ–‡å­—ä¸å›¾åƒç»“åˆç”Ÿæˆå›¾åƒ-text-image-to-image" class="level3">
<h3 class="anchored" data-anchor-id="æ–‡å­—ä¸å›¾åƒç»“åˆç”Ÿæˆå›¾åƒ-text-image-to-image">8. æ–‡å­—ä¸å›¾åƒç»“åˆç”Ÿæˆå›¾åƒ (Text &amp; Image to Image)</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># | eval: false</span></span>
<span id="cb17-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> base64</span>
<span id="cb17-3"></span>
<span id="cb17-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å°†ä¹‹å‰ç”Ÿæˆçš„å›¾åƒè½¬æ¢ä¸º base64</span></span>
<span id="cb17-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text_image_gemini_25_openrouter_1352.png"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"rb"</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> image_file:</span>
<span id="cb17-6">    base64_image <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> base64.b64encode(image_file.read()).decode(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"utf-8"</span>)</span>
<span id="cb17-7"></span>
<span id="cb17-8">response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.chat.completions.create(</span>
<span id="cb17-9">    extra_headers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb17-10">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HTTP-Referer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"www.tonydotdev.com"</span>,</span>
<span id="cb17-11">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-Title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"TT_AI_blog"</span>,</span>
<span id="cb17-12">    },</span>
<span id="cb17-13">    model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"google/gemini-2.5-flash-image"</span>,</span>
<span id="cb17-14">    messages<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[</span>
<span id="cb17-15">        {</span>
<span id="cb17-16">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"role"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"user"</span>,</span>
<span id="cb17-17">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"content"</span>: [</span>
<span id="cb17-18">                {</span>
<span id="cb17-19">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>,</span>
<span id="cb17-20">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"å°†è¿™å¼ å›¾ç‰‡è½¬æ¢ä¸ºæ—¥è½ç‰ˆæœ¬ï¼Œä½¿ç”¨æ›´æ¸©æš–çš„è‰²å½©å’Œé‡‘è‰²çš„å…‰çº¿ã€‚åœ¨å‰æ™¯ä¸­å¢åŠ ä¸€ä¸ªæ­£åœ¨æ»‘é›ªçš„äººã€‚"</span>,</span>
<span id="cb17-21">                },</span>
<span id="cb17-22">                {</span>
<span id="cb17-23">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"image_url"</span>,</span>
<span id="cb17-24">                    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"image_url"</span>: {<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"url"</span>: <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"data:image/png;base64,</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>base64_image<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>},</span>
<span id="cb17-25">                },</span>
<span id="cb17-26">            ],</span>
<span id="cb17-27">        }</span>
<span id="cb17-28">    ],</span>
<span id="cb17-29">    modalities<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"image"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text"</span>],</span>
<span id="cb17-30">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># image_size="1024x1024",</span></span>
<span id="cb17-31">)</span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> base64</span>
<span id="cb18-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> datetime</span>
<span id="cb18-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æå–æ¶ˆæ¯</span></span>
<span id="cb18-4">message <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> response.choices[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].message</span>
<span id="cb18-5"></span>
<span id="cb18-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¤„ç†å›¾åƒè¾“å‡ºï¼ˆbase64 å­—ç¬¦ä¸²ä½äº "data:image/png;base64,..." ä¸­ï¼‰</span></span>
<span id="cb18-7"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> message.images:</span>
<span id="cb18-8">    data_url <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> message.images[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>][<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"image_url"</span>][<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"url"</span>]</span>
<span id="cb18-9"></span>
<span id="cb18-10">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¦‚æœå­˜åœ¨å‰ç¼€åˆ™å°†å…¶å‰¥ç¦»</span></span>
<span id="cb18-11">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> data_url.startswith(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data:image"</span>):</span>
<span id="cb18-12">        _, base64_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> data_url.split(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">","</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb18-13">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb18-14">        base64_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> data_url</span>
<span id="cb18-15"></span>
<span id="cb18-16">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è§£ç å¹¶ä¿å­˜ä¸º PNG</span></span>
<span id="cb18-17">    image_bytes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> base64.b64decode(base64_data)</span>
<span id="cb18-18">    current_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> datetime.datetime.now().strftime(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%H%M"</span>)</span>
<span id="cb18-19">    output_file <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"text_image_gemini_25_openrouter_</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>current_time<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">.png"</span></span>
<span id="cb18-20">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(output_file, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"wb"</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> f:</span>
<span id="cb18-21">        f.write(image_bytes)</span>
<span id="cb18-22"></span>
<span id="cb18-23">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"âœ… å›¾åƒå·²ä¿å­˜ä¸º </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>output_file<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb18-24"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb18-25">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"âŒ å“åº”ä¸­æœªè¿”å›å›¾åƒ"</span>)</span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> IPython.display <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Image, display</span>
<span id="cb19-2"></span>
<span id="cb19-3">display(Image(filename<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"text_image_gemini_25_openrouter_1405.png"</span>))</span></code></pre></div></div>
</details>
</div>
</section>
<section id="embedding" class="level3">
<h3 class="anchored" data-anchor-id="embedding">8 Embedding</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb20-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">## 8. æ–‡æœ¬åµŒå…¥ (Embedding)</span></span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb21-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb21-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb21-4"></span>
<span id="cb21-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä» .env æ–‡ä»¶åŠ è½½ç¯å¢ƒå˜é‡</span></span>
<span id="cb21-6">load_dotenv()</span>
<span id="cb21-7"></span>
<span id="cb21-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä½¿ç”¨ OpenRouter åˆå§‹åŒ– OpenAI å®¢æˆ·ç«¯</span></span>
<span id="cb21-9">client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb21-10">    base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb21-11">    api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>),</span>
<span id="cb21-12">)</span>
<span id="cb21-13"></span>
<span id="cb21-14"></span>
<span id="cb21-15">embedding <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.embeddings.create(</span>
<span id="cb21-16">  extra_headers<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{</span>
<span id="cb21-17">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"HTTP-Referer"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;YOUR_SITE_URL&gt;"</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¯é€‰ï¼šOpenRouter æ’åç”¨çš„ç½‘ç«™ URL</span></span>
<span id="cb21-18">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"X-Title"</span>: <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&lt;YOUR_SITE_NAME&gt;"</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å¯é€‰ï¼šOpenRouter æ’åç”¨çš„ç½‘ç«™åç§°</span></span>
<span id="cb21-19">  },</span>
<span id="cb21-20">  model<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"thenlper/gte-base"</span>,</span>
<span id="cb21-21">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">input</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"I can"</span>,</span>
<span id="cb21-22">  encoding_format<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"float"</span></span>
<span id="cb21-23">)</span>
<span id="cb21-24"></span>
<span id="cb21-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#print(embedding.data[0].embedding) </span></span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(embedding.data[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].embedding)</span></code></pre></div></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(embedding.data[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].embedding[:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>])  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æ‰“å°å‰ 5 ä¸ªç»´åº¦</span></span></code></pre></div></div>
</details>
</div>
</section>
</section>
<section id="æˆæœ¬ç®¡ç†ä¼˜åŒ–æ‚¨çš„-ai-æ”¯å‡º" class="level2">
<h2 class="anchored" data-anchor-id="æˆæœ¬ç®¡ç†ä¼˜åŒ–æ‚¨çš„-ai-æ”¯å‡º">æˆæœ¬ç®¡ç†ï¼šä¼˜åŒ–æ‚¨çš„ AI æ”¯å‡º</h2>
<p>OpenRouter æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯å…¶é€æ˜çš„å®šä»·æ¨¡å‹å’Œæˆæœ¬ç®¡ç†èƒ½åŠ›ã€‚å¯¹äºç”Ÿäº§çº§ AI åº”ç”¨æ¥è¯´ï¼Œç†è§£å’Œç®¡ç†æˆæœ¬è‡³å…³é‡è¦ã€‚</p>
</section>
<section id="ä¸ºä»€ä¹ˆæˆæœ¬ç®¡ç†å¾ˆé‡è¦" class="level2">
<h2 class="anchored" data-anchor-id="ä¸ºä»€ä¹ˆæˆæœ¬ç®¡ç†å¾ˆé‡è¦">ä¸ºä»€ä¹ˆæˆæœ¬ç®¡ç†å¾ˆé‡è¦</h2>
<p><strong>ğŸ’° è´¢åŠ¡è§„åˆ’ï¼š</strong> - å¯é¢„æµ‹çš„æ¯æœˆæ”¯å‡º - ä¸ºä¸åŒç”¨ä¾‹åˆ†é…é¢„ç®— - AI åŠŸèƒ½çš„ ROI åˆ†æ - æ¯ä¸ªç”¨æˆ·çš„æˆæœ¬è¿½è¸ª</p>
<p><strong>ğŸ” æŠ€æœ¯ä¼˜åŒ–ï¼š</strong> - æ ¹æ®æˆæœ¬/æ€§èƒ½æ¯”é€‰æ‹©æ¨¡å‹ - æç¤ºè¯å·¥ç¨‹ä»¥å‡å°‘ Token ä½¿ç”¨ - é‡å¤è¯·æ±‚çš„ç¼“å­˜ç­–ç•¥ - æé«˜æ•ˆç‡çš„æ‰¹é‡å¤„ç†</p>
</section>
<section id="å®æ—¶æˆæœ¬è¿½è¸ª" class="level2">
<h2 class="anchored" data-anchor-id="å®æ—¶æˆæœ¬è¿½è¸ª">å®æ—¶æˆæœ¬è¿½è¸ª</h2>
<p>OpenRouter æä¾›äº†é€šè¿‡ç¼–ç¨‹æ–¹å¼è®¿é—®æ‰€æœ‰æ¨¡å‹å½“å‰å®šä»·çš„æ¥å£ï¼š</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆå§‹åŒ– OpenAI å®¢æˆ·ç«¯ï¼ˆå¦‚æœå°šæœªå®Œæˆï¼‰</span></span>
<span id="cb24-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> openai <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> OpenAI</span>
<span id="cb24-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb24-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> load_dotenv</span>
<span id="cb24-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb24-6"></span>
<span id="cb24-7">load_dotenv()</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1">client <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> OpenAI(</span>
<span id="cb26-2">  base_url<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://openrouter.ai/api/v1"</span>,</span>
<span id="cb26-3">  api_key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>os.getenv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENROUTER_API_KEY"</span>),</span>
<span id="cb26-4">)</span>
<span id="cb26-5"></span>
<span id="cb26-6"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_model_pricing():</span>
<span id="cb26-7">    models_list <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> client.models.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>()</span>
<span id="cb26-8">    pricing_data <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb26-9"></span>
<span id="cb26-10">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> model <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> models_list.data:</span>
<span id="cb26-11">        name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">id</span></span>
<span id="cb26-12">        pricing <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> model.pricing</span>
<span id="cb26-13"></span>
<span id="cb26-14">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è·å–æ¨¡å‹å…ƒæ•°æ®</span></span>
<span id="cb26-15">        context_length <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">getattr</span>(model, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'context_length'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>)</span>
<span id="cb26-16">        description <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">getattr</span>(model, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'description'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>)</span>
<span id="cb26-17"></span>
<span id="cb26-18">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è·å–åˆ›å»ºæ—¥æœŸå¹¶è½¬æ¢ä¸ºå¯è¯»æ ¼å¼</span></span>
<span id="cb26-19">        created_timestamp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">getattr</span>(model, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'created'</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>)</span>
<span id="cb26-20">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> created_timestamp:</span>
<span id="cb26-21">            <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> datetime</span>
<span id="cb26-22">            created_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> datetime.datetime.fromtimestamp(created_timestamp).strftime(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'%Y-%m-</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%d</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>)</span>
<span id="cb26-23">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb26-24">            created_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb26-25"></span>
<span id="cb26-26">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ä»æ¨¡å‹åç§°ä¸­æå–å…¬å¸ï¼ˆ'/' å‰çš„ç¬¬ä¸€éƒ¨åˆ†ï¼‰</span></span>
<span id="cb26-27">        company <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> name.split(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/'</span>)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'/'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> name <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Unknown'</span></span>
<span id="cb26-28"></span>
<span id="cb26-29">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># å°†æ¯ä¸ª Token çš„ä»·æ ¼è½¬æ¢ä¸ºæ¯ 100 ä¸‡ä¸ª Token çš„æˆæœ¬</span></span>
<span id="cb26-30">        prompt_cost <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>(pricing.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'prompt'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> pricing <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">and</span> pricing.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'prompt'</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb26-31">        completion_cost <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>(pricing.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'completion'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> pricing <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">and</span> pricing.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'completion'</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb26-32">        request_cost <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>(pricing.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'request'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> pricing <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">and</span> pricing.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'request'</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb26-33">        image_cost <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>(pricing.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'image'</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> pricing <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">and</span> pricing.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'image'</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb26-34"></span>
<span id="cb26-35">        pricing_data.append({</span>
<span id="cb26-36">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'æ¨¡å‹'</span>: name,</span>
<span id="cb26-37">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'å…¬å¸'</span>: company,</span>
<span id="cb26-38">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'æè¿°'</span>: description,</span>
<span id="cb26-39">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'ä¸Šä¸‹æ–‡é•¿åº¦'</span>: context_length,</span>
<span id="cb26-40">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'åˆ›å»ºæ—¥æœŸ'</span>: created_date,</span>
<span id="cb26-41">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'æç¤ºè¯æˆæœ¬_æ¯1M'</span>: prompt_cost,</span>
<span id="cb26-42">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'è¡¥å…¨æˆæœ¬_æ¯1M'</span>: completion_cost,</span>
<span id="cb26-43">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'è¯·æ±‚æˆæœ¬_æ¯1M'</span>: request_cost,</span>
<span id="cb26-44">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'å›¾åƒæˆæœ¬_æ¯1M'</span>: image_cost</span>
<span id="cb26-45">        })</span>
<span id="cb26-46"></span>
<span id="cb26-47">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»º Pandas DataFrame</span></span>
<span id="cb26-48">    df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.DataFrame(pricing_data)</span>
<span id="cb26-49"></span>
<span id="cb26-50">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># æŒ‰å…¬å¸ã€æ¨¡å‹åç§°æ’åºï¼Œæ–¹ä¾¿æ•´ç†</span></span>
<span id="cb26-51">    df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df.sort_values([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'å…¬å¸'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'æ¨¡å‹'</span>]).reset_index(drop<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb26-52"></span>
<span id="cb26-53">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> df</span>
<span id="cb26-54"></span>
<span id="cb26-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># è·å–ä»·æ ¼ DataFrameï¼ˆå…¨é‡æ¨¡å‹ä»¥åŠä»…ä»˜è´¹æ¨¡å‹ï¼‰</span></span>
<span id="cb26-56">all_models_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_model_pricing()</span></code></pre></div></div>
</details>
</div>
<section id="æœ€æ˜‚è´µçš„æ¨¡å‹" class="level4">
<h4 class="anchored" data-anchor-id="æœ€æ˜‚è´µçš„æ¨¡å‹">æœ€æ˜‚è´µçš„æ¨¡å‹</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> panel <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pn</span>
<span id="cb27-2"></span>
<span id="cb27-3"></span>
<span id="cb27-4">df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> all_models_df[</span>
<span id="cb27-5">    [</span>
<span id="cb27-6">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æ¨¡å‹"</span>,</span>
<span id="cb27-7">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ä¸Šä¸‹æ–‡é•¿åº¦"</span>,</span>
<span id="cb27-8">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"åˆ›å»ºæ—¥æœŸ"</span>,</span>
<span id="cb27-9">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æç¤ºè¯æˆæœ¬_æ¯1M"</span>,</span>
<span id="cb27-10">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"è¡¥å…¨æˆæœ¬_æ¯1M"</span>,</span>
<span id="cb27-11">    ]</span>
<span id="cb27-12">].sort_values(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"æç¤ºè¯æˆæœ¬_æ¯1M"</span>, ascending<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb27-13"></span>
<span id="cb27-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åˆ›å»ºä¸€ä¸ªå¸¦åˆ†é¡µçš„è¡¨æ ¼</span></span>
<span id="cb27-15">pn.extension(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tabulator"</span>)</span>
<span id="cb27-16">table <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pn.widgets.Tabulator(df, pagination<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"local"</span>, page_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, show_index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb27-17">table</span></code></pre></div></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Tabulator(page_size=10, pagination='local', show_index=False, value=              ...)</code></pre>
</div>
</div>
</section>
</section>
<section id="æœ€ä½³å®è·µç”Ÿäº§å°±ç»ªçš„-ai-å¼€å‘" class="level2">
<h2 class="anchored" data-anchor-id="æœ€ä½³å®è·µç”Ÿäº§å°±ç»ªçš„-ai-å¼€å‘">æœ€ä½³å®è·µï¼šç”Ÿäº§å°±ç»ªçš„ AI å¼€å‘</h2>
<p>éµå¾ªè¿™äº›æœ€ä½³å®è·µå°†å¸®åŠ©æ‚¨ä½¿ç”¨ OpenRouter æ„å»ºç¨³å¥ã€å®‰å…¨ä¸”é«˜æ•ˆçš„ AI åº”ç”¨ç¨‹åºã€‚</p>
</section>
<section id="å®‰å…¨æœ€ä½³å®è·µ" class="level2">
<h2 class="anchored" data-anchor-id="å®‰å…¨æœ€ä½³å®è·µ">ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ</h2>
<section id="api-å¯†é’¥ç®¡ç†" class="level3">
<h3 class="anchored" data-anchor-id="api-å¯†é’¥ç®¡ç†">1. API å¯†é’¥ç®¡ç†</h3>
<ul>
<li><strong>åˆ‡å‹¿ç¡¬ç¼–ç  API å¯†é’¥</strong>åœ¨æºä»£ç æˆ–é…ç½®æ–‡ä»¶ä¸­</li>
<li><strong>ä½¿ç”¨ç¯å¢ƒå˜é‡</strong>æˆ–ç§˜å¯†ç®¡ç†ç³»ç»Ÿï¼ˆå¦‚ AWS Secrets Managerã€Azure Key Vaultï¼‰</li>
<li><strong>å®šæœŸè½®æ¢ API å¯†é’¥</strong>å¹¶å®æ–½å¯†é’¥è½®æ¢ç­–ç•¥</li>
<li><strong>ä½¿ç”¨ä¸åŒçš„å¯†é’¥</strong>ç”¨äºå¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒ</li>
<li><strong>å°† .env æ·»åŠ åˆ° .gitignore</strong> â€”â€” æ°¸è¿œä¸è¦å°†å‡­æ®æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ä¸­</li>
</ul>
</section>
<section id="è¾“å…¥éªŒè¯ä¸æ¸…ç†" class="level3">
<h3 class="anchored" data-anchor-id="è¾“å…¥éªŒè¯ä¸æ¸…ç†">2. è¾“å…¥éªŒè¯ä¸æ¸…ç†</h3>
<ul>
<li><strong>åœ¨å‘é€åˆ° AI æ¨¡å‹ä¹‹å‰éªŒè¯ç”¨æˆ·è¾“å…¥</strong></li>
<li><strong>æ¸…ç†æç¤ºè¯</strong>ä»¥é˜²æ­¢æç¤ºè¯æ³¨å…¥æ”»å‡»</li>
<li><strong>å®æ–½é€Ÿç‡é™åˆ¶</strong>ä»¥é˜²æ­¢æ»¥ç”¨</li>
<li><strong>è®°å½•å¹¶ç›‘æ§</strong>å¼‚å¸¸æ´»åŠ¨æ¨¡å¼</li>
</ul>
</section>
</section>
<section id="æ€§èƒ½æœ€ä½³å®è·µ" class="level2">
<h2 class="anchored" data-anchor-id="æ€§èƒ½æœ€ä½³å®è·µ">âš¡ æ€§èƒ½æœ€ä½³å®è·µ</h2>
<section id="æ¨¡å‹é€‰æ‹©ç­–ç•¥" class="level3">
<h3 class="anchored" data-anchor-id="æ¨¡å‹é€‰æ‹©ç­–ç•¥">3. æ¨¡å‹é€‰æ‹©ç­–ç•¥</h3>
<ul>
<li><strong>ä¸ºæ‚¨çš„ç”¨ä¾‹é€‰æ‹©åˆé€‚çš„æ¨¡å‹</strong> â€”â€” å¹¶éæ‰€æœ‰ä»»åŠ¡éƒ½éœ€è¦æœ€æ˜‚è´µçš„æ¨¡å‹</li>
<li><strong>é’ˆå¯¹æ‚¨çš„ç‰¹å®šç”¨ä¾‹è¿›è¡Œæ¨¡å‹åŸºå‡†æµ‹è¯•</strong></li>
<li><strong>ä½¿ç”¨å…è´¹æ¨¡å‹</strong>è¿›è¡Œå¼€å‘å’Œæµ‹è¯•</li>
<li><strong>è€ƒè™‘ä¸“ç”¨æ¨¡å‹</strong>å¤„ç†ç‰¹å®šä»»åŠ¡ï¼ˆç¼–ç¨‹ã€æ•°å­¦ã€åˆ›æ„å†™ä½œï¼‰</li>
</ul>
</section>
<section id="ä¼˜åŒ–æŠ€æœ¯" class="level3">
<h3 class="anchored" data-anchor-id="ä¼˜åŒ–æŠ€æœ¯">4. ä¼˜åŒ–æŠ€æœ¯</h3>
<ul>
<li><strong>å®æ–½ç¼“å­˜</strong>ä»¥å‡å°‘é‡å¤è¯·æ±‚çš„æˆæœ¬</li>
<li><strong>ä½¿ç”¨æµå¼ä¼ è¾“</strong>ä»¥è·å¾—æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</li>
<li><strong>åœ¨é€‚å½“æƒ…å†µä¸‹è¿›è¡Œæ‰¹é‡è¯·æ±‚</strong>ä»¥æé«˜æ•ˆç‡</li>
<li><strong>ä¼˜åŒ–æç¤ºè¯</strong> â€”â€” ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯å¯ä»¥å‡å°‘ Token ä½¿ç”¨å¹¶æ”¹å–„ç»“æœ</li>
</ul>
</section>
</section>
<section id="å¯é æ€§æœ€ä½³å®è·µ" class="level2">
<h2 class="anchored" data-anchor-id="å¯é æ€§æœ€ä½³å®è·µ">ğŸ›¡ï¸ å¯é æ€§æœ€ä½³å®è·µ</h2>
<section id="é”™è¯¯å¤„ç†ä¸å®¹é”™" class="level3">
<h3 class="anchored" data-anchor-id="é”™è¯¯å¤„ç†ä¸å®¹é”™">5. é”™è¯¯å¤„ç†ä¸å®¹é”™</h3>
<ul>
<li><strong>å®æ–½å…¨é¢çš„é”™è¯¯å¤„ç†</strong> â€”â€” æ¨¡å‹å¯èƒ½ä¼šä¸å¯ç”¨æˆ–å—åˆ°é€Ÿç‡é™åˆ¶</li>
<li><strong>ä½¿ç”¨å¤‡ç”¨æ¨¡å‹</strong> â€”â€” ç¡®ä¿å³ä½¿ä¸€ä¸ªæ¨¡å‹å®•æœºï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºä»èƒ½æ­£å¸¸è¿è¡Œ</li>
<li><strong>å®æ–½å¸¦æœ‰æŒ‡æ•°é€€é¿çš„é‡è¯•é€»è¾‘</strong></li>
<li><strong>ç›‘æ§å“åº”æ—¶é—´</strong>å¹¶è®¾ç½®é€‚å½“çš„è¶…æ—¶</li>
</ul>
</section>
<section id="ç›‘æ§ä¸åˆ†æ" class="level3">
<h3 class="anchored" data-anchor-id="ç›‘æ§ä¸åˆ†æ">6. ç›‘æ§ä¸åˆ†æ</h3>
<ul>
<li><strong>ç›‘æ§ä½¿ç”¨æƒ…å†µ</strong> â€”â€” è¿½è¸ªæˆæœ¬å¹¶è®¾ç½®é™åˆ¶</li>
<li><strong>è¿½è¸ªæ€§èƒ½æŒ‡æ ‡</strong>ï¼ˆå»¶è¿Ÿã€æˆåŠŸç‡ã€é”™è¯¯ç‡ï¼‰</li>
<li><strong>ä¸ºå¼‚å¸¸æ´»åŠ¨æ¨¡å¼è®¾ç½®å‘Šè­¦</strong></li>
<li><strong>åˆ›å»ºå®æ—¶ç›‘æ§ä»ªè¡¨æ¿</strong></li>
</ul>
</section>
</section>
<section id="æˆæœ¬ç®¡ç†æœ€ä½³å®è·µ" class="level2">
<h2 class="anchored" data-anchor-id="æˆæœ¬ç®¡ç†æœ€ä½³å®è·µ">ğŸ“Š æˆæœ¬ç®¡ç†æœ€ä½³å®è·µ</h2>
<section id="é¢„ç®—æ§åˆ¶" class="level3">
<h3 class="anchored" data-anchor-id="é¢„ç®—æ§åˆ¶">7. é¢„ç®—æ§åˆ¶</h3>
<ul>
<li><strong>åœ¨ OpenRouter ä»ªè¡¨æ¿ä¸­è®¾ç½®æ”¯å‡ºé™åˆ¶</strong>å’Œå‘Šè­¦</li>
<li><strong>ä¸ºéå…³é”®ä»»åŠ¡ä½¿ç”¨é«˜æ€§ä»·æ¯”æ¨¡å‹</strong></li>
<li><strong>å®æ–½ Token è®¡æ•°</strong>ä»¥åœ¨è¯·æ±‚å‰ä¼°ç®—æˆæœ¬</li>
<li><strong>å®šæœŸæŸ¥çœ‹ä½¿ç”¨æŠ¥å‘Š</strong>ä»¥è¯†åˆ«ä¼˜åŒ–æœºä¼š</li>
</ul>
</section>
</section>
<section id="ç»“è®ºæ„å»º-ai-åº”ç”¨çš„æœªæ¥" class="level2">
<h2 class="anchored" data-anchor-id="ç»“è®ºæ„å»º-ai-åº”ç”¨çš„æœªæ¥">ç»“è®ºï¼šæ„å»º AI åº”ç”¨çš„æœªæ¥</h2>
<p>OpenRouter ä»£è¡¨äº†å¼€å‘äººå‘˜ä¸ AI æ¨¡å‹äº¤äº’æ–¹å¼çš„èŒƒå¼è½¬å˜ã€‚é€šè¿‡æä¾›è®¿é—®ä¸–ç•Œä¸Šæœ€å…ˆè¿› AI æ¨¡å‹çš„ç»Ÿä¸€ã€å¯é ä¸”æå…·æˆæœ¬æ•ˆç›Šçš„ç½‘å…³ï¼ŒOpenRouter è®©å¼€å‘äººå‘˜èƒ½å¤Ÿä¸“æ³¨äºåˆ›é€ ä»·å€¼ï¼Œè€Œä¸æ˜¯å¤„ç†å¤æ‚çš„åŸºç¡€è®¾æ–½ã€‚</p>


<!-- -->

</section>
</section>

 ]]></description>
  <category>AI</category>
  <category>API</category>
  <category>tutorial</category>
  <guid>https://jcwinning.github.io/LandingPage/posts/openrouter/</guid>
  <pubDate>Fri, 31 Oct 2025 16:00:00 GMT</pubDate>
  <media:content url="https://jcwinning.github.io/LandingPage/posts/openrouter/images.png" medium="image" type="image/png" height="48" width="144"/>
</item>
</channel>
</rss>

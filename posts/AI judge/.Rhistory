reticulate::repl_python()
reticulate::repl_python()
library(reticulate)
# Use Python 3.13
use_python("/Library/Frameworks/Python.framework/Versions/3.13/bin/python3", required = TRUE)
# Install required packages
py_install(c("openai", "langchain-core", "langchain-chroma", "langchain-community", "langchain-openai", "markitdown", "beautifulsoup4", "python-dotenv", "llama-index", "llama-index-vector-stores-duckdb"), pip = TRUE)
# Verify Python
py_config()
library(ragnar)
library(ellmer)
library(dotenv)
load_dot_env(file = ".env")
library(rvest)
# URL to scrape
url <- "https://openrouter.ai/docs/quickstart"
# Read the HTML content of the page
page <- read_html(url)
# Extract all <a> tags with href
links <- page %>%
html_nodes("a") %>%
html_attr("href")
# Remove NAs and duplicates
links <- unique(na.omit(links))
# Optional: keep only full URLs
links_full <- paste0("https://openrouter.ai", links[grepl("^/docs/", links)])
# Print all links
print(links_full)
reticulate::repl_python()
# page="https://openrouter.ai/docs/faq"
# chunks <- page |>read_as_markdown() |>markdown_chunk(target_size = 2000)
# ragnar_chunks_view(chunks)
store_location <- "openrouter.duckdb"
store <- ragnar_store_connect(store_location)
text <- "What are model variants?"
#' # Retrieving Chunks
#' Once the store is set up, retrieve the most relevant text chunks like this
relevant_chunks <- ragnar_retrieve(store, text, top_k = 3)
cat("Retrieved", nrow(relevant_chunks), "chunks:\n\n")
for (i in seq_len(nrow(relevant_chunks))) {
cat(sprintf("--- Chunk %d ---\n%s\n\n", i, relevant_chunks$text[i]))
}
store_location <- "openrouter.duckdb"
store <- ragnar_store_connect(store_location)
text <- "What are model variants?"
#' # Retrieving Chunks
#' Once the store is set up, retrieve the most relevant text chunks like this
relevant_chunks <- ragnar_retrieve(store, text, top_k = 1)
cat("Retrieved", nrow(relevant_chunks), "chunks:\n\n")
for (i in seq_len(nrow(relevant_chunks))) {
cat(sprintf("--- Chunk %d ---\n%s\n\n", i, relevant_chunks$text[i]))
}
store_location <- "openrouter.duckdb"
store <- ragnar_store_connect(store_location)
text <- "What are model variants?"
#' # Retrieving Chunks
#' Once the store is set up, retrieve the most relevant text chunks like this
relevant_chunks <- ragnar_retrieve(store, text, top_k = 3)
cat("Retrieved", nrow(relevant_chunks), "chunks:\n\n")
for (i in seq_len(nrow(relevant_chunks))) {
cat(sprintf("--- Chunk %d ---\n%s\n\n", i, relevant_chunks$text[i]))
}
reticulate::repl_python()
reticulate::repl_python()

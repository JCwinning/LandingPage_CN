library(ellmer)
library(mcptools)
library(dotenv)
# Load environment variables
load_dot_env(file = ".env")
# define model
model_name <- "x-ai/grok-4.1-fast"
library(ellmer)
library(mcptools)
library(dotenv)
# Load environment variables
load_dot_env(file = ".env")
# define model
model_name <- "x-ai/grok-4.1-fast"
# Create an ellmer chat object (using OpenRouter as example)
chat <- chat_openrouter(
system_prompt = "You are a helpful assistant that can interact with McDonald's services.Please reply in English and be concise",
api_key = Sys.getenv("OPENROUTER_API_KEY"),
model =model_name,
echo = "output"
)
# Create dynamic configuration with token from environment
config_data <- list(
mcpServers = list(
"mcd-mcp" = list(
command = "npx",
args = c(
"mcp-remote",
"https://mcp.mcd.cn/mcp-servers/mcd-mcp",
"--header",
paste0("Authorization: Bearer ", Sys.getenv("MCD_TOKEN"))
)
)
)
)
config_file <- tempfile(fileext = ".json")
jsonlite::write_json(config_data, config_file, auto_unbox = TRUE)
# Load MCP tools via the temporary configuration file
mcd_tools <- mcp_tools(config = config_file)
# Register the MCP tools with the chat
chat$set_tools(mcd_tools)
# Query available coupons
chat$chat("What coupons are available right now?")
# Create an ellmer chat object (using OpenRouter as example)
chat <- chat_openrouter(
system_prompt = "You are a helpful assistant that can interact with McDonald's services.Please be concise",
api_key = Sys.getenv("OPENROUTER_API_KEY"),
model =model_name,
echo = "output"
)
# Create dynamic configuration with token from environment
config_data <- list(
mcpServers = list(
"mcd-mcp" = list(
command = "npx",
args = c(
"mcp-remote",
"https://mcp.mcd.cn/mcp-servers/mcd-mcp",
"--header",
paste0("Authorization: Bearer ", Sys.getenv("MCD_TOKEN"))
)
)
)
)
config_file <- tempfile(fileext = ".json")
jsonlite::write_json(config_data, config_file, auto_unbox = TRUE)
# Load MCP tools via the temporary configuration file
mcd_tools <- mcp_tools(config = config_file)
# Register the MCP tools with the chat
chat$set_tools(mcd_tools)
# Query available coupons
chat$chat("What coupons are available right now?")
reticulate::repl_python()
